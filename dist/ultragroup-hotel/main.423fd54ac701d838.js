"use strict";(self.webpackChunkultragroup_hotel=self.webpackChunkultragroup_hotel||[]).push([[179],{3560:(Et,Me,F)=>{F.d(Me,{$:()=>Ni,A:()=>re,E:()=>Ne,J:()=>uo,K:()=>Ki,M:()=>mr,P:()=>uc,Q:()=>De,R:()=>Xa,U:()=>Vs,V:()=>Nr,W:()=>ii,X:()=>ji,Y:()=>Di,Z:()=>lo,_:()=>Tn,a:()=>sc,a0:()=>b,a1:()=>ce,a2:()=>an,a3:()=>wo,a4:()=>Au,a5:()=>_i,a6:()=>$o,a7:()=>qa,a8:()=>Ka,a9:()=>ma,aA:()=>Pe,aB:()=>he,aC:()=>ou,aD:()=>M,aE:()=>We,aF:()=>No,aG:()=>eh,aH:()=>xu,aI:()=>Vn,aM:()=>Hi,aP:()=>si,aa:()=>ki,ab:()=>Ao,ac:()=>Ho,ad:()=>tc,ae:()=>yi,af:()=>zo,ag:()=>Go,aj:()=>D,ak:()=>R,al:()=>B,ao:()=>Mt,ap:()=>Mn,ar:()=>nc,as:()=>go,at:()=>Tt,au:()=>we,av:()=>ar,aw:()=>de,ax:()=>uu,ay:()=>tl,az:()=>nt,b:()=>Wo,c:()=>Ci,d:()=>Gs,e:()=>Xd,f:()=>nu,g:()=>ru,h:()=>Ca,i:()=>_,j:()=>Aa,k:()=>oo,l:()=>Gf,m:()=>Gl,p:()=>oe,r:()=>Qd,s:()=>zf,u:()=>Jc});var p=F(5861),Y=F(9058),z=F(534),ue=F(7879),te=F(7582),le=F(4537);const oe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},re={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ne=function me(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Ze=function ze(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Fe=new Y.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ge=new ue.Yd("@firebase/auth");function Ie(y,...h){Ge.logLevel<=ue.in.ERROR&&Ge.error(`Auth (${z.SDK_VERSION}): ${y}`,...h)}function de(y,...h){throw qe(y,...h)}function Pe(y,...h){return qe(y,...h)}function Te(y,h,g){const I=Object.assign(Object.assign({},Ze()),{[h]:g});return new Y.LL("auth","Firebase",I).create(h,{appName:y.name})}function ke(y,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&de(y,"argument-error"),Te(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qe(y,...h){if("string"!=typeof y){const g=h[0],I=[...h.slice(1)];return I[0]&&(I[0].appName=y.name),y._errorFactory.create(g,...I)}return Fe.create(y,...h)}function he(y,h,...g){if(!y)throw qe(h,...g)}function ft(y){const h="INTERNAL ASSERTION FAILED: "+y;throw Ie(h),new Error(h)}function Tt(y,h){y||ft(h)}function Gt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Jt(){return"http:"===pr()||"https:"===pr()}function pr(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class pt{constructor(h,g){this.shortDelay=h,this.longDelay=g,Tt(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,Y.uI)()||(0,Y.b$)()}get(){return function zn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Jt()||(0,Y.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function mt(y,h){Tt(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class pe{static initialize(h,g,I){this.fetchImpl=h,g&&(this.headersImpl=g),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void ft("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void ft("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void ft("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ye={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ce=new pt(3e4,6e4);function ve(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function xe(y,h,g,I){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,p.Z)(function*(y,h,g,I,U={}){return ct(y,U,(0,p.Z)(function*(){let K={},_e={};I&&("GET"===h?_e=I:K={body:JSON.stringify(I)});const $e=(0,Y.xO)(Object.assign({key:y.config.apiKey},_e)).slice(1),ut=yield y._getAdditionalHeaders();return ut["Content-Type"]="application/json",y.languageCode&&(ut["X-Firebase-Locale"]=y.languageCode),pe.fetch()(fn(y,y.config.apiHost,g,$e),Object.assign({method:h,headers:ut,referrerPolicy:"no-referrer"},K))}))})).apply(this,arguments)}function ct(y,h,g){return rt.apply(this,arguments)}function rt(){return(rt=(0,p.Z)(function*(y,h,g){y._canInitEmulator=!1;const I=Object.assign(Object.assign({},ye),h);try{const U=new En(y),K=yield Promise.race([g(),U.promise]);U.clearNetworkTimeout();const _e=yield K.json();if("needConfirmation"in _e)throw pn(y,"account-exists-with-different-credential",_e);if(K.ok&&!("errorMessage"in _e))return _e;{const $e=K.ok?_e.errorMessage:_e.error.message,[ut,$t]=$e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ut)throw pn(y,"credential-already-in-use",_e);if("EMAIL_EXISTS"===ut)throw pn(y,"email-already-in-use",_e);if("USER_DISABLED"===ut)throw pn(y,"user-disabled",_e);const dt=I[ut]||ut.toLowerCase().replace(/[_\s]+/g,"-");if($t)throw Te(y,dt,$t);de(y,dt)}}catch(U){if(U instanceof Y.ZR)throw U;de(y,"network-request-failed",{message:String(U)})}})).apply(this,arguments)}function at(y,h,g,I){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,p.Z)(function*(y,h,g,I,U={}){const K=yield xe(y,h,g,I,U);return"mfaPendingCredential"in K&&de(y,"multi-factor-auth-required",{_serverResponse:K}),K})).apply(this,arguments)}function fn(y,h,g,I){const U=`${h}${g}?${I}`;return y.config.emulator?mt(y.config,U):`${y.config.apiScheme}://${U}`}function Ut(y){switch(y){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class En{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,I)=>{this.timer=setTimeout(()=>I(Pe(this.auth,"network-request-failed")),Ce.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function pn(y,h,g){const I={appName:y.name};g.email&&(I.email=g.email),g.phoneNumber&&(I.phoneNumber=g.phoneNumber);const U=Pe(y,h,I);return U.customData._tokenResponse=g,U}function Qt(y){return void 0!==y&&void 0!==y.getResponse}function yn(y){return void 0!==y&&void 0!==y.enterprise}class On{constructor(h){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=h.recaptchaEnforcementState}getProviderEnforcementState(h){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const g of this.recaptchaEnforcementState)if(g.provider&&g.provider===h)return Ut(g.enforcementState);return null}isProviderEnabled(h){return"ENFORCE"===this.getProviderEnforcementState(h)||"AUDIT"===this.getProviderEnforcementState(h)}}function Xn(){return(Xn=(0,p.Z)(function*(y){return(yield xe(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function In(y,h){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,p.Z)(function*(y,h){return xe(y,"GET","/v2/recaptchaConfig",ve(y,h))})).apply(this,arguments)}function nr(){return(nr=(0,p.Z)(function*(y,h){return xe(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Kt(){return(Kt=(0,p.Z)(function*(y,h){return xe(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function wn(){return(wn=(0,p.Z)(function*(y,h){return xe(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function kn(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function Wn(){return(Wn=(0,p.Z)(function*(y,h=!1){const g=(0,Y.m9)(y),I=yield g.getIdToken(h),U=xt(I);he(U&&U.exp&&U.auth_time&&U.iat,g.auth,"internal-error");const K="object"==typeof U.firebase?U.firebase:void 0,_e=K?.sign_in_provider;return{claims:U,token:I,authTime:kn(Kr(U.auth_time)),issuedAtTime:kn(Kr(U.iat)),expirationTime:kn(Kr(U.exp)),signInProvider:_e||null,signInSecondFactor:K?.sign_in_second_factor||null}})).apply(this,arguments)}function Kr(y){return 1e3*Number(y)}function xt(y){const[h,g,I]=y.split(".");if(void 0===h||void 0===g||void 0===I)return Ie("JWT malformed, contained fewer than 3 sections"),null;try{const U=(0,Y.tV)(g);return U?JSON.parse(U):(Ie("Failed to decode base64 JWT payload"),null)}catch(U){return Ie("Caught error parsing JWT payload as JSON",U?.toString()),null}}function Zt(y,h){return rr.apply(this,arguments)}function rr(){return(rr=(0,p.Z)(function*(y,h,g=!1){if(g)return h;try{return yield h}catch(I){throw I instanceof Y.ZR&&function Cr({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}(I)&&y.auth.currentUser===y&&(yield y.auth.signOut()),I}})).apply(this,arguments)}class Ur{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const U=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,U)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const I=this.getInterval(h);this.timerId=setTimeout((0,p.Z)(function*(){yield g.iteration()}),I)}iteration(){var h=this;return(0,p.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&h.schedule(!0))}h.schedule()})()}}class Rn{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=kn(this.lastLoginAt),this.creationTime=kn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function He(y){return Z.apply(this,arguments)}function Z(){return Z=(0,p.Z)(function*(y){var h;const g=y.auth,I=yield y.getIdToken(),U=yield Zt(y,function zt(y,h){return wn.apply(this,arguments)}(g,{idToken:I}));he(U?.users.length,g,"internal-error");const K=U.users[0];y._notifyReloadListener(K);const _e=null!==(h=K.providerUserInfo)&&void 0!==h&&h.length?function sn(y){return y.map(h=>{var{providerId:g}=h,I=(0,te._T)(h,["providerId"]);return{providerId:g,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}(K.providerUserInfo):[],$e=function lt(y,h){return[...y.filter(I=>!h.some(U=>U.providerId===I.providerId)),...h]}(y.providerData,_e),dt=!!y.isAnonymous&&!(y.email&&K.passwordHash||$e?.length),tr={uid:K.localId,displayName:K.displayName||null,photoURL:K.photoUrl||null,email:K.email||null,emailVerified:K.emailVerified||!1,phoneNumber:K.phoneNumber||null,tenantId:K.tenantId||null,providerData:$e,metadata:new Rn(K.createdAt,K.lastLoginAt),isAnonymous:dt};Object.assign(y,tr)}),Z.apply(this,arguments)}function Le(){return(Le=(0,p.Z)(function*(y){const h=(0,Y.m9)(y);yield He(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Pn(){return(Pn=(0,p.Z)(function*(y,h){const g=yield ct(y,{},(0,p.Z)(function*(){const I=(0,Y.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:U,apiKey:K}=y.config,_e=fn(y,U,"/v1/token",`key=${K}`),$e=yield y._getAdditionalHeaders();return $e["Content-Type"]="application/x-www-form-urlencoded",pe.fetch()(_e,{method:"POST",headers:$e,body:I})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class ae{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){he(h.idToken,"internal-error"),he(typeof h.idToken<"u","internal-error"),he(typeof h.refreshToken<"u","internal-error");const g="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function Zr(y){const h=xt(y);return he(h,"internal-error"),he(typeof h.exp<"u","internal-error"),he(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var I=this;return(0,p.Z)(function*(){return he(!I.accessToken||I.refreshToken,h,"user-token-expired"),g||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(h,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var I=this;return(0,p.Z)(function*(){const{accessToken:U,refreshToken:K,expiresIn:_e}=yield function ir(y,h){return Pn.apply(this,arguments)}(h,g);I.updateTokensAndExpiration(U,K,Number(_e))})()}updateTokensAndExpiration(h,g,I){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(h,g){const{refreshToken:I,accessToken:U,expirationTime:K}=g,_e=new ae;return I&&(he("string"==typeof I,"internal-error",{appName:h}),_e.refreshToken=I),U&&(he("string"==typeof U,"internal-error",{appName:h}),_e.accessToken=U),K&&(he("number"==typeof K,"internal-error",{appName:h}),_e.expirationTime=K),_e}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new ae,this.toJSON())}_performRefresh(){return ft("not implemented")}}function G(y,h){he("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class O{constructor(h){var{uid:g,auth:I,stsTokenManager:U}=h,K=(0,te._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ur(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=I,this.stsTokenManager=U,this.accessToken=U.accessToken,this.displayName=K.displayName||null,this.email=K.email||null,this.emailVerified=K.emailVerified||!1,this.phoneNumber=K.phoneNumber||null,this.photoURL=K.photoURL||null,this.isAnonymous=K.isAnonymous||!1,this.tenantId=K.tenantId||null,this.providerData=K.providerData?[...K.providerData]:[],this.metadata=new Rn(K.createdAt||void 0,K.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,p.Z)(function*(){const I=yield Zt(g,g.stsTokenManager.getToken(g.auth,h));return he(I,g.auth,"internal-error"),g.accessToken!==I&&(g.accessToken=I,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),I})()}getIdTokenResult(h){return function Xt(y){return Wn.apply(this,arguments)}(this,h)}reload(){return function se(y){return Le.apply(this,arguments)}(this)}_assign(h){this!==h&&(he(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const g=new O(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(h){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var I=this;return(0,p.Z)(function*(){let U=!1;h.idToken&&h.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(h),U=!0),g&&(yield He(I)),yield I.auth._persistUserIfCurrent(I),U&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var h=this;return(0,p.Z)(function*(){const g=yield h.getIdToken();return yield Zt(h,function vr(y,h){return nr.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var I,U,K,_e,$e,ut,$t,dt;const tr=null!==(I=g.displayName)&&void 0!==I?I:void 0,ts=null!==(U=g.email)&&void 0!==U?U:void 0,ea=null!==(K=g.phoneNumber)&&void 0!==K?K:void 0,yc=null!==(_e=g.photoURL)&&void 0!==_e?_e:void 0,Uu=null!==($e=g.tenantId)&&void 0!==$e?$e:void 0,hu=null!==(ut=g._redirectEventId)&&void 0!==ut?ut:void 0,dh=null!==($t=g.createdAt)&&void 0!==$t?$t:void 0,Wl=null!==(dt=g.lastLoginAt)&&void 0!==dt?dt:void 0,{uid:ql,emailVerified:Ra,isAnonymous:fu,providerData:sl,stsTokenManager:Pa}=g;he(ql&&Pa,h,"internal-error");const ol=ae.fromJSON(this.name,Pa);he("string"==typeof ql,h,"internal-error"),G(tr,h.name),G(ts,h.name),he("boolean"==typeof Ra,h,"internal-error"),he("boolean"==typeof fu,h,"internal-error"),G(ea,h.name),G(yc,h.name),G(Uu,h.name),G(hu,h.name),G(dh,h.name),G(Wl,h.name);const pu=new O({uid:ql,auth:h,email:ts,emailVerified:Ra,displayName:tr,isAnonymous:fu,photoURL:yc,phoneNumber:ea,tenantId:Uu,stsTokenManager:ol,createdAt:dh,lastLoginAt:Wl});return sl&&Array.isArray(sl)&&(pu.providerData=sl.map(Jf=>Object.assign({},Jf))),hu&&(pu._redirectEventId=hu),pu}static _fromIdTokenResponse(h,g,I=!1){return(0,p.Z)(function*(){const U=new ae;U.updateFromServerResponse(g);const K=new O({uid:g.localId,auth:h,stsTokenManager:U,isAnonymous:I});return yield He(K),K})()}}const P=new Map;function M(y){Tt(y instanceof Function,"Expected a class definition");let h=P.get(y);return h?(Tt(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,P.set(y,h),h)}const De=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(g,I){var U=this;return(0,p.Z)(function*(){U.storage[g]=I})()}_get(g){var I=this;return(0,p.Z)(function*(){const U=I.storage[g];return void 0===U?null:U})()}_remove(g){var I=this;return(0,p.Z)(function*(){delete I.storage[g]})()}_addListener(g,I){}_removeListener(g,I){}}return y.type="NONE",y})();function We(y,h,g){return`firebase:${y}:${h}:${g}`}class it{constructor(h,g,I){this.persistence=h,this.auth=g,this.userKey=I;const{config:U,name:K}=this.auth;this.fullUserKey=We(this.userKey,U.apiKey,K),this.fullPersistenceKey=We("persistence",U.apiKey,K),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,p.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?O._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,p.Z)(function*(){if(g.persistence===h)return;const I=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,I?g.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,I="authUser"){return(0,p.Z)(function*(){if(!g.length)return new it(M(De),h,I);const U=(yield Promise.all(g.map(function(){var $t=(0,p.Z)(function*(dt){if(yield dt._isAvailable())return dt});return function(dt){return $t.apply(this,arguments)}}()))).filter($t=>$t);let K=U[0]||M(De);const _e=We(I,h.config.apiKey,h.name);let $e=null;for(const $t of g)try{const dt=yield $t._get(_e);if(dt){const tr=O._fromJSON(h,dt);$t!==K&&($e=tr),K=$t;break}}catch{}const ut=U.filter($t=>$t._shouldAllowMigration);return K._shouldAllowMigration&&ut.length?(K=ut[0],$e&&(yield K._set(_e,$e.toJSON())),yield Promise.all(g.map(function(){var $t=(0,p.Z)(function*(dt){if(dt!==K)try{yield dt._remove(_e)}catch{}});return function(dt){return $t.apply(this,arguments)}}())),new it(K,h,I)):new it(K,h,I)})()}}function yt(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Ht(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Ct(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(ai(h))return"Blackberry";if(Be(h))return"Webos";if(Vt(h))return"Safari";if((h.includes("chrome/")||en(h))&&!h.includes("edge/"))return"Chrome";if(ar(h))return"Android";{const I=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function Ct(y=(0,Y.z$)()){return/firefox\//i.test(y)}function Vt(y=(0,Y.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function en(y=(0,Y.z$)()){return/crios\//i.test(y)}function Ht(y=(0,Y.z$)()){return/iemobile/i.test(y)}function ar(y=(0,Y.z$)()){return/android/i.test(y)}function ai(y=(0,Y.z$)()){return/blackberry/i.test(y)}function Be(y=(0,Y.z$)()){return/webos/i.test(y)}function we(y=(0,Y.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function nt(y=(0,Y.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}function St(y=(0,Y.z$)()){return we(y)||ar(y)||Be(y)||ai(y)||/windows phone/i.test(y)||Ht(y)}function Er(y,h=[]){let g;switch(y){case"Browser":g=yt((0,Y.z$)());break;case"Worker":g=`${yt((0,Y.z$)())}-${y}`;break;default:g=y}const I=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${z.SDK_VERSION}/${I}`}class qn{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,g){const I=K=>new Promise((_e,$e)=>{try{_e(h(K))}catch(ut){$e(ut)}});I.onAbort=g,this.queue.push(I);const U=this.queue.length-1;return()=>{this.queue[U]=()=>Promise.resolve()}}runMiddleware(h){var g=this;return(0,p.Z)(function*(){if(g.auth.currentUser===h)return;const I=[];try{for(const U of g.queue)yield U(h),U.onAbort&&I.push(U.onAbort)}catch(U){I.reverse();for(const K of I)try{K()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:U?.message})}})()}}function Ir(){return(Ir=(0,p.Z)(function*(y,h={}){return xe(y,"GET","/v2/passwordPolicy",ve(y,h))})).apply(this,arguments)}class Mr{constructor(h){var g,I,U,K;const _e=h.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(g=_e.minPasswordLength)&&void 0!==g?g:6,_e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=_e.maxPasswordLength),void 0!==_e.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=_e.containsLowercaseCharacter),void 0!==_e.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=_e.containsUppercaseCharacter),void 0!==_e.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=_e.containsNumericCharacter),void 0!==_e.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=_e.containsNonAlphanumericCharacter),this.enforcementState=h.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(U=null===(I=h.allowedNonAlphanumericCharacters)||void 0===I?void 0:I.join(""))&&void 0!==U?U:"",this.forceUpgradeOnSignin=null!==(K=h.forceUpgradeOnSignin)&&void 0!==K&&K,this.schemaVersion=h.schemaVersion}validatePassword(h){var g,I,U,K,_e,$e;const ut={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(h,ut),this.validatePasswordCharacterOptions(h,ut),ut.isValid&&(ut.isValid=null===(g=ut.meetsMinPasswordLength)||void 0===g||g),ut.isValid&&(ut.isValid=null===(I=ut.meetsMaxPasswordLength)||void 0===I||I),ut.isValid&&(ut.isValid=null===(U=ut.containsLowercaseLetter)||void 0===U||U),ut.isValid&&(ut.isValid=null===(K=ut.containsUppercaseLetter)||void 0===K||K),ut.isValid&&(ut.isValid=null===(_e=ut.containsNumericCharacter)||void 0===_e||_e),ut.isValid&&(ut.isValid=null===($e=ut.containsNonAlphanumericCharacter)||void 0===$e||$e),ut}validatePasswordLengthOptions(h,g){const I=this.customStrengthOptions.minPasswordLength,U=this.customStrengthOptions.maxPasswordLength;I&&(g.meetsMinPasswordLength=h.length>=I),U&&(g.meetsMaxPasswordLength=h.length<=U)}validatePasswordCharacterOptions(h,g){let I;this.updatePasswordCharacterOptionsStatuses(g,!1,!1,!1,!1);for(let U=0;U<h.length;U++)I=h.charAt(U),this.updatePasswordCharacterOptionsStatuses(g,I>="a"&&I<="z",I>="A"&&I<="Z",I>="0"&&I<="9",this.allowedNonAlphanumericCharacters.includes(I))}updatePasswordCharacterOptionsStatuses(h,g,I,U,K){this.customStrengthOptions.containsLowercaseLetter&&(h.containsLowercaseLetter||(h.containsLowercaseLetter=g)),this.customStrengthOptions.containsUppercaseLetter&&(h.containsUppercaseLetter||(h.containsUppercaseLetter=I)),this.customStrengthOptions.containsNumericCharacter&&(h.containsNumericCharacter||(h.containsNumericCharacter=U)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(h.containsNonAlphanumericCharacter||(h.containsNonAlphanumericCharacter=K))}}class Ss{constructor(h,g,I,U){this.app=h,this.heartbeatServiceProvider=g,this.appCheckServiceProvider=I,this.config=U,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new as(this),this.idTokenSubscription=new as(this),this.beforeStateQueue=new qn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=U.sdkClientVersion}_initializeWithPersistence(h,g){var I=this;return g&&(this._popupRedirectResolver=M(g)),this._initializationPromise=this.queue((0,p.Z)(function*(){var U,K;if(!I._deleted&&(I.persistenceManager=yield it.create(I,h),!I._deleted)){if(null!==(U=I._popupRedirectResolver)&&void 0!==U&&U._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(g),I.lastNotifiedUid=(null===(K=I.currentUser)||void 0===K?void 0:K.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,p.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g,!0)}})()}initializeCurrentUser(h){var g=this;return(0,p.Z)(function*(){var I;const U=yield g.assertedPersistence.getCurrentUser();let K=U,_e=!1;if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const $e=null===(I=g.redirectUser)||void 0===I?void 0:I._redirectEventId,ut=K?._redirectEventId,$t=yield g.tryRedirectSignIn(h);(!$e||$e===ut)&&$t?.user&&(K=$t.user,_e=!0)}if(!K)return g.directlySetCurrentUser(null);if(!K._redirectEventId){if(_e)try{yield g.beforeStateQueue.runMiddleware(K)}catch($e){K=U,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject($e))}return K?g.reloadAndSetCurrentUserOrClear(K):g.directlySetCurrentUser(null)}return he(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===K._redirectEventId?g.directlySetCurrentUser(K):g.reloadAndSetCurrentUserOrClear(K)})()}tryRedirectSignIn(h){var g=this;return(0,p.Z)(function*(){let I=null;try{I=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch{yield g._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,p.Z)(function*(){try{yield He(h)}catch(I){if("auth/network-request-failed"!==I?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function At(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,p.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,p.Z)(function*(){const I=h?(0,Y.m9)(h):null;return I&&he(I.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(I&&I._clone(g))})()}_updateCurrentUser(h,g=!1){var I=this;return(0,p.Z)(function*(){if(!I._deleted)return h&&he(I.tenantId===h.tenantId,I,"tenant-id-mismatch"),g||(yield I.beforeStateQueue.runMiddleware(h)),I.queue((0,p.Z)(function*(){yield I.directlySetCurrentUser(h),I.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,p.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var g=this;return this.queue((0,p.Z)(function*(){yield g.assertedPersistence.setPersistence(M(h))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(h){var g=this;return(0,p.Z)(function*(){g._getPasswordPolicyInternal()||(yield g._updatePasswordPolicy());const I=g._getPasswordPolicyInternal();return I.schemaVersion!==g.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(g._errorFactory.create("unsupported-password-policy-schema-version",{})):I.validatePassword(h)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var h=this;return(0,p.Z)(function*(){const g=yield function Si(y){return Ir.apply(this,arguments)}(h),I=new Mr(g);null===h.tenantId?h._projectPasswordPolicy=I:h._tenantPasswordPolicies[h.tenantId]=I})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new Y.LL("auth","Firebase",h())}onAuthStateChanged(h,g,I){return this.registerStateListener(this.authStateSubscription,h,g,I)}beforeAuthStateChanged(h,g){return this.beforeStateQueue.pushCallback(h,g)}onIdTokenChanged(h,g,I){return this.registerStateListener(this.idTokenSubscription,h,g,I)}authStateReady(){return new Promise((h,g)=>{if(this.currentUser)h();else{const I=this.onAuthStateChanged(()=>{I(),h()},g)}})}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var I=this;return(0,p.Z)(function*(){const U=yield I.getOrInitRedirectPersistenceManager(g);return null===h?U.removeCurrentUser():U.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,p.Z)(function*(){if(!g.redirectPersistenceManager){const I=h&&M(h)||g._popupRedirectResolver;he(I,g,"argument-error"),g.redirectPersistenceManager=yield it.create(g,[M(I._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,p.Z)(function*(){var I,U;return g._isInitialized&&(yield g.queue((0,p.Z)(function*(){}))),(null===(I=g._currentUser)||void 0===I?void 0:I._redirectEventId)===h?g._currentUser:(null===(U=g.redirectUser)||void 0===U?void 0:U._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,p.Z)(function*(){if(h===g.currentUser)return g.queue((0,p.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,I,U){if(this._deleted)return()=>{};const K="function"==typeof g?g:g.next.bind(g);let _e=!1;const $e=this._isInitialized?Promise.resolve():this._initializationPromise;if(he($e,this,"internal-error"),$e.then(()=>{_e||K(this.currentUser)}),"function"==typeof g){const ut=h.addObserver(g,I,U);return()=>{_e=!0,ut()}}{const ut=h.addObserver(g);return()=>{_e=!0,ut()}}}directlySetCurrentUser(h){var g=this;return(0,p.Z)(function*(){g.currentUser&&g.currentUser!==h&&g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh(),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Er(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,p.Z)(function*(){var g;const I={"X-Client-Version":h.clientVersion};h.app.options.appId&&(I["X-Firebase-gmpid"]=h.app.options.appId);const U=yield null===(g=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();U&&(I["X-Firebase-Client"]=U);const K=yield h._getAppCheckToken();return K&&(I["X-Firebase-AppCheck"]=K),I})()}_getAppCheckToken(){var h=this;return(0,p.Z)(function*(){var g;const I=yield null===(g=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getToken();return I?.error&&function Rt(y,...h){Ge.logLevel<=ue.in.WARN&&Ge.warn(`Auth (${z.SDK_VERSION}): ${y}`,...h)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function Vn(y){return(0,Y.m9)(y)}class as{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,Y.ne)(g=>this.observer=g)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Hr(y){return new Promise((h,g)=>{const I=document.createElement("script");I.setAttribute("src",y),I.onload=h,I.onerror=U=>{const K=Pe("internal-error");K.customData=U,g(K)},I.type="text/javascript",I.charset="UTF-8",function ao(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(I)})}function Xr(y){return`__${y}${Math.floor(1e6*Math.random())}`}class Wi{constructor(h){this.type="recaptcha-enterprise",this.auth=Vn(h)}verify(h="verify",g=!1){var I=this;return(0,p.Z)(function*(){function K(){return K=(0,p.Z)(function*($e){if(!g){if(null==$e.tenantId&&null!=$e._agentRecaptchaConfig)return $e._agentRecaptchaConfig.siteKey;if(null!=$e.tenantId&&void 0!==$e._tenantRecaptchaConfigs[$e.tenantId])return $e._tenantRecaptchaConfigs[$e.tenantId].siteKey}return new Promise(function(){var ut=(0,p.Z)(function*($t,dt){In($e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(tr=>{if(void 0!==tr.recaptchaKey){const ts=new On(tr);return null==$e.tenantId?$e._agentRecaptchaConfig=ts:$e._tenantRecaptchaConfigs[$e.tenantId]=ts,$t(ts.siteKey)}dt(new Error("recaptcha Enterprise site key undefined"))}).catch(tr=>{dt(tr)})});return function($t,dt){return ut.apply(this,arguments)}}())}),K.apply(this,arguments)}function _e($e,ut,$t){const dt=window.grecaptcha;yn(dt)?dt.enterprise.ready(()=>{dt.enterprise.execute($e,{action:h}).then(tr=>{ut(tr)}).catch(()=>{ut("NO_RECAPTCHA")})}):$t(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(($e,ut)=>{(function U($e){return K.apply(this,arguments)})(I.auth).then($t=>{if(!g&&yn(window.grecaptcha))_e($t,$e,ut);else{if(typeof window>"u")return void ut(new Error("RecaptchaVerifier is only supported in browser"));Hr("https://www.google.com/recaptcha/enterprise.js?render="+$t).then(()=>{_e($t,$e,ut)}).catch(dt=>{ut(dt)})}}).catch($t=>{ut($t)})})})()}}function qi(y,h,g){return gr.apply(this,arguments)}function gr(){return(gr=(0,p.Z)(function*(y,h,g,I=!1){const U=new Wi(y);let K;try{K=yield U.verify(g)}catch{K=yield U.verify(g,!0)}const _e=Object.assign({},h);return Object.assign(_e,I?{captchaResp:K}:{captchaResponse:K}),Object.assign(_e,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(_e,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),_e})).apply(this,arguments)}function bi(y,h,g,I){return Rs.apply(this,arguments)}function Rs(){return Rs=(0,p.Z)(function*(y,h,g,I){var U;if(null!==(U=y._getRecaptchaConfig())&&void 0!==U&&U.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const K=yield qi(y,h,g,"getOobCode"===g);return I(y,K)}return I(y,h).catch(function(){var K=(0,p.Z)(function*(_e){if("auth/missing-recaptcha-token"===_e.code){console.log(`${g} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const $e=yield qi(y,h,g,"getOobCode"===g);return I(y,$e)}return Promise.reject(_e)});return function(_e){return K.apply(this,arguments)}}())}),Rs.apply(this,arguments)}function uo(y,h,g){const I=Vn(y);he(I._canInitEmulator,I,"emulator-config-failed"),he(/^https?:\/\//.test(h),I,"invalid-emulator-scheme");const U=!!g?.disableWarnings,K=fa(h),{host:_e,port:$e}=function Ri(y){const h=fa(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!g)return{host:"",port:null};const I=g[2].split("@").pop()||"",U=/^(\[[^\]]+\])(:|$)/.exec(I);if(U){const K=U[1];return{host:K,port:pa(I.substr(K.length+1))}}{const[K,_e]=I.split(":");return{host:K,port:pa(_e)}}}(h);I.config.emulator={url:`${K}//${_e}${null===$e?"":`:${$e}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:_e,port:$e,protocol:K.replace(":",""),options:Object.freeze({disableWarnings:U})}),U||function Ps(){function y(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}function fa(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function pa(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class Ki{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return ft("not implemented")}_getIdTokenResponse(h){return ft("not implemented")}_linkToIdToken(h,g){return ft("not implemented")}_getReauthenticationResolver(h){return ft("not implemented")}}function cs(y,h){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,p.Z)(function*(y,h){return xe(y,"POST","/v1/accounts:resetPassword",ve(y,h))})).apply(this,arguments)}function Pi(y,h){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,p.Z)(function*(y,h){return xe(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function xs(){return(xs=(0,p.Z)(function*(y,h){return xe(y,"POST","/v1/accounts:update",ve(y,h))})).apply(this,arguments)}function ms(y,h){return un.apply(this,arguments)}function un(){return(un=(0,p.Z)(function*(y,h){return at(y,"POST","/v1/accounts:signInWithPassword",ve(y,h))})).apply(this,arguments)}function lr(y,h){return ur.apply(this,arguments)}function ur(){return(ur=(0,p.Z)(function*(y,h){return xe(y,"POST","/v1/accounts:sendOobCode",ve(y,h))})).apply(this,arguments)}function xr(){return(xr=(0,p.Z)(function*(y,h){return lr(y,h)})).apply(this,arguments)}function Bi(y,h){return _s.apply(this,arguments)}function _s(){return(_s=(0,p.Z)(function*(y,h){return lr(y,h)})).apply(this,arguments)}function Un(y,h){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,p.Z)(function*(y,h){return lr(y,h)})).apply(this,arguments)}function Bn(){return(Bn=(0,p.Z)(function*(y,h){return lr(y,h)})).apply(this,arguments)}function tn(){return(tn=(0,p.Z)(function*(y,h){return at(y,"POST","/v1/accounts:signInWithEmailLink",ve(y,h))})).apply(this,arguments)}function zr(){return(zr=(0,p.Z)(function*(y,h){return at(y,"POST","/v1/accounts:signInWithEmailLink",ve(y,h))})).apply(this,arguments)}class xi extends Ki{constructor(h,g,I,U=null){super("password",I),this._email=h,this._password=g,this._tenantId=U}static _fromEmailAndPassword(h,g){return new xi(h,g,"password")}static _fromEmailAndCode(h,g,I=null){return new xi(h,g,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,p.Z)(function*(){switch(g.signInMethod){case"password":return bi(h,{returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ms);case"emailLink":return function vt(y,h){return tn.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:de(h,"internal-error")}})()}_linkToIdToken(h,g){var I=this;return(0,p.Z)(function*(){switch(I.signInMethod){case"password":return Pi(h,{idToken:g,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function Fn(y,h){return zr.apply(this,arguments)}(h,{idToken:g,email:I._email,oobCode:I._password});default:de(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function er(y,h){return pi.apply(this,arguments)}function pi(){return(pi=(0,p.Z)(function*(y,h){return at(y,"POST","/v1/accounts:signInWithIdp",ve(y,h))})).apply(this,arguments)}class mr extends Ki{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new mr(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):de("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:I,signInMethod:U}=g,K=(0,te._T)(g,["providerId","signInMethod"]);if(!I||!U)return null;const _e=new mr(I,U);return _e.idToken=K.idToken||void 0,_e.accessToken=K.accessToken||void 0,_e.secret=K.secret,_e.nonce=K.nonce,_e.pendingToken=K.pendingToken||null,_e}_getIdTokenResponse(h){return er(h,this.buildRequest())}_linkToIdToken(h,g){const I=this.buildRequest();return I.idToken=g,er(h,I)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,er(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,Y.xO)(g)}return h}}function nn(){return(nn=(0,p.Z)(function*(y,h){return xe(y,"POST","/v1/accounts:sendVerificationCode",ve(y,h))})).apply(this,arguments)}function Ns(){return(Ns=(0,p.Z)(function*(y,h){return at(y,"POST","/v1/accounts:signInWithPhoneNumber",ve(y,h))})).apply(this,arguments)}function dr(){return(dr=(0,p.Z)(function*(y,h){const g=yield at(y,"POST","/v1/accounts:signInWithPhoneNumber",ve(y,h));if(g.temporaryProof)throw pn(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Qs={USER_NOT_FOUND:"user-not-found"};function ri(){return(ri=(0,p.Z)(function*(y,h){return at(y,"POST","/v1/accounts:signInWithPhoneNumber",ve(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Qs)})).apply(this,arguments)}class gi extends Ki{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new gi({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new gi({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function ni(y,h){return Ns.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function Os(y,h){return dr.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function ys(y,h){return ri.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:I,verificationCode:U}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:I,code:U}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:I,phoneNumber:U,temporaryProof:K}=h;return I||g||U||K?new gi({verificationId:g,verificationCode:I,phoneNumber:U,temporaryProof:K}):null}}class Br{constructor(h){var g,I,U,K,_e,$e;const ut=(0,Y.zd)((0,Y.pd)(h)),$t=null!==(g=ut.apiKey)&&void 0!==g?g:null,dt=null!==(I=ut.oobCode)&&void 0!==I?I:null,tr=function Eo(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(U=ut.mode)&&void 0!==U?U:null);he($t&&dt&&tr,"argument-error"),this.apiKey=$t,this.operation=tr,this.code=dt,this.continueUrl=null!==(K=ut.continueUrl)&&void 0!==K?K:null,this.languageCode=null!==(_e=ut.languageCode)&&void 0!==_e?_e:null,this.tenantId=null!==($e=ut.tenantId)&&void 0!==$e?$e:null}static parseLink(h){const g=function Yi(y){const h=(0,Y.zd)((0,Y.pd)(y)).link,g=h?(0,Y.zd)((0,Y.pd)(h)).deep_link_id:null,I=(0,Y.zd)((0,Y.pd)(y)).deep_link_id;return(I?(0,Y.zd)((0,Y.pd)(I)).link:null)||I||g||h||y}(h);try{return new Br(g)}catch{return null}}}let Vs=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,I){return xi._fromEmailAndPassword(g,I)}static credentialWithLink(g,I){const U=Br.parseLink(I);return he(U,"argument-error"),xi._fromEmailAndCode(g,U.code,U.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class cn{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Fs extends cn{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Di extends Fs{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return he("providerId"in g&&"signInMethod"in g,"argument-error"),mr._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return he(h.idToken||h.accessToken,"argument-error"),mr._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Di.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Di.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:I,oauthTokenSecret:U,pendingToken:K,nonce:_e,providerId:$e}=h;if(!I&&!U&&!g&&!K||!$e)return null;try{return new Di($e)._credential({idToken:g,accessToken:I,nonce:_e,pendingToken:K})}catch{return null}}}let Nr=(()=>{class y extends Fs{constructor(){super("facebook.com")}static credential(g){return mr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),ii=(()=>{class y extends Fs{constructor(){super("google.com"),this.addScope("profile")}static credential(g,I){return mr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:I})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:I,oauthAccessToken:U}=g;if(!I&&!U)return null;try{return y.credential(I,U)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),ji=(()=>{class y extends Fs{constructor(){super("github.com")}static credential(g){return mr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class si extends Ki{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return er(h,this.buildRequest())}_linkToIdToken(h,g){const I=this.buildRequest();return I.idToken=g,er(h,I)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,er(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:I,signInMethod:U,pendingToken:K}=g;return I&&U&&K&&I===U?new si(I,K):null}static _create(h,g){return new si(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class lo extends cn{constructor(h){he(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return lo.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return lo.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=si.fromJSON(h);return he(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:I}=h;if(!g||!I)return null;try{return si._create(I,g)}catch{return null}}}let Tn=(()=>{class y extends Fs{constructor(){super("twitter.com")}static credential(g,I){return mr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:I})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:I,oauthTokenSecret:U}=g;if(!I||!U)return null;try{return y.credential(I,U)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function jr(y,h){return Js.apply(this,arguments)}function Js(){return(Js=(0,p.Z)(function*(y,h){return at(y,"POST","/v1/accounts:signUp",ve(y,h))})).apply(this,arguments)}class _r{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,I,U=!1){return(0,p.Z)(function*(){const K=yield O._fromIdTokenResponse(h,I,U),_e=vs(I);return new _r({user:K,providerId:_e,_tokenResponse:I,operationType:g})})()}static _forOperation(h,g,I){return(0,p.Z)(function*(){yield h._updateTokensIfNecessary(I,!0);const U=vs(I);return new _r({user:h,providerId:U,_tokenResponse:I,operationType:g})})()}}function vs(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Ni(y){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,p.Z)(function*(y){var h;const g=Vn(y);if(yield g._initializationPromise,null!==(h=g.currentUser)&&void 0!==h&&h.isAnonymous)return new _r({user:g.currentUser,providerId:null,operationType:"signIn"});const I=yield jr(g,{returnSecureToken:!0}),U=yield _r._fromIdTokenResponse(g,"signIn",I,!0);return yield g._updateCurrentUser(U.user),U})).apply(this,arguments)}class $i extends Y.ZR{constructor(h,g,I,U){var K;super(g.code,g.message),this.operationType=I,this.user=U,Object.setPrototypeOf(this,$i.prototype),this.customData={appName:h.name,tenantId:null!==(K=h.tenantId)&&void 0!==K?K:void 0,_serverResponse:g.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(h,g,I,U){return new $i(h,g,I,U)}}function Qi(y,h,g,I){return("reauthenticate"===h?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(K=>{throw"auth/multi-factor-auth-required"===K.code?$i._fromErrorAndOperation(y,K,h,I):K})}function ga(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function Mt(y,h){return Kn.apply(this,arguments)}function Kn(){return Kn=(0,p.Z)(function*(y,h){const g=(0,Y.m9)(y);yield Io(!0,g,h);const{providerUserInfo:I}=yield function jt(y,h){return Kt.apply(this,arguments)}(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),U=ga(I||[]);return g.providerData=g.providerData.filter(K=>U.has(K.providerId)),U.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g}),Kn.apply(this,arguments)}function Dr(y,h){return Or.apply(this,arguments)}function Or(){return(Or=(0,p.Z)(function*(y,h,g=!1){const I=yield Zt(y,h._linkToIdToken(y.auth,yield y.getIdToken()),g);return _r._forOperation(y,"link",I)})).apply(this,arguments)}function Io(y,h,g){return hr.apply(this,arguments)}function hr(){return(hr=(0,p.Z)(function*(y,h,g){yield He(h);const U=!1===y?"provider-already-linked":"no-such-provider";he(ga(h.providerData).has(g)===y,h.auth,U)})).apply(this,arguments)}function Wa(y,h){return Do.apply(this,arguments)}function Do(){return(Do=(0,p.Z)(function*(y,h,g=!1){const{auth:I}=y,U="reauthenticate";try{const K=yield Zt(y,Qi(I,U,h,y),g);he(K.idToken,I,"internal-error");const _e=xt(K.idToken);he(_e,I,"internal-error");const{sub:$e}=_e;return he(y.uid===$e,I,"user-mismatch"),_r._forOperation(y,U,K)}catch(K){throw"auth/user-not-found"===K?.code&&de(I,"user-mismatch"),K}})).apply(this,arguments)}function V(y,h){return L.apply(this,arguments)}function L(){return(L=(0,p.Z)(function*(y,h,g=!1){const I="signIn",U=yield Qi(y,I,h),K=yield _r._fromIdTokenResponse(y,I,U);return g||(yield y._updateCurrentUser(K.user)),K})).apply(this,arguments)}function b(y,h){return q.apply(this,arguments)}function q(){return(q=(0,p.Z)(function*(y,h){return V(Vn(y),h)})).apply(this,arguments)}function ce(y,h){return bt.apply(this,arguments)}function bt(){return(bt=(0,p.Z)(function*(y,h){const g=(0,Y.m9)(y);return yield Io(!1,g,h.providerId),Dr(g,h)})).apply(this,arguments)}function an(y,h){return oi.apply(this,arguments)}function oi(){return(oi=(0,p.Z)(function*(y,h){return Wa((0,Y.m9)(y),h)})).apply(this,arguments)}function Ji(){return(Ji=(0,p.Z)(function*(y,h){return at(y,"POST","/v1/accounts:signInWithCustomToken",ve(y,h))})).apply(this,arguments)}function wo(y,h){return ui.apply(this,arguments)}function ui(){return ui=(0,p.Z)(function*(y,h){const g=Vn(y),I=yield function Us(y,h){return Ji.apply(this,arguments)}(g,{token:h,returnSecureToken:!0}),U=yield _r._fromIdTokenResponse(g,"signIn",I);return yield g._updateCurrentUser(U.user),U}),ui.apply(this,arguments)}class ci{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?Es._fromServerResponse(h,g):"totpInfo"in g?eo._fromServerResponse(h,g):de(h,"internal-error")}}class Es extends ci{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new Es(g)}}class eo extends ci{constructor(h){super("totp",h)}static _fromServerResponse(h,g){return new eo(g)}}function wr(y,h,g){var I;he((null===(I=g.url)||void 0===I?void 0:I.length)>0,y,"invalid-continue-uri"),he(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(he(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(he(g.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function Bs(y){return mi.apply(this,arguments)}function mi(){return(mi=(0,p.Z)(function*(y){const h=Vn(y);h._getPasswordPolicyInternal()&&(yield h._updatePasswordPolicy())})).apply(this,arguments)}function Au(y,h,g){return To.apply(this,arguments)}function To(){return(To=(0,p.Z)(function*(y,h,g){const I=Vn(y),U={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};g&&wr(I,U,g),yield bi(I,U,"getOobCode",Bi)})).apply(this,arguments)}function _i(y,h,g){return Co.apply(this,arguments)}function Co(){return Co=(0,p.Z)(function*(y,h,g){yield cs((0,Y.m9)(y),{oobCode:h,newPassword:g}).catch(function(){var I=(0,p.Z)(function*(U){throw"auth/password-does-not-meet-requirements"===U.code&&Bs(y),U});return function(U){return I.apply(this,arguments)}}())}),Co.apply(this,arguments)}function $o(y,h){return js.apply(this,arguments)}function js(){return js=(0,p.Z)(function*(y,h){yield function co(y,h){return xs.apply(this,arguments)}((0,Y.m9)(y),{oobCode:h})}),js.apply(this,arguments)}function qa(y,h){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,p.Z)(function*(y,h){const g=(0,Y.m9)(y),I=yield cs(g,{oobCode:h}),U=I.requestType;switch(he(U,g,"internal-error"),U){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":he(I.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":he(I.mfaInfo,g,"internal-error");default:he(I.email,g,"internal-error")}let K=null;return I.mfaInfo&&(K=ci._fromServerResponse(Vn(g),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:K},operation:U}})).apply(this,arguments)}function Ka(y,h){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,p.Z)(function*(y,h){const{data:g}=yield qa((0,Y.m9)(y),h);return g.email})).apply(this,arguments)}function ma(y,h,g){return ho.apply(this,arguments)}function ho(){return(ho=(0,p.Z)(function*(y,h,g){const I=Vn(y),_e=yield bi(I,{returnSecureToken:!0,email:h,password:g,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",jr).catch(ut=>{throw"auth/password-does-not-meet-requirements"===ut.code&&Bs(y),ut}),$e=yield _r._fromIdTokenResponse(I,"signIn",_e);return yield I._updateCurrentUser($e.user),$e})).apply(this,arguments)}function ki(y,h,g){return b((0,Y.m9)(y),Vs.credential(h,g)).catch(function(){var I=(0,p.Z)(function*(U){throw"auth/password-does-not-meet-requirements"===U.code&&Bs(y),U});return function(U){return I.apply(this,arguments)}}())}function Ao(y,h,g){return So.apply(this,arguments)}function So(){return(So=(0,p.Z)(function*(y,h,g){const I=Vn(y),U={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};(function K(_e,$e){he($e.handleCodeInApp,I,"argument-error"),$e&&wr(I,_e,$e)})(U,g),yield bi(I,U,"getOobCode",Un)})).apply(this,arguments)}function Ho(y,h){const g=Br.parseLink(h);return"EMAIL_SIGNIN"===g?.operation}function tc(y,h,g){return Za.apply(this,arguments)}function Za(){return(Za=(0,p.Z)(function*(y,h,g){const I=(0,Y.m9)(y),U=Vs.credentialWithLink(h,g||Gt());return he(U._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),b(I,U)})).apply(this,arguments)}function Vi(){return(Vi=(0,p.Z)(function*(y,h){return xe(y,"POST","/v1/accounts:createAuthUri",ve(y,h))})).apply(this,arguments)}function yi(y,h){return bo.apply(this,arguments)}function bo(){return bo=(0,p.Z)(function*(y,h){const I={identifier:h,continueUri:Jt()?Gt():"http://localhost"},{signinMethods:U}=yield function fo(y,h){return Vi.apply(this,arguments)}((0,Y.m9)(y),I);return U||[]}),bo.apply(this,arguments)}function zo(y,h){return Ro.apply(this,arguments)}function Ro(){return Ro=(0,p.Z)(function*(y,h){const g=(0,Y.m9)(y),U={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&wr(g.auth,U,h);const{email:K}=yield function ti(y,h){return xr.apply(this,arguments)}(g.auth,U);K!==y.email&&(yield y.reload())}),Ro.apply(this,arguments)}function Go(y,h,g){return Su.apply(this,arguments)}function Su(){return Su=(0,p.Z)(function*(y,h,g){const I=(0,Y.m9)(y),K={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};g&&wr(I.auth,K,g);const{email:_e}=yield function ls(y,h){return Bn.apply(this,arguments)}(I.auth,K);_e!==y.email&&(yield y.reload())}),Su.apply(this,arguments)}function Ya(){return(Ya=(0,p.Z)(function*(y,h){return xe(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function D(y,h){return j.apply(this,arguments)}function j(){return j=(0,p.Z)(function*(y,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const I=(0,Y.m9)(y),K={idToken:yield I.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},_e=yield Zt(I,function to(y,h){return Ya.apply(this,arguments)}(I.auth,K));I.displayName=_e.displayName||null,I.photoURL=_e.photoUrl||null;const $e=I.providerData.find(({providerId:ut})=>"password"===ut);$e&&($e.displayName=I.displayName,$e.photoURL=I.photoURL),yield I._updateTokensIfNecessary(_e)}),j.apply(this,arguments)}function R(y,h){return ie((0,Y.m9)(y),h,null)}function B(y,h){return ie((0,Y.m9)(y),null,h)}function ie(y,h,g){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,p.Z)(function*(y,h,g){const{auth:I}=y,K={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(K.email=h),g&&(K.password=g);const _e=yield Zt(y,Pi(I,K));yield y._updateTokensIfNecessary(_e,!0)})).apply(this,arguments)}class Ft{constructor(h,g,I={}){this.isNewUser=h,this.providerId=g,this.profile=I}}class sr extends Ft{constructor(h,g,I,U){super(h,g,I),this.username=U}}class Yn extends Ft{constructor(h,g){super(h,"facebook.com",g)}}class Qn extends sr{constructor(h,g){super(h,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class Yt extends Ft{constructor(h,g){super(h,"google.com",g)}}class fr extends sr{constructor(h,g,I){super(h,"twitter.com",g,I)}}function Mn(y){const{user:h,_tokenResponse:g}=y;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Ke(y){var h,g;if(!y)return null;const{providerId:I}=y,U=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},K=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!I&&y?.idToken){const _e=null===(g=null===(h=xt(y.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if(_e)return new Ft(K,"anonymous"!==_e&&"custom"!==_e?_e:null)}if(!I)return null;switch(I){case"facebook.com":return new Yn(K,U);case"github.com":return new Qn(K,U);case"google.com":return new Yt(K,U);case"twitter.com":return new fr(K,U,y.screenName||null);case"custom":case"anonymous":return new Ft(K,null);default:return new Ft(K,I,U)}}(g)}class xn{constructor(h,g,I){this.type=h,this.credential=g,this.user=I}static _fromIdtoken(h,g){return new xn("enroll",h,g)}static _fromMfaPendingCredential(h){return new xn("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,I;if(h?.multiFactorSession){if(null!==(g=h.multiFactorSession)&&void 0!==g&&g.pendingCredential)return xn._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(I=h.multiFactorSession)&&void 0!==I&&I.idToken)return xn._fromIdtoken(h.multiFactorSession.idToken)}return null}}class bu{constructor(h,g,I){this.session=h,this.hints=g,this.signInResolver=I}static _fromError(h,g){const I=Vn(h),U=g.customData._serverResponse,K=(U.mfaInfo||[]).map($e=>ci._fromServerResponse(I,$e));he(U.mfaPendingCredential,I,"internal-error");const _e=xn._fromMfaPendingCredential(U.mfaPendingCredential);return new bu(_e,K,function(){var $e=(0,p.Z)(function*(ut){const $t=yield ut._process(I,_e);delete U.mfaInfo,delete U.mfaPendingCredential;const dt=Object.assign(Object.assign({},U),{idToken:$t.idToken,refreshToken:$t.refreshToken});switch(g.operationType){case"signIn":const tr=yield _r._fromIdTokenResponse(I,g.operationType,dt);return yield I._updateCurrentUser(tr.user),tr;case"reauthenticate":return he(g.user,I,"internal-error"),_r._forOperation(g.user,g.operationType,dt);default:de(I,"internal-error")}});return function(ut){return $e.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,p.Z)(function*(){return g.signInResolver(h)})()}}function nc(y,h){var g;const I=(0,Y.m9)(y),U=h;return he(h.customData.operationType,I,"argument-error"),he(null===(g=U.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,I,"argument-error"),bu._fromError(I,U)}class po{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(I=>ci._fromServerResponse(h.auth,I)))})}static _fromUser(h){return new po(h)}getSession(){var h=this;return(0,p.Z)(function*(){return xn._fromIdtoken(yield h.user.getIdToken(),h.user)})()}enroll(h,g){var I=this;return(0,p.Z)(function*(){const U=h,K=yield I.getSession(),_e=yield Zt(I.user,U._process(I.user.auth,K,g));return yield I.user._updateTokensIfNecessary(_e),I.user.reload()})()}unenroll(h){var g=this;return(0,p.Z)(function*(){const I="string"==typeof h?h:h.uid,U=yield g.user.getIdToken();try{const K=yield Zt(g.user,function ic(y,h){return xe(y,"POST","/v2/accounts/mfaEnrollment:withdraw",ve(y,h))}(g.user.auth,{idToken:U,mfaEnrollmentId:I}));g.enrolledFactors=g.enrolledFactors.filter(({uid:_e})=>_e!==I),yield g.user._updateTokensIfNecessary(K),yield g.user.reload()}catch(K){throw K}})()}}const Ru=new WeakMap;function go(y){const h=(0,Y.m9)(y);return Ru.has(h)||Ru.set(h,po._fromUser(h)),Ru.get(h)}const _a="__sak";class mn{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(_a,"1"),this.storage.removeItem(_a),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Wo=(()=>{class y extends mn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,I)=>this.onStorageEvent(g,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ya(){const y=(0,Y.z$)();return Vt(y)||we(y)}()&&function gn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=St(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const I of Object.keys(this.listeners)){const U=this.storage.getItem(I),K=this.localCache[I];U!==K&&g(I,K,U)}}onStorageEvent(g,I=!1){if(!g.key)return void this.forAllChangedKeys(($e,ut,$t)=>{this.notifyListeners($e,$t)});const U=g.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const $e=this.storage.getItem(U);if(g.newValue!==$e)null!==g.newValue?this.storage.setItem(U,g.newValue):this.storage.removeItem(U);else if(this.localCache[U]===g.newValue&&!I)return}const K=()=>{const $e=this.storage.getItem(U);!I&&this.localCache[U]===$e||this.notifyListeners(U,$e)},_e=this.storage.getItem(U);!function Wt(){return(0,Y.w1)()&&10===document.documentMode}()||_e===g.newValue||g.newValue===g.oldValue?K():setTimeout(K,10)}notifyListeners(g,I){this.localCache[g]=I;const U=this.listeners[g];if(U)for(const K of Array.from(U))K(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,I,U)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:I,newValue:U}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(I)}_removeListener(g,I){this.listeners[g]&&(this.listeners[g].delete(I),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,I){var U=()=>super._set,K=this;return(0,p.Z)(function*(){yield U().call(K,g,I),K.localCache[g]=JSON.stringify(I)})()}_get(g){var I=()=>super._get,U=this;return(0,p.Z)(function*(){const K=yield I().call(U,g);return U.localCache[g]=JSON.stringify(K),K})()}_remove(g){var I=()=>super._remove,U=this;return(0,p.Z)(function*(){yield I().call(U,g),delete U.localCache[g]})()}}return y.type="LOCAL",y})(),sc=(()=>{class y extends mn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,I){}_removeListener(g,I){}}return y.type="SESSION",y})();let It=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const I=this.receivers.find(K=>K.isListeningto(g));if(I)return I;const U=new y(g);return this.receivers.push(U),U}isListeningto(g){return this.eventTarget===g}handleEvent(g){var I=this;return(0,p.Z)(function*(){const U=g,{eventId:K,eventType:_e,data:$e}=U.data,ut=I.handlersMap[_e];if(!ut?.size)return;U.ports[0].postMessage({status:"ack",eventId:K,eventType:_e});const $t=Array.from(ut).map(function(){var tr=(0,p.Z)(function*(ts){return ts(U.origin,$e)});return function(ts){return tr.apply(this,arguments)}}()),dt=yield function Vr(y){return Promise.all(y.map(function(){var h=(0,p.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(I){return{fulfilled:!1,reason:I}}});return function(g){return h.apply(this,arguments)}}()))}($t);U.ports[0].postMessage({status:"done",eventId:K,eventType:_e,response:dt})})()}_subscribe(g,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(I)}_unsubscribe(g,I){this.handlersMap[g]&&I&&this.handlersMap[g].delete(I),(!I||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Hi(y="",h=10){let g="";for(let I=0;I<h;I++)g+=Math.floor(10*Math.random());return y+g}class qc{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,I=50){var U=this;return(0,p.Z)(function*(){const K=typeof MessageChannel<"u"?new MessageChannel:null;if(!K)throw new Error("connection_unavailable");let _e,$e;return new Promise((ut,$t)=>{const dt=Hi("",20);K.port1.start();const tr=setTimeout(()=>{$t(new Error("unsupported_event"))},I);$e={messageChannel:K,onMessage(ts){const ea=ts;if(ea.data.eventId===dt)switch(ea.data.status){case"ack":clearTimeout(tr),_e=setTimeout(()=>{$t(new Error("timeout"))},3e3);break;case"done":clearTimeout(_e),ut(ea.data.response);break;default:clearTimeout(tr),clearTimeout(_e),$t(new Error("invalid_response"))}}},U.handlers.add($e),K.port1.addEventListener("message",$e.onMessage),U.target.postMessage({eventType:h,eventId:dt,data:g},[K.port2])}).finally(()=>{$e&&U.removeMessageHandler($e)})})()}}function Rr(){return window}function mo(){return typeof Rr().WorkerGlobalScope<"u"&&"function"==typeof Rr().importScripts}function Xe(){return(Xe=(0,p.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const zi="firebaseLocalStorageDb",va="firebaseLocalStorage",qo="fbase_key";class Yr{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Po(y,h){return y.transaction([va],h?"readwrite":"readonly").objectStore(va)}function Ea(){const y=indexedDB.open(zi,1);return new Promise((h,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const I=y.result;try{I.createObjectStore(va,{keyPath:qo})}catch(U){g(U)}}),y.addEventListener("success",(0,p.Z)(function*(){const I=y.result;I.objectStoreNames.contains(va)?h(I):(I.close(),yield function Re(){const y=indexedDB.deleteDatabase(zi);return new Yr(y).toPromise()}(),h(yield Ea()))}))})}function ro(y,h,g){return ac.apply(this,arguments)}function ac(){return(ac=(0,p.Z)(function*(y,h,g){const I=Po(y,!0).put({[qo]:h,value:g});return new Yr(I).toPromise()})).apply(this,arguments)}function wi(){return(wi=(0,p.Z)(function*(y,h){const g=Po(y,!1).get(h),I=yield new Yr(g).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Kc(y,h){const g=Po(y,!0).delete(h);return new Yr(g).toPromise()}const _=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,p.Z)(function*(){return g.db||(g.db=yield Ea()),g.db})()}_withRetries(g){var I=this;return(0,p.Z)(function*(){let U=0;for(;;)try{const K=yield I._openDb();return yield g(K)}catch(K){if(U++>3)throw K;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,p.Z)(function*(){return mo()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,p.Z)(function*(){g.receiver=It._getInstance(function oc(){return mo()?self:null}()),g.receiver._subscribe("keyChanged",function(){var I=(0,p.Z)(function*(U,K){return{keyProcessed:(yield g._poll()).includes(K.key)}});return function(U,K){return I.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var I=(0,p.Z)(function*(U,K){return["keyChanged"]});return function(U,K){return I.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,p.Z)(function*(){var I,U;if(g.activeServiceWorker=yield function Yd(){return Xe.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new qc(g.activeServiceWorker);const K=yield g.sender._send("ping",{},800);K&&null!==(I=K[0])&&void 0!==I&&I.fulfilled&&null!==(U=K[0])&&void 0!==U&&U.value.includes("keyChanged")&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var I=this;return(0,p.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function jn(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:g},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Ea();return yield ro(g,_a,"1"),yield Kc(g,_a),!0}catch{}return!1})()}_withPendingWrite(g){var I=this;return(0,p.Z)(function*(){I.pendingWrites++;try{yield g()}finally{I.pendingWrites--}})()}_set(g,I){var U=this;return(0,p.Z)(function*(){return U._withPendingWrite((0,p.Z)(function*(){return yield U._withRetries(K=>ro(K,g,I)),U.localCache[g]=I,U.notifyServiceWorker(g)}))})()}_get(g){var I=this;return(0,p.Z)(function*(){const U=yield I._withRetries(K=>function vi(y,h){return wi.apply(this,arguments)}(K,g));return I.localCache[g]=U,U})()}_remove(g){var I=this;return(0,p.Z)(function*(){return I._withPendingWrite((0,p.Z)(function*(){return yield I._withRetries(U=>Kc(U,g)),delete I.localCache[g],I.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,p.Z)(function*(){const I=yield g._withRetries(_e=>{const $e=Po(_e,!1).getAll();return new Yr($e).toPromise()});if(!I)return[];if(0!==g.pendingWrites)return[];const U=[],K=new Set;for(const{fbase_key:_e,value:$e}of I)K.add(_e),JSON.stringify(g.localCache[_e])!==JSON.stringify($e)&&(g.notifyListeners(_e,$e),U.push(_e));for(const _e of Object.keys(g.localCache))g.localCache[_e]&&!K.has(_e)&&(g.notifyListeners(_e,null),U.push(_e));return U})()}notifyListeners(g,I){this.localCache[g]=I;const U=this.listeners[g];if(U)for(const K of Array.from(U))K(I)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(I)}_removeListener(g,I){this.listeners[g]&&(this.listeners[g].delete(I),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})(),be=1e12;class Nt{constructor(h){this.auth=h,this.counter=be,this._widgets=new Map}render(h,g){const I=this.counter;return this._widgets.set(I,new Cn(h,this.auth.name,g||{})),this.counter++,I}reset(h){var g;const I=h||be;null===(g=this._widgets.get(I))||void 0===g||g.delete(),this._widgets.delete(I)}getResponse(h){var g;return(null===(g=this._widgets.get(h||be))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,p.Z)(function*(){var I;return null===(I=g._widgets.get(h||be))||void 0===I||I.execute(),""})()}}class Cn{constructor(h,g,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const U="string"==typeof h?document.getElementById(h):h;he(U,"argument-error",{appName:g}),this.container=U,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function $n(y){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<y;I++)h.push(g.charAt(Math.floor(62*Math.random())));return h.join("")}(50);const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Nn=Xr("rcb"),fs=new pt(3e4,6e4);class Ia{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=Rr().grecaptcha)||void 0===h||!h.render)}load(h,g=""){return he(function Ja(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),h,"argument-error"),this.shouldResolveImmediately(g)&&Qt(Rr().grecaptcha)?Promise.resolve(Rr().grecaptcha):new Promise((I,U)=>{const K=Rr().setTimeout(()=>{U(Pe(h,"network-request-failed"))},fs.get());Rr()[Nn]=()=>{Rr().clearTimeout(K),delete Rr()[Nn];const $e=Rr().grecaptcha;if(!$e||!Qt($e))return void U(Pe(h,"internal-error"));const ut=$e.render;$e.render=($t,dt)=>{const tr=ut($t,dt);return this.counter++,tr},this.hostLanguage=g,I($e)},Hr(`https://www.google.com/recaptcha/api.js??${(0,Y.xO)({onload:Nn,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(K),U(Pe(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var g;return!(null===(g=Rr().grecaptcha)||void 0===g||!g.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Da{load(h){return(0,p.Z)(function*(){return new Nt(h)})()}clearedOneInstance(){}}const Zc="recaptcha",ps={theme:"light",type:"image"};class Xa{constructor(h,g,I=Object.assign({},ps)){this.parameters=I,this.type=Zc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Vn(h),this.isInvisible="invisible"===this.parameters.size,he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const U="string"==typeof g?document.getElementById(g):g;he(U,this.auth,"argument-error"),this.container=U,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Da:new Ia,this.validateStartingState()}verify(){var h=this;return(0,p.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),I=h.getAssertedRecaptcha();return I.getResponse(g)||new Promise(K=>{const _e=$e=>{$e&&(h.tokenChangeListeners.delete(_e),K($e))};h.tokenChangeListeners.add(_e),h.isInvisible&&I.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){he(!this.parameters.sitekey,this.auth,"argument-error"),he(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(I=>I(g)),"function"==typeof h)h(g);else if("string"==typeof h){const I=Rr()[h];"function"==typeof I&&I(g)}}}assertNotDestroyed(){he(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,p.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const I=document.createElement("div");g.appendChild(I),g=I}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,p.Z)(function*(){he(Jt()&&!mo(),h.auth,"internal-error"),yield function Qr(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function on(y){return Xn.apply(this,arguments)}(h.auth);he(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return he(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Fl{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=gi._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function zf(y,h,g){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,p.Z)(function*(y,h,g){const I=Vn(y),U=yield _o(I,h,(0,Y.m9)(g));return new Fl(U,K=>b(I,K))})).apply(this,arguments)}function Gf(y,h,g){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,p.Z)(function*(y,h,g){const I=(0,Y.m9)(y);yield Io(!1,I,"phone");const U=yield _o(I.auth,h,(0,Y.m9)(g));return new Fl(U,K=>ce(I,K))})).apply(this,arguments)}function Qd(y,h,g){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,p.Z)(function*(y,h,g){const I=(0,Y.m9)(y),U=yield _o(I.auth,h,(0,Y.m9)(g));return new Fl(U,K=>an(I,K))})).apply(this,arguments)}function _o(y,h,g){return Qc.apply(this,arguments)}function Qc(){return Qc=(0,p.Z)(function*(y,h,g){var I;const U=yield g.verify();try{let K;if(he("string"==typeof U,y,"argument-error"),he(g.type===Zc,y,"argument-error"),K="string"==typeof h?{phoneNumber:h}:h,"session"in K){const _e=K.session;if("phoneNumber"in K)return he("enroll"===_e.type,y,"internal-error"),(yield function Qa(y,h){return xe(y,"POST","/v2/accounts/mfaEnrollment:start",ve(y,h))}(y,{idToken:_e.credential,phoneEnrollmentInfo:{phoneNumber:K.phoneNumber,recaptchaToken:U}})).phoneSessionInfo.sessionInfo;{he("signin"===_e.type,y,"internal-error");const $e=(null===(I=K.multiFactorHint)||void 0===I?void 0:I.uid)||K.multiFactorUid;return he($e,y,"missing-multi-factor-info"),(yield function A(y,h){return xe(y,"POST","/v2/accounts/mfaSignIn:start",ve(y,h))}(y,{mfaPendingCredential:_e.credential,mfaEnrollmentId:$e,phoneSignInInfo:{recaptchaToken:U}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:_e}=yield function ds(y,h){return nn.apply(this,arguments)}(y,{phoneNumber:K.phoneNumber,recaptchaToken:U});return _e}}finally{g._reset()}}),Qc.apply(this,arguments)}function Jc(y,h){return eu.apply(this,arguments)}function eu(){return(eu=(0,p.Z)(function*(y,h){yield Dr((0,Y.m9)(y),h)})).apply(this,arguments)}let uc=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=Vn(g)}verifyPhoneNumber(g,I){return _o(this.auth,g,(0,Y.m9)(I))}static credential(g,I){return gi._fromVerification(g,I)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:I,temporaryProof:U}=g;return I&&U?gi._fromTokenResponse(I,U):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Zo(y,h){return h?M(h):(he(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Mu extends Ki{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return er(h,this._buildIdpRequest())}_linkToIdToken(h,g){return er(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return er(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function Ti(y){return V(y.auth,new Mu(y),y.bypassAuthState)}function Jd(y){const{auth:h,user:g}=y;return he(g,h,"internal-error"),Wa(g,new Mu(y),y.bypassAuthState)}function zs(y){return wa.apply(this,arguments)}function wa(){return(wa=(0,p.Z)(function*(y){const{auth:h,user:g}=y;return he(g,h,"internal-error"),Dr(g,new Mu(y),y.bypassAuthState)})).apply(this,arguments)}class Pr{constructor(h,g,I,U,K=!1){this.auth=h,this.resolver=I,this.user=U,this.bypassAuthState=K,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,p.Z)(function*(I,U){h.pendingPromise={resolve:I,reject:U};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(K){h.reject(K)}});return function(I,U){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,p.Z)(function*(){const{urlResponse:I,sessionId:U,postBody:K,tenantId:_e,error:$e,type:ut}=h;if($e)return void g.reject($e);const $t={auth:g.auth,requestUri:I,sessionId:U,tenantId:_e||void 0,postBody:K||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(ut)($t))}catch(dt){g.reject(dt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Ti;case"linkViaPopup":case"linkViaRedirect":return zs;case"reauthViaPopup":case"reauthViaRedirect":return Jd;default:de(this.auth,"internal-error")}}resolve(h){Tt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Tt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ul=new pt(2e3,1e4);function Ci(y,h,g){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,p.Z)(function*(y,h,g){const I=Vn(y);ke(y,h,cn);const U=Zo(I,g);return new cc(I,"signInViaPopup",h,U).executeNotNull()})).apply(this,arguments)}function Xd(y,h,g){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,p.Z)(function*(y,h,g){const I=(0,Y.m9)(y);ke(I.auth,h,cn);const U=Zo(I.auth,g);return new cc(I.auth,"reauthViaPopup",h,U,I).executeNotNull()})).apply(this,arguments)}function Gs(y,h,g){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,p.Z)(function*(y,h,g){const I=(0,Y.m9)(y);ke(I.auth,h,cn);const U=Zo(I.auth,g);return new cc(I.auth,"linkViaPopup",h,U,I).executeNotNull()})).apply(this,arguments)}let cc=(()=>{class y extends Pr{constructor(g,I,U,K,_e){super(g,I,K,_e),this.provider=U,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,p.Z)(function*(){const I=yield g.execute();return he(I,g.auth,"internal-error"),I})()}onExecution(){var g=this;return(0,p.Z)(function*(){Tt(1===g.filter.length,"Popup operations only handle one event");const I=Hi();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],I),g.authWindow.associatedEvent=I,g.resolver._originValidation(g.auth).catch(U=>{g.reject(U)}),g.resolver._isIframeWebStorageSupported(g.auth,U=>{U||g.reject(Pe(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Pe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var I,U;this.pollId=null!==(U=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==U&&U.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Pe(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(g,Ul.get())};g()}}return y.currentPopupAction=null,y})();const Jr="pendingRedirect",lc=new Map;class io extends Pr{constructor(h,g,I=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,I),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,p.Z)(function*(){let I=lc.get(g.auth._key());if(!I){try{const K=(yield function Gr(y,h){return Ds.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;I=()=>Promise.resolve(K)}catch(U){I=()=>Promise.reject(U)}lc.set(g.auth._key(),I)}return g.bypassAuthState||lc.set(g.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,I=this;return(0,p.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(I,h);if("unknown"!==h.type){if(h.eventId){const U=yield I.auth._redirectUserForId(h.eventId);if(U)return I.user=U,g().call(I,h);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function Ds(){return(Ds=(0,p.Z)(function*(y,h){const g=Yo(h),I=Fi(y);if(!(yield I._isAvailable()))return!1;const U="true"===(yield I._get(g));return yield I._remove(g),U})).apply(this,arguments)}function dc(y,h){return tu.apply(this,arguments)}function tu(){return(tu=(0,p.Z)(function*(y,h){return Fi(y)._set(Yo(h),"true")})).apply(this,arguments)}function xu(){lc.clear()}function eh(y,h){lc.set(y._key(),h)}function Fi(y){return M(y._redirectPersistence)}function Yo(y){return We(Jr,y.config.apiKey,y.name)}function nu(y,h,g){return function Mo(y,h,g){return Ws.apply(this,arguments)}(y,h,g)}function Ws(){return(Ws=(0,p.Z)(function*(y,h,g){const I=Vn(y);ke(y,h,cn),yield I._initializationPromise;const U=Zo(I,g);return yield dc(U,I),U._openRedirect(I,h,"signInViaRedirect")})).apply(this,arguments)}function Ca(y,h,g){return function xo(y,h,g){return Xc.apply(this,arguments)}(y,h,g)}function Xc(){return(Xc=(0,p.Z)(function*(y,h,g){const I=(0,Y.m9)(y);ke(I.auth,h,cn),yield I.auth._initializationPromise;const U=Zo(I.auth,g);yield dc(U,I.auth);const K=yield jl(I);return U._openRedirect(I.auth,h,"reauthViaRedirect",K)})).apply(this,arguments)}function ru(y,h,g){return function el(y,h,g){return iu.apply(this,arguments)}(y,h,g)}function iu(){return(iu=(0,p.Z)(function*(y,h,g){const I=(0,Y.m9)(y);ke(I.auth,h,cn),yield I.auth._initializationPromise;const U=Zo(I.auth,g);yield Io(!1,I,h.providerId),yield dc(U,I.auth);const K=yield jl(I);return U._openRedirect(I.auth,h,"linkViaRedirect",K)})).apply(this,arguments)}function Aa(y,h){return hc.apply(this,arguments)}function hc(){return(hc=(0,p.Z)(function*(y,h){return yield Vn(y)._initializationPromise,No(y,h,!1)})).apply(this,arguments)}function No(y,h){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,p.Z)(function*(y,h,g=!1){const I=Vn(y),U=Zo(I,h),_e=yield new io(I,U,g).execute();return _e&&!g&&(delete _e.user._redirectEventId,yield I._persistUserIfCurrent(_e.user),yield I._setRedirectUser(null,h)),_e})).apply(this,arguments)}function jl(y){return su.apply(this,arguments)}function su(){return(su=(0,p.Z)(function*(y){const h=Hi(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class ou{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(h,I)&&(g=!0,this.sendToConsumer(h,I),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function nh(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xi(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var I;if(h.error&&!Xi(h)){const U=(null===(I=h.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";g.onError(Pe(this.auth,U))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const I=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&I}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(th(h))}saveEventToCache(h){this.cachedEventUids.add(th(h)),this.lastProcessedEventTime=Date.now()}}function th(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Xi({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function tl(y){return di.apply(this,arguments)}function di(){return(di=(0,p.Z)(function*(y,h={}){return xe(y,"GET","/v1/projects",h)})).apply(this,arguments)}const rh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Fr=/^https?/;function Qo(){return(Qo=(0,p.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield tl(y);for(const g of h)try{if(au(g))return}catch{}de(y,"unauthorized-domain")})).apply(this,arguments)}function au(y){const h=Gt(),{protocol:g,hostname:I}=new URL(h);if(y.startsWith("chrome-extension://")){const _e=new URL(y);return""===_e.hostname&&""===I?"chrome-extension:"===g&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&_e.hostname===I}if(!Fr.test(g))return!1;if(rh.test(y))return I===y;const U=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+U+"|"+U+")$","i").test(I)}const Vo=new pt(3e4,6e4);function $l(){const y=Rr().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let An=null;const Ou=new pt(5e3,15e3),ih="__/auth/iframe",sh="emulator/auth/iframe",Wf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qf(y){const h=y.config;he(h.authDomain,y,"auth-domain-config-required");const g=h.emulator?mt(h,sh):`https://${y.config.authDomain}/${ih}`,I={apiKey:h.apiKey,appName:y.name,v:z.SDK_VERSION},U=oh.get(y.config.apiHost);U&&(I.eid=U);const K=y._getFrameworks();return K.length&&(I.fw=K.join(",")),`${g}?${(0,Y.xO)(I).slice(1)}`}function Jo(){return Jo=(0,p.Z)(function*(y){const h=yield function Ar(y){return An=An||function nl(y){return new Promise((h,g)=>{var I,U,K;function _e(){$l(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{$l(),g(Pe(y,"network-request-failed"))},timeout:Vo.get()})}if(null!==(U=null===(I=Rr().gapi)||void 0===I?void 0:I.iframes)&&void 0!==U&&U.Iframe)h(gapi.iframes.getContext());else{if(null===(K=Rr().gapi)||void 0===K||!K.load){const $e=Xr("iframefcb");return Rr()[$e]=()=>{gapi.load?_e():g(Pe(y,"network-request-failed"))},Hr(`https://apis.google.com/js/api.js?onload=${$e}`).catch(ut=>g(ut))}_e()}}).catch(h=>{throw An=null,h})}(y),An}(y),g=Rr().gapi;return he(g,y,"internal-error"),h.open({where:document.body,url:qf(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Wf,dontclear:!0},I=>new Promise(function(){var U=(0,p.Z)(function*(K,_e){yield I.restyle({setHideOnLeave:!1});const $e=Pe(y,"network-request-failed"),ut=Rr().setTimeout(()=>{_e($e)},Ou.get());function $t(){Rr().clearTimeout(ut),K(I)}I.ping($t).then($t,()=>{_e($e)})});return function(K,_e){return U.apply(this,arguments)}}()))}),Jo.apply(this,arguments)}const Zf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Hl{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const uh="__/auth/handler",Vu="emulator/auth/handler",yo=encodeURIComponent("fac");function uu(y,h,g,I,U,K){return pc.apply(this,arguments)}function pc(){return(pc=(0,p.Z)(function*(y,h,g,I,U,K){he(y.config.authDomain,y,"auth-domain-config-required"),he(y.config.apiKey,y,"invalid-api-key");const _e={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:I,v:z.SDK_VERSION,eventId:U};if(h instanceof cn){h.setDefaultLanguage(y.languageCode),_e.providerId=h.providerId||"",(0,Y.xb)(h.getCustomParameters())||(_e.customParameters=JSON.stringify(h.getCustomParameters()));for(const[dt,tr]of Object.entries(K||{}))_e[dt]=tr}if(h instanceof Fs){const dt=h.getScopes().filter(tr=>""!==tr);dt.length>0&&(_e.scopes=dt.join(","))}y.tenantId&&(_e.tid=y.tenantId);const $e=_e;for(const dt of Object.keys($e))void 0===$e[dt]&&delete $e[dt];const ut=yield y._getAppCheckToken(),$t=ut?`#${yo}=${encodeURIComponent(ut)}`:"";return`${function rl({config:y}){return y.emulator?mt(y,Vu):`https://${y.authDomain}/${uh}`}(y)}?${(0,Y.xO)($e).slice(1)}${$t}`})).apply(this,arguments)}const zl="webStorageSupport",oo=class ws{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sc,this._completeRedirectFn=No,this._overrideRedirectResult=eh}_openPopup(h,g,I,U){var K=this;return(0,p.Z)(function*(){var _e;Tt(null===(_e=K.eventManagers[h._key()])||void 0===_e?void 0:_e.manager,"_initialize() not called before _openPopup()");const $e=yield uu(h,g,I,Gt(),U);return function so(y,h,g,I=500,U=600){const K=Math.max((window.screen.availHeight-U)/2,0).toString(),_e=Math.max((window.screen.availWidth-I)/2,0).toString();let $e="";const ut=Object.assign(Object.assign({},Zf),{width:I.toString(),height:U.toString(),top:K,left:_e}),$t=(0,Y.z$)().toLowerCase();g&&($e=en($t)?"_blank":g),Ct($t)&&(h=h||"http://localhost",ut.scrollbars="yes");const dt=Object.entries(ut).reduce((ts,[ea,yc])=>`${ts}${ea}=${yc},`,"");if(function Pt(y=(0,Y.z$)()){var h;return we(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}($t)&&"_self"!==$e)return function ku(y,h){const g=document.createElement("a");g.href=y,g.target=h;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(I)}(h||"",$e),new Hl(null);const tr=window.open(h||"",$e,dt);he(tr,y,"popup-blocked");try{tr.focus()}catch{}return new Hl(tr)}(h,$e,Hi())})()}_openRedirect(h,g,I,U){var K=this;return(0,p.Z)(function*(){return yield K._originValidation(h),function Zd(y){Rr().location.href=y}(yield uu(h,g,I,Gt(),U)),new Promise(()=>{})})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:U,promise:K}=this.eventManagers[g];return U?Promise.resolve(U):(Tt(K,"If manager is not set, promise should be"),K)}const I=this.initAndGetManager(h);return this.eventManagers[g]={promise:I},I.catch(()=>{delete this.eventManagers[g]}),I}initAndGetManager(h){var g=this;return(0,p.Z)(function*(){const I=yield function Kf(y){return Jo.apply(this,arguments)}(h),U=new ou(h);return I.register("authEvent",K=>(he(K?.authEvent,h,"invalid-auth-event"),{status:U.onEvent(K.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:U},g.iframes[h._key()]=I,U})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(zl,{type:zl},U=>{var K;const _e=null===(K=U?.[0])||void 0===K?void 0:K[zl];void 0!==_e&&g(!!_e),de(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function ko(y){return Qo.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return St()||Vt()||we()}};class cu{constructor(h){this.factorId=h}_process(h,g,I){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,I);case"signin":return this._finalizeSignIn(h,g.credential);default:return ft("unexpected MultiFactorSessionType")}}}class lu extends cu{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new lu(h)}_finalizeEnroll(h,g,I){return function Is(y,h){return xe(y,"POST","/v2/accounts/mfaEnrollment:finalize",ve(y,h))}(h,{idToken:g,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function x(y,h){return xe(y,"POST","/v2/accounts/mfaSignIn:finalize",ve(y,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Gl=(()=>{class y{constructor(){}static assertion(g){return lu._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var il="@firebase/auth";class du{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,p.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(I=>{h(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);g&&(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,Y.Pz)("authIdTokenMaxAge"),function Fu(y){(0,z._registerComponent)(new le.wA("auth",(h,{options:g})=>{const I=h.getProvider("app").getImmediate(),U=h.getProvider("heartbeat"),K=h.getProvider("app-check-internal"),{apiKey:_e,authDomain:$e}=I.options;he(_e&&!_e.includes(":"),"invalid-api-key",{appName:I.name});const ut={apiKey:_e,authDomain:$e,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Er(y)},$t=new Ss(I,U,K,ut);return function jo(y,h){const g=h?.persistence||[],I=(Array.isArray(g)?g:[g]).map(M);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(I,h?.popupRedirectResolver)}($t,g),$t},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,I)=>{h.getProvider("auth-internal").initialize()})),(0,z._registerComponent)(new le.wA("auth-internal",h=>{const g=Vn(h.getProvider("auth").getImmediate());return new du(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,z.registerVersion)(il,"1.3.2",function _c(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,z.registerVersion)(il,"1.3.2","esm2017")}("Browser")},5776:(Et,Me,F)=>{F.d(Me,{u7:()=>Og,Jj:()=>Iu,IX:()=>rv,my:()=>fi,xU:()=>ca,Lz:()=>ja,WA:()=>et,F8:()=>Cf,$q:()=>Hd,W:()=>zc,EK:()=>Ot,PU:()=>zg,l7:()=>Fi,Ky:()=>It,Xb:()=>Vr,Cf:()=>Hn,K9:()=>hs,Me:()=>cc,yq:()=>yr,Wi:()=>Sg,ET:()=>Rv,Ab:()=>Wg,vr:()=>z_,Fc:()=>sv,hJ:()=>Df,B$:()=>Vd,at:()=>If,oe:()=>bv,AK:()=>H_,TF:()=>av,JU:()=>Pg,ST:()=>D_,fH:()=>w_,Ix:()=>ov,Wu:()=>vv,Lx:()=>yv,qY:()=>qr,GL:()=>Gc,QT:()=>Vg,kl:()=>Nf,Xk:()=>HE,PL:()=>Cv,UQ:()=>Av,zN:()=>Fg,ad:()=>E_,nP:()=>G_,b9:()=>M_,vh:()=>x_,Pb:()=>uv,L$:()=>cv,cf:()=>U_,sc:()=>B_,Xo:()=>P_,IO:()=>xl,iE:()=>y_,Eo:()=>wf,i3:()=>Lv,Bt:()=>Gg,pl:()=>Sv,Ub:()=>no,qK:()=>Tv,TQ:()=>$E,e0:()=>_v,r7:()=>L_,Mx:()=>Fd,ar:()=>R_});var oe,p=F(5861),Y=F(534),z=F(4537),ue=F(7879),te=F(9058),le=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ge={},Se=Se||{},Q=le||self;function re(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function me(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Ne="closure_uid_"+(1e9*Math.random()>>>0),Ze=0;function Fe(i,e,n){return i.call.apply(i.bind,arguments)}function tt(i,e,n){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function Ge(i,e,n){return(Ge=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Fe:tt).apply(null,arguments)}function Rt(i,e){var n=Array.prototype.slice.call(arguments,1);return function(){var o=n.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function Ie(i,e){function n(){}n.prototype=e.prototype,i.$=e.prototype,i.prototype=new n,i.prototype.constructor=i,i.ac=function(o,u,l){for(var f=Array(arguments.length-2),w=2;w<arguments.length;w++)f[w-2]=arguments[w];return e.prototype[u].apply(o,f)}}function de(){this.s=this.s,this.o=this.o}de.prototype.s=!1,de.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function ze(i){Object.prototype.hasOwnProperty.call(i,Ne)&&i[Ne]||(i[Ne]=++Ze)}(this)},de.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Te=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let n=0;n<i.length;n++)if(n in i&&i[n]===e)return n;return-1};function ke(i){const e=i.length;if(0<e){const n=Array(e);for(let o=0;o<e;o++)n[o]=i[o];return n}return[]}function qe(i,e){for(let n=1;n<arguments.length;n++){const o=arguments[n];if(re(o)){const u=i.length||0,l=o.length||0;i.length=u+l;for(let f=0;f<l;f++)i[u+f]=o[f]}else i.push(o)}}function he(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var ft=function(){if(!Q.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{Q.addEventListener("test",()=>{},e),Q.removeEventListener("test",()=>{},e)}catch{}return i}();function Tt(i){return/^[\s\xa0]*$/.test(i)}function Gt(){var i=Q.navigator;return i&&(i=i.userAgent)?i:""}function Jt(i){return-1!=Gt().indexOf(i)}function pr(i){return pr[" "](i),i}pr[" "]=function(){};var xe,i,At=Jt("Opera"),pt=Jt("Trident")||Jt("MSIE"),mt=Jt("Edge"),pe=mt||pt,ye=Jt("Gecko")&&!(-1!=Gt().toLowerCase().indexOf("webkit")&&!Jt("Edge"))&&!(Jt("Trident")||Jt("MSIE"))&&!Jt("Edge"),Ce=-1!=Gt().toLowerCase().indexOf("webkit")&&!Jt("Edge");function ve(){var i=Q.document;return i?i.documentMode:void 0}e:{var Qe="",ct=(i=Gt(),ye?/rv:([^\);]+)(\)|;)/.exec(i):mt?/Edge\/([\d\.]+)/.exec(i):pt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Ce?/WebKit\/(\S+)/.exec(i):At?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(ct&&(Qe=ct?ct[1]:""),pt){var rt=ve();if(null!=rt&&rt>parseFloat(Qe)){xe=String(rt);break e}}xe=Qe}var fn=Q.document&&pt&&(ve()||parseInt(xe,10))||void 0;function Ut(i,e){if(he.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var n=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(ye){e:{try{pr(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==n?e=i.fromElement:"mouseout"==n&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:En[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Ut.$.h.call(this)}}Ie(Ut,he);var En={2:"touch",3:"pen",4:"mouse"};Ut.prototype.h=function(){Ut.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var pn="closure_listenable_"+(1e6*Math.random()|0),Qt=0;function yn(i,e,n,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=n,this.capture=!!o,this.la=u,this.key=++Qt,this.fa=this.ia=!1}function On(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function on(i,e,n){for(const o in i)e.call(n,i[o],o,i)}function In(i){const e={};for(const n in i)e[n]=i[n];return e}const Dn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vr(i,e){let n,o;for(let u=1;u<arguments.length;u++){for(n in o=arguments[u],o)i[n]=o[n];for(let l=0;l<Dn.length;l++)n=Dn[l],Object.prototype.hasOwnProperty.call(o,n)&&(i[n]=o[n])}}function nr(i){this.src=i,this.g={},this.h=0}function jt(i,e){var n=e.type;if(n in i.g){var l,o=i.g[n],u=Te(o,e);(l=0<=u)&&Array.prototype.splice.call(o,u,1),l&&(On(e),0==i.g[n].length&&(delete i.g[n],i.h--))}}function Kt(i,e,n,o){for(var u=0;u<i.length;++u){var l=i[u];if(!l.fa&&l.listener==e&&l.capture==!!n&&l.la==o)return u}return-1}nr.prototype.add=function(i,e,n,o,u){var l=i.toString();(i=this.g[l])||(i=this.g[l]=[],this.h++);var f=Kt(i,e,o,u);return-1<f?(e=i[f],n||(e.ia=!1)):((e=new yn(e,this.src,l,!!o,u)).ia=n,i.push(e)),e};var zt="closure_lm_"+(1e6*Math.random()|0),wn={};function kn(i,e,n,o,u){if(o&&o.once)return Wn(i,e,n,o,u);if(Array.isArray(e)){for(var l=0;l<e.length;l++)kn(i,e[l],n,o,u);return null}return n=Ur(n),i&&i[pn]?i.O(e,n,me(o)?!!o.capture:!!o,u):dn(i,e,n,!1,o,u)}function dn(i,e,n,o,u,l){if(!e)throw Error("Invalid event type");var f=me(u)?!!u.capture:!!u,w=rr(i);if(w||(i[zt]=w=new nr(i)),(n=w.add(e,n,o,f,l)).proxy)return n;if(o=function Xt(){const e=Zt;return function i(n){return e.call(i.src,i.listener,n)}}(),n.proxy=o,o.src=i,o.listener=n,i.addEventListener)ft||(u=f),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(Zr(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return n}function Wn(i,e,n,o,u){if(Array.isArray(e)){for(var l=0;l<e.length;l++)Wn(i,e[l],n,o,u);return null}return n=Ur(n),i&&i[pn]?i.P(e,n,me(o)?!!o.capture:!!o,u):dn(i,e,n,!0,o,u)}function Kr(i,e,n,o,u){if(Array.isArray(e))for(var l=0;l<e.length;l++)Kr(i,e[l],n,o,u);else o=me(o)?!!o.capture:!!o,n=Ur(n),i&&i[pn]?(i=i.i,(e=String(e).toString())in i.g&&-1<(n=Kt(l=i.g[e],n,o,u))&&(On(l[n]),Array.prototype.splice.call(l,n,1),0==l.length&&(delete i.g[e],i.h--))):i&&(i=rr(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Kt(e,n,o,u)),(n=-1<i?e[i]:null)&&xt(n))}function xt(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[pn])jt(e.i,i);else{var n=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(n,o,i.capture):e.detachEvent?e.detachEvent(Zr(n),o):e.addListener&&e.removeListener&&e.removeListener(o),(n=rr(e))?(jt(n,i),0==n.h&&(n.src=null,e[zt]=null)):On(i)}}}function Zr(i){return i in wn?wn[i]:wn[i]="on"+i}function Zt(i,e){if(i.fa)i=!0;else{e=new Ut(e,this);var n=i.listener,o=i.la||i.src;i.ia&&xt(i),i=n.call(o,e)}return i}function rr(i){return(i=i[zt])instanceof nr?i:null}var Cr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ur(i){return"function"==typeof i?i:(i[Cr]||(i[Cr]=function(e){return i.handleEvent(e)}),i[Cr])}function Rn(){de.call(this),this.i=new nr(this),this.S=this,this.J=null}function He(i,e){var n,o=i.J;if(o)for(n=[];o;o=o.J)n.push(o);if(i=i.S,o=e.type||e,"string"==typeof e)e=new he(e,i);else if(e instanceof he)e.target=e.target||i;else{var u=e;vr(e=new he(o,i),u)}if(u=!0,n)for(var l=n.length-1;0<=l;l--){var f=e.g=n[l];u=Z(f,o,!0,e)&&u}if(u=Z(f=e.g=i,o,!0,e)&&u,u=Z(f,o,!1,e)&&u,n)for(l=0;l<n.length;l++)u=Z(f=e.g=n[l],o,!1,e)&&u}function Z(i,e,n,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,l=0;l<e.length;++l){var f=e[l];if(f&&!f.fa&&f.capture==n){var w=f.listener,S=f.la||f.src;f.ia&&jt(i.i,f),u=!1!==w.call(S,o)&&u}}return u&&!o.defaultPrevented}Ie(Rn,de),Rn.prototype[pn]=!0,Rn.prototype.removeEventListener=function(i,e,n,o){Kr(this,i,e,n,o)},Rn.prototype.N=function(){if(Rn.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var n=i.g[e],o=0;o<n.length;o++)On(n[o]);delete i.g[e],i.h--}}this.J=null},Rn.prototype.O=function(i,e,n,o){return this.i.add(String(i),e,!1,n,o)},Rn.prototype.P=function(i,e,n,o){return this.i.add(String(i),e,!0,n,o)};var se=Q.JSON.stringify;function lt(){var i=M;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var ir=new class Le{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Pn,i=>i.reset());class Pn{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function ae(i){var e=1;i=i.split(":");const n=[];for(;0<e&&i.length;)n.push(i.shift()),e--;return i.length&&n.push(i.join(":")),n}function G(i){Q.setTimeout(()=>{throw i},0)}let O,P=!1,M=new class sn{constructor(){this.h=this.g=null}add(e,n){const o=ir.get();o.set(e,n),this.h?this.h.next=o:this.g=o,this.h=o}},J=()=>{const i=Q.Promise.resolve(void 0);O=()=>{i.then(De)}};var De=()=>{for(var i;i=lt();){try{i.h.call(i.g)}catch(n){G(n)}var e=ir;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}P=!1};function We(i,e){Rn.call(this),this.h=i||1,this.g=e||Q,this.j=Ge(this.qb,this),this.l=Date.now()}function it(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function yt(i,e,n){if("function"==typeof i)n&&(i=Ge(i,n));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Ge(i.handleEvent,i)}return 2147483647<Number(e)?-1:Q.setTimeout(i,e||0)}function Ct(i){i.g=yt(()=>{i.g=null,i.i&&(i.i=!1,Ct(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Ie(We,Rn),(oe=We.prototype).ga=!1,oe.T=null,oe.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),He(this,"tick"),this.ga&&(it(this),this.start()))}},oe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},oe.N=function(){We.$.N.call(this),it(this),delete this.g};class Vt extends de{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ct(this)}N(){super.N(),this.g&&(Q.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function en(i){de.call(this),this.h=i,this.g={}}Ie(en,de);var Ht=[];function ar(i,e,n,o){Array.isArray(n)||(n&&(Ht[0]=n.toString()),n=Ht);for(var u=0;u<n.length;u++){var l=kn(e,n[u],o||i.handleEvent,!1,i.h||i);if(!l)break;i.g[l.key]=l}}function ai(i){on(i.g,function(e,n){this.g.hasOwnProperty(n)&&xt(e)},i),i.g={}}function Be(){this.g=!0}function Pt(i,e,n,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function St(i,e){if(!i.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(i=0;i<n.length;i++)if(Array.isArray(n[i])){var o=n[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var l=u[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var f=1;f<u.length;f++)u[f]=""}}}return se(n)}catch{return e}}(i,n)+(o?" "+o:"")})}en.prototype.N=function(){en.$.N.call(this),ai(this)},en.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Be.prototype.Ea=function(){this.g=!1},Be.prototype.info=function(){};var gn={},Er=null;function qn(){return Er=Er||new Rn}function Si(i){he.call(this,gn.Ta,i)}function Ir(i){const e=qn();He(e,new Si(e))}function Ii(i,e){he.call(this,gn.STAT_EVENT,i),this.stat=e}function Mr(i){const e=qn();He(e,new Ii(e,i))}function Ss(i,e){he.call(this,gn.Ua,i),this.size=e}function Vn(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return Q.setTimeout(function(){i()},e)}gn.Ta="serverreachability",Ie(Si,he),gn.STAT_EVENT="statevent",Ie(Ii,he),gn.Ua="timingevent",Ie(Ss,he);var as={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ao={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Hr(){}function bs(){}Hr.prototype.h=null;var qi,ei={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function us(){he.call(this,"d")}function Wi(){he.call(this,"c")}function gr(){}function bi(i,e,n,o){this.l=i,this.j=e,this.m=n,this.W=o||1,this.U=new en(this),this.P=ha,this.V=new We(i=pe?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Rs}function Rs(){this.i=null,this.g="",this.h=!1}Ie(us,he),Ie(Wi,he),Ie(gr,Hr),gr.prototype.g=function(){return new XMLHttpRequest},gr.prototype.i=function(){return{}},qi=new gr;var ha=45e3,Ui={},Bo={};function jo(i,e,n){i.L=1,i.v=Zi(ti(e)),i.s=n,i.S=!0,uo(i,null)}function uo(i,e){i.G=Date.now(),Ps(i),i.A=ti(i.v);var n=i.A,o=i.W;Array.isArray(o)||(o=[String(o)]),nn(n.i,"t",o),i.C=0,n=i.l.J,i.h=new Rs,i.g=mi(i.l,n?e:null,!i.s),0<i.O&&(i.M=new Vt(Ge(i.Pa,i,i.g),i.O)),ar(i.U,i.g,"readystatechange",i.nb),e=i.I?In(i.I):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.A,i.u,i.s,e)):(i.u="GET",i.g.ha(i.A,i.u,null,e)),Ir(),function we(i,e,n,o,u,l){i.info(function(){if(i.g)if(l)for(var f="",w=l.split("&"),S=0;S<w.length;S++){var k=w[S].split("=");if(1<k.length){var $=k[0];k=k[1];var X=$.split("_");f=2<=X.length&&"type"==X[1]?f+($+"=")+k+"&":f+($+"=redacted&")}}else f=null;else f=l;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+n+"\n"+f})}(i.j,i.u,i.A,i.m,i.W,i.s)}function fa(i){return!!i.g&&"GET"==i.u&&2!=i.L&&i.l.Ha}function Ri(i,e,n){let u,o=!0;for(;!i.J&&i.C<n.length;){if(u=pa(i,n),u==Bo){4==e&&(i.o=4,Mr(14),o=!1),Pt(i.j,i.m,null,"[Incomplete Response]");break}if(u==Ui){i.o=4,Mr(15),Pt(i.j,i.m,n,"[Invalid Chunk]"),o=!1;break}Pt(i.j,i.m,u,null),Mi(i,u)}fa(i)&&u!=Bo&&u!=Ui&&(i.h.g="",i.C=0),4!=e||0!=n.length||i.h.h||(i.o=1,Mr(16),o=!1),i.i=i.i&&o,o?0<n.length&&!i.ba&&(i.ba=!0,(e=i.l).g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ji(e),e.M=!0,Mr(11))):(Pt(i.j,i.m,n,"[Invalid Chunked Response]"),Pi(i),Ms(i))}function pa(i,e){var n=i.C,o=e.indexOf("\n",n);return-1==o?Bo:(n=Number(e.substring(n,o)),isNaN(n)?Ui:(o+=1)+n>e.length?Bo:(e=e.slice(o,o+n),i.C=o+n,e))}function Ps(i){i.Y=Date.now()+i.P,Ki(i,i.P)}function Ki(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Vn(Ge(i.lb,i),e)}function cs(i){i.B&&(Q.clearTimeout(i.B),i.B=null)}function Ms(i){0==i.l.H||i.J||ci(i.l,i)}function Pi(i){cs(i);var e=i.M;e&&"function"==typeof e.sa&&e.sa(),i.M=null,it(i.V),ai(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function Mi(i,e){try{var n=i.l;if(0!=n.H&&(n.g==i||gi(n.i,i)))if(!i.K&&gi(n.i,i)&&3==n.H){try{var o=n.Ja.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<i.G))break e;ui(n),V(n)}Us(n),Mr(18)}}else n.Fa=u[1],0<n.Fa-n.V&&37500>u[2]&&n.G&&0==n.A&&!n.v&&(n.v=Vn(Ge(n.ib,n),6e3));if(1>=ri(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else eo(n,11)}else if((i.K||n.g==i)&&ui(n),!Tt(e))for(u=n.Ja.g.parse(e),e=0;e<u.length;e++){let k=u[e];if(n.V=k[0],k=k[1],2==n.H)if("c"==k[0]){n.K=k[1],n.pa=k[2];const $=k[3];null!=$&&(n.ra=$,n.l.info("VER="+n.ra));const X=k[4];null!=X&&(n.Ga=X,n.l.info("SVER="+n.Ga));const fe=k[5];null!=fe&&"number"==typeof fe&&0<fe&&(n.L=o=1.5*fe,n.l.info("backChannelRequestTimeoutMs_="+o)),o=n;const Oe=i.g;if(Oe){const gt=Oe.g?Oe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gt){var l=o.i;l.g||-1==gt.indexOf("spdy")&&-1==gt.indexOf("quic")&&-1==gt.indexOf("h2")||(l.j=l.l,l.g=new Set,l.h&&(Eo(l,l.h),l.h=null))}if(o.F){const Dt=Oe.g?Oe.g.getResponseHeader("X-HTTP-Session-Id"):null;Dt&&(o.Da=Dt,Un(o.I,o.F,Dt))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-i.G,n.l.info("Handshake RTT: "+n.S+"ms"));var f=i;if((o=n).wa=Bs(o,o.J?o.pa:null,o.Y),f.K){Yi(o.i,f);var w=f,S=o.L;S&&w.setTimeout(S),w.B&&(cs(w),Ps(w)),o.g=f}else oi(o);0<n.j.length&&b(n)}else"stop"!=k[0]&&"close"!=k[0]||eo(n,7);else 3==n.H&&("stop"==k[0]||"close"==k[0]?"stop"==k[0]?eo(n,7):Do(n):"noop"!=k[0]&&n.h&&n.h.Aa(k),n.A=0)}Ir()}catch{}}function ms(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(re(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var n=function xs(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(re(i)||"string"==typeof i){var e=[];i=i.length;for(var n=0;n<i;n++)e.push(n);return e}e=[],n=0;for(const o in i)e[n++]=o;return e}}}(i),o=function co(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(re(i)){for(var e=[],n=i.length,o=0;o<n;o++)e.push(i[o]);return e}for(o in e=[],n=0,i)e[n++]=i[o];return e}(i),u=o.length,l=0;l<u;l++)e.call(void 0,o[l],n&&n[l],i)}(oe=bi.prototype).setTimeout=function(i){this.P=i},oe.nb=function(i){i=i.target;const e=this.M;e&&3==Mt(i)?e.l():this.Pa(i)},oe.Pa=function(i){try{if(i==this.g)e:{const $=Mt(this.g);var e=this.g.Ia();if(this.g.da(),!(3>$)&&(3!=$||pe||this.g&&(this.h.h||this.g.ja()||Kn(this.g)))){this.J||4!=$||7==e||Ir(),cs(this);var n=this.g.da();this.ca=n;t:if(fa(this)){var o=Kn(this.g);i="";var u=o.length,l=4==Mt(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Pi(this),Ms(this);var f="";break t}this.h.i=new Q.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:l&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,f=this.h.g}else f=this.g.ja();if(this.i=200==n,function nt(i,e,n,o,u,l,f){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+n+"\n"+l+" "+f})}(this.j,this.u,this.A,this.m,this.W,$,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var w,S=this.g;if((w=S.g?S.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Tt(w)){var k=w;break t}}k=null}if(!(n=k)){this.i=!1,this.o=3,Mr(12),Pi(this),Ms(this);break e}Pt(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mi(this,n)}this.S?(Ri(this,$,f),pe&&this.i&&3==$&&(ar(this.U,this.V,"tick",this.mb),this.V.start())):(Pt(this.j,this.m,f,null),Mi(this,f)),4==$&&Pi(this),this.i&&!this.J&&(4==$?ci(this.l,this):(this.i=!1,Ps(this)))}else(function Dr(i){const e={};i=(i.g&&2<=Mt(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let o=0;o<i.length;o++){if(Tt(i[o]))continue;var n=ae(i[o]);const u=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const l=e[u]||[];e[u]=l,l.push(n)}!function Xn(i,e){for(const n in i)e.call(void 0,i[n],n,i)}(e,function(o){return o.join(", ")})})(this.g),400==n&&0<f.indexOf("Unknown SID")?(this.o=3,Mr(12)):(this.o=0,Mr(13)),Pi(this),Ms(this)}}}catch{}},oe.mb=function(){if(this.g){var i=Mt(this.g),e=this.g.ja();this.C<e.length&&(cs(this),Ri(this,i,e),this.i&&4!=i&&Ps(this))}},oe.cancel=function(){this.J=!0,Pi(this)},oe.lb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function Wt(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Ir(),Mr(17)),Pi(this),this.o=2,Ms(this)):Ki(this,this.Y-i)};var un=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ur(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof ur){this.h=i.h,xr(this,i.j),this.s=i.s,this.g=i.g,Bi(this,i.m),this.l=i.l;var e=i.i,n=new pi;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),_s(this,n),this.o=i.o}else i&&(e=String(i).match(un))?(this.h=!1,xr(this,e[1]||"",!0),this.s=ls(e[2]||""),this.g=ls(e[3]||"",!0),Bi(this,e[4]),this.l=ls(e[5]||"",!0),_s(this,e[6]||"",!0),this.o=ls(e[7]||"")):(this.h=!1,this.i=new pi(null,this.h))}function ti(i){return new ur(i)}function xr(i,e,n){i.j=n?ls(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Bi(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function _s(i,e,n){e instanceof pi?(i.i=e,function Ns(i,e){e&&!i.j&&(Ln(i),i.i=null,i.g.forEach(function(n,o){var u=o.toLowerCase();o!=u&&(mr(this,o),nn(this,u,n))},i)),i.j=e}(i.i,i.h)):(n||(e=Bn(e,xi)),i.i=new pi(e,i.h))}function Un(i,e,n){i.i.set(e,n)}function Zi(i){return Un(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function ls(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Bn(i,e,n){return"string"==typeof i?(i=encodeURI(i).replace(e,vt),n&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function vt(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}ur.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Bn(e,tn,!0),":");var n=this.g;return(n||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Bn(e,tn,!0),"@"),i.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&i.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&i.push("/"),i.push(Bn(n,"/"==n.charAt(0)?zr:Fn,!0))),(n=this.i.toString())&&i.push("?",n),(n=this.o)&&i.push("#",Bn(n,er)),i.join("")};var tn=/[#\/\?@]/g,Fn=/[#\?:]/g,zr=/[#\?]/g,xi=/[#\?@]/g,er=/#/g;function pi(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Ln(i){i.g||(i.g=new Map,i.h=0,i.i&&function lr(i,e){if(i){i=i.split("&");for(var n=0;n<i.length;n++){var o=i[n].indexOf("="),u=null;if(0<=o){var l=i[n].substring(0,o);u=i[n].substring(o+1)}else l=i[n];e(l,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,n){i.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function mr(i,e){Ln(i),e=ni(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function ds(i,e){return Ln(i),e=ni(i,e),i.g.has(e)}function nn(i,e,n){mr(i,e),0<n.length&&(i.i=null,i.g.set(ni(i,e),ke(n)),i.h+=n.length)}function ni(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function dr(i){this.l=i||Qs,i=Q.PerformanceNavigationTiming?0<(i=Q.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(Q.g&&Q.g.Ka&&Q.g.Ka()&&Q.g.Ka().dc),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(oe=pi.prototype).add=function(i,e){Ln(this),this.i=null,i=ni(this,i);var n=this.g.get(i);return n||this.g.set(i,n=[]),n.push(e),this.h+=1,this},oe.forEach=function(i,e){Ln(this),this.g.forEach(function(n,o){n.forEach(function(u){i.call(e,u,o,this)},this)},this)},oe.ta=function(){Ln(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let o=0;o<e.length;o++){const u=i[o];for(let l=0;l<u.length;l++)n.push(e[o])}return n},oe.Z=function(i){Ln(this);let e=[];if("string"==typeof i)ds(this,i)&&(e=e.concat(this.g.get(ni(this,i))));else{i=Array.from(this.g.values());for(let n=0;n<i.length;n++)e=e.concat(i[n])}return e},oe.set=function(i,e){return Ln(this),this.i=null,ds(this,i=ni(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},oe.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},oe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var o=e[n];const l=encodeURIComponent(String(o)),f=this.Z(o);for(o=0;o<f.length;o++){var u=l;""!==f[o]&&(u+="="+encodeURIComponent(String(f[o]))),i.push(u)}}return this.i=i.join("&")};var Qs=10;function ys(i){return!!i.h||!!i.g&&i.g.size>=i.j}function ri(i){return i.h?1:i.g?i.g.size:0}function gi(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function Eo(i,e){i.g?i.g.add(e):i.h=e}function Yi(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Br(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const n of i.g.values())e=e.concat(n.F);return e}return ke(i.i)}dr.prototype.cancel=function(){if(this.i=Br(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}};var ks=class{stringify(i){return Q.JSON.stringify(i,void 0)}parse(i){return Q.JSON.parse(i,void 0)}};function Vs(){this.g=new ks}function cn(i,e,n){const o=n||"";try{ms(i,function(u,l){let f=u;me(u)&&(f=se(u)),e.push(o+l+"="+encodeURIComponent(f))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function Di(i,e,n,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch{}}function Nr(i){this.l=i.ec||null,this.j=i.ob||!1}function ii(i,e){Rn.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=ji,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ie(Nr,Hr),Nr.prototype.g=function(){return new ii(this.l,this.j)},Nr.prototype.i=function(i){return function(){return i}}({}),Ie(ii,Rn);var ji=0;function Ls(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function si(i){i.readyState=4,i.l=null,i.j=null,i.A=null,br(i)}function br(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(oe=ii.prototype).open=function(i,e){if(this.readyState!=ji)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,br(this)},oe.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||Q).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},oe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,si(this)),this.readyState=ji},oe.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,br(this)),this.g&&(this.readyState=3,br(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Q.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ls(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},oe.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?si(this):br(this),3==this.readyState&&Ls(this)}},oe.Za=function(i){this.g&&(this.response=this.responseText=i,si(this))},oe.Ya=function(i){this.g&&(this.response=i,si(this))},oe.ka=function(){this.g&&si(this)},oe.setRequestHeader=function(i,e){this.v.append(i,e)},oe.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},oe.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var n=e.next();!n.done;)i.push((n=n.value)[0]+": "+n[1]),n=e.next();return i.join("\r\n")},Object.defineProperty(ii.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var lo=Q.JSON.parse;function Tn(i){Rn.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=jr,this.L=this.M=!1}Ie(Tn,Rn);var jr="",Js=/^https?$/i,_r=["POST","PUT"];function Ni(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Xs(i),Qi(i)}function Xs(i){i.F||(i.F=!0,He(i,"complete"),He(i,"error"))}function $i(i){if(i.h&&typeof Se<"u"&&(!i.C[1]||4!=Mt(i)||2!=i.da()))if(i.v&&4==Mt(i))yt(i.La,0,i);else if(He(i,"readystatechange"),4==Mt(i)){i.h=!1;try{const f=i.da();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var o;if(o=0===f){var u=String(i.I).match(un)[1]||null;!u&&Q.self&&Q.self.location&&(u=Q.self.location.protocol.slice(0,-1)),o=!Js.test(u?u.toLowerCase():"")}n=o}if(n)He(i,"complete"),He(i,"success");else{i.m=6;try{var l=2<Mt(i)?i.g.statusText:""}catch{l=""}i.j=l+" ["+i.da()+"]",Xs(i)}}finally{Qi(i)}}}function Qi(i,e){if(i.g){ga(i);const n=i.g,o=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||He(i,"ready");try{n.onreadystatechange=o}catch{}}}function ga(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(Q.clearTimeout(i.A),i.A=null)}function Mt(i){return i.g?i.g.readyState:0}function Kn(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case jr:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function Or(i){let e="";return on(i,function(n,o){e+=o,e+=":",e+=n,e+="\r\n"}),e}function Io(i,e,n){e:{for(o in n){var o=!1;break e}o=!0}o||(n=Or(n),"string"==typeof i?null!=n&&encodeURIComponent(String(n)):Un(i,e,n))}function hr(i,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[i]||e}function Wa(i){this.Ga=0,this.j=[],this.l=new Be,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=hr("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=hr("baseRetryDelayMs",5e3,i),this.hb=hr("retryDelaySeedMs",1e4,i),this.eb=hr("forwardChannelMaxRetries",2,i),this.xa=hr("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.useFetchStreams||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new dr(i&&i.concurrentRequestLimit),this.Ja=new Vs,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Do(i){if(L(i),3==i.H){var e=i.W++,n=ti(i.I);if(Un(n,"SID",i.K),Un(n,"RID",e),Un(n,"TYPE","terminate"),bt(i,n),(e=new bi(i,i.l,e)).L=2,e.v=Zi(ti(n)),n=!1,Q.navigator&&Q.navigator.sendBeacon)try{n=Q.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&Q.Image&&((new Image).src=e.v,n=!0),n||(e.g=mi(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Ps(e)}wr(i)}function V(i){i.g&&(Ji(i),i.g.cancel(),i.g=null)}function L(i){V(i),i.u&&(Q.clearTimeout(i.u),i.u=null),ui(i),i.i.cancel(),i.m&&("number"==typeof i.m&&Q.clearTimeout(i.m),i.m=null)}function b(i){if(!ys(i.i)&&!i.m){i.m=!0;var e=i.Na;O||J(),P||(O(),P=!0),M.add(e,i),i.C=0}}function ce(i,e){var n;n=e?e.m:i.W++;const o=ti(i.I);Un(o,"SID",i.K),Un(o,"RID",n),Un(o,"AID",i.V),bt(i,o),i.o&&i.s&&Io(o,i.o,i.s),n=new bi(i,i.l,n,i.C+1),null===i.o&&(n.I=i.s),e&&(i.j=e.F.concat(i.j)),e=an(i,n,1e3),n.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),Eo(i.i,n),jo(n,o,e)}function bt(i,e){i.na&&on(i.na,function(n,o){Un(e,o,n)}),i.h&&ms({},function(n,o){Un(e,o,n)})}function an(i,e,n){n=Math.min(i.j.length,n);var o=i.h?Ge(i.h.Va,i.h,i):null;e:{var u=i.j;let l=-1;for(;;){const f=["count="+n];-1==l?0<n?(l=u[0].g,f.push("ofs="+l)):l=0:f.push("ofs="+l);let w=!0;for(let S=0;S<n;S++){let k=u[S].g;const $=u[S].map;if(k-=l,0>k)l=Math.max(0,u[S].g-100),w=!1;else try{cn($,f,"req"+k+"_")}catch{o&&o($)}}if(w){o=f.join("&");break e}}}return i=i.j.splice(0,n),e.F=i,o}function oi(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;O||J(),P||(O(),P=!0),M.add(e,i),i.A=0}}function Us(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=Vn(Ge(i.Ma,i),Es(i,i.A)),i.A++,0))}function Ji(i){null!=i.B&&(Q.clearTimeout(i.B),i.B=null)}function wo(i){i.g=new bi(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=ti(i.wa);Un(e,"RID","rpc"),Un(e,"SID",i.K),Un(e,"AID",i.V),Un(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&Un(e,"TO",i.qa),Un(e,"TYPE","xmlhttp"),bt(i,e),i.o&&i.s&&Io(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var n=i.g;i=i.pa,n.L=1,n.v=Zi(ti(e)),n.s=null,n.S=!0,uo(n,i)}function ui(i){null!=i.v&&(Q.clearTimeout(i.v),i.v=null)}function ci(i,e){var n=null;if(i.g==e){ui(i),Ji(i),i.g=null;var o=2}else{if(!gi(i.i,e))return;n=e.F,Yi(i.i,e),o=1}if(0!=i.H)if(e.i)if(1==o){n=e.s?e.s.length:0,e=Date.now()-e.G;var u=i.C;He(o=qn(),new Ss(o,n)),b(i)}else oi(i);else if(3==(u=e.o)||0==u&&0<e.ca||!(1==o&&function q(i,e){return!(ri(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=e.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=Vn(Ge(i.Na,i,e),Es(i,i.C)),i.C++,0)))}(i,e)||2==o&&Us(i)))switch(n&&0<n.length&&(e=i.i,e.i=e.i.concat(n)),u){case 1:eo(i,5);break;case 4:eo(i,10);break;case 3:eo(i,6);break;default:eo(i,2)}}function Es(i,e){let n=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(n*=2),n*e}function eo(i,e){if(i.l.info("Error code "+e),2==e){var n=null;i.h&&(n=null);var o=Ge(i.pb,i);n||(n=new ur("//www.google.com/images/cleardot.gif"),Q.location&&"http"==Q.location.protocol||xr(n,"https"),Zi(n)),function Fs(i,e){const n=new Be;if(Q.Image){const o=new Image;o.onload=Rt(Di,n,o,"TestLoadImage: loaded",!0,e),o.onerror=Rt(Di,n,o,"TestLoadImage: error",!1,e),o.onabort=Rt(Di,n,o,"TestLoadImage: abort",!1,e),o.ontimeout=Rt(Di,n,o,"TestLoadImage: timeout",!1,e),Q.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(n.toString(),o)}else Mr(2);i.H=0,i.h&&i.h.za(e),wr(i),L(i)}function wr(i){if(i.H=0,i.ma=[],i.h){const e=Br(i.i);(0!=e.length||0!=i.j.length)&&(qe(i.ma,e),qe(i.ma,i.j),i.i.i.length=0,ke(i.j),i.j.length=0),i.h.ya()}}function Bs(i,e,n){var o=n instanceof ur?ti(n):new ur(n);if(""!=o.g)e&&(o.g=e+"."+o.g),Bi(o,o.m);else{var u=Q.location;o=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var l=new ur(null);o&&xr(l,o),e&&(l.g=e),u&&Bi(l,u),n&&(l.l=n),o=l}return e=i.Da,(n=i.F)&&e&&Un(o,n,e),Un(o,"VER",i.ra),bt(i,o),o}function mi(i,e,n){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Tn(n&&i.Ha&&!i.va?new Nr({ob:!0}):i.va)).Oa(i.J),e}function Au(){}function To(){if(pt&&!(10<=Number(fn)))throw Error("Environmental error: no available transport.")}function _i(i,e){Rn.call(this),this.g=new Wa(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!Tt(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Tt(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new js(this)}function Co(i){us.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const n in e){i=n;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function $o(){Wi.call(this),this.status=1}function js(i){this.g=i}function Oi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Ka(i,e,n){n||(n=0);var o=Array(16);if("string"==typeof e)for(var u=0;16>u;++u)o[u]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(u=0;16>u;++u)o[u]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var l=i.g[3],f=(e=i.g[0])+(l^(n=i.g[1])&((u=i.g[2])^l))+o[0]+3614090360&4294967295;f=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=n+(f<<7&4294967295|f>>>25))+((f=l+(u^e&(n^u))+o[1]+3905402710&4294967295)<<12&4294967295|f>>>20))+((f=u+(n^l&(e^n))+o[2]+606105819&4294967295)<<17&4294967295|f>>>15))+((f=n+(e^u&(l^e))+o[3]+3250441966&4294967295)<<22&4294967295|f>>>10))+((f=e+(l^n&(u^l))+o[4]+4118548399&4294967295)<<7&4294967295|f>>>25))+((f=l+(u^e&(n^u))+o[5]+1200080426&4294967295)<<12&4294967295|f>>>20))+((f=u+(n^l&(e^n))+o[6]+2821735955&4294967295)<<17&4294967295|f>>>15))+((f=n+(e^u&(l^e))+o[7]+4249261313&4294967295)<<22&4294967295|f>>>10))+((f=e+(l^n&(u^l))+o[8]+1770035416&4294967295)<<7&4294967295|f>>>25))+((f=l+(u^e&(n^u))+o[9]+2336552879&4294967295)<<12&4294967295|f>>>20))+((f=u+(n^l&(e^n))+o[10]+4294925233&4294967295)<<17&4294967295|f>>>15))+((f=n+(e^u&(l^e))+o[11]+2304563134&4294967295)<<22&4294967295|f>>>10))+((f=e+(l^n&(u^l))+o[12]+1804603682&4294967295)<<7&4294967295|f>>>25))+((f=l+(u^e&(n^u))+o[13]+4254626195&4294967295)<<12&4294967295|f>>>20))+((f=u+(n^l&(e^n))+o[14]+2792965006&4294967295)<<17&4294967295|f>>>15))+((f=n+(e^u&(l^e))+o[15]+1236535329&4294967295)<<22&4294967295|f>>>10))+((f=e+(u^l&(n^u))+o[1]+4129170786&4294967295)<<5&4294967295|f>>>27))+((f=l+(n^u&(e^n))+o[6]+3225465664&4294967295)<<9&4294967295|f>>>23))+((f=u+(e^n&(l^e))+o[11]+643717713&4294967295)<<14&4294967295|f>>>18))+((f=n+(l^e&(u^l))+o[0]+3921069994&4294967295)<<20&4294967295|f>>>12))+((f=e+(u^l&(n^u))+o[5]+3593408605&4294967295)<<5&4294967295|f>>>27))+((f=l+(n^u&(e^n))+o[10]+38016083&4294967295)<<9&4294967295|f>>>23))+((f=u+(e^n&(l^e))+o[15]+3634488961&4294967295)<<14&4294967295|f>>>18))+((f=n+(l^e&(u^l))+o[4]+3889429448&4294967295)<<20&4294967295|f>>>12))+((f=e+(u^l&(n^u))+o[9]+568446438&4294967295)<<5&4294967295|f>>>27))+((f=l+(n^u&(e^n))+o[14]+3275163606&4294967295)<<9&4294967295|f>>>23))+((f=u+(e^n&(l^e))+o[3]+4107603335&4294967295)<<14&4294967295|f>>>18))+((f=n+(l^e&(u^l))+o[8]+1163531501&4294967295)<<20&4294967295|f>>>12))+((f=e+(u^l&(n^u))+o[13]+2850285829&4294967295)<<5&4294967295|f>>>27))+((f=l+(n^u&(e^n))+o[2]+4243563512&4294967295)<<9&4294967295|f>>>23))+((f=u+(e^n&(l^e))+o[7]+1735328473&4294967295)<<14&4294967295|f>>>18))+((f=n+(l^e&(u^l))+o[12]+2368359562&4294967295)<<20&4294967295|f>>>12))+((f=e+(n^u^l)+o[5]+4294588738&4294967295)<<4&4294967295|f>>>28))+((f=l+(e^n^u)+o[8]+2272392833&4294967295)<<11&4294967295|f>>>21))+((f=u+(l^e^n)+o[11]+1839030562&4294967295)<<16&4294967295|f>>>16))+((f=n+(u^l^e)+o[14]+4259657740&4294967295)<<23&4294967295|f>>>9))+((f=e+(n^u^l)+o[1]+2763975236&4294967295)<<4&4294967295|f>>>28))+((f=l+(e^n^u)+o[4]+1272893353&4294967295)<<11&4294967295|f>>>21))+((f=u+(l^e^n)+o[7]+4139469664&4294967295)<<16&4294967295|f>>>16))+((f=n+(u^l^e)+o[10]+3200236656&4294967295)<<23&4294967295|f>>>9))+((f=e+(n^u^l)+o[13]+681279174&4294967295)<<4&4294967295|f>>>28))+((f=l+(e^n^u)+o[0]+3936430074&4294967295)<<11&4294967295|f>>>21))+((f=u+(l^e^n)+o[3]+3572445317&4294967295)<<16&4294967295|f>>>16))+((f=n+(u^l^e)+o[6]+76029189&4294967295)<<23&4294967295|f>>>9))+((f=e+(n^u^l)+o[9]+3654602809&4294967295)<<4&4294967295|f>>>28))+((f=l+(e^n^u)+o[12]+3873151461&4294967295)<<11&4294967295|f>>>21))+((f=u+(l^e^n)+o[15]+530742520&4294967295)<<16&4294967295|f>>>16))+((f=n+(u^l^e)+o[2]+3299628645&4294967295)<<23&4294967295|f>>>9))+((f=e+(u^(n|~l))+o[0]+4096336452&4294967295)<<6&4294967295|f>>>26))+((f=l+(n^(e|~u))+o[7]+1126891415&4294967295)<<10&4294967295|f>>>22))+((f=u+(e^(l|~n))+o[14]+2878612391&4294967295)<<15&4294967295|f>>>17))+((f=n+(l^(u|~e))+o[5]+4237533241&4294967295)<<21&4294967295|f>>>11))+((f=e+(u^(n|~l))+o[12]+1700485571&4294967295)<<6&4294967295|f>>>26))+((f=l+(n^(e|~u))+o[3]+2399980690&4294967295)<<10&4294967295|f>>>22))+((f=u+(e^(l|~n))+o[10]+4293915773&4294967295)<<15&4294967295|f>>>17))+((f=n+(l^(u|~e))+o[1]+2240044497&4294967295)<<21&4294967295|f>>>11))+((f=e+(u^(n|~l))+o[8]+1873313359&4294967295)<<6&4294967295|f>>>26))+((f=l+(n^(e|~u))+o[15]+4264355552&4294967295)<<10&4294967295|f>>>22))+((f=u+(e^(l|~n))+o[6]+2734768916&4294967295)<<15&4294967295|f>>>17))+((f=n+(l^(u|~e))+o[13]+1309151649&4294967295)<<21&4294967295|f>>>11))+((l=(e=n+((f=e+(u^(n|~l))+o[4]+4149444226&4294967295)<<6&4294967295|f>>>26))+((f=l+(n^(e|~u))+o[11]+3174756917&4294967295)<<10&4294967295|f>>>22))^((u=l+((f=u+(e^(l|~n))+o[2]+718787259&4294967295)<<15&4294967295|f>>>17))|~e))+o[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(u+(f<<21&4294967295|f>>>11))&4294967295,i.g[2]=i.g[2]+u&4294967295,i.g[3]=i.g[3]+l&4294967295}function Zn(i,e){this.h=e;for(var n=[],o=!0,u=i.length-1;0<=u;u--){var l=0|i[u];o&&l==e||(n[u]=l,o=!1)}this.g=n}(oe=Tn.prototype).Oa=function(i){this.M=i},oe.ha=function(i,e,n,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():qi.g(),this.C=function Xr(i){return i.h||(i.h=i.i())}(this.u?this.u:qi),this.g.onreadystatechange=Ge(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(l){return void Ni(this,l)}if(i=n||"",n=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var u in o)n.set(u,o[u]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const l of o.keys())n.set(l,o.get(l))}o=Array.from(n.keys()).find(l=>"content-type"==l.toLowerCase()),u=Q.FormData&&i instanceof Q.FormData,!(0<=Te(_r,e))||o||u||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[l,f]of n)this.g.setRequestHeader(l,f);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ga(this),0<this.B&&((this.L=function vs(i){return pt&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ge(this.ua,this)):this.A=yt(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(l){Ni(this,l)}},oe.ua=function(){typeof Se<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,He(this,"timeout"),this.abort(8))},oe.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,He(this,"complete"),He(this,"abort"),Qi(this))},oe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Qi(this,!0)),Tn.$.N.call(this)},oe.La=function(){this.s||(this.G||this.v||this.l?$i(this):this.kb())},oe.kb=function(){$i(this)},oe.isActive=function(){return!!this.g},oe.da=function(){try{return 2<Mt(this)?this.g.status:-1}catch{return-1}},oe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},oe.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),lo(e)}},oe.Ia=function(){return this.m},oe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(oe=Wa.prototype).ra=8,oe.H=1,oe.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const u=new bi(this,this.l,i);let l=this.s;if(this.U&&(l?(l=In(l),vr(l,this.U)):l=this.U),null!==this.o||this.O||(u.I=l,l=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var o=this.j[n];if(void 0===(o="__data__"in o.map&&"string"==typeof(o=o.map.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=an(this,u,e),Un(n=ti(this.I),"RID",i),Un(n,"CVER",22),this.F&&Un(n,"X-HTTP-Session-Id",this.F),bt(this,n),l&&(this.O?e="headers="+encodeURIComponent(String(Or(l)))+"&"+e:this.o&&Io(n,this.o,l)),Eo(this.i,u),this.bb&&Un(n,"TYPE","init"),this.P?(Un(n,"$req",e),Un(n,"SID","null"),u.aa=!0,jo(u,n,null)):jo(u,n,e),this.H=2}}else 3==this.H&&(i?ce(this,i):0==this.j.length||ys(this.i)||ce(this))},oe.Ma=function(){if(this.u=null,wo(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=Vn(Ge(this.jb,this),i)}},oe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Mr(10),V(this),wo(this))},oe.ib=function(){null!=this.v&&(this.v=null,V(this),Us(this),Mr(19))},oe.pb=function(i){i?(this.l.info("Successfully pinged google.com"),Mr(2)):(this.l.info("Failed to ping google.com"),Mr(1))},oe.isActive=function(){return!!this.h&&this.h.isActive(this)},(oe=Au.prototype).Ba=function(){},oe.Aa=function(){},oe.za=function(){},oe.ya=function(){},oe.isActive=function(){return!0},oe.Va=function(){},To.prototype.g=function(i,e){return new _i(i,e)},Ie(_i,Rn),_i.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,n=this.h||void 0;Mr(0),i.Y=e,i.na=n||{},i.G=i.aa,i.I=Bs(i,null,i.Y),b(i)},_i.prototype.close=function(){Do(this.g)},_i.prototype.u=function(i){var e=this.g;if("string"==typeof i){var n={};n.__data__=i,i=n}else this.v&&((n={}).__data__=se(i),i=n);e.j.push(new class{constructor(i,e){this.g=i,this.map=e}}(e.fb++,i)),3==e.H&&b(e)},_i.prototype.N=function(){this.g.h=null,delete this.j,Do(this.g),delete this.g,_i.$.N.call(this)},Ie(Co,us),Ie($o,Wi),Ie(js,Au),js.prototype.Ba=function(){He(this.g,"a")},js.prototype.Aa=function(i){He(this.g,new Co(i))},js.prototype.za=function(i){He(this.g,new $o)},js.prototype.ya=function(){He(this.g,"b")},Ie(Oi,function qa(){this.blockSize=-1}),Oi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Oi.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var n=e-this.blockSize,o=this.m,u=this.h,l=0;l<e;){if(0==u)for(;l<=n;)Ka(this,i,l),l+=this.blockSize;if("string"==typeof i){for(;l<e;)if(o[u++]=i.charCodeAt(l++),u==this.blockSize){Ka(this,o),u=0;break}}else for(;l<e;)if(o[u++]=i[l++],u==this.blockSize){Ka(this,o),u=0;break}}this.h=u,this.i+=e},Oi.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var n=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&n,n/=256;for(this.j(i),i=Array(16),e=n=0;4>e;++e)for(var o=0;32>o;o+=8)i[n++]=this.g[e]>>>o&255;return i};var ma={};function ho(i){return-128<=i&&128>i?function zn(i,e){var n=ma;return Object.prototype.hasOwnProperty.call(n,i)?n[i]:n[i]=e(i)}(i,function(e){return new Zn([0|e],0>e?-1:0)}):new Zn([0|i],0>i?-1:0)}function ki(i){if(isNaN(i)||!isFinite(i))return Ho;if(0>i)return yi(ki(-i));for(var e=[],n=1,o=0;i>=n;o++)e[o]=i/n|0,n*=So;return new Zn(e,0)}var So=4294967296,Ho=ho(0),tc=ho(1),Za=ho(16777216);function fo(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function Vi(i){return-1==i.h}function yi(i){for(var e=i.g.length,n=[],o=0;o<e;o++)n[o]=~i.g[o];return new Zn(n,~i.h).add(tc)}function bo(i,e){return i.add(yi(e))}function zo(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function Ro(i,e){this.g=i,this.h=e}function Go(i,e){if(fo(e))throw Error("division by zero");if(fo(i))return new Ro(Ho,Ho);if(Vi(i))return e=Go(yi(i),e),new Ro(yi(e.g),yi(e.h));if(Vi(e))return e=Go(i,yi(e)),new Ro(yi(e.g),e.h);if(30<i.g.length){if(Vi(i)||Vi(e))throw Error("slowDivide_ only works with positive integers.");for(var n=tc,o=e;0>=o.X(i);)n=Su(n),o=Su(o);var u=to(n,1),l=to(o,1);for(o=to(o,2),n=to(n,2);!fo(o);){var f=l.add(o);0>=f.X(i)&&(u=u.add(n),l=f),o=to(o,1),n=to(n,1)}return e=bo(i,u.R(e)),new Ro(u,e)}for(u=Ho;0<=i.X(e);){for(n=Math.max(1,Math.floor(i.ea()/e.ea())),o=48>=(o=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,o-48),f=(l=ki(n)).R(e);Vi(f)||0<f.X(i);)f=(l=ki(n-=o)).R(e);fo(l)&&(l=tc),u=u.add(l),i=bo(i,f)}return new Ro(u,i)}function Su(i){for(var e=i.g.length+1,n=[],o=0;o<e;o++)n[o]=i.D(o)<<1|i.D(o-1)>>>31;return new Zn(n,i.h)}function to(i,e){var n=e>>5;e%=32;for(var o=i.g.length-n,u=[],l=0;l<o;l++)u[l]=0<e?i.D(l+n)>>>e|i.D(l+n+1)<<32-e:i.D(l+n);return new Zn(u,i.h)}(oe=Zn.prototype).ea=function(){if(Vi(this))return-yi(this).ea();for(var i=0,e=1,n=0;n<this.g.length;n++){var o=this.D(n);i+=(0<=o?o:So+o)*e,e*=So}return i},oe.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(fo(this))return"0";if(Vi(this))return"-"+yi(this).toString(i);for(var e=ki(Math.pow(i,6)),n=this,o="";;){var u=Go(n,e).g,l=((0<(n=bo(n,u.R(e))).g.length?n.g[0]:n.h)>>>0).toString(i);if(fo(n=u))return l+o;for(;6>l.length;)l="0"+l;o=l+o}},oe.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},oe.X=function(i){return Vi(i=bo(this,i))?-1:fo(i)?0:1},oe.abs=function(){return Vi(this)?yi(this):this},oe.add=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0,u=0;u<=e;u++){var l=o+(65535&this.D(u))+(65535&i.D(u)),f=(l>>>16)+(this.D(u)>>>16)+(i.D(u)>>>16);o=f>>>16,n[u]=(f&=65535)<<16|(l&=65535)}return new Zn(n,-2147483648&n[n.length-1]?-1:0)},oe.R=function(i){if(fo(this)||fo(i))return Ho;if(Vi(this))return Vi(i)?yi(this).R(yi(i)):yi(yi(this).R(i));if(Vi(i))return yi(this.R(yi(i)));if(0>this.X(Za)&&0>i.X(Za))return ki(this.ea()*i.ea());for(var e=this.g.length+i.g.length,n=[],o=0;o<2*e;o++)n[o]=0;for(o=0;o<this.g.length;o++)for(var u=0;u<i.g.length;u++){var l=this.D(o)>>>16,f=65535&this.D(o),w=i.D(u)>>>16,S=65535&i.D(u);n[2*o+2*u]+=f*S,zo(n,2*o+2*u),n[2*o+2*u+1]+=l*S,zo(n,2*o+2*u+1),n[2*o+2*u+1]+=f*w,zo(n,2*o+2*u+1),n[2*o+2*u+2]+=l*w,zo(n,2*o+2*u+2)}for(o=0;o<e;o++)n[o]=n[2*o+1]<<16|n[2*o];for(o=e;o<2*e;o++)n[o]=0;return new Zn(n,0)},oe.gb=function(i){return Go(this,i).h},oe.and=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)&i.D(o);return new Zn(n,this.h&i.h)},oe.or=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)|i.D(o);return new Zn(n,this.h|i.h)},oe.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)^i.D(o);return new Zn(n,this.h^i.h)},To.prototype.createWebChannel=To.prototype.g,_i.prototype.send=_i.prototype.u,_i.prototype.open=_i.prototype.m,_i.prototype.close=_i.prototype.close,as.NO_ERROR=0,as.TIMEOUT=8,as.HTTP_ERROR=6,ao.COMPLETE="complete",bs.EventType=ei,ei.OPEN="a",ei.CLOSE="b",ei.ERROR="c",ei.MESSAGE="d",Rn.prototype.listen=Rn.prototype.O,Tn.prototype.listenOnce=Tn.prototype.P,Tn.prototype.getLastError=Tn.prototype.Sa,Tn.prototype.getLastErrorCode=Tn.prototype.Ia,Tn.prototype.getStatus=Tn.prototype.da,Tn.prototype.getResponseJson=Tn.prototype.Wa,Tn.prototype.getResponseText=Tn.prototype.ja,Tn.prototype.send=Tn.prototype.ha,Tn.prototype.setWithCredentials=Tn.prototype.Oa,Oi.prototype.digest=Oi.prototype.l,Oi.prototype.reset=Oi.prototype.reset,Oi.prototype.update=Oi.prototype.j,Zn.prototype.add=Zn.prototype.add,Zn.prototype.multiply=Zn.prototype.R,Zn.prototype.modulo=Zn.prototype.gb,Zn.prototype.compare=Zn.prototype.X,Zn.prototype.toNumber=Zn.prototype.ea,Zn.prototype.toString=Zn.prototype.toString,Zn.prototype.getBits=Zn.prototype.D,Zn.fromNumber=ki,Zn.fromString=function Ao(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return yi(Ao(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=ki(Math.pow(e,8)),o=Ho,u=0;u<i.length;u+=8){var l=Math.min(8,i.length-u),f=parseInt(i.substring(u,u+l),e);8>l?(l=ki(Math.pow(e,l)),o=o.R(l).add(ki(f))):o=(o=o.R(n)).add(ki(f))}return o};var Ya=ge.createWebChannelTransport=function(){return new To},D=ge.getStatEventTarget=function(){return qn()},j=ge.ErrorCode=as,R=ge.EventType=ao,B=ge.Event=gn,ie=ge.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ve=ge.FetchXmlHttpFactory=Nr,Ke=ge.WebChannel=bs,Ft=ge.XhrIo=Tn,sr=ge.Md5=Oi,Yn=ge.Integer=Zn;const Qn="@firebase/firestore";class Yt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");let fr="10.5.2";const Mn=new ue.Yd("@firebase/firestore");function kr(){return Mn.logLevel}function no(i){Mn.setLogLevel(i)}function Je(i,...e){if(Mn.logLevel<=ue.in.DEBUG){const n=e.map($s);Mn.debug(`Firestore (${fr}): ${i}`,...n)}}function or(i,...e){if(Mn.logLevel<=ue.in.ERROR){const n=e.map($s);Mn.error(`Firestore (${fr}): ${i}`,...n)}}function yr(i,...e){if(Mn.logLevel<=ue.in.WARN){const n=e.map($s);Mn.warn(`Firestore (${fr}): ${i}`,...n)}}function $s(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function _t(i="Unexpected state"){const e=`FIRESTORE (${fr}) INTERNAL ASSERTION FAILED: `+i;throw or(e),new Error(e)}function Bt(i,e){i||_t()}function hs(i,e){i||_t()}function ot(i,e){return i}const je={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class et extends te.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class xn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class bu{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Yt.UNAUTHENTICATED))}shutdown(){}}class Qa{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Is{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var o=this;let u=this.i;const l=k=>this.i!==u?(u=this.i,n(k)):Promise.resolve();let f=new xn;this.o=()=>{this.i++,this.currentUser=this.u(),f.resolve(),f=new xn,e.enqueueRetryable(()=>l(this.currentUser))};const w=()=>{const k=f;e.enqueueRetryable((0,p.Z)(function*(){yield k.promise,yield l(o.currentUser)}))},S=k=>{Je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=k,this.auth.addAuthTokenListener(this.o),w()};this.t.onInit(k=>S(k)),setTimeout(()=>{if(!this.auth){const k=this.t.getImmediate({optional:!0});k?S(k):(Je("FirebaseAuthCredentialsProvider","Auth not yet detected"),f.resolve(),f=new xn)}},0),w()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(o=>this.i!==e?(Je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Bt("string"==typeof o.accessToken),new bu(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Bt(null===e||"string"==typeof e),new Yt(e)}}class Kd{constructor(e,n,o){this.l=e,this.h=n,this.P=o,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class rc{constructor(e,n,o){this.l=e,this.h=n,this.P=o}getToken(){return Promise.resolve(new Kd(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ic{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class po{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const o=l=>{null!=l.error&&Je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const f=l.token!==this.R;return this.R=l.token,Je("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>o(l))};const u=l=>{Je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>u(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?u(l):Je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Bt("string"==typeof n.token),this.R=n.token,new ic(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function go(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let o=0;o<i;o++)n[o]=Math.floor(256*Math.random());return n}class _a{static newId(){const n=62*Math.floor(256/62);let o="";for(;o.length<20;){const u=go(40);for(let l=0;l<u.length;++l)o.length<20&&u[l]<n&&(o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[l]%62))}return o}}function mn(i,e){return i<e?-1:i>e?1:0}function ya(i,e,n){return i.length===e.length&&i.every((o,u)=>n(o,e[u]))}function Vl(i){return i+"\0"}class Ot{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new et(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new et(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new et(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new et(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ot.fromMillis(Date.now())}static fromDate(e){return Ot.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*n));return new Ot(n,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?mn(this.nanoseconds,e.nanoseconds):mn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class qt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new qt(e)}static min(){return new qt(new Ot(0,0))}static max(){return new qt(new Ot(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Wo{constructor(e,n,o){void 0===n?n=0:n>e.length&&_t(),void 0===o?o=e.length-n:o>e.length-n&&_t(),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return 0===Wo.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Wo?e.forEach(o=>{n.push(o)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let u=0;u<o;u++){const l=e.get(u),f=n.get(u);if(l<f)return-1;if(l>f)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Jn extends Wo{construct(e,n,o){return new Jn(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new et(je.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter(u=>u.length>0))}return new Jn(n)}static emptyPath(){return new Jn([])}}const sc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vr extends Wo{construct(e,n,o){return new Vr(e,n,o)}static isValidIdentifier(e){return sc.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Vr(["__name__"])}static fromServerFormat(e){const n=[];let o="",u=0;const l=()=>{if(0===o.length)throw new et(je.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let f=!1;for(;u<e.length;){const w=e[u];if("\\"===w){if(u+1===e.length)throw new et(je.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const S=e[u+1];if("\\"!==S&&"."!==S&&"`"!==S)throw new et(je.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=S,u+=2}else"`"===w?(f=!f,u++):"."!==w||f?(o+=w,u++):(l(),u++)}if(l(),f)throw new et(je.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vr(n)}static emptyPath(){return new Vr([])}}class It{constructor(e){this.path=e}static fromPath(e){return new It(Jn.fromString(e))}static fromName(e){return new It(Jn.fromString(e).popFirst(5))}static empty(){return new It(Jn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Jn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new It(new Jn(e.slice()))}}class Hi{constructor(e,n,o,u){this.indexId=e,this.collectionGroup=n,this.fields=o,this.indexState=u}}function qc(i){return i.fields.find(e=>2===e.kind)}function Rr(i){return i.fields.filter(e=>2!==e.kind)}Hi.UNKNOWN_ID=-1;class mo{constructor(e,n){this.fieldPath=e,this.kind=n}}class Xe{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Xe(0,zi.min())}}function jn(i,e){const n=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=qt.fromTimestamp(1e9===o?new Ot(n+1,0):new Ot(n,o));return new zi(u,It.empty(),e)}function oc(i){return new zi(i.readTime,i.key,-1)}class zi{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new zi(qt.min(),It.empty(),-1)}static max(){return new zi(qt.max(),It.empty(),-1)}}function li(i,e){let n=i.readTime.compareTo(e.readTime);return 0!==n?n:(n=It.comparator(i.documentKey,e.documentKey),0!==n?n:mn(i.largestBatchId,e.largestBatchId))}const va="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qo{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Yr(i){return Po.apply(this,arguments)}function Po(){return Po=(0,p.Z)(function*(i){if(i.code!==je.FAILED_PRECONDITION||i.message!==va)throw i;Je("LocalStore","Unexpectedly lost primary lease")}),Po.apply(this,arguments)}class Re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_t(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Re((o,u)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(o,u)},this.catchCallback=l=>{this.wrapFailure(n,l).next(o,u)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Re?n:Re.resolve(n)}catch(n){return Re.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Re.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Re.reject(n)}static resolve(e){return new Re((n,o)=>{n(e)})}static reject(e){return new Re((n,o)=>{o(e)})}static waitFor(e){return new Re((n,o)=>{let u=0,l=0,f=!1;e.forEach(w=>{++u,w.next(()=>{++l,f&&l===u&&n()},S=>o(S))}),f=!0,l===u&&n()})}static or(e){let n=Re.resolve(!1);for(const o of e)n=n.next(u=>u?Re.resolve(u):o());return n}static forEach(e,n){const o=[];return e.forEach((u,l)=>{o.push(n.call(this,u,l))}),this.waitFor(o)}static mapArray(e,n){return new Re((o,u)=>{const l=e.length,f=new Array(l);let w=0;for(let S=0;S<l;S++){const k=S;n(e[k]).next($=>{f[k]=$,++w,w===l&&o(f)},$=>u($))}})}static doWhile(e,n){return new Re((o,u)=>{const l=()=>{!0===e()?n().next(()=>{l()},u):o()};l()})}}class Ea{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new xn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new vi(e,n.error)):this.V.resolve()},this.transaction.onerror=o=>{const u=C(o.target.error);this.V.reject(new vi(e,u))}}static open(e,n,o,u){try{return new Ea(n,e.transaction(u,o))}catch(l){throw new vi(n,l)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Je("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Kc(n)}}class ro{constructor(e,n,o){this.name=e,this.version=n,this.p=o,12.2===ro.S((0,te.z$)())&&or("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Je("SimpleDb","Removing database:",e),Hs(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,te.hl)())return!1;if(ro.C())return!0;const e=(0,te.z$)(),n=ro.S(e),o=0<n&&n<10,u=ro.v(e),l=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||l)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static v(e){const n=e.match(/Android ([\d.]+)/i),o=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(o)}O(e){var n=this;return(0,p.Z)(function*(){return n.db||(Je("SimpleDb","Opening database:",n.name),n.db=yield new Promise((o,u)=>{const l=indexedDB.open(n.name,n.version);l.onsuccess=f=>{o(f.target.result)},l.onblocked=()=>{u(new vi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=f=>{const w=f.target.error;u("VersionError"===w.name?new et(je.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===w.name?new et(je.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+w):new vi(e,w))},l.onupgradeneeded=f=>{Je("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',f.oldVersion),n.p.N(f.target.result,l.transaction,f.oldVersion,n.version).next(()=>{Je("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=o=>n.B(o)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,o,u){var l=this;return(0,p.Z)(function*(){const f="readonly"===n;let w=0;for(;;){++w;try{l.db=yield l.O(e);const S=Ea.open(l.db,e,f?"readonly":"readwrite",o),k=u(S).next($=>(S.g(),$)).catch($=>(S.abort($),Re.reject($))).toPromise();return k.catch(()=>{}),yield S.m,k}catch(S){const k=S,$="FirebaseError"!==k.name&&w<3;if(Je("SimpleDb","Transaction failed with error:",k.message,"Retrying:",$),l.close(),!$)return Promise.reject(k)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ac{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Hs(this.k.delete())}}class vi extends et{constructor(e,n){super(je.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function wi(i){return"IndexedDbTransactionError"===i.name}class Kc{constructor(e){this.store=e}put(e,n){let o;return void 0!==n?(Je("SimpleDb","PUT",this.store.name,e,n),o=this.store.put(n,e)):(Je("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Hs(o)}add(e){return Je("SimpleDb","ADD",this.store.name,e,e),Hs(this.store.add(e))}get(e){return Hs(this.store.get(e)).next(n=>(void 0===n&&(n=null),Je("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Je("SimpleDb","DELETE",this.store.name,e),Hs(this.store.delete(e))}count(){return Je("SimpleDb","COUNT",this.store.name),Hs(this.store.count())}W(e,n){const o=this.options(e,n);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),l=[];return this.G(u,(f,w)=>{l.push(w)}).next(()=>l)}{const u=this.store.getAll(o.range);return new Re((l,f)=>{u.onerror=w=>{f(w.target.error)},u.onsuccess=w=>{l(w.target.result)}})}}j(e,n){const o=this.store.getAll(e,null===n?void 0:n);return new Re((u,l)=>{o.onerror=f=>{l(f.target.error)},o.onsuccess=f=>{u(f.target.result)}})}H(e,n){Je("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,n);o.J=!1;const u=this.cursor(o);return this.G(u,(l,f,w)=>w.delete())}Y(e,n){let o;n?o=e:(o={},n=e);const u=this.cursor(o);return this.G(u,n)}Z(e){const n=this.cursor({});return new Re((o,u)=>{n.onerror=l=>{const f=C(l.target.error);u(f)},n.onsuccess=l=>{const f=l.target.result;f?e(f.primaryKey,f.value).next(w=>{w?f.continue():o()}):o()}})}G(e,n){const o=[];return new Re((u,l)=>{e.onerror=f=>{l(f.target.error)},e.onsuccess=f=>{const w=f.target.result;if(!w)return void u();const S=new ac(w),k=n(w.primaryKey,w.value,S);if(k instanceof Re){const $=k.catch(X=>(S.done(),Re.reject(X)));o.push($)}S.isDone?u():null===S.$?w.continue():w.continue(S.$)}}).next(()=>Re.waitFor(o))}options(e,n){let o;return void 0!==e&&("string"==typeof e?o=e:n=e),{index:o,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const o=this.store.index(e.index);return e.J?o.openKeyCursor(e.range,n):o.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Hs(i){return new Re((e,n)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=C(o.target.error);n(u)}})}let E=!1;function C(i){const e=ro.S((0,te.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(n)>=0){const o=new et("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return E||(E=!0,setTimeout(()=>{throw o},0)),o}}return i}class _{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;Je("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,p.Z)(function*(){n.task=null;try{Je("IndexBackiller",`Documents written: ${yield n.X.te()}`)}catch(o){wi(o)?Je("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield Yr(o)}yield n.ee(6e4)}))}}class A{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,p.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>n.ne(o,e))})()}ne(e,n){const o=new Set;let u=n,l=!0;return Re.doWhile(()=>!0===l&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(f=>{if(null!==f&&!o.has(f))return Je("IndexBackiller",`Processing collection: ${f}`),this.re(e,f,u).next(w=>{u-=w,o.add(f)});l=!1})).next(()=>n-u)}re(e,n,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(u=>this.localStore.localDocuments.getNextDocuments(e,n,u,o).next(l=>{const f=l.changes;return this.localStore.indexManager.updateIndexEntries(e,f).next(()=>this.ie(u,l)).next(w=>(Je("IndexBackiller",`Updating offset: ${w}`),this.localStore.indexManager.updateCollectionGroup(e,n,w))).next(()=>f.size)}))}ie(e,n){let o=e;return n.changes.forEach((u,l)=>{const f=oc(l);li(f,o)>0&&(o=f)}),new zi(o.readTime,o.documentKey,Math.max(n.batchId,e.largestBatchId))}}let x=(()=>{class i{constructor(n,o){this.previousValue=n,o&&(o.sequenceNumberHandler=u=>this.se(u),this.oe=u=>o.writeSequenceNumber(u))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return i._e=-1,i})();function W(i){return null==i}function ne(i){return 0===i&&1/i==-1/0}function Ue(i){return"number"==typeof i&&Number.isInteger(i)&&!ne(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function be(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=Cn(e)),e=Nt(i.get(n),e);return Cn(e)}function Nt(i,e){let n=e;const o=i.length;for(let u=0;u<o;u++){const l=i.charAt(u);switch(l){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=l}}return n}function Cn(i){return i+"\x01\x01"}function $n(i){const e=i.length;if(Bt(e>=2),2===e)return Bt("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Jn.emptyPath();const n=e-2,o=[];let u="";for(let l=0;l<e;){const f=i.indexOf("\x01",l);switch((f<0||f>n)&&_t(),i.charAt(f+1)){case"\x01":const w=i.substring(l,f);let S;0===u.length?S=w:(u+=w,S=u,u=""),o.push(S);break;case"\x10":u+=i.substring(l,f),u+="\0";break;case"\x11":u+=i.substring(l,f+1);break;default:_t()}l=f+2}return new Jn(o)}const Nn=["userId","batchId"];function fs(i,e){return[i,be(e)]}function Ko(i,e,n){return[i,be(e),n]}const Ia={},Ja=["prefixPath","collectionGroup","readTime","documentId"],Da=["prefixPath","collectionGroup","documentId"],Zc=["collectionGroup","readTime","prefixPath","documentId"],ps=["canonicalId","targetId"],Xa=["targetId","path"],Qr=["path","targetId"],Fl=["collectionId","parent"],zf=["indexId","uid"],Ll=["uid","sequenceNumber"],Gf=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Yc=["indexId","uid","orderedDocumentKey"],Qd=["userId","collectionPath","documentId"],Pu=["userId","collectionPath","largestBatchId"],_o=["userId","collectionGroup","largestBatchId"],Qc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Jc=[...Qc,"documentOverlays"],eu=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],uc=eu,Zo=[...uc,"indexConfiguration","indexState","indexEntries"];class Mu extends qo{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function Ti(i,e){const n=ot(i);return ro.M(n.ae,e)}function Jd(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function zs(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function wa(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Pr{constructor(e,n){this.comparator=e,this.root=n||Ci.EMPTY}insert(e,n){return new Pr(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ci.BLACK,null,null))}remove(e){return new Pr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ci.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(0===o)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return n+o.left.size;u<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,o)=>(e(n,o),!1))}toString(){const e=[];return this.inorderTraversal((n,o)=>(e.push(`${n}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ul(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ul(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ul(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ul(this.root,e,this.comparator,!0)}}class Ul{constructor(e,n,o,u){this.isReverse=u,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?o(e.key,n):1,n&&u&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ci{constructor(e,n,o,u,l){this.key=e,this.value=n,this.color=o??Ci.RED,this.left=u??Ci.EMPTY,this.right=l??Ci.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,u,l){return new Ci(e??this.key,n??this.value,o??this.color,u??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let u=this;const l=o(e,u.key);return u=l<0?u.copy(null,null,null,u.left.insert(e,n,o),null):0===l?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(e,n,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Ci.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,u=this;if(n(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===n(e,u.key)){if(u.right.isEmpty())return Ci.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _t();const e=this.left.check();if(e!==this.right.check())throw _t();return e+(this.isRed()?0:1)}}Ci.EMPTY=null,Ci.RED=!0,Ci.BLACK=!1,Ci.EMPTY=new class{constructor(){this.size=0}get key(){throw _t()}get value(){throw _t()}get color(){throw _t()}get left(){throw _t()}get right(){throw _t()}copy(e,n,o,u,l){return this}insert(e,n,o){return new Ci(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Tr{constructor(e){this.comparator=e,this.data=new Pr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,o)=>(e(n),!1))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;n(u.key)}}forEachWhile(e,n){let o;for(o=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Xd(this.data.getIterator())}getIteratorFrom(e){return new Xd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(o=>{n=n.add(o)}),n}isEqual(e){if(!(e instanceof Tr)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,l=o.getNext().key;if(0!==this.comparator(u,l))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Tr(this.comparator);return n.data=e,n}}class Xd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ta(i){return i.hasNext()?i.getNext():void 0}class Gs{constructor(e){this.fields=e,e.sort(Vr.comparator)}static empty(){return new Gs([])}unionWith(e){let n=new Tr(Vr.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new Gs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ya(this.fields,e.fields,(n,o)=>n.isEqual(o))}}class Bl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function cc(){return typeof atob<"u"}class Jr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(u){try{return atob(u)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Bl("Invalid base64 string: "+l):l}}(e);return new Jr(n)}static fromUint8Array(e){const n=function(u){let l="";for(let f=0;f<u.length;++f)l+=String.fromCharCode(u[f]);return l}(e);return new Jr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const o=new Uint8Array(n.length);for(let u=0;u<n.length;u++)o[u]=n.charCodeAt(u);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jr.EMPTY_BYTE_STRING=new Jr("");const lc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function io(i){if(Bt(!!i),"string"==typeof i){let e=0;const n=lc.exec(i);if(Bt(!!n),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Gr(i.seconds),nanos:Gr(i.nanos)}}function Gr(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Ds(i){return"string"==typeof i?Jr.fromBase64String(i):Jr.fromUint8Array(i)}function dc(i){var e,n;return"server_timestamp"===(null===(n=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function tu(i){const e=i.mapValue.fields.__previous_value__;return dc(e)?tu(e):e}function xu(i){const e=io(i.mapValue.fields.__local_write_time__.timestampValue);return new Ot(e.seconds,e.nanos)}class eh{constructor(e,n,o,u,l,f,w,S,k){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=u,this.ssl=l,this.forceLongPolling=f,this.autoDetectLongPolling=w,this.longPollingOptions=S,this.useFetchStreams=k}}class Fi{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Fi("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Fi&&e.projectId===this.projectId&&e.database===this.database}}const Yo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},nu={nullValue:"NULL_VALUE"};function Mo(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?dc(i)?4:ou(i)?9007199254740991:10:_t()}function Ws(i,e){if(i===e)return!0;const n=Mo(i);if(n!==Mo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return xu(i).isEqual(xu(e));case 3:return function(u,l){if("string"==typeof u.timestampValue&&"string"==typeof l.timestampValue&&u.timestampValue.length===l.timestampValue.length)return u.timestampValue===l.timestampValue;const f=io(u.timestampValue),w=io(l.timestampValue);return f.seconds===w.seconds&&f.nanos===w.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return l=e,Ds(i.bytesValue).isEqual(Ds(l.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(u,l){return Gr(u.geoPointValue.latitude)===Gr(l.geoPointValue.latitude)&&Gr(u.geoPointValue.longitude)===Gr(l.geoPointValue.longitude)}(i,e);case 2:return function(u,l){if("integerValue"in u&&"integerValue"in l)return Gr(u.integerValue)===Gr(l.integerValue);if("doubleValue"in u&&"doubleValue"in l){const f=Gr(u.doubleValue),w=Gr(l.doubleValue);return f===w?ne(f)===ne(w):isNaN(f)&&isNaN(w)}return!1}(i,e);case 9:return ya(i.arrayValue.values||[],e.arrayValue.values||[],Ws);case 10:return function(u,l){const f=u.mapValue.fields||{},w=l.mapValue.fields||{};if(Jd(f)!==Jd(w))return!1;for(const S in f)if(f.hasOwnProperty(S)&&(void 0===w[S]||!Ws(f[S],w[S])))return!1;return!0}(i,e);default:return _t()}var l}function Ca(i,e){return void 0!==(i.values||[]).find(n=>Ws(n,e))}function xo(i,e){if(i===e)return 0;const n=Mo(i),o=Mo(e);if(n!==o)return mn(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return mn(i.booleanValue,e.booleanValue);case 2:return function(l,f){const w=Gr(l.integerValue||l.doubleValue),S=Gr(f.integerValue||f.doubleValue);return w<S?-1:w>S?1:w===S?0:isNaN(w)?isNaN(S)?0:-1:1}(i,e);case 3:return Xc(i.timestampValue,e.timestampValue);case 4:return Xc(xu(i),xu(e));case 5:return mn(i.stringValue,e.stringValue);case 6:return function(l,f){const w=Ds(l),S=Ds(f);return w.compareTo(S)}(i.bytesValue,e.bytesValue);case 7:return function(l,f){const w=l.split("/"),S=f.split("/");for(let k=0;k<w.length&&k<S.length;k++){const $=mn(w[k],S[k]);if(0!==$)return $}return mn(w.length,S.length)}(i.referenceValue,e.referenceValue);case 8:return function(l,f){const w=mn(Gr(l.latitude),Gr(f.latitude));return 0!==w?w:mn(Gr(l.longitude),Gr(f.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(l,f){const w=l.values||[],S=f.values||[];for(let k=0;k<w.length&&k<S.length;++k){const $=xo(w[k],S[k]);if($)return $}return mn(w.length,S.length)}(i.arrayValue,e.arrayValue);case 10:return function(l,f){if(l===Yo.mapValue&&f===Yo.mapValue)return 0;if(l===Yo.mapValue)return 1;if(f===Yo.mapValue)return-1;const w=l.fields||{},S=Object.keys(w),k=f.fields||{},$=Object.keys(k);S.sort(),$.sort();for(let X=0;X<S.length&&X<$.length;++X){const fe=mn(S[X],$[X]);if(0!==fe)return fe;const Oe=xo(w[S[X]],k[$[X]]);if(0!==Oe)return Oe}return mn(S.length,$.length)}(i.mapValue,e.mapValue);default:throw _t()}}function Xc(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return mn(i,e);const n=io(i),o=io(e),u=mn(n.seconds,o.seconds);return 0!==u?u:mn(n.nanos,o.nanos)}function ru(i){return el(i)}function el(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const o=io(n);return`time(${o.seconds},${o.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Ds(i.bytesValue).toBase64():"referenceValue"in i?It.fromName(i.referenceValue).toString():"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let o="[",u=!0;for(const l of n.values||[])u?u=!1:o+=",",o+=el(l);return o+"]"}(i.arrayValue):"mapValue"in i?function(n){const o=Object.keys(n.fields||{}).sort();let u="{",l=!0;for(const f of o)l?l=!1:u+=",",u+=`${f}:${el(n.fields[f])}`;return u+"}"}(i.mapValue):_t()}function Aa(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function hc(i){return!!i&&"integerValue"in i}function No(i){return!!i&&"arrayValue"in i}function Oo(i){return!!i&&"nullValue"in i}function jl(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function su(i){return!!i&&"mapValue"in i}function Nu(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return zs(i.mapValue.fields,(n,o)=>e.mapValue.fields[n]=Nu(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Nu(i.arrayValue.values[n]);return e}return Object.assign({},i)}function ou(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function th(i){return"nullValue"in i?nu:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Aa(Fi.empty(),It.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:_t()}function Xi(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Aa(Fi.empty(),It.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Yo:_t()}function nh(i,e){const n=xo(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function tl(i,e){const n=xo(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class di{constructor(e){this.value=e}static empty(){return new di({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!su(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nu(n)}setAll(e){let n=Vr.emptyPath(),o={},u=[];e.forEach((f,w)=>{if(!n.isImmediateParentOf(w)){const S=this.getFieldsMap(n);this.applyChanges(S,o,u),o={},u=[],n=w.popLast()}f?o[w.lastSegment()]=Nu(f):u.push(w.lastSegment())});const l=this.getFieldsMap(n);this.applyChanges(l,o,u)}delete(e){const n=this.field(e.popLast());su(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ws(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=n.mapValue.fields[e.get(o)];su(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=u),n=u}return n.mapValue.fields}applyChanges(e,n,o){zs(n,(u,l)=>e[u]=l);for(const u of o)delete e[u]}clone(){return new di(Nu(this.value))}}function rh(i){const e=[];return zs(i.fields,(n,o)=>{const u=new Vr([n]);if(su(o)){const l=rh(o.mapValue).fields;if(0===l.length)e.push(u);else for(const f of l)e.push(u.child(f))}else e.push(u)}),new Gs(e)}class Fr{constructor(e,n,o,u,l,f,w){this.key=e,this.documentType=n,this.version=o,this.readTime=u,this.createTime=l,this.data=f,this.documentState=w}static newInvalidDocument(e){return new Fr(e,0,qt.min(),qt.min(),qt.min(),di.empty(),0)}static newFoundDocument(e,n,o,u){return new Fr(e,1,n,qt.min(),o,u,0)}static newNoDocument(e,n){return new Fr(e,2,n,qt.min(),qt.min(),di.empty(),0)}static newUnknownDocument(e,n){return new Fr(e,3,n,qt.min(),qt.min(),di.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(qt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=di.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=di.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Fr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ko{constructor(e,n){this.position=e,this.inclusive=n}}function Qo(i,e,n){let o=0;for(let u=0;u<i.position.length;u++){const l=e[u],f=i.position[u];if(o=l.field.isKeyField()?It.comparator(It.fromName(f.referenceValue),n.key):xo(f,n.data.field(l.field)),"desc"===l.dir&&(o*=-1),0!==o)break}return o}function au(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Ws(i.position[n],e.position[n]))return!1;return!0}class Vo{constructor(e,n="asc"){this.field=e,this.dir=n}}function $l(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class nl{}class An extends nl{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,o):new Zf(e,n,o):"array-contains"===n?new fc(e,o):"in"===n?new Hl(e,o):"not-in"===n?new so(e,o):"array-contains-any"===n?new ku(e,o):new An(e,n,o)}static createKeyFieldInFilter(e,n,o){return"in"===n?new Yf(e,o):new Ai(e,o)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(xo(n,this.value)):null!==n&&Mo(this.value)===Mo(n)&&this.matchesComparison(xo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return _t()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ar extends nl{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Ar(e,n)}matches(e){return Ou(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Ou(i){return"and"===i.op}function ih(i){return"or"===i.op}function sh(i){return Wf(i)&&Ou(i)}function Wf(i){for(const e of i.filters)if(e instanceof Ar)return!1;return!0}function oh(i){if(i instanceof An)return i.field.canonicalString()+i.op.toString()+ru(i.value);if(sh(i))return i.filters.map(e=>oh(e)).join(",");{const e=i.filters.map(n=>oh(n)).join(",");return`${i.op}(${e})`}}function qf(i,e){return i instanceof An?(o=i,(u=e)instanceof An&&o.op===u.op&&o.field.isEqual(u.field)&&Ws(o.value,u.value)):i instanceof Ar?function(o,u){return u instanceof Ar&&o.op===u.op&&o.filters.length===u.filters.length&&o.filters.reduce((l,f,w)=>l&&qf(f,u.filters[w]),!0)}(i,e):void _t();var o,u}function Kf(i,e){const n=i.filters.concat(e);return Ar.create(n,i.op)}function Jo(i){return i instanceof An?`${(n=i).field.canonicalString()} ${n.op} ${ru(n.value)}`:i instanceof Ar?function(n){return n.op.toString()+" {"+n.getFilters().map(Jo).join(" ,")+"}"}(i):"Filter";var n}class Zf extends An{constructor(e,n,o){super(e,n,o),this.key=It.fromName(o.referenceValue)}matches(e){const n=It.comparator(e.key,this.key);return this.matchesComparison(n)}}class Yf extends An{constructor(e,n){super(e,"in",n),this.keys=ah(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Ai extends An{constructor(e,n){super(e,"not-in",n),this.keys=ah(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ah(i,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(o=>It.fromName(o.referenceValue))}class fc extends An{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return No(n)&&Ca(n.arrayValue,this.value)}}class Hl extends An{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Ca(this.value.arrayValue,n)}}class so extends An{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ca(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Ca(this.value.arrayValue,n)}}class ku extends An{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!No(n)||!n.arrayValue.values)&&n.arrayValue.values.some(o=>Ca(this.value.arrayValue,o))}}class uh{constructor(e,n=null,o=[],u=[],l=null,f=null,w=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=u,this.limit=l,this.startAt=f,this.endAt=w,this.ce=null}}function Vu(i,e=null,n=[],o=[],u=null,l=null,f=null){return new uh(i,e,n,o,u,l,f)}function yo(i){const e=ot(i);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(o=>oh(o)).join(","),n+="|ob:",n+=e.orderBy.map(o=>{return(l=o).field.canonicalString()+l.dir;var l}).join(","),W(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(o=>ru(o)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(o=>ru(o)).join(",")),e.ce=n}return e.ce}function uu(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!$l(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!qf(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!au(i.startAt,e.startAt)&&au(i.endAt,e.endAt)}function pc(i){return It.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function rl(i,e){return i.filters.filter(n=>n instanceof An&&n.field.isEqual(e))}function zl(i,e,n){let o=nu,u=!0;for(const l of rl(i,e)){let f=nu,w=!0;switch(l.op){case"<":case"<=":f=th(l.value);break;case"==":case"in":case">=":f=l.value;break;case">":f=l.value,w=!1;break;case"!=":case"not-in":f=nu}nh({value:o,inclusive:u},{value:f,inclusive:w})<0&&(o=f,u=w)}if(null!==n)for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const f=n.position[l];nh({value:o,inclusive:u},{value:f,inclusive:n.inclusive})<0&&(o=f,u=n.inclusive);break}return{value:o,inclusive:u}}function ws(i,e,n){let o=Yo,u=!0;for(const l of rl(i,e)){let f=Yo,w=!0;switch(l.op){case">=":case">":f=Xi(l.value),w=!1;break;case"==":case"in":case"<=":f=l.value;break;case"<":f=l.value,w=!1;break;case"!=":case"not-in":f=Yo}tl({value:o,inclusive:u},{value:f,inclusive:w})>0&&(o=f,u=w)}if(null!==n)for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const f=n.position[l];tl({value:o,inclusive:u},{value:f,inclusive:n.inclusive})>0&&(o=f,u=n.inclusive);break}return{value:o,inclusive:u}}class oo{constructor(e,n=null,o=[],u=[],l=null,f="F",w=null,S=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=u,this.limit=l,this.limitType=f,this.startAt=w,this.endAt=S,this.le=null,this.he=null,this.Pe=null}}function cu(i,e,n,o,u,l,f,w){return new oo(i,e,n,o,u,l,f,w)}function lu(i){return new oo(i)}function Gl(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function ch(i){return null!==i.collectionGroup}function Sa(i){const e=ot(i);if(null===e.le){e.le=[];const n=new Set;for(const l of e.explicitOrderBy)e.le.push(l),n.add(l.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let w=new Tr(Vr.comparator);return f.filters.forEach(S=>{S.getFlattenedFilters().forEach(k=>{k.isInequality()&&(w=w.add(k.field))})}),w})(e).forEach(l=>{n.has(l.canonicalString())||l.isKeyField()||e.le.push(new Vo(l,o))}),n.has(Vr.keyField().canonicalString())||e.le.push(new Vo(Vr.keyField(),o))}return e.le}function es(i){const e=ot(i);return e.he||(e.he=function gc(i,e){if("F"===i.limitType)return Vu(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(u=>new Vo(u.field,"desc"===u.dir?"asc":"desc"));const n=i.endAt?new ko(i.endAt.position,i.endAt.inclusive):null,o=i.startAt?new ko(i.startAt.position,i.startAt.inclusive):null;return Vu(i.path,i.collectionGroup,e,i.filters,i.limit,n,o)}}(e,Sa(i))),e.he}function il(i,e){const n=i.filters.concat([e]);return new oo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function mc(i,e,n){return new oo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function du(i,e){return uu(es(i),es(e))&&i.limitType===e.limitType}function _c(i){return`${yo(es(i))}|lt:${i.limitType}`}function Fu(i){return`Query(target=${function(n){let o=n.path.canonicalString();return null!==n.collectionGroup&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map(u=>Jo(u)).join(", ")}]`),W(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map(u=>{return`${(f=u).field.canonicalString()} (${f.dir})`;var f}).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map(u=>ru(u)).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map(u=>ru(u)).join(",")),`Target(${o})`}(es(i))}; limitType=${i.limitType})`}function ba(i,e){return e.isFoundDocument()&&function(o,u){const l=u.key.path;return null!==o.collectionGroup?u.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(l):It.isDocumentKey(o.path)?o.path.isEqual(l):o.path.isImmediateParentOf(l)}(i,e)&&function(o,u){for(const l of Sa(o))if(!l.field.isKeyField()&&null===u.data.field(l.field))return!1;return!0}(i,e)&&function(o,u){for(const l of o.filters)if(!l.matches(u))return!1;return!0}(i,e)&&(u=e,!((o=i).startAt&&!function(f,w,S){const k=Qo(f,w,S);return f.inclusive?k<=0:k<0}(o.startAt,Sa(o),u)||o.endAt&&!function(f,w,S){const k=Qo(f,w,S);return f.inclusive?k>=0:k>0}(o.endAt,Sa(o),u)));var o,u}function lh(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Lu(i){return(e,n)=>{let o=!1;for(const u of Sa(i)){const l=Qf(u,e,n);if(0!==l)return l;o=o||u.field.isKeyField()}return 0}}function Qf(i,e,n){const o=i.field.isKeyField()?It.comparator(e.key,n.key):function(l,f,w){const S=f.data.field(l),k=w.data.field(l);return null!==S&&null!==k?xo(S,k):_t()}(i.field,e,n);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return _t()}}class Xo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0!==o)for(const[u,l]of o)if(this.equalsFn(u,e))return l}has(e){return void 0!==this.get(e)}set(e,n){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,n]],void this.innerSize++;for(let l=0;l<u.length;l++)if(this.equalsFn(u[l][0],e))return void(u[l]=[e,n]);u.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[n]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){zs(this.inner,(n,o)=>{for(const[u,l]of o)e(u,l)})}isEmpty(){return wa(this.inner)}size(){return this.innerSize}}const y=new Pr(It.comparator);function h(){return y}const g=new Pr(It.comparator);function I(...i){let e=g;for(const n of i)e=e.insert(n.key,n);return e}function U(i){let e=g;return i.forEach((n,o)=>e=e.insert(n,o.overlayedDocument)),e}function K(){return $e()}function _e(){return $e()}function $e(){return new Xo(i=>i.toString(),(i,e)=>i.isEqual(e))}const ut=new Pr(It.comparator),$t=new Tr(It.comparator);function dt(...i){let e=$t;for(const n of i)e=e.add(n);return e}const tr=new Tr(mn);function ts(){return tr}function ea(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ne(e)?"-0":e}}function yc(i){return{integerValue:""+i}}function Uu(i,e){return Ue(e)?yc(e):ea(i,e)}class hu{constructor(){this._=void 0}}function dh(i,e,n){return i instanceof Ra?function(u,l){const f={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return l&&dc(l)&&(l=tu(l)),l&&(f.fields.__previous_value__=l),{mapValue:f}}(n,e):i instanceof fu?sl(i,e):i instanceof Pa?ol(i,e):function(u,l){const f=ql(u,l),w=Jf(f)+Jf(u.Ie);return hc(f)&&hc(u.Ie)?yc(w):ea(u.serializer,w)}(i,e)}function Wl(i,e,n){return i instanceof fu?sl(i,e):i instanceof Pa?ol(i,e):n}function ql(i,e){return i instanceof pu?hc(o=e)||(l=o)&&"doubleValue"in l?e:{integerValue:0}:null;var o,l}class Ra extends hu{}class fu extends hu{constructor(e){super(),this.elements=e}}function sl(i,e){const n=hh(e);for(const o of i.elements)n.some(u=>Ws(u,o))||n.push(o);return{arrayValue:{values:n}}}class Pa extends hu{constructor(e){super(),this.elements=e}}function ol(i,e){let n=hh(e);for(const o of i.elements)n=n.filter(u=>!Ws(u,o));return{arrayValue:{values:n}}}class pu extends hu{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function Jf(i){return Gr(i.integerValue||i.doubleValue)}function hh(i){return No(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class fh{constructor(e,n){this.field=e,this.transform=n}}class ME{constructor(e,n){this.version=e,this.transformResults=n}}class hi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new hi}static exists(e){return new hi(void 0,e)}static updateTime(e){return new hi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xf(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class ph{}function Kl(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new gu(i.key,hi.none()):new ta(i.key,i.data,hi.none());{const n=i.data,o=di.empty();let u=new Tr(Vr.comparator);for(let l of e.fields)if(!u.has(l)){let f=n.field(l);null===f&&l.length>1&&(l=l.popLast(),f=n.field(l)),null===f?o.delete(l):o.set(l,f),u=u.add(l)}return new Ma(i.key,o,new Gs(u.toArray()),hi.none())}}function gh(i,e,n){i instanceof ta?function(u,l,f){const w=u.value.clone(),S=Zl(u.fieldTransforms,l,f.transformResults);w.setAll(S),l.convertToFoundDocument(f.version,w).setHasCommittedMutations()}(i,e,n):i instanceof Ma?function(u,l,f){if(!Xf(u.precondition,l))return void l.convertToUnknownDocument(f.version);const w=Zl(u.fieldTransforms,l,f.transformResults),S=l.data;S.setAll(tp(u)),S.setAll(w),l.convertToFoundDocument(f.version,S).setHasCommittedMutations()}(i,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function al(i,e,n,o){return i instanceof ta?function(l,f,w,S){if(!Xf(l.precondition,f))return w;const k=l.value.clone(),$=Yl(l.fieldTransforms,S,f);return k.setAll($),f.convertToFoundDocument(f.version,k).setHasLocalMutations(),null}(i,e,n,o):i instanceof Ma?function(l,f,w,S){if(!Xf(l.precondition,f))return w;const k=Yl(l.fieldTransforms,S,f),$=f.data;return $.setAll(tp(l)),$.setAll(k),f.convertToFoundDocument(f.version,$).setHasLocalMutations(),null===w?null:w.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(X=>X.field))}(i,e,n,o):(w=n,Xf(i.precondition,f=e)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):w);var f,w}function am(i,e){let n=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),l=ql(o.transform,u||null);null!=l&&(null===n&&(n=di.empty()),n.set(o.field,l))}return n||null}function ep(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(u=e.fieldTransforms,!!(void 0===(o=i.fieldTransforms)&&void 0===u||o&&u&&ya(o,u,(l,f)=>function PE(i,e){return i.field.isEqual(e.field)&&(u=e.transform,(o=i.transform)instanceof fu&&u instanceof fu||o instanceof Pa&&u instanceof Pa?ya(o.elements,u.elements,Ws):o instanceof pu&&u instanceof pu?Ws(o.Ie,u.Ie):o instanceof Ra&&u instanceof Ra);var o,u}(l,f))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var o,u}class ta extends ph{constructor(e,n,o,u=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class Ma extends ph{constructor(e,n,o,u,l=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=u,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function tp(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const o=i.data.field(n);e.set(n,o)}}),e}function Zl(i,e,n){const o=new Map;Bt(i.length===n.length);for(let u=0;u<n.length;u++){const l=i[u],f=l.transform,w=e.data.field(l.field);o.set(l.field,Wl(f,w,n[u]))}return o}function Yl(i,e,n){const o=new Map;for(const u of i){const l=u.transform,f=n.data.field(u.field);o.set(u.field,dh(l,f,e))}return o}class gu extends ph{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class np extends ph{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class rp{constructor(e,n,o,u){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const l=this.mutations[u];l.key.isEqual(e.key)&&gh(l,e,o[u])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=al(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=al(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=_e();return this.mutations.forEach(u=>{const l=e.get(u.key),f=l.overlayedDocument;let w=this.applyToLocalView(f,l.mutatedFields);w=n.has(u.key)?null:w;const S=Kl(f,w);null!==S&&o.set(u.key,S),f.isValidDocument()||f.convertToNoDocument(qt.min())}),o}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),dt())}isEqual(e){return this.batchId===e.batchId&&ya(this.mutations,e.mutations,(n,o)=>ep(n,o))&&ya(this.baseMutations,e.baseMutations,(n,o)=>ep(n,o))}}class ip{constructor(e,n,o,u){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=u}static from(e,n,o){Bt(e.mutations.length===o.length);let u=ut;const l=e.mutations;for(let f=0;f<l.length;f++)u=u.insert(l[f].key,o[f].version);return new ip(e,n,o,u)}}class mh{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class cy{constructor(e,n){this.count=e,this.unchangedNames=n}}var Li,cr;function op(i){switch(i){default:return _t();case je.CANCELLED:case je.UNKNOWN:case je.DEADLINE_EXCEEDED:case je.RESOURCE_EXHAUSTED:case je.INTERNAL:case je.UNAVAILABLE:case je.UNAUTHENTICATED:return!1;case je.INVALID_ARGUMENT:case je.NOT_FOUND:case je.ALREADY_EXISTS:case je.PERMISSION_DENIED:case je.FAILED_PRECONDITION:case je.ABORTED:case je.OUT_OF_RANGE:case je.UNIMPLEMENTED:case je.DATA_LOSS:return!0}}function um(i){if(void 0===i)return or("GRPC error has no .code"),je.UNKNOWN;switch(i){case Li.OK:return je.OK;case Li.CANCELLED:return je.CANCELLED;case Li.UNKNOWN:return je.UNKNOWN;case Li.DEADLINE_EXCEEDED:return je.DEADLINE_EXCEEDED;case Li.RESOURCE_EXHAUSTED:return je.RESOURCE_EXHAUSTED;case Li.INTERNAL:return je.INTERNAL;case Li.UNAVAILABLE:return je.UNAVAILABLE;case Li.UNAUTHENTICATED:return je.UNAUTHENTICATED;case Li.INVALID_ARGUMENT:return je.INVALID_ARGUMENT;case Li.NOT_FOUND:return je.NOT_FOUND;case Li.ALREADY_EXISTS:return je.ALREADY_EXISTS;case Li.PERMISSION_DENIED:return je.PERMISSION_DENIED;case Li.FAILED_PRECONDITION:return je.FAILED_PRECONDITION;case Li.ABORTED:return je.ABORTED;case Li.OUT_OF_RANGE:return je.OUT_OF_RANGE;case Li.UNIMPLEMENTED:return je.UNIMPLEMENTED;case Li.DATA_LOSS:return je.DATA_LOSS;default:return _t()}}(cr=Li||(Li={}))[cr.OK=0]="OK",cr[cr.CANCELLED=1]="CANCELLED",cr[cr.UNKNOWN=2]="UNKNOWN",cr[cr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cr[cr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cr[cr.NOT_FOUND=5]="NOT_FOUND",cr[cr.ALREADY_EXISTS=6]="ALREADY_EXISTS",cr[cr.PERMISSION_DENIED=7]="PERMISSION_DENIED",cr[cr.UNAUTHENTICATED=16]="UNAUTHENTICATED",cr[cr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cr[cr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cr[cr.ABORTED=10]="ABORTED",cr[cr.OUT_OF_RANGE=11]="OUT_OF_RANGE",cr[cr.UNIMPLEMENTED=12]="UNIMPLEMENTED",cr[cr.INTERNAL=13]="INTERNAL",cr[cr.UNAVAILABLE=14]="UNAVAILABLE",cr[cr.DATA_LOSS=15]="DATA_LOSS";function qs(){return new TextEncoder}const ap=new Yn([4294967295,4294967295],0);function up(i){const e=qs().encode(i),n=new sr;return n.update(e),new Uint8Array(n.digest())}function yh(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),u=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Yn([n,o],0),new Yn([u,l],0)]}class ns{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new mu(`Invalid padding: ${n}`);if(o<0)throw new mu(`Invalid hash count: ${o}`);if(e.length>0&&0===this.hashCount)throw new mu(`Invalid hash count: ${o}`);if(0===e.length&&0!==n)throw new mu(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Yn.fromNumber(this.Te)}de(e,n,o){let u=e.add(n.multiply(Yn.fromNumber(o)));return 1===u.compare(ap)&&(u=new Yn([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=up(e),[o,u]=yh(n);for(let l=0;l<this.hashCount;l++){const f=this.de(o,u,l);if(!this.Ae(f))return!1}return!0}static create(e,n,o){const u=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),f=new ns(l,u,n);return o.forEach(w=>f.insert(w)),f}insert(e){if(0===this.Te)return;const n=up(e),[o,u]=yh(n);for(let l=0;l<this.hashCount;l++){const f=this.de(o,u,l);this.Re(f)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class mu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ul{constructor(e,n,o,u,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const u=new Map;return u.set(e,cl.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new ul(qt.min(),u,new Pr(mn),h(),dt())}}class cl{constructor(e,n,o,u,l){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new cl(o,n,dt(),dt(),dt())}}class vh{constructor(e,n,o,u){this.Ve=e,this.removedTargetIds=n,this.key=o,this.me=u}}class cp{constructor(e,n){this.targetId=e,this.fe=n}}class cm{constructor(e,n,o=Jr.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=u}}class lp{constructor(){this.ge=0,this.pe=lm(),this.ye=Jr.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=dt(),n=dt(),o=dt();return this.pe.forEach((u,l)=>{switch(l){case 0:e=e.add(u);break;case 2:n=n.add(u);break;case 1:o=o.add(u);break;default:_t()}}),new cl(this.ye,this.we,e,n,o)}Fe(){this.Se=!1,this.pe=lm()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class ly{constructor(e){this.Le=e,this.ke=new Map,this.qe=h(),this.Qe=dp(),this.Ke=new Pr(mn)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const o=this.ze(n);switch(e.state){case 0:this.je(n)&&o.Ce(e.resumeToken);break;case 1:o.Ne(),o.be||o.Fe(),o.Ce(e.resumeToken);break;case 2:o.Ne(),o.be||this.removeTarget(n);break;case 3:this.je(n)&&(o.Be(),o.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),o.Ce(e.resumeToken));break;default:_t()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((o,u)=>{this.je(u)&&n(u)})}Je(e){const n=e.targetId,o=e.fe.count,u=this.Ye(n);if(u){const l=u.target;if(pc(l))if(0===o){const f=new It(l.path);this.We(n,f,Fr.newNoDocument(f,qt.min()))}else Bt(1===o);else{const f=this.Ze(n);if(f!==o){const w=this.Xe(e),S=w?this.et(w,e,f):1;0!==S&&(this.He(n),this.Ke=this.Ke.insert(n,2===S?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:u=0},hashCount:l=0}=n;let f,w;try{f=Ds(o).toUint8Array()}catch(S){if(S instanceof Bl)return yr("Decoding the base64 bloom filter in existence filter failed ("+S.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw S}try{w=new ns(f,u,l)}catch(S){return yr(S instanceof mu?"BloomFilter error: ":"Applying bloom filter failed: ",S),null}return 0===w.Te?null:w}et(e,n,o){return n.fe.count===o-this.rt(e,n.targetId)?0:2}rt(e,n){const o=this.Le.getRemoteKeysForTarget(n);let u=0;return o.forEach(l=>{const f=this.Le.nt(),w=`projects/${f.projectId}/databases/${f.database}/documents/${l.path.canonicalString()}`;e.mightContain(w)||(this.We(n,l,null),u++)}),u}it(e){const n=new Map;this.ke.forEach((l,f)=>{const w=this.Ye(f);if(w){if(l.current&&pc(w.target)){const S=new It(w.target.path);null!==this.qe.get(S)||this.st(f,S)||this.We(f,S,Fr.newNoDocument(S,e))}l.De&&(n.set(f,l.ve()),l.Fe())}});let o=dt();this.Qe.forEach((l,f)=>{let w=!0;f.forEachWhile(S=>{const k=this.Ye(S);return!k||"TargetPurposeLimboResolution"===k.purpose||(w=!1,!1)}),w&&(o=o.add(l))}),this.qe.forEach((l,f)=>f.setReadTime(e));const u=new ul(e,n,this.Ke,this.qe,o);return this.qe=h(),this.Qe=dp(),this.Ke=new Pr(mn),u}Ue(e,n){if(!this.je(e))return;const o=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,o),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,o){if(!this.je(e))return;const u=this.ze(e);this.st(e,n)?u.Me(n,1):u.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),o&&(this.qe=this.qe.insert(n,o))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new lp,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Tr(mn),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||Je("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new lp),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function dp(){return new Pr(It.comparator)}function lm(){return new Pr(It.comparator)}const dy={asc:"ASCENDING",desc:"DESCENDING"},hp={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fp={and:"AND",or:"OR"};class hy{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vc(i,e){return i.useProto3Json||W(e)?e:{value:e}}function ll(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dm(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function hm(i,e){return ll(i,e.toTimestamp())}function Ei(i){return Bt(!!i),qt.fromTimestamp(function(n){const o=io(n);return new Ot(o.seconds,o.nanos)}(i))}function Eh(i,e){return(o=i,new Jn(["projects",o.projectId,"databases",o.database])).child("documents").child(e).canonicalString();var o}function Ec(i){const e=Jn.fromString(i);return Bt(yp(e)),e}function Bu(i,e){return Eh(i.databaseId,e.path)}function na(i,e){const n=Ec(e);if(n.get(1)!==i.databaseId.projectId)throw new et(je.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new et(je.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new It(fm(n))}function Ql(i,e){return Eh(i.databaseId,e)}function Jl(i){const e=Ec(i);return 4===e.length?Jn.emptyPath():fm(e)}function Xl(i){return new Jn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function fm(i){return Bt(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function pm(i,e,n){return{name:Bu(i,e),fields:n.value.mapValue.fields}}function gm(i,e,n){const o=na(i,e.name),u=Ei(e.updateTime),l=e.createTime?Ei(e.createTime):qt.min(),f=new di({mapValue:{fields:e.fields}}),w=Fr.newFoundDocument(o,u,l,f);return n&&w.setHasCommittedMutations(),n?w.setHasCommittedMutations():w}function dl(i,e){let n;if(e instanceof ta)n={update:pm(i,e.key,e.value)};else if(e instanceof gu)n={delete:Bu(i,e.key)};else if(e instanceof Ma)n={update:pm(i,e.key,e.data),updateMask:gy(e.fieldMask)};else{if(!(e instanceof np))return _t();n={verify:Bu(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(o=>function(l,f){const w=f.transform;if(w instanceof Ra)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(w instanceof fu)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:w.elements}};if(w instanceof Pa)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:w.elements}};if(w instanceof pu)return{fieldPath:f.field.canonicalString(),increment:w.Ie};throw _t()}(0,o))),e.precondition.isNone||(n.currentDocument=void 0!==(l=e.precondition).updateTime?{updateTime:hm(i,l.updateTime)}:void 0!==l.exists?{exists:l.exists}:_t()),n;var l}function hl(i,e){const n=e.currentDocument?void 0!==(l=e.currentDocument).updateTime?hi.updateTime(Ei(l.updateTime)):void 0!==l.exists?hi.exists(l.exists):hi.none():hi.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(f,w){let S=null;"setToServerValue"in w?(Bt("REQUEST_TIME"===w.setToServerValue),S=new Ra):"appendMissingElements"in w?S=new fu(w.appendMissingElements.values||[]):"removeAllFromArray"in w?S=new Pa(w.removeAllFromArray.values||[]):"increment"in w?S=new pu(f,w.increment):_t();const k=Vr.fromServerFormat(w.fieldPath);return new fh(k,S)}(i,u)):[];var l;if(e.update){const u=na(i,e.update.name),l=new di({mapValue:{fields:e.update.fields}});if(e.updateMask){const f=new Gs((e.updateMask.fieldPaths||[]).map($=>Vr.fromServerFormat($)));return new Ma(u,l,f,n,o)}return new ta(u,l,n,o)}if(e.delete){const u=na(i,e.delete);return new gu(u,n)}if(e.verify){const u=na(i,e.verify);return new np(u,n)}return _t()}function Ih(i,e){return{documents:[Ql(i,e.path)]}}function gp(i,e){const n={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(n.parent=Ql(i,o),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ql(i,o.popLast()),n.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(S){if(0!==S.length)return td(Ar.create(S,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const l=function(S){if(0!==S.length)return S.map(k=>{return{field:ju((X=k).field),direction:Ic(X.dir)};var X})}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const f=vc(i,e.limit);return null!==f&&(n.structuredQuery.limit=f),e.startAt&&(n.structuredQuery.startAt={before:(S=e.startAt).inclusive,values:S.position}),e.endAt&&(n.structuredQuery.endAt=function(S){return{before:!S.inclusive,values:S.position}}(e.endAt)),n;var S}function mm(i){let e=Jl(i.parent);const n=i.structuredQuery,o=n.from?n.from.length:0;let u=null;if(o>0){Bt(1===o);const $=n.from[0];$.allDescendants?u=$.collectionId:e=e.child($.collectionId)}let l=[];n.where&&(l=function(X){const fe=_p(X);return fe instanceof Ar&&sh(fe)?fe.getFilters():[fe]}(n.where));let f=[];n.orderBy&&(f=n.orderBy.map(fe=>{return new Vo(ed((gt=fe).field),function(wt){switch(wt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(gt.direction));var gt}));let w=null;n.limit&&(w=function(X){let fe;return fe="object"==typeof X?X.value:X,W(fe)?null:fe}(n.limit));let S=null;var X;n.startAt&&(S=new ko((X=n.startAt).values||[],!!X.before));let k=null;return n.endAt&&(k=function(X){return new ko(X.values||[],!X.before)}(n.endAt)),cu(e,u,f,l,w,"F",S,k)}function _p(i){return void 0!==i.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=ed(n.unaryFilter.field);return An.create(o,"==",{doubleValue:NaN});case"IS_NULL":const u=ed(n.unaryFilter.field);return An.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ed(n.unaryFilter.field);return An.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=ed(n.unaryFilter.field);return An.create(f,"!=",{nullValue:"NULL_VALUE"});default:return _t()}}(i):void 0!==i.fieldFilter?An.create(ed((n=i).fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _t()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==i.compositeFilter?function(n){return Ar.create(n.compositeFilter.filters.map(o=>_p(o)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return _t()}}(n.compositeFilter.op))}(i):_t();var n}function Ic(i){return dy[i]}function _m(i){return hp[i]}function ym(i){return fp[i]}function ju(i){return{fieldPath:i.canonicalString()}}function ed(i){return Vr.fromServerFormat(i.fieldPath)}function td(i){return i instanceof An?function(n){if("=="===n.op){if(jl(n.value))return{unaryFilter:{field:ju(n.field),op:"IS_NAN"}};if(Oo(n.value))return{unaryFilter:{field:ju(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(jl(n.value))return{unaryFilter:{field:ju(n.field),op:"IS_NOT_NAN"}};if(Oo(n.value))return{unaryFilter:{field:ju(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ju(n.field),op:_m(n.op),value:n.value}}}(i):i instanceof Ar?function(n){const o=n.getFilters().map(u=>td(u));return 1===o.length?o[0]:{compositeFilter:{op:ym(n.op),filters:o}}}(i):_t()}function gy(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function yp(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class xa{constructor(e,n,o,u,l=qt.min(),f=qt.min(),w=Jr.EMPTY_BYTE_STRING,S=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=w,this.expectedCount=S}withSequenceNumber(e){return new xa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class vp{constructor(e){this.ut=e}}function Ip(i,e){const n=e.key,o={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Dc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:Bu(l=i.ut,(f=e).key),fields:f.data.value.mapValue.fields,updateTime:ll(l,f.version.toTimestamp()),createTime:ll(l,f.createTime.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:n.path.toArray(),readTime:ra(e.version)};else{if(!e.isUnknownDocument())return _t();o.unknownDocument={path:n.path.toArray(),version:ra(e.version)}}var l,f;return o}function Dc(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function ra(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function $u(i){const e=new Ot(i.seconds,i.nanoseconds);return qt.fromTimestamp(e)}function _u(i,e){const n=(e.baseMutations||[]).map(l=>hl(i.ut,l));for(let l=0;l<e.mutations.length-1;++l)l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(e.mutations[l].updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l);const o=e.mutations.map(l=>hl(i.ut,l)),u=Ot.fromMillis(e.localWriteTimeMs);return new rp(e.batchId,u,n,o)}function Hu(i){const e=$u(i.readTime),n=void 0!==i.lastLimboFreeSnapshotVersion?$u(i.lastLimboFreeSnapshotVersion):qt.min();let o;return o=void 0!==i.query.documents?(Bt(1===(l=i.query).documents.length),es(lu(Jl(l.documents[0])))):function(l){return es(mm(l))}(i.query),new xa(o,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,n,Jr.fromBase64String(i.resumeToken));var l}function Dp(i,e){const n=ra(e.snapshotVersion),o=ra(e.lastLimboFreeSnapshotVersion);let u;u=pc(e.target)?Ih(i.ut,e.target):gp(i.ut,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:yo(e.target),readTime:n,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function nd(i){const e=mm({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?mc(e,e.limit,"L"):e}function wc(i,e){return new mh(e.largestBatchId,hl(i.ut,e.overlayMutation))}function vm(i,e){const n=e.path.lastSegment();return[i,be(e.path.popLast()),n]}function wp(i,e,n,o){return{indexId:i,uid:e.uid||"",sequenceNumber:n,readTime:ra(o.readTime),documentKey:be(o.documentKey.path),largestBatchId:o.largestBatchId}}class my{getBundleMetadata(e,n){return Em(e).get(n).next(o=>{if(o)return{id:(l=o).bundleId,createTime:$u(l.createTime),version:l.version};var l})}saveBundleMetadata(e,n){return Em(e).put({bundleId:(u=n).id,createTime:ra(Ei(u.createTime)),version:u.version});var u}getNamedQuery(e,n){return Im(e).get(n).next(o=>{if(o)return{name:(l=o).name,query:nd(l.bundledQuery),readTime:$u(l.readTime)};var l})}saveNamedQuery(e,n){return Im(e).put({name:(u=n).name,readTime:ra(Ei(u.readTime)),bundledQuery:u.bundledQuery});var u}}function Em(i){return Ti(i,"bundles")}function Im(i){return Ti(i,"namedQueries")}class rd{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){return new rd(e,n.uid||"")}getOverlay(e,n){return fl(e).get(vm(this.userId,n)).next(o=>o?wc(this.serializer,o):null)}getOverlays(e,n){const o=K();return Re.forEach(n,u=>this.getOverlay(e,u).next(l=>{null!==l&&o.set(u,l)})).next(()=>o)}saveOverlays(e,n,o){const u=[];return o.forEach((l,f)=>{const w=new mh(n,f);u.push(this.lt(e,w))}),Re.waitFor(u)}removeOverlaysForBatchId(e,n,o){const u=new Set;n.forEach(f=>u.add(be(f.getCollectionPath())));const l=[];return u.forEach(f=>{const w=IDBKeyRange.bound([this.userId,f,o],[this.userId,f,o+1],!1,!0);l.push(fl(e).H("collectionPathOverlayIndex",w))}),Re.waitFor(l)}getOverlaysForCollection(e,n,o){const u=K(),l=be(n),f=IDBKeyRange.bound([this.userId,l,o],[this.userId,l,Number.POSITIVE_INFINITY],!0);return fl(e).W("collectionPathOverlayIndex",f).next(w=>{for(const S of w){const k=wc(this.serializer,S);u.set(k.getKey(),k)}return u})}getOverlaysForCollectionGroup(e,n,o,u){const l=K();let f;const w=IDBKeyRange.bound([this.userId,n,o],[this.userId,n,Number.POSITIVE_INFINITY],!0);return fl(e).Y({index:"collectionGroupOverlayIndex",range:w},(S,k,$)=>{const X=wc(this.serializer,k);l.size()<u||X.largestBatchId===f?(l.set(X.getKey(),X),f=X.largestBatchId):$.done()}).next(()=>l)}lt(e,n){return fl(e).put(function(u,l,f){const[w,S,k]=vm(l,f.mutation.key);return{userId:l,collectionPath:S,documentId:k,collectionGroup:f.mutation.key.getCollectionGroup(),largestBatchId:f.largestBatchId,overlayMutation:dl(u.ut,f.mutation)}}(this.serializer,this.userId,n))}}function fl(i){return Ti(i,"documentOverlays")}class Na{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(Gr(e.integerValue));else if("doubleValue"in e){const o=Gr(e.doubleValue);isNaN(o)?this.Tt(n,13):(this.Tt(n,15),ne(o)?n.Et(0):n.Et(o))}else if("timestampValue"in e){const o=e.timestampValue;this.Tt(n,20),"string"==typeof o?n.dt(o):(n.dt(`${o.seconds||""}`),n.Et(o.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(Ds(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const o=e.geoPointValue;this.Tt(n,45),n.Et(o.latitude||0),n.Et(o.longitude||0)}else"mapValue"in e?ou(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):_t()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const o=e.fields||{};this.Tt(n,55);for(const u of Object.keys(o))this.At(u,n),this.Pt(o[u],n)}yt(e,n){const o=e.values||[];this.Tt(n,50);for(const u of o)this.Pt(u,n)}ft(e,n){this.Tt(n,37),It.fromName(e).path.forEach(o=>{this.Tt(n,60),this.wt(o,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}function Tp(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function Tc(i){const e=64-function(o){let u=0;for(let l=0;l<8;++l){const f=Tp(255&o[l]);if(u+=f,8!==f)break}return u}(i);return Math.ceil(e/8)}Na.St=new Na;class _y{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Dt(o.value),o=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Ft(o.value),o=n.next();this.Mt()}xt(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Dt(o);else if(o<2048)this.Dt(960|o>>>6),this.Dt(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Dt(480|o>>>12),this.Dt(128|63&o>>>6),this.Dt(128|63&o);else{const u=n.codePointAt(0);this.Dt(240|u>>>18),this.Dt(128|63&u>>>12),this.Dt(128|63&u>>>6),this.Dt(128|63&u)}}this.Ct()}Ot(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Ft(o);else if(o<2048)this.Ft(960|o>>>6),this.Ft(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Ft(480|o>>>12),this.Ft(128|63&o>>>6),this.Ft(128|63&o);else{const u=n.codePointAt(0);this.Ft(240|u>>>18),this.Ft(128|63&u>>>12),this.Ft(128|63&u>>>6),this.Ft(128|63&u)}}this.Mt()}Nt(e){const n=this.Bt(e),o=Tc(n);this.Lt(1+o),this.buffer[this.position++]=255&o;for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=255&n[u]}kt(e){const n=this.Bt(e),o=Tc(n);this.Lt(1+o),this.buffer[this.position++]=~(255&o);for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=~(255&n[u])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(l){const f=new DataView(new ArrayBuffer(8));return f.setFloat64(0,l,!1),new Uint8Array(f.buffer)}(e),o=0!=(128&n[0]);n[0]^=o?255:128;for(let u=1;u<n.length;++u)n[u]^=o?255:0;return n}Dt(e){const n=255&e;0===n?(this.Qt(0),this.Qt(255)):255===n?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;0===n?(this.$t(0),this.$t(255)):255===n?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let o=2*this.buffer.length;o<n&&(o=n);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class yy{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class xE{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class id{constructor(){this.Wt=new _y,this.Gt=new yy(this.Wt),this.zt=new xE(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class yu{constructor(e,n,o,u){this.indexId=e,this.documentKey=n,this.arrayValue=o,this.directionalValue=u}Ht(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(n);return o.set(this.directionalValue,0),n!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new yu(this.indexId,this.documentKey,this.arrayValue,o)}}function zu(i,e){let n=i.indexId-e.indexId;return 0!==n?n:(n=Cc(i.arrayValue,e.arrayValue),0!==n?n:(n=Cc(i.directionalValue,e.directionalValue),0!==n?n:It.comparator(i.documentKey,e.documentKey)))}function Cc(i,e){for(let n=0;n<i.length&&n<e.length;++n){const o=i[n]-e[n];if(0!==o)return o}return i.length-e.length}class sd{constructor(e){this.Jt=new Tr((n,o)=>Vr.comparator(n.field,o.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const o=n;o.isInequality()?this.Jt=this.Jt.add(o):this.Zt.push(o)}}get Xt(){return this.Jt.size>1}en(e){if(Bt(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=qc(e);if(void 0!==n&&!this.tn(n))return!1;const o=Rr(e);let u=new Set,l=0,f=0;for(;l<o.length&&this.tn(o[l]);++l)u=u.add(o[l].fieldPath.canonicalString());if(l===o.length)return!0;if(this.Jt.size>0){const w=this.Jt.getIterator().getNext();if(!u.has(w.field.canonicalString())){const S=o[l];if(!this.nn(w,S)||!this.rn(this.Yt[f++],S))return!1}++l}for(;l<o.length;++l)if(f>=this.Yt.length||!this.rn(this.Yt[f++],o[l]))return!1;return!0}sn(){if(this.Xt)return null;let e=new Tr(Vr.comparator);const n=[];for(const o of this.Zt)if(!o.field.isKeyField())if("array-contains"===o.op||"array-contains-any"===o.op)n.push(new mo(o.field,2));else{if(e.has(o.field))continue;e=e.add(o.field),n.push(new mo(o.field,0))}for(const o of this.Yt)o.field.isKeyField()||e.has(o.field)||(e=e.add(o.field),n.push(new mo(o.field,"asc"===o.dir?0:1)));return new Hi(Hi.UNKNOWN_ID,this.collectionId,n,Xe.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function Dh(i){var e,n;if(Bt(i instanceof An||i instanceof Ar),i instanceof An){if(i instanceof Hl){const u=(null===(n=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(l=>An.create(i.field,"==",l)))||[];return Ar.create(u,"or")}return i}const o=i.filters.map(u=>Dh(u));return Ar.create(o,i.op)}function Dm(i){if(0===i.getFilters().length)return[];const e=Ap(Dh(i));return Bt(Cp(e)),wh(e)||Th(e)?[e]:e.getFilters()}function wh(i){return i instanceof An}function Th(i){return i instanceof Ar&&sh(i)}function Cp(i){return wh(i)||Th(i)||function(n){if(n instanceof Ar&&ih(n)){for(const o of n.getFilters())if(!wh(o)&&!Th(o))return!1;return!0}return!1}(i)}function Ap(i){if(Bt(i instanceof An||i instanceof Ar),i instanceof An)return i;if(1===i.filters.length)return Ap(i.filters[0]);const e=i.filters.map(o=>Ap(o));let n=Ar.create(e,i.op);return n=Ch(n),Cp(n)?n:(Bt(n instanceof Ar),Bt(Ou(n)),Bt(n.filters.length>1),n.filters.reduce((o,u)=>Sp(o,u)))}function Sp(i,e){let n;return Bt(i instanceof An||i instanceof Ar),Bt(e instanceof An||e instanceof Ar),n=i instanceof An?e instanceof An?Ar.create([i,e],"and"):wm(i,e):e instanceof An?wm(e,i):function(u,l){if(Bt(u.filters.length>0&&l.filters.length>0),Ou(u)&&Ou(l))return Kf(u,l.getFilters());const f=ih(u)?u:l,w=ih(u)?l:u,S=f.filters.map(k=>Sp(k,w));return Ar.create(S,"or")}(i,e),Ch(n)}function wm(i,e){if(Ou(e))return Kf(e,i.getFilters());{const n=e.filters.map(o=>Sp(i,o));return Ar.create(n,"or")}}function Ch(i){if(Bt(i instanceof An||i instanceof Ar),i instanceof An)return i;const e=i.getFilters();if(1===e.length)return Ch(e[0]);if(Wf(i))return i;const n=e.map(u=>Ch(u)),o=[];return n.forEach(u=>{u instanceof An?o.push(u):u instanceof Ar&&(u.op===i.op?o.push(...u.filters):o.push(u))}),1===o.length?o[0]:Ar.create(o,i.op)}class vy{constructor(){this.on=new Oa}addToCollectionParentIndex(e,n){return this.on.add(n),Re.resolve()}getCollectionParents(e,n){return Re.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return Re.resolve()}deleteFieldIndex(e,n){return Re.resolve()}deleteAllFieldIndexes(e){return Re.resolve()}createTargetIndexes(e,n){return Re.resolve()}getDocumentsMatchingTarget(e,n){return Re.resolve(null)}getIndexType(e,n){return Re.resolve(0)}getFieldIndexes(e,n){return Re.resolve([])}getNextCollectionGroupToUpdate(e){return Re.resolve(null)}getMinOffset(e,n){return Re.resolve(zi.min())}getMinOffsetFromCollectionGroup(e,n){return Re.resolve(zi.min())}updateCollectionGroup(e,n,o){return Re.resolve()}updateIndexEntries(e,n){return Re.resolve()}}class Oa{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n]||new Tr(Jn.comparator),l=!u.has(o);return this.index[n]=u.add(o),l}has(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n];return u&&u.has(o)}getEntries(e){return(this.index[e]||new Tr(Jn.comparator)).toArray()}}const Gu=new Uint8Array(0);class Ey{constructor(e,n){this.user=e,this.databaseId=n,this._n=new Oa,this.an=new Xo(o=>yo(o),(o,u)=>uu(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const o=n.lastSegment(),u=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const l={collectionId:o,parent:be(u)};return Iy(e).put(l)}return Re.resolve()}getCollectionParents(e,n){const o=[],u=IDBKeyRange.bound([n,""],[Vl(n),""],!1,!0);return Iy(e).W(u).next(l=>{for(const f of l){if(f.collectionId!==n)break;o.push($n(f.parent))}return o})}addFieldIndex(e,n){const o=Ah(e),u={indexId:(w=n).indexId,collectionGroup:w.collectionGroup,fields:w.fields.map(S=>[S.fieldPath.canonicalString(),S.kind])};var w;delete u.indexId;const l=o.add(u);if(n.indexState){const f=ad(e);return l.next(w=>{f.put(wp(w,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return l.next()}deleteFieldIndex(e,n){const o=Ah(e),u=ad(e),l=od(e);return o.delete(n.indexId).next(()=>u.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Ah(e),o=od(e),u=ad(e);return n.H().next(()=>o.H()).next(()=>u.H())}createTargetIndexes(e,n){return Re.forEach(this.un(n),o=>this.getIndexType(e,o).next(u=>{if(0===u||1===u){const l=new sd(o).sn();if(null!=l)return this.addFieldIndex(e,l)}}))}getDocumentsMatchingTarget(e,n){const o=od(e);let u=!0;const l=new Map;return Re.forEach(this.un(n),f=>this.cn(e,f).next(w=>{u&&(u=!!w),l.set(f,w)})).next(()=>{if(u){let f=dt();const w=[];return Re.forEach(l,(S,k)=>{var _n;Je("IndexedDbIndexManager",`Using index ${_n=S,`id=${_n.indexId}|cg=${_n.collectionGroup}|f=${_n.fields.map(ln=>`${ln.fieldPath}:${ln.kind}`).join(",")}`} to execute ${yo(n)}`);const $=function(_n,ln){const Lr=qc(ln);if(void 0===Lr)return null;for(const Sr of rl(_n,Lr.fieldPath))switch(Sr.op){case"array-contains-any":return Sr.value.arrayValue.values||[];case"array-contains":return[Sr.value]}return null}(k,S),X=function(_n,ln){const Lr=new Map;for(const Sr of Rr(ln))for(const os of rl(_n,Sr.fieldPath))switch(os.op){case"==":case"in":Lr.set(Sr.fieldPath.canonicalString(),os.value);break;case"not-in":case"!=":return Lr.set(Sr.fieldPath.canonicalString(),os.value),Array.from(Lr.values())}return null}(k,S),fe=function(_n,ln){const Lr=[];let Sr=!0;for(const os of Rr(ln)){const da=0===os.kind?zl(_n,os.fieldPath,_n.startAt):ws(_n,os.fieldPath,_n.startAt);Lr.push(da.value),Sr&&(Sr=da.inclusive)}return new ko(Lr,Sr)}(k,S),Oe=function(_n,ln){const Lr=[];let Sr=!0;for(const os of Rr(ln)){const da=0===os.kind?ws(_n,os.fieldPath,_n.endAt):zl(_n,os.fieldPath,_n.endAt);Lr.push(da.value),Sr&&(Sr=da.inclusive)}return new ko(Lr,Sr)}(k,S),gt=this.ln(S,k,fe),Dt=this.ln(S,k,Oe),wt=this.hn(S,k,X),hn=this.Pn(S.indexId,$,gt,fe.inclusive,Dt,Oe.inclusive,wt);return Re.forEach(hn,vn=>o.j(vn,n.limit).next(_n=>{_n.forEach(ln=>{const Lr=It.fromSegments(ln.documentKey);f.has(Lr)||(f=f.add(Lr),w.push(Lr))})}))}).next(()=>w)}return Re.resolve(null)})}un(e){let n=this.an.get(e);return n||(n=0===e.filters.length?[e]:Dm(Ar.create(e.filters,"and")).map(o=>Vu(e.path,e.collectionGroup,e.orderBy,o.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,o,u,l,f,w){const S=(null!=n?n.length:1)*Math.max(o.length,l.length),k=S/(null!=n?n.length:1),$=[];for(let X=0;X<S;++X){const fe=n?this.In(n[X/k]):Gu,Oe=this.Tn(e,fe,o[X%k],u),gt=this.En(e,fe,l[X%k],f),Dt=w.map(wt=>this.Tn(e,fe,wt,!0));$.push(...this.createRange(Oe,gt,Dt))}return $}Tn(e,n,o,u){const l=new yu(e,It.empty(),n,o);return u?l:l.Ht()}En(e,n,o,u){const l=new yu(e,It.empty(),n,o);return u?l.Ht():l}cn(e,n){const o=new sd(n),u=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,u).next(l=>{let f=null;for(const w of l)o.en(w)&&(!f||w.fields.length>f.fields.length)&&(f=w);return f})}getIndexType(e,n){let o=2;const u=this.un(n);return Re.forEach(u,l=>this.cn(e,l).next(f=>{f?0!==o&&f.fields.length<function(S){let k=new Tr(Vr.comparator),$=!1;for(const X of S.filters)for(const fe of X.getFlattenedFilters())fe.field.isKeyField()||("array-contains"===fe.op||"array-contains-any"===fe.op?$=!0:k=k.add(fe.field));for(const X of S.orderBy)X.field.isKeyField()||(k=k.add(X.field));return k.size+($?1:0)}(l)&&(o=1):o=0})).next(()=>null!==n.limit&&u.length>1&&2===o?1:o)}dn(e,n){const o=new id;for(const u of Rr(e)){const l=n.data.field(u.fieldPath);if(null==l)return null;const f=o.jt(u.kind);Na.St.ht(l,f)}return o.Ut()}In(e){const n=new id;return Na.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const o=new id;return Na.St.ht(Aa(this.databaseId,n),o.jt(function(l){const f=Rr(l);return 0===f.length?0:f[f.length-1].kind}(e))),o.Ut()}hn(e,n,o){if(null===o)return[];let u=[];u.push(new id);let l=0;for(const f of Rr(e)){const w=o[l++];for(const S of u)if(this.Rn(n,f.fieldPath)&&No(w))u=this.Vn(u,f,w);else{const k=S.jt(f.kind);Na.St.ht(w,k)}}return this.mn(u)}ln(e,n,o){return this.hn(e,n,o.position)}mn(e){const n=[];for(let o=0;o<e.length;++o)n[o]=e[o].Ut();return n}Vn(e,n,o){const u=[...e],l=[];for(const f of o.arrayValue.values||[])for(const w of u){const S=new id;S.seed(w.Ut()),Na.St.ht(f,S.jt(n.kind)),l.push(S)}return l}Rn(e,n){return!!e.filters.find(o=>o instanceof An&&o.field.isEqual(n)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,n){const o=Ah(e),u=ad(e);return(n?o.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):o.W()).next(l=>{const f=[];return Re.forEach(l,w=>u.get([w.indexId,this.uid]).next(S=>{f.push(function($,X){const fe=X?new Xe(X.sequenceNumber,new zi($u(X.readTime),new It($n(X.documentKey)),X.largestBatchId)):Xe.empty(),Oe=$.fields.map(([gt,Dt])=>new mo(Vr.fromServerFormat(gt),Dt));return new Hi($.indexId,$.collectionGroup,Oe,fe)}(w,S))})).next(()=>f)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((o,u)=>{const l=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==l?l:mn(o.collectionGroup,u.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,o){const u=Ah(e),l=ad(e);return this.fn(e).next(f=>u.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(w=>Re.forEach(w,S=>l.put(wp(S.indexId,this.user,f,o)))))}updateIndexEntries(e,n){const o=new Map;return Re.forEach(n,(u,l)=>{const f=o.get(u.collectionGroup);return(f?Re.resolve(f):this.getFieldIndexes(e,u.collectionGroup)).next(w=>(o.set(u.collectionGroup,w),Re.forEach(w,S=>this.gn(e,u,S).next(k=>{const $=this.pn(l,S);return k.isEqual($)?Re.resolve():this.yn(e,l,S,k,$)}))))})}wn(e,n,o,u){return od(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.An(o,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,o,u){return od(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.An(o,n.key),n.key.path.toArray()])}gn(e,n,o){const u=od(e);let l=new Tr(zu);return u.Y({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.An(o,n)])},(f,w)=>{l=l.add(new yu(o.indexId,n,w.arrayValue,w.directionalValue))}).next(()=>l)}pn(e,n){let o=new Tr(zu);const u=this.dn(n,e);if(null==u)return o;const l=qc(n);if(null!=l){const f=e.data.field(l.fieldPath);if(No(f))for(const w of f.arrayValue.values||[])o=o.add(new yu(n.indexId,e.key,this.In(w),u))}else o=o.add(new yu(n.indexId,e.key,Gu,u));return o}yn(e,n,o,u,l){Je("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const f=[];return function(S,k,$,X,fe){const Oe=S.getIterator(),gt=k.getIterator();let Dt=Ta(Oe),wt=Ta(gt);for(;Dt||wt;){let hn=!1,vn=!1;if(Dt&&wt){const _n=$(Dt,wt);_n<0?vn=!0:_n>0&&(hn=!0)}else null!=Dt?vn=!0:hn=!0;hn?(X(wt),wt=Ta(gt)):vn?(fe(Dt),Dt=Ta(Oe)):(Dt=Ta(Oe),wt=Ta(gt))}}(u,l,zu,w=>{f.push(this.wn(e,n,o,w))},w=>{f.push(this.Sn(e,n,o,w))}),Re.waitFor(f)}fn(e){let n=1;return ad(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,l)=>{l.done(),n=u.sequenceNumber+1}).next(()=>n)}createRange(e,n,o){o=o.sort((f,w)=>zu(f,w)).filter((f,w,S)=>!w||0!==zu(f,S[w-1]));const u=[];u.push(e);for(const f of o){const w=zu(f,e),S=zu(f,n);if(0===w)u[0]=e.Ht();else if(w>0&&S<0)u.push(f),u.push(f.Ht());else if(S>0)break}u.push(n);const l=[];for(let f=0;f<u.length;f+=2){if(this.bn(u[f],u[f+1]))return[];l.push(IDBKeyRange.bound([u[f].indexId,this.uid,u[f].arrayValue,u[f].directionalValue,Gu,[]],[u[f+1].indexId,this.uid,u[f+1].arrayValue,u[f+1].directionalValue,Gu,[]]))}return l}bn(e,n){return zu(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Dy)}getMinOffset(e,n){return Re.mapArray(this.un(n),o=>this.cn(e,o).next(u=>u||_t())).next(Dy)}}function Iy(i){return Ti(i,"collectionParents")}function od(i){return Ti(i,"indexEntries")}function Ah(i){return Ti(i,"indexConfiguration")}function ad(i){return Ti(i,"indexState")}function Dy(i){Bt(0!==i.length);let e=i[0].indexState.offset,n=e.largestBatchId;for(let o=1;o<i.length;o++){const u=i[o].indexState.offset;li(u,e)<0&&(e=u),n<u.largestBatchId&&(n=u.largestBatchId)}return new zi(e.readTime,e.documentKey,n)}const bp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ts{constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Ts(e,Ts.DEFAULT_COLLECTION_PERCENTILE,Ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Tm(i,e,n){const o=i.store("mutations"),u=i.store("documentMutations"),l=[],f=IDBKeyRange.only(n.batchId);let w=0;const S=o.Y({range:f},($,X,fe)=>(w++,fe.delete()));l.push(S.next(()=>{Bt(1===w)}));const k=[];for(const $ of n.mutations){const X=Ko(e,$.key.path,n.batchId);l.push(u.delete(X)),k.push($.key)}return Re.waitFor(l).next(()=>k)}function Sh(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw _t();e=i.noDocument}return JSON.stringify(e).length}Ts.DEFAULT_COLLECTION_PERCENTILE=10,Ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ts.DEFAULT=new Ts(41943040,Ts.DEFAULT_COLLECTION_PERCENTILE,Ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ts.DISABLED=new Ts(-1,0,0);class bh{constructor(e,n,o,u){this.userId=e,this.serializer=n,this.indexManager=o,this.referenceDelegate=u,this.Dn={}}static ct(e,n,o,u){Bt(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new bh(l,n,o,u)}checkEmpty(e){let n=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Cs(e).Y({index:"userMutationsIndex",range:o},(u,l,f)=>{n=!1,f.done()}).next(()=>n)}addMutationBatch(e,n,o,u){const l=ka(e),f=Cs(e);return f.add({}).next(w=>{Bt("number"==typeof w);const S=new rp(w,n,o,u),k=function(Oe,gt,Dt){const wt=Dt.baseMutations.map(vn=>dl(Oe.ut,vn)),hn=Dt.mutations.map(vn=>dl(Oe.ut,vn));return{userId:gt,batchId:Dt.batchId,localWriteTimeMs:Dt.localWriteTime.toMillis(),baseMutations:wt,mutations:hn}}(this.serializer,this.userId,S),$=[];let X=new Tr((fe,Oe)=>mn(fe.canonicalString(),Oe.canonicalString()));for(const fe of u){const Oe=Ko(this.userId,fe.key.path,w);X=X.add(fe.key.path.popLast()),$.push(f.put(k)),$.push(l.put(Oe,Ia))}return X.forEach(fe=>{$.push(this.indexManager.addToCollectionParentIndex(e,fe))}),e.addOnCommittedListener(()=>{this.Dn[w]=S.keys()}),Re.waitFor($).next(()=>S)})}lookupMutationBatch(e,n){return Cs(e).get(n).next(o=>o?(Bt(o.userId===this.userId),_u(this.serializer,o)):null)}Cn(e,n){return this.Dn[n]?Re.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(o=>{if(o){const u=o.keys();return this.Dn[n]=u,u}return null})}getNextMutationBatchAfterBatchId(e,n){const o=n+1,u=IDBKeyRange.lowerBound([this.userId,o]);let l=null;return Cs(e).Y({index:"userMutationsIndex",range:u},(f,w,S)=>{w.userId===this.userId&&(Bt(w.batchId>=o),l=_u(this.serializer,w)),S.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return Cs(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(u,l,f)=>{o=l.batchId,f.done()}).next(()=>o)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Cs(e).W("userMutationsIndex",n).next(o=>o.map(u=>_u(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(e,n){const o=fs(this.userId,n.path),u=IDBKeyRange.lowerBound(o),l=[];return ka(e).Y({range:u},(f,w,S)=>{const[k,$,X]=f,fe=$n($);if(k===this.userId&&n.path.isEqual(fe))return Cs(e).get(X).next(Oe=>{if(!Oe)throw _t();Bt(Oe.userId===this.userId),l.push(_u(this.serializer,Oe))});S.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new Tr(mn);const u=[];return n.forEach(l=>{const f=fs(this.userId,l.path),w=IDBKeyRange.lowerBound(f),S=ka(e).Y({range:w},(k,$,X)=>{const[fe,Oe,gt]=k,Dt=$n(Oe);fe===this.userId&&l.path.isEqual(Dt)?o=o.add(gt):X.done()});u.push(S)}),Re.waitFor(u).next(()=>this.vn(e,o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1,l=fs(this.userId,o),f=IDBKeyRange.lowerBound(l);let w=new Tr(mn);return ka(e).Y({range:f},(S,k,$)=>{const[X,fe,Oe]=S,gt=$n(fe);X===this.userId&&o.isPrefixOf(gt)?gt.length===u&&(w=w.add(Oe)):$.done()}).next(()=>this.vn(e,w))}vn(e,n){const o=[],u=[];return n.forEach(l=>{u.push(Cs(e).get(l).next(f=>{if(null===f)throw _t();Bt(f.userId===this.userId),o.push(_u(this.serializer,f))}))}),Re.waitFor(u).next(()=>o)}removeMutationBatch(e,n){return Tm(e.ae,this.userId,n).next(o=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),Re.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return Re.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return ka(e).Y({range:o},(l,f,w)=>{if(l[0]===this.userId){const S=$n(l[1]);u.push(S)}else w.done()}).next(()=>{Bt(0===u.length)})})}containsKey(e,n){return Rh(e,this.userId,n)}Mn(e){return Rp(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Rh(i,e,n){const o=fs(e,n.path),u=o[1],l=IDBKeyRange.lowerBound(o);let f=!1;return ka(i).Y({range:l,J:!0},(w,S,k)=>{const[$,X,fe]=w;$===e&&X===u&&(f=!0),k.done()}).next(()=>f)}function Cs(i){return Ti(i,"mutations")}function ka(i){return Ti(i,"documentMutations")}function Rp(i){return Ti(i,"mutationQueues")}class Wu{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Wu(0)}static Nn(){return new Wu(-1)}}class Cm{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const o=new Wu(n.highestTargetId);return n.highestTargetId=o.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>qt.fromTimestamp(new Ot(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,o){return this.Bn(e).next(u=>(u.highestListenSequenceNumber=n,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),n>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=n),this.Ln(e,u)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(o=>(o.targetCount+=1,this.qn(n,o),this.Ln(e,o))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ud(e).delete(n.targetId)).next(()=>this.Bn(e)).next(o=>(Bt(o.targetCount>0),o.targetCount-=1,this.Ln(e,o)))}removeTargets(e,n,o){let u=0;const l=[];return ud(e).Y((f,w)=>{const S=Hu(w);S.sequenceNumber<=n&&null===o.get(S.targetId)&&(u++,l.push(this.removeTargetData(e,S)))}).next(()=>Re.waitFor(l)).next(()=>u)}forEachTarget(e,n){return ud(e).Y((o,u)=>{const l=Hu(u);n(l)})}Bn(e){return wy(e).get("targetGlobalKey").next(n=>(Bt(null!==n),n))}Ln(e,n){return wy(e).put("targetGlobalKey",n)}kn(e,n){return ud(e).put(Dp(this.serializer,n))}qn(e,n){let o=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,o=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const o=yo(n),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let l=null;return ud(e).Y({range:u,index:"queryTargetsIndex"},(f,w,S)=>{const k=Hu(w);uu(n,k.target)&&(l=k,S.done())}).next(()=>l)}addMatchingKeys(e,n,o){const u=[],l=Ac(e);return n.forEach(f=>{const w=be(f.path);u.push(l.put({targetId:o,path:w})),u.push(this.referenceDelegate.addReference(e,o,f))}),Re.waitFor(u)}removeMatchingKeys(e,n,o){const u=Ac(e);return Re.forEach(n,l=>{const f=be(l.path);return Re.waitFor([u.delete([o,f]),this.referenceDelegate.removeReference(e,o,l)])})}removeMatchingKeysForTargetId(e,n){const o=Ac(e),u=IDBKeyRange.bound([n],[n+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,n){const o=IDBKeyRange.bound([n],[n+1],!1,!0),u=Ac(e);let l=dt();return u.Y({range:o,J:!0},(f,w,S)=>{const k=$n(f[1]),$=new It(k);l=l.add($)}).next(()=>l)}containsKey(e,n){const o=be(n.path),u=IDBKeyRange.bound([o],[Vl(o)],!1,!0);let l=0;return Ac(e).Y({index:"documentTargetsIndex",J:!0,range:u},([f,w],S,k)=>{0!==f&&(l++,k.done())}).next(()=>l>0)}_t(e,n){return ud(e).get(n).next(o=>o?Hu(o):null)}}function ud(i){return Ti(i,"targets")}function wy(i){return Ti(i,"targetGlobal")}function Ac(i){return Ti(i,"targetDocuments")}function Ph([i,e],[n,o]){const u=mn(i,n);return 0===u?mn(e,o):u}class Pp{constructor(e){this.Qn=e,this.buffer=new Tr(Ph),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();Ph(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Ty{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var n=this;Je("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,p.Z)(function*(){n.Wn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(o){wi(o)?Je("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Yr(o)}yield n.Gn(3e5)}))}}class NE{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(o=>Math.floor(n/100*o))}nthSequenceNumber(e,n){if(0===n)return Re.resolve(x._e);const o=new Pp(n);return this.zn.forEachTarget(e,u=>o.Un(u.sequenceNumber)).next(()=>this.zn.Hn(e,u=>o.Un(u))).next(()=>o.maxValue)}removeTargets(e,n,o){return this.zn.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(Je("LruGarbageCollector","Garbage collection skipped; disabled"),Re.resolve(bp)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(Je("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bp):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let o,u,l,f,w,S,k;const $=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(X=>(X>this.params.maximumSequenceNumbersToCollect?(Je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${X}`),u=this.params.maximumSequenceNumbersToCollect):u=X,f=Date.now(),this.nthSequenceNumber(e,u))).next(X=>(o=X,w=Date.now(),this.removeTargets(e,o,n))).next(X=>(l=X,S=Date.now(),this.removeOrphanedDocuments(e,o))).next(X=>(k=Date.now(),kr()<=ue.in.DEBUG&&Je("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${f-$}ms\n\tDetermined least recently used ${u} in `+(w-f)+`ms\n\tRemoved ${l} targets in `+(S-w)+`ms\n\tRemoved ${X} documents in `+(k-S)+`ms\nTotal Duration: ${k-$}ms`),Re.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:l,documentsRemoved:X})))}}class Cy{constructor(e,n){this.db=e,this.garbageCollector=function Mp(i,e){return new NE(i,e)}(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>n.next(u=>o+u))}Yn(e){let n=0;return this.Hn(e,o=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(o,u)=>n(u))}addReference(e,n,o){return Mh(e,o)}removeReference(e,n,o){return Mh(e,o)}removeTargets(e,n,o){return this.db.getTargetCache().removeTargets(e,n,o)}markPotentiallyOrphaned(e,n){return Mh(e,n)}Xn(e,n){return function(u,l){let f=!1;return Rp(u).Z(w=>Rh(u,w,l).next(S=>(S&&(f=!0),Re.resolve(!S)))).next(()=>f)}(e,n)}removeOrphanedDocuments(e,n){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let l=0;return this.Zn(e,(f,w)=>{if(w<=n){const S=this.Xn(e,f).next(k=>{if(!k)return l++,o.getEntry(e,f).next(()=>(o.removeEntry(f,qt.min()),Ac(e).delete([0,be(f.path)])))});u.push(S)}}).next(()=>Re.waitFor(u)).next(()=>o.apply(e)).next(()=>l)}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,n){return Mh(e,n)}Zn(e,n){const o=Ac(e);let u,l=x._e;return o.Y({index:"documentTargetsIndex"},([f,w],{path:S,sequenceNumber:k})=>{0===f?(l!==x._e&&n(new It($n(u)),l),l=k,u=S):l=x._e}).next(()=>{l!==x._e&&n(new It($n(u)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Mh(i,e){return Ac(i).put((u=i.currentSequenceNumber,{targetId:0,path:be(e.path),sequenceNumber:u}));var u}class Am{constructor(){this.changes=new Xo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Fr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return void 0!==o?Re.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ay{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,o){return vu(e).put(o)}removeEntry(e,n,o){return vu(e).delete(function(l,f){const w=l.path.toArray();return[w.slice(0,w.length-2),w[w.length-2],Dc(f),w[w.length-1]]}(n,o))}updateMetadata(e,n){return this.getMetadata(e).next(o=>(o.byteSize+=n,this.er(e,o)))}getEntry(e,n){let o=Fr.newInvalidDocument(n);return vu(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(cd(n))},(u,l)=>{o=this.tr(n,l)}).next(()=>o)}nr(e,n){let o={size:0,document:Fr.newInvalidDocument(n)};return vu(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(cd(n))},(u,l)=>{o={document:this.tr(n,l),size:Sh(l)}}).next(()=>o)}getEntries(e,n){let o=h();return this.rr(e,n,(u,l)=>{const f=this.tr(u,l);o=o.insert(u,f)}).next(()=>o)}ir(e,n){let o=h(),u=new Pr(It.comparator);return this.rr(e,n,(l,f)=>{const w=this.tr(l,f);o=o.insert(l,w),u=u.insert(l,Sh(f))}).next(()=>({documents:o,sr:u}))}rr(e,n,o){if(n.isEmpty())return Re.resolve();let u=new Tr(bm);n.forEach(S=>u=u.add(S));const l=IDBKeyRange.bound(cd(u.first()),cd(u.last())),f=u.getIterator();let w=f.getNext();return vu(e).Y({index:"documentKeyIndex",range:l},(S,k,$)=>{const X=It.fromSegments([...k.prefixPath,k.collectionGroup,k.documentId]);for(;w&&bm(w,X)<0;)o(w,null),w=f.getNext();w&&w.isEqual(X)&&(o(w,k),w=f.hasNext()?f.getNext():null),w?$.U(cd(w)):$.done()}).next(()=>{for(;w;)o(w,null),w=f.hasNext()?f.getNext():null})}getDocumentsMatchingQuery(e,n,o,u,l){const f=n.path,w=[f.popLast().toArray(),f.lastSegment(),Dc(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],S=[f.popLast().toArray(),f.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return vu(e).W(IDBKeyRange.bound(w,S,!0)).next(k=>{l?.incrementDocumentReadCount(k.length);let $=h();for(const X of k){const fe=this.tr(It.fromSegments(X.prefixPath.concat(X.collectionGroup,X.documentId)),X);fe.isFoundDocument()&&(ba(n,fe)||u.has(fe.key))&&($=$.insert(fe.key,fe))}return $})}getAllFromCollectionGroup(e,n,o,u){let l=h();const f=Sc(n,o),w=Sc(n,zi.max());return vu(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(f,w,!0)},(S,k,$)=>{const X=this.tr(It.fromSegments(k.prefixPath.concat(k.collectionGroup,k.documentId)),k);l=l.insert(X.key,X),l.size===u&&$.done()}).next(()=>l)}newChangeBuffer(e){return new xh(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Sm(e).get("remoteDocumentGlobalKey").next(n=>(Bt(!!n),n))}er(e,n){return Sm(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const o=function Ep(i,e){let n;if(e.document)n=gm(i.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=It.fromSegments(e.noDocument.path),u=$u(e.noDocument.readTime);n=Fr.newNoDocument(o,u),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return _t();{const o=It.fromSegments(e.unknownDocument.path),u=$u(e.unknownDocument.version);n=Fr.newUnknownDocument(o,u)}}return e.readTime&&n.setReadTime(function(u){const l=new Ot(u[0],u[1]);return qt.fromTimestamp(l)}(e.readTime)),n}(this.serializer,n);if(!o.isNoDocument()||!o.version.isEqual(qt.min()))return o}return Fr.newInvalidDocument(e)}}function xp(i){return new Ay(i)}class xh extends Am{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new Xo(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const n=[];let o=0,u=new Tr((l,f)=>mn(l.canonicalString(),f.canonicalString()));return this.changes.forEach((l,f)=>{const w=this.ar.get(l);if(n.push(this._r.removeEntry(e,l,w.readTime)),f.isValidDocument()){const S=Ip(this._r.serializer,f);u=u.add(l.path.popLast());const k=Sh(S);o+=k-w.size,n.push(this._r.addEntry(e,l,S))}else if(o-=w.size,this.trackRemovals){const S=Ip(this._r.serializer,f.convertToNoDocument(qt.min()));n.push(this._r.addEntry(e,l,S))}}),u.forEach(l=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,l))}),n.push(this._r.updateMetadata(e,o)),Re.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(o=>(this.ar.set(n,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:o,sr:u})=>(u.forEach((l,f)=>{this.ar.set(l,{size:f,readTime:o.get(l).readTime})}),o))}}function Sm(i){return Ti(i,"remoteDocumentGlobal")}function vu(i){return Ti(i,"remoteDocumentsV14")}function cd(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Sc(i,e){const n=e.documentKey.path.toArray();return[i,Dc(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function bm(i,e){const n=i.path.toArray(),o=e.path.toArray();let u=0;for(let l=0;l<n.length-2&&l<o.length-2;++l)if(u=mn(n[l],o[l]),u)return u;return u=mn(n.length,o.length),u||(u=mn(n[n.length-2],o[o.length-2]),u||mn(n[n.length-1],o[o.length-1]))}class Sy{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class Nh{constructor(e,n,o,u){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next(u=>(o=u,this.remoteDocumentCache.getEntry(e,n))).next(u=>(null!==o&&al(o.mutation,u,Gs.empty(),Ot.now()),u))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.getLocalViewOfDocuments(e,o,dt()).next(()=>o))}getLocalViewOfDocuments(e,n,o=dt()){const u=K();return this.populateOverlays(e,u,n).next(()=>this.computeViews(e,n,u,o).next(l=>{let f=I();return l.forEach((w,S)=>{f=f.insert(w,S.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const o=K();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,dt()))}populateOverlays(e,n,o){const u=[];return o.forEach(l=>{n.has(l)||u.push(l)}),this.documentOverlayCache.getOverlays(e,u).next(l=>{l.forEach((f,w)=>{n.set(f,w)})})}computeViews(e,n,o,u){let l=h();const f=$e(),w=$e();return n.forEach((S,k)=>{const $=o.get(k.key);u.has(k.key)&&(void 0===$||$.mutation instanceof Ma)?l=l.insert(k.key,k):void 0!==$?(f.set(k.key,$.mutation.getFieldMask()),al($.mutation,k,$.mutation.getFieldMask(),Ot.now())):f.set(k.key,Gs.empty())}),this.recalculateAndSaveOverlays(e,l).next(S=>(S.forEach((k,$)=>f.set(k,$)),n.forEach((k,$)=>{var X;return w.set(k,new Sy($,null!==(X=f.get(k))&&void 0!==X?X:null))}),w))}recalculateAndSaveOverlays(e,n){const o=$e();let u=new Pr((f,w)=>f-w),l=dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const w of f)w.keys().forEach(S=>{const k=n.get(S);if(null===k)return;let $=o.get(S)||Gs.empty();$=w.applyToLocalView(k,$),o.set(S,$);const X=(u.get(w.batchId)||dt()).add(S);u=u.insert(w.batchId,X)})}).next(()=>{const f=[],w=u.getReverseIterator();for(;w.hasNext();){const S=w.getNext(),k=S.key,$=S.value,X=_e();$.forEach(fe=>{if(!l.has(fe)){const Oe=Kl(n.get(fe),o.get(fe));null!==Oe&&X.set(fe,Oe),l=l.add(fe)}}),f.push(this.documentOverlayCache.saveOverlays(e,k,X))}return Re.waitFor(f)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,n,o,u){return It.isDocumentKey((f=n).path)&&null===f.collectionGroup&&0===f.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):ch(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,u):this.getDocumentsMatchingCollectionQuery(e,n,o,u);var f}getNextDocuments(e,n,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,u).next(l=>{const f=u-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,u-l.size):Re.resolve(K());let w=-1,S=l;return f.next(k=>Re.forEach(k,($,X)=>(w<X.largestBatchId&&(w=X.largestBatchId),l.get($)?Re.resolve():this.remoteDocumentCache.getEntry(e,$).next(fe=>{S=S.insert($,fe)}))).next(()=>this.populateOverlays(e,k,l)).next(()=>this.computeViews(e,S,k,dt())).next($=>({batchId:w,changes:U($)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new It(n)).next(o=>{let u=I();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(e,n,o,u){const l=n.collectionGroup;let f=I();return this.indexManager.getCollectionParents(e,l).next(w=>Re.forEach(w,S=>{const k=(X=n,fe=S.child(l),new oo(fe,null,X.explicitOrderBy.slice(),X.filters.slice(),X.limit,X.limitType,X.startAt,X.endAt));var X,fe;return this.getDocumentsMatchingCollectionQuery(e,k,o,u).next($=>{$.forEach((X,fe)=>{f=f.insert(X,fe)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,o,u){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next(f=>(l=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,l,u))).next(f=>{l.forEach((S,k)=>{const $=k.getKey();null===f.get($)&&(f=f.insert($,Fr.newInvalidDocument($)))});let w=I();return f.forEach((S,k)=>{const $=l.get(S);void 0!==$&&al($.mutation,k,Gs.empty(),Ot.now()),ba(n,k)&&(w=w.insert(S,k))}),w})}}class Rm{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return Re.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,{id:(u=n).id,version:u.version,createTime:Ei(u.createTime)}),Re.resolve();var u}getNamedQuery(e,n){return Re.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,{name:(u=n).name,query:nd(u.bundledQuery),readTime:Ei(u.readTime)}),Re.resolve();var u}}class by{constructor(){this.overlays=new Pr(It.comparator),this.lr=new Map}getOverlay(e,n){return Re.resolve(this.overlays.get(n))}getOverlays(e,n){const o=K();return Re.forEach(n,u=>this.getOverlay(e,u).next(l=>{null!==l&&o.set(u,l)})).next(()=>o)}saveOverlays(e,n,o){return o.forEach((u,l)=>{this.lt(e,n,l)}),Re.resolve()}removeOverlaysForBatchId(e,n,o){const u=this.lr.get(o);return void 0!==u&&(u.forEach(l=>this.overlays=this.overlays.remove(l)),this.lr.delete(o)),Re.resolve()}getOverlaysForCollection(e,n,o){const u=K(),l=n.length+1,f=new It(n.child("")),w=this.overlays.getIteratorFrom(f);for(;w.hasNext();){const S=w.getNext().value,k=S.getKey();if(!n.isPrefixOf(k.path))break;k.path.length===l&&S.largestBatchId>o&&u.set(S.getKey(),S)}return Re.resolve(u)}getOverlaysForCollectionGroup(e,n,o,u){let l=new Pr((k,$)=>k-$);const f=this.overlays.getIterator();for(;f.hasNext();){const k=f.getNext().value;if(k.getKey().getCollectionGroup()===n&&k.largestBatchId>o){let $=l.get(k.largestBatchId);null===$&&($=K(),l=l.insert(k.largestBatchId,$)),$.set(k.getKey(),k)}}const w=K(),S=l.getIterator();for(;S.hasNext()&&(S.getNext().value.forEach((k,$)=>w.set(k,$)),!(w.size()>=u)););return Re.resolve(w)}lt(e,n,o){const u=this.overlays.get(o.key);if(null!==u){const f=this.lr.get(u.largestBatchId).delete(o.key);this.lr.set(u.largestBatchId,f)}this.overlays=this.overlays.insert(o.key,new mh(n,o));let l=this.lr.get(n);void 0===l&&(l=dt(),this.lr.set(n,l)),this.lr.set(n,l.add(o.key))}}class Np{constructor(){this.hr=new Tr(rs.Pr),this.Ir=new Tr(rs.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const o=new rs(e,n);this.hr=this.hr.add(o),this.Ir=this.Ir.add(o)}Er(e,n){e.forEach(o=>this.addReference(o,n))}removeReference(e,n){this.dr(new rs(e,n))}Ar(e,n){e.forEach(o=>this.removeReference(o,n))}Rr(e){const n=new It(new Jn([])),o=new rs(n,e),u=new rs(n,e+1),l=[];return this.Ir.forEachInRange([o,u],f=>{this.dr(f),l.push(f.key)}),l}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new It(new Jn([])),o=new rs(n,e),u=new rs(n,e+1);let l=dt();return this.Ir.forEachInRange([o,u],f=>{l=l.add(f.key)}),l}containsKey(e){const n=new rs(e,0),o=this.hr.firstAfterOrEqual(n);return null!==o&&e.isEqual(o.key)}}class rs{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return It.comparator(e.key,n.key)||mn(e.gr,n.gr)}static Tr(e,n){return mn(e.gr,n.gr)||It.comparator(e.key,n.key)}}class Ry{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Tr(rs.Pr)}checkEmpty(e){return Re.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,o,u){const l=this.pr;this.pr++;const f=new rp(l,n,o,u);this.mutationQueue.push(f);for(const w of u)this.yr=this.yr.add(new rs(w.key,l)),this.indexManager.addToCollectionParentIndex(e,w.key.path.popLast());return Re.resolve(f)}lookupMutationBatch(e,n){return Re.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const u=this.Sr(n+1),l=u<0?0:u;return Re.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Re.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return Re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new rs(n,0),u=new rs(n,Number.POSITIVE_INFINITY),l=[];return this.yr.forEachInRange([o,u],f=>{const w=this.wr(f.gr);l.push(w)}),Re.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new Tr(mn);return n.forEach(u=>{const l=new rs(u,0),f=new rs(u,Number.POSITIVE_INFINITY);this.yr.forEachInRange([l,f],w=>{o=o.add(w.gr)})}),Re.resolve(this.br(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1;let l=o;It.isDocumentKey(l)||(l=l.child(""));const f=new rs(new It(l),0);let w=new Tr(mn);return this.yr.forEachWhile(S=>{const k=S.key.path;return!!o.isPrefixOf(k)&&(k.length===u&&(w=w.add(S.gr)),!0)},f),Re.resolve(this.br(w))}br(e){const n=[];return e.forEach(o=>{const u=this.wr(o);null!==u&&n.push(u)}),n}removeMutationBatch(e,n){Bt(0===this.Dr(n.batchId,"removed")),this.mutationQueue.shift();let o=this.yr;return Re.forEach(n.mutations,u=>{const l=new rs(u.key,n.batchId);return o=o.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.yr=o})}Fn(e){}containsKey(e,n){const o=new rs(n,0),u=this.yr.firstAfterOrEqual(o);return Re.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(e){return Re.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Pm{constructor(e){this.Cr=e,this.docs=new Pr(It.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,u=this.docs.get(o),l=u?u.size:0,f=this.Cr(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:f}),this.size+=f-l,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return Re.resolve(o?o.document.mutableCopy():Fr.newInvalidDocument(n))}getEntries(e,n){let o=h();return n.forEach(u=>{const l=this.docs.get(u);o=o.insert(u,l?l.document.mutableCopy():Fr.newInvalidDocument(u))}),Re.resolve(o)}getDocumentsMatchingQuery(e,n,o,u){let l=h();const f=n.path,w=new It(f.child("")),S=this.docs.getIteratorFrom(w);for(;S.hasNext();){const{key:k,value:{document:$}}=S.getNext();if(!f.isPrefixOf(k.path))break;k.path.length>f.length+1||li(oc($),o)<=0||(u.has($.key)||ba(n,$))&&(l=l.insert($.key,$.mutableCopy()))}return Re.resolve(l)}getAllFromCollectionGroup(e,n,o,u){_t()}vr(e,n){return Re.forEach(this.docs,o=>n(o))}newChangeBuffer(e){return new OE(this)}getSize(e){return Re.resolve(this.size)}}class OE extends Am{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?n.push(this._r.addEntry(e,u)):this._r.removeEntry(o)}),Re.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}class kE{constructor(e){this.persistence=e,this.Fr=new Xo(n=>yo(n),uu),this.lastRemoteSnapshotVersion=qt.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Np,this.targetCount=0,this.Nr=Wu.On()}forEachTarget(e,n){return this.Fr.forEach((o,u)=>n(u)),Re.resolve()}getLastRemoteSnapshotVersion(e){return Re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Re.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),Re.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.Mr&&(this.Mr=n),Re.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new Wu(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,Re.resolve()}updateTargetData(e,n){return this.kn(n),Re.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,Re.resolve()}removeTargets(e,n,o){let u=0;const l=[];return this.Fr.forEach((f,w)=>{w.sequenceNumber<=n&&null===o.get(w.targetId)&&(this.Fr.delete(f),l.push(this.removeMatchingKeysForTargetId(e,w.targetId)),u++)}),Re.waitFor(l).next(()=>u)}getTargetCount(e){return Re.resolve(this.targetCount)}getTargetData(e,n){const o=this.Fr.get(n)||null;return Re.resolve(o)}addMatchingKeys(e,n,o){return this.Or.Er(n,o),Re.resolve()}removeMatchingKeys(e,n,o){this.Or.Ar(n,o);const u=this.persistence.referenceDelegate,l=[];return u&&n.forEach(f=>{l.push(u.markPotentiallyOrphaned(e,f))}),Re.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),Re.resolve()}getMatchingKeysForTargetId(e,n){const o=this.Or.mr(n);return Re.resolve(o)}containsKey(e,n){return Re.resolve(this.Or.containsKey(n))}}class bc{constructor(e,n){this.Br={},this.overlays={},this.Lr=new x(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new kE(this),this.indexManager=new vy,this.remoteDocumentCache=new Pm(o=>this.referenceDelegate.Qr(o)),this.serializer=new vp(n),this.Kr=new Rm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new by,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.Br[e.toKey()];return o||(o=new Ry(n,this.referenceDelegate),this.Br[e.toKey()]=o),o}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,o){Je("MemoryPersistence","Starting transaction:",e);const u=new ld(this.Lr.next());return this.referenceDelegate.$r(),o(u).next(l=>this.referenceDelegate.Ur(u).next(()=>l)).toPromise().then(l=>(u.raiseOnCommittedEvent(),l))}Wr(e,n){return Re.or(Object.values(this.Br).map(o=>()=>o.containsKey(e,n)))}}class ld extends qo{constructor(e){super(),this.currentSequenceNumber=e}}class dd{constructor(e){this.persistence=e,this.Gr=new Np,this.zr=null}static jr(e){return new dd(e)}get Hr(){if(this.zr)return this.zr;throw _t()}addReference(e,n,o){return this.Gr.addReference(o,n),this.Hr.delete(o.toString()),Re.resolve()}removeReference(e,n,o){return this.Gr.removeReference(o,n),this.Hr.add(o.toString()),Re.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),Re.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(u=>this.Hr.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next(u=>{u.forEach(l=>this.Hr.add(l.toString()))}).next(()=>o.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Re.forEach(this.Hr,o=>{const u=It.fromPath(o);return this.Jr(e,u).next(l=>{l||n.removeEntry(u,qt.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(o=>{o?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return Re.or([()=>Re.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}class Op{constructor(e){this.serializer=e}N(e,n,o,u){const l=new Ea("createOrUpgrade",n);var S;o<1&&u>=1&&(e.createObjectStore("owner"),(S=e).createObjectStore("mutationQueues",{keyPath:"userId"}),S.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Nn,{unique:!0}),S.createObjectStore("documentMutations"),kp(e),function(S){S.createObjectStore("remoteDocuments")}(e));let f=Re.resolve();return o<3&&u>=3&&(0!==o&&(function(S){S.deleteObjectStore("targetDocuments"),S.deleteObjectStore("targets"),S.deleteObjectStore("targetGlobal")}(e),kp(e)),f=f.next(()=>function(S){const k=S.store("targetGlobal"),$={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:qt.min().toTimestamp(),targetCount:0};return k.put("targetGlobalKey",$)}(l))),o<4&&u>=4&&(0!==o&&(f=f.next(()=>function(S,k){return k.store("mutations").W().next($=>{S.deleteObjectStore("mutations"),S.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Nn,{unique:!0});const X=k.store("mutations"),fe=$.map(Oe=>X.put(Oe));return Re.waitFor(fe)})}(e,l))),f=f.next(()=>{!function(S){S.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(f=f.next(()=>this.Zr(l))),o<6&&u>=6&&(f=f.next(()=>(function(S){S.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(l)))),o<7&&u>=7&&(f=f.next(()=>this.ei(l))),o<8&&u>=8&&(f=f.next(()=>this.ti(e,l))),o<9&&u>=9&&(f=f.next(()=>{!function(S){S.objectStoreNames.contains("remoteDocumentChanges")&&S.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(f=f.next(()=>this.ni(l))),o<11&&u>=11&&(f=f.next(()=>{(function(S){S.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(S){S.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(f=f.next(()=>{!function(S){const k=S.createObjectStore("documentOverlays",{keyPath:Qd});k.createIndex("collectionPathOverlayIndex",Pu,{unique:!1}),k.createIndex("collectionGroupOverlayIndex",_o,{unique:!1})}(e)})),o<13&&u>=13&&(f=f.next(()=>function(S){const k=S.createObjectStore("remoteDocumentsV14",{keyPath:Ja});k.createIndex("documentKeyIndex",Da),k.createIndex("collectionGroupIndex",Zc)}(e)).next(()=>this.ri(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(f=f.next(()=>this.ii(e,l))),o<15&&u>=15&&(f=f.next(()=>function(S){S.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),S.createObjectStore("indexState",{keyPath:zf}).createIndex("sequenceNumberIndex",Ll,{unique:!1}),S.createObjectStore("indexEntries",{keyPath:Gf}).createIndex("documentKeyIndex",Yc,{unique:!1})}(e))),f}Xr(e){let n=0;return e.store("remoteDocuments").Y((o,u)=>{n+=Sh(u)}).next(()=>{const o={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Zr(e){const n=e.store("mutationQueues"),o=e.store("mutations");return n.W().next(u=>Re.forEach(u,l=>{const f=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",f).next(w=>Re.forEach(w,S=>{Bt(S.userId===l.userId);const k=_u(this.serializer,S);return Tm(e,l.userId,k).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const l=[];return o.Y((f,w)=>{const S=new Jn(f),k=[0,be(S)];l.push(n.get(k).next($=>$?Re.resolve():n.put({targetId:0,path:be(S),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>Re.waitFor(l))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:Fl});const o=n.store("collectionParents"),u=new Oa,l=f=>{if(u.add(f)){const w=f.lastSegment(),S=f.popLast();return o.put({collectionId:w,parent:be(S)})}};return n.store("remoteDocuments").Y({J:!0},(f,w)=>{const S=new Jn(f);return l(S.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([f,w,S],k)=>{const $=$n(w);return l($.popLast())}))}ni(e){const n=e.store("targets");return n.Y((o,u)=>{const l=Hu(u),f=Dp(this.serializer,l);return n.put(f)})}ri(e,n){const o=n.store("remoteDocuments"),u=[];return o.Y((l,f)=>{const w=n.store("remoteDocumentsV14"),S=(X=f,X.document?new It(Jn.fromString(X.document.name).popFirst(5)):X.noDocument?It.fromSegments(X.noDocument.path):X.unknownDocument?It.fromSegments(X.unknownDocument.path):_t()).path.toArray(),k={prefixPath:S.slice(0,S.length-2),collectionGroup:S[S.length-2],documentId:S[S.length-1],readTime:f.readTime||[0,0],unknownDocument:f.unknownDocument,noDocument:f.noDocument,document:f.document,hasCommittedMutations:!!f.hasCommittedMutations};var X;u.push(w.put(k))}).next(()=>Re.waitFor(u))}ii(e,n){const o=n.store("mutations"),u=xp(this.serializer),l=new bc(dd.jr,this.serializer.ut);return o.W().next(f=>{const w=new Map;return f.forEach(S=>{var k;let $=null!==(k=w.get(S.userId))&&void 0!==k?k:dt();_u(this.serializer,S).keys().forEach(X=>$=$.add(X)),w.set(S.userId,$)}),Re.forEach(w,(S,k)=>{const $=new Yt(k),X=rd.ct(this.serializer,$),fe=l.getIndexManager($),Oe=bh.ct($,this.serializer,fe,l.referenceDelegate);return new Nh(u,Oe,X,fe).recalculateAndSaveOverlaysForDocumentKeys(new Mu(n,x._e),S).next()})})}}function kp(i){i.createObjectStore("targetDocuments",{keyPath:Xa}).createIndex("documentTargetsIndex",Qr,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ps,{unique:!0}),i.createObjectStore("targetGlobal")}const Vp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Oh{constructor(e,n,o,u,l,f,w,S,k,$,X=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=o,this.si=l,this.window=f,this.document=w,this.oi=k,this._i=$,this.ai=X,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=fe=>Promise.resolve(),!Oh.D())throw new et(je.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Cy(this,u),this.Ii=n+"main",this.serializer=new vp(S),this.Ti=new ro(this.Ii,this.ai,new Op(this.serializer)),this.qr=new Cm(this.referenceDelegate,this.serializer),this.remoteDocumentCache=xp(this.serializer),this.Kr=new my,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===$&&or("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new et(je.FAILED_PRECONDITION,Vp);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new x(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var n=this;return this.Pi=function(){var o=(0,p.Z)(function*(u){if(n.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var n=(0,p.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,p.Z)(function*(){n.started&&(yield n.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Rc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(wi(e))return Je("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Je("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return pl(e).get("owner").next(n=>Re.resolve(this.wi(n)))}Si(e){return Rc(e).delete(this.clientId)}bi(){var e=this;return(0,p.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=Ti(o,"clientMetadata");return u.W().next(l=>{const f=e.Ci(l,18e5),w=l.filter(S=>-1===f.indexOf(S));return Re.forEach(w,S=>u.delete(S.clientId)).next(()=>w)})}).catch(()=>[]);if(e.Ei)for(const o of n)e.Ei.removeItem(e.vi(o.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?Re.resolve(!0):pl(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new et(je.FAILED_PRECONDITION,Vp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Rc(e).W().next(o=>void 0===this.Ci(o,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(n=>(this.isPrimary!==n&&Je("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,p.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const o=new Mu(n,x._e);return e.pi(o).next(()=>e.Si(o))}),e.Ti.close(),e.Ni()})()}Ci(e,n){return e.filter(o=>this.Di(o.updateTimeMs,n)&&!this.Fi(o.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Rc(e).W().next(n=>this.Ci(n,18e5).map(o=>o.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return bh.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Ey(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return rd.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,o){Je("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===n?"readonly":"readwrite",l=15===(S=this.ai)?Zo:14===S?uc:13===S?eu:12===S?Jc:11===S?Qc:void _t();var S;let f;return this.Ti.runTransaction(e,u,l,w=>(f=new Mu(w,this.Lr?this.Lr.next():x._e),"readwrite-primary"===n?this.fi(f).next(S=>!!S||this.gi(f)).next(S=>{if(!S)throw or(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new et(je.FAILED_PRECONDITION,va);return o(f)}).next(S=>this.yi(f).next(()=>S)):this.Li(f).next(()=>o(f)))).then(w=>(f.raiseOnCommittedEvent(),w))}Li(e){return pl(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new et(je.FAILED_PRECONDITION,Vp)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return pl(e).put("owner",n)}static D(){return ro.D()}pi(e){const n=pl(e);return n.get("owner").next(o=>this.wi(o)?(Je("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Re.resolve())}Di(e,n){const o=Date.now();return!(e<o-n||e>o&&(or(`Detected an update time that is in the future: ${e} > ${o}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;(0,te.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const o=null!==(null===(n=this.Ei)||void 0===n?void 0:n.getItem(this.vi(e)));return Je("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return or("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){or("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function pl(i){return Ti(i,"owner")}function Rc(i){return Ti(i,"clientMetadata")}function Mm(i,e){let n=i.projectId;return i.isDefaultDatabase||(n+="."+i.database),"firestore/"+e+"/"+n+"/"}class fd{constructor(e,n,o,u){this.targetId=e,this.fromCache=n,this.ki=o,this.qi=u}static Qi(e,n){let o=dt(),u=dt();for(const l of n.docChanges)switch(l.type){case 0:o=o.add(l.doc.key);break;case 1:u=u.add(l.doc.key)}return new fd(e,n.fromCache,o,u)}}class Py{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class kh{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,o,u){const l={result:null};return this.zi(e,n).next(f=>{l.result=f}).next(()=>{if(!l.result)return this.ji(e,n,u,o).next(f=>{l.result=f})}).next(()=>{if(l.result)return;const f=new Py;return this.Hi(e,n,f).next(w=>{if(l.result=w,this.$i)return this.Ji(e,n,f,w.size)})}).next(()=>l.result)}Ji(e,n,o,u){return o.documentReadCount<this.Ui?(kr()<=ue.in.DEBUG&&Je("QueryEngine","SDK will not create cache indexes for query:",Fu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),Re.resolve()):(kr()<=ue.in.DEBUG&&Je("QueryEngine","Query:",Fu(n),"scans",o.documentReadCount,"local documents and returns",u,"documents as results."),o.documentReadCount>this.Wi*u?(kr()<=ue.in.DEBUG&&Je("QueryEngine","The SDK decides to create cache indexes for query:",Fu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,es(n))):Re.resolve())}zi(e,n){if(Gl(n))return Re.resolve(null);let o=es(n);return this.indexManager.getIndexType(e,o).next(u=>0===u?null:(null!==n.limit&&1===u&&(n=mc(n,null,"F"),o=es(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next(l=>{const f=dt(...l);return this.Gi.getDocuments(e,f).next(w=>this.indexManager.getMinOffset(e,o).next(S=>{const k=this.Yi(n,w);return this.Zi(n,k,f,S.readTime)?this.zi(e,mc(n,null,"F")):this.Xi(e,k,n,S)}))})))}ji(e,n,o,u){return Gl(n)||u.isEqual(qt.min())?Re.resolve(null):this.Gi.getDocuments(e,o).next(l=>{const f=this.Yi(n,l);return this.Zi(n,f,o,u)?Re.resolve(null):(kr()<=ue.in.DEBUG&&Je("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Fu(n)),this.Xi(e,f,n,jn(u,-1)).next(w=>w))})}Yi(e,n){let o=new Tr(Lu(e));return n.forEach((u,l)=>{ba(e,l)&&(o=o.add(l))}),o}Zi(e,n,o,u){if(null===e.limit)return!1;if(o.size!==n.size)return!0;const l="F"===e.limitType?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(u)>0)}Hi(e,n,o){return kr()<=ue.in.DEBUG&&Je("QueryEngine","Using full collection scan to execute query:",Fu(n)),this.Gi.getDocumentsMatchingQuery(e,n,zi.min(),o)}Xi(e,n,o,u){return this.Gi.getDocumentsMatchingQuery(e,o,u).next(l=>(n.forEach(f=>{l=l.insert(f.key,f)}),l))}}class xm{constructor(e,n,o,u){this.persistence=e,this.es=n,this.serializer=u,this.ts=new Pr(mn),this.ns=new Xo(l=>yo(l),uu),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(o)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Nh(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function Fp(i,e,n,o){return new xm(i,e,n,o)}function qu(i,e){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,p.Z)(function*(i,e){const n=ot(i);return yield n.persistence.runTransaction("Handle user change","readonly",o=>{let u;return n.mutationQueue.getAllMutationBatches(o).next(l=>(u=l,n.os(e),n.mutationQueue.getAllMutationBatches(o))).next(l=>{const f=[],w=[];let S=dt();for(const k of u){f.push(k.batchId);for(const $ of k.mutations)S=S.add($.key)}for(const k of l){w.push(k.batchId);for(const $ of k.mutations)S=S.add($.key)}return n.localDocuments.getDocuments(o,S).next(k=>({_s:k,removedBatchIds:f,addedBatchIds:w}))})})}),Lp.apply(this,arguments)}function pd(i){const e=ot(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function Vh(i,e,n){let o=dt(),u=dt();return n.forEach(l=>o=o.add(l)),e.getEntries(i,o).next(l=>{let f=h();return n.forEach((w,S)=>{const k=l.get(w);S.isFoundDocument()!==k.isFoundDocument()&&(u=u.add(w)),S.isNoDocument()&&S.version.isEqual(qt.min())?(e.removeEntry(w,S.readTime),f=f.insert(w,S)):!k.isValidDocument()||S.version.compareTo(k.version)>0||0===S.version.compareTo(k.version)&&k.hasPendingWrites?(e.addEntry(S),f=f.insert(w,S)):Je("LocalStore","Ignoring outdated watch update for ",w,". Current version:",k.version," Watch version:",S.version)}),{us:f,cs:u}})}function Fh(i,e){const n=ot(i);return n.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function Ks(i,e){const n=ot(i);return n.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return n.qr.getTargetData(o,e).next(l=>l?(u=l,Re.resolve(u)):n.qr.allocateTargetId(o).next(f=>(u=new xa(e,f,"TargetPurposeListen",o.currentSequenceNumber),n.qr.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=n.ts.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.ts=n.ts.insert(o.targetId,o),n.ns.set(e,o.targetId)),o})}function ia(i,e,n){return gd.apply(this,arguments)}function gd(){return gd=(0,p.Z)(function*(i,e,n){const o=ot(i),u=o.ts.get(e),l=n?"readwrite":"readwrite-primary";try{n||(yield o.persistence.runTransaction("Release target",l,f=>o.persistence.referenceDelegate.removeTarget(f,u)))}catch(f){if(!wi(f))throw f;Je("LocalStore",`Failed to update sequence numbers for target ${e}: ${f}`)}o.ts=o.ts.remove(e),o.ns.delete(u.target)}),gd.apply(this,arguments)}function Lh(i,e,n){const o=ot(i);let u=qt.min(),l=dt();return o.persistence.runTransaction("Execute query","readwrite",f=>function(S,k,$){const X=ot(S),fe=X.ns.get($);return void 0!==fe?Re.resolve(X.ts.get(fe)):X.qr.getTargetData(k,$)}(o,f,es(e)).next(w=>{if(w)return u=w.lastLimboFreeSnapshotVersion,o.qr.getMatchingKeysForTargetId(f,w.targetId).next(S=>{l=S})}).next(()=>o.es.getDocumentsMatchingQuery(f,e,n?u:qt.min(),n?l:dt())).next(w=>(Pc(o,lh(e),w),{documents:w,ls:l})))}function Nm(i,e){const n=ot(i),o=ot(n.qr),u=n.ts.get(e);return u?Promise.resolve(u.target):n.persistence.runTransaction("Get target data","readonly",l=>o._t(l,e).next(f=>f?f.target:null))}function Bp(i,e){const n=ot(i),o=n.rs.get(e)||qt.min();return n.persistence.runTransaction("Get new document changes","readonly",u=>n.ss.getAllFromCollectionGroup(u,e,jn(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Pc(n,e,u),u))}function Pc(i,e,n){let o=i.rs.get(e)||qt.min();n.forEach((u,l)=>{l.readTime.compareTo(o)>0&&(o=l.readTime)}),i.rs.set(e,o)}function jp(){return jp=(0,p.Z)(function*(i,e,n,o){const u=ot(i);let l=dt(),f=h();for(const k of n){const $=e.hs(k.metadata.name);k.document&&(l=l.add($));const X=e.Ps(k);X.setReadTime(e.Is(k.metadata.readTime)),f=f.insert($,X)}const w=u.ss.newChangeBuffer({trackRemovals:!0}),S=yield Ks(u,($=o,es(lu(Jn.fromString(`__bundle__/docs/${$}`)))));var $;return u.persistence.runTransaction("Apply bundle documents","readwrite",k=>Vh(k,w,f).next($=>(w.apply(k),$)).next($=>u.qr.removeMatchingKeysForTargetId(k,S.targetId).next(()=>u.qr.addMatchingKeys(k,l,S.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(k,$.us,$.cs)).next(()=>$.us)))}),jp.apply(this,arguments)}function Ny(i,e){return md.apply(this,arguments)}function md(){return md=(0,p.Z)(function*(i,e,n=dt()){const o=yield Ks(i,es(nd(e.bundledQuery))),u=ot(i);return u.persistence.runTransaction("Save named query","readwrite",l=>{const f=Ei(e.readTime);if(o.snapshotVersion.compareTo(f)>=0)return u.Kr.saveNamedQuery(l,e);const w=o.withResumeToken(Jr.EMPTY_BYTE_STRING,f);return u.ts=u.ts.insert(w.targetId,w),u.qr.updateTargetData(l,w).next(()=>u.qr.removeMatchingKeysForTargetId(l,o.targetId)).next(()=>u.qr.addMatchingKeys(l,n,o.targetId)).next(()=>u.Kr.saveNamedQuery(l,e))})}),md.apply(this,arguments)}function $p(i,e){return`firestore_clients_${i}_${e}`}function Om(i,e,n){let o=`firestore_mutations_${i}_${n}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function Uh(i,e){return`firestore_targets_${i}_${e}`}class gl{constructor(e,n,o,u){this.user=e,this.batchId=n,this.state=o,this.error=u}static Ts(e,n,o){const u=JSON.parse(o);let l,f="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return f&&u.error&&(f="string"==typeof u.error.message&&"string"==typeof u.error.code,f&&(l=new et(u.error.code,u.error.message))),f?new gl(e,n,u.state,l):(or("SharedClientState",`Failed to parse mutation state for ID '${n}': ${o}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Bh{constructor(e,n,o){this.targetId=e,this.state=n,this.error=o}static Ts(e,n){const o=JSON.parse(n);let u,l="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return l&&o.error&&(l="string"==typeof o.error.message&&"string"==typeof o.error.code,l&&(u=new et(o.error.code,o.error.message))),l?new Bh(e,o.state,u):(or("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jh{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const o=JSON.parse(n);let u="object"==typeof o&&o.activeTargetIds instanceof Array,l=ts();for(let f=0;u&&f<o.activeTargetIds.length;++f)u=Ue(o.activeTargetIds[f]),l=l.add(o.activeTargetIds[f]);return u?new jh(e,l):(or("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Hp{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new Hp(n.clientId,n.onlineState):(or("SharedClientState",`Failed to parse online state: ${e}`),null)}}class zp{constructor(){this.activeTargetIds=ts()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class km{constructor(e,n,o,u,l){this.window=e,this.si=n,this.persistenceKey=o,this.Rs=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Pr(mn),this.started=!1,this.ps=[];const f=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.ys=$p(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new zp),this.Ss=new RegExp(`^firestore_clients_${f}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${f}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${f}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(S){return`firestore_bundle_loaded_v2_${S}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,p.Z)(function*(){const n=yield e.syncEngine.Bi();for(const u of n){if(u===e.Rs)continue;const l=e.getItem($p(e.persistenceKey,u));if(l){const f=jh.Ts(u,l);f&&(e.gs=e.gs.insert(f.clientId,f))}}e.Fs();const o=e.storage.getItem(e.Cs);if(o){const u=e.Ms(o);u&&e.xs(u)}for(const u of e.ps)e.fs(u);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((o,u)=>{u.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,o){this.Ns(e,n,o),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Uh(this.persistenceKey,e));if(o){const u=Bh.Ts(e,o);u&&(n=u.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Uh(this.persistenceKey,e))}updateQueryState(e,n,o){this.ks(e,n,o)}handleUserChange(e,n,o){n.forEach(u=>{this.Bs(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Je("SharedClientState","READ",e,n),n}setItem(e,n){Je("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Je("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var n=this;const o=e;if(o.storageArea===this.storage){if(Je("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ys)return void or("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,p.Z)(function*(){if(n.started){if(null!==o.key)if(n.Ss.test(o.key)){if(null==o.newValue){const u=n.Ks(o.key);return n.$s(u,null)}{const u=n.Us(o.key,o.newValue);if(u)return n.$s(u.clientId,u)}}else if(n.bs.test(o.key)){if(null!==o.newValue){const u=n.Ws(o.key,o.newValue);if(u)return n.Gs(u)}}else if(n.Ds.test(o.key)){if(null!==o.newValue){const u=n.zs(o.key,o.newValue);if(u)return n.js(u)}}else if(o.key===n.Cs){if(null!==o.newValue){const u=n.Ms(o.newValue);if(u)return n.xs(u)}}else if(o.key===n.ws){const u=function(f){let w=x._e;if(null!=f)try{const S=JSON.parse(f);Bt("number"==typeof S),w=S}catch(S){or("SharedClientState","Failed to read sequence number from WebStorage",S)}return w}(o.newValue);u!==x._e&&n.sequenceNumberHandler(u)}else if(o.key===n.vs){const u=n.Hs(o.newValue);yield Promise.all(u.map(l=>n.syncEngine.Js(l)))}}else n.ps.push(o)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,o){const u=new gl(this.currentUser,e,n,o),l=Om(this.persistenceKey,this.currentUser,e);this.setItem(l,u.Es())}Bs(e){const n=Om(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,n,o){const u=Uh(this.persistenceKey,e),l=new Bh(e,n,o);this.setItem(u,l.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const o=this.Ks(e);return jh.Ts(o,n)}Ws(e,n){const o=this.bs.exec(e),u=Number(o[1]);return gl.Ts(new Yt(void 0!==o[2]?o[2]:null),u,n)}zs(e,n){const o=this.Ds.exec(e),u=Number(o[1]);return Bh.Ts(u,n)}Ms(e){return Hp.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var n=this;return(0,p.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Ys(e.batchId,e.state,e.error);Je("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const o=n?this.gs.insert(e,n):this.gs.remove(e),u=this.Os(this.gs),l=this.Os(o),f=[],w=[];return l.forEach(S=>{u.has(S)||f.push(S)}),u.forEach(S=>{l.has(S)||w.push(S)}),this.syncEngine.Xs(f,w).then(()=>{this.gs=o})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=ts();return e.forEach((o,u)=>{n=n.unionWith(u.activeTargetIds)}),n}}class Oy{constructor(){this.eo=new zp,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,o){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new zp,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class $h{ro(e){}shutdown(){}}class Vm{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){Je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){Je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ml=null;function _d(){return null===ml?ml=268435456+Math.round(2147483648*Math.random()):ml++,"0x"+ml.toString(16)}const _l={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Gp{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const is="WebChannelConnection";class yd extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const o=n.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.mo=o+"://"+n.host,this.fo=`projects/${u}/databases/${l}`,this.po="(default)"===this.databaseId.database?`project_id=${u}`:`project_id=${u}&database_id=${l}`}get yo(){return!1}wo(n,o,u,l,f){const w=_d(),S=this.So(n,o);Je("RestConnection",`Sending RPC '${n}' ${w}:`,S,u);const k={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(k,l,f),this.Do(n,S,k,u).then($=>(Je("RestConnection",`Received RPC '${n}' ${w}: `,$),$),$=>{throw yr("RestConnection",`RPC '${n}' ${w} failed with error: `,$,"url: ",S,"request:",u),$})}Co(n,o,u,l,f,w){return this.wo(n,o,u,l,f)}bo(n,o,u){n["X-Goog-Api-Client"]="gl-js/ fire/"+fr,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((l,f)=>n[f]=l),u&&u.headers.forEach((l,f)=>n[f]=l)}So(n,o){return`${this.mo}/v1/${o}:${_l[n]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,o,u){const l=_d();return new Promise((f,w)=>{const S=new Ft;S.setWithCredentials(!0),S.listenOnce(R.COMPLETE,()=>{try{switch(S.getLastErrorCode()){case j.NO_ERROR:const $=S.getResponseJson();Je(is,`XHR for RPC '${e}' ${l} received:`,JSON.stringify($)),f($);break;case j.TIMEOUT:Je(is,`RPC '${e}' ${l} timed out`),w(new et(je.DEADLINE_EXCEEDED,"Request time out"));break;case j.HTTP_ERROR:const X=S.getStatus();if(Je(is,`RPC '${e}' ${l} failed with status:`,X,"response text:",S.getResponseText()),X>0){let fe=S.getResponseJson();Array.isArray(fe)&&(fe=fe[0]);const Oe=fe?.error;if(Oe&&Oe.status&&Oe.message){const gt=function(wt){const hn=wt.toLowerCase().replace(/_/g,"-");return Object.values(je).indexOf(hn)>=0?hn:je.UNKNOWN}(Oe.status);w(new et(gt,Oe.message))}else w(new et(je.UNKNOWN,"Server responded with status "+S.getStatus()))}else w(new et(je.UNAVAILABLE,"Connection failed."));break;default:_t()}}finally{Je(is,`RPC '${e}' ${l} completed.`)}});const k=JSON.stringify(u);Je(is,`RPC '${e}' ${l} sending request:`,u),S.send(n,"POST",k,o,15)})}vo(e,n,o){const u=_d(),l=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=Ya(),w=D(),S={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},k=this.longPollingOptions.timeoutSeconds;void 0!==k&&(S.longPollingTimeout=Math.round(1e3*k)),this.useFetchStreams&&(S.xmlHttpFactory=new Ve({})),this.bo(S.initMessageHeaders,n,o),S.encodeInitMessageHeaders=!0;const $=l.join("");Je(is,`Creating RPC '${e}' stream ${u}: ${$}`,S);const X=f.createWebChannel($,S);let fe=!1,Oe=!1;const gt=new Gp({co:wt=>{Oe?Je(is,`Not sending because RPC '${e}' stream ${u} is closed:`,wt):(fe||(Je(is,`Opening RPC '${e}' stream ${u} transport.`),X.open(),fe=!0),Je(is,`RPC '${e}' stream ${u} sending:`,wt),X.send(wt))},lo:()=>X.close()}),Dt=(wt,hn,vn)=>{wt.listen(hn,_n=>{try{vn(_n)}catch(ln){setTimeout(()=>{throw ln},0)}})};return Dt(X,Ke.EventType.OPEN,()=>{Oe||Je(is,`RPC '${e}' stream ${u} transport opened.`)}),Dt(X,Ke.EventType.CLOSE,()=>{Oe||(Oe=!0,Je(is,`RPC '${e}' stream ${u} transport closed`),gt.Ro())}),Dt(X,Ke.EventType.ERROR,wt=>{Oe||(Oe=!0,yr(is,`RPC '${e}' stream ${u} transport errored:`,wt),gt.Ro(new et(je.UNAVAILABLE,"The operation could not be completed")))}),Dt(X,Ke.EventType.MESSAGE,wt=>{var hn;if(!Oe){const vn=wt.data[0];Bt(!!vn);const ln=vn.error||(null===(hn=vn[0])||void 0===hn?void 0:hn.error);if(ln){Je(is,`RPC '${e}' stream ${u} received error:`,ln);const Lr=ln.status;let Sr=function($v){const Zg=Li[$v];if(void 0!==Zg)return um(Zg)}(Lr),os=ln.message;void 0===Sr&&(Sr=je.INTERNAL,os="Unknown error status: "+Lr+" with message "+ln.message),Oe=!0,gt.Ro(new et(Sr,os)),X.close()}else Je(is,`RPC '${e}' stream ${u} received:`,vn),gt.Vo(vn)}}),Dt(w,B.STAT_EVENT,wt=>{wt.stat===ie.PROXY?Je(is,`RPC '${e}' stream ${u} detected buffering proxy`):wt.stat===ie.NOPROXY&&Je(is,`RPC '${e}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{gt.Ao()},0),gt}}function vd(){return typeof window<"u"?window:null}function Eu(){return typeof document<"u"?document:null}function Mc(i){return new hy(i,!0)}class Ed{constructor(e,n,o=1e3,u=1.5,l=6e4){this.si=e,this.timerId=n,this.Fo=o,this.Mo=u,this.xo=l,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),o=Math.max(0,Date.now()-this.Bo),u=Math.max(0,n-o);u>0&&Je("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,u,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class Id{constructor(e,n,o,u,l,f,w,S){this.si=e,this.Ko=o,this.$o=u,this.connection=l,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=w,this.listener=S,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new Ed(e,n)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,p.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,p.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){var o=this;return(0,p.Z)(function*(){o.t_(),o.n_(),o.zo.cancel(),o.Uo++,4!==e?o.zo.reset():n&&n.code===je.RESOURCE_EXHAUSTED?(or(n.toString()),or("Using maximum backoff delay to prevent overloading the backend."),o.zo.Lo()):n&&n.code===je.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.r_(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Io(n)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Uo===n&&this.s_(o,u)},o=>{e(()=>{const u=new et(je.UNKNOWN,"Fetching auth token failed: "+o.message);return this.o_(u)})})}s_(e,n){const o=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{o(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(u=>{o(()=>this.o_(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}Jo(){var e=this;this.state=5,this.zo.ko((0,p.Z)(function*(){e.state=0,e.start()}))}o_(e){return Je("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(Je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class VE extends Id{constructor(e,n,o,u,l,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,u,f),this.serializer=l}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=function py(i,e){let n;if("targetChange"in e){const o="NO_CHANGE"===(k=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===k?1:"REMOVE"===k?2:"CURRENT"===k?3:"RESET"===k?4:_t(),u=e.targetChange.targetIds||[],l=function(k,$){return k.useProto3Json?(Bt(void 0===$||"string"==typeof $),Jr.fromBase64String($||"")):(Bt(void 0===$||$ instanceof Uint8Array),Jr.fromUint8Array($||new Uint8Array))}(i,e.targetChange.resumeToken),f=e.targetChange.cause,w=f&&function(k){const $=void 0===k.code?je.UNKNOWN:um(k.code);return new et($,k.message||"")}(f);n=new cm(o,u,l,w||null)}else if("documentChange"in e){const o=e.documentChange,u=na(i,o.document.name),l=Ei(o.document.updateTime),f=o.document.createTime?Ei(o.document.createTime):qt.min(),w=new di({mapValue:{fields:o.document.fields}}),S=Fr.newFoundDocument(u,l,f,w);n=new vh(o.targetIds||[],o.removedTargetIds||[],S.key,S)}else if("documentDelete"in e){const o=e.documentDelete,u=na(i,o.document),l=o.readTime?Ei(o.readTime):qt.min(),f=Fr.newNoDocument(u,l);n=new vh([],o.removedTargetIds||[],f.key,f)}else if("documentRemove"in e){const o=e.documentRemove,u=na(i,o.document);n=new vh([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return _t();{const o=e.filter,{count:u=0,unchangedNames:l}=o,f=new cy(u,l);n=new cp(o.targetId,f)}}var k;return n}(this.serializer,e),o=function(l){if(!("targetChange"in l))return qt.min();const f=l.targetChange;return f.targetIds&&f.targetIds.length?qt.min():f.readTime?Ei(f.readTime):qt.min()}(e);return this.listener.a_(n,o)}u_(e){const n={};n.database=Xl(this.serializer),n.addTarget=function(l,f){let w;const S=f.target;if(w=pc(S)?{documents:Ih(l,S)}:{query:gp(l,S)},w.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){w.resumeToken=dm(l,f.resumeToken);const k=vc(l,f.expectedCount);null!==k&&(w.expectedCount=k)}else if(f.snapshotVersion.compareTo(qt.min())>0){w.readTime=ll(l,f.snapshotVersion.toTimestamp());const k=vc(l,f.expectedCount);null!==k&&(w.expectedCount=k)}return w}(this.serializer,e);const o=function mp(i,e){const n=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _t()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);o&&(n.labels=o),this.e_(n)}c_(e){const n={};n.database=Xl(this.serializer),n.removeTarget=e,this.e_(n)}}class Wp extends Id{constructor(e,n,o,u,l,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,u,f),this.serializer=l,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(Bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=function pp(i,e){return i&&i.length>0?(Bt(void 0!==e),i.map(n=>function(u,l){let f=Ei(u.updateTime?u.updateTime:l);return f.isEqual(qt.min())&&(f=Ei(l)),new ME(f,u.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),o=Ei(e.commitTime);return this.listener.I_(o,n)}return Bt(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Xl(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(o=>dl(this.serializer,o))};this.e_(n)}}class Dd extends class{}{constructor(e,n,o,u){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=u,this.d_=!1}A_(){if(this.d_)throw new et(je.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,o){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.wo(e,n,o,u,l)).catch(u=>{throw"FirebaseError"===u.name?(u.code===je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new et(je.UNKNOWN,u.toString())})}Co(e,n,o,u){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,f])=>this.connection.Co(e,n,o,l,f,u)).catch(l=>{throw"FirebaseError"===l.name?(l.code===je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new et(je.UNKNOWN,l.toString())})}terminate(){this.d_=!0}}class Vy{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(or(n),this.f_=!1):Je("OnlineStateTracker",n)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class Fy{constructor(e,n,o,u,l){var f=this;this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=l,this.F_.ro(w=>{o.enqueueAndForget((0,p.Z)(function*(){var S;Va(f)&&(Je("RemoteStore","Restarting streams for network reachability change."),yield(S=(0,p.Z)(function*($){const X=ot($);X.C_.add(4),yield yl(X),X.M_.set("Unknown"),X.C_.delete(4),yield xc(X)}),function k($){return S.apply(this,arguments)})(f))}))}),this.M_=new Vy(o,u)}}function xc(i){return zh.apply(this,arguments)}function zh(){return zh=(0,p.Z)(function*(i){if(Va(i))for(const e of i.v_)yield e(!0)}),zh.apply(this,arguments)}function yl(i){return qp.apply(this,arguments)}function qp(){return qp=(0,p.Z)(function*(i){for(const e of i.v_)yield e(!1)}),qp.apply(this,arguments)}function Kp(i,e){const n=ot(i);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),Wh(n)?Zp(n):El(n).Ho()&&vl(n,e))}function wd(i,e){const n=ot(i),o=El(n);n.D_.delete(e),o.Ho()&&Gh(n,e),0===n.D_.size&&(o.Ho()?o.Zo():Va(n)&&n.M_.set("Unknown"))}function vl(i,e){if(i.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(qt.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}El(i).u_(e)}function Gh(i,e){i.x_.Oe(e),El(i).c_(e)}function Zp(i){i.x_=new ly({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>i.D_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),El(i).start(),i.M_.g_()}function Wh(i){return Va(i)&&!El(i).jo()&&i.D_.size>0}function Va(i){return 0===ot(i).C_.size}function Td(i){i.x_=void 0}function Ly(i){return qh.apply(this,arguments)}function qh(){return qh=(0,p.Z)(function*(i){i.D_.forEach((e,n)=>{vl(i,e)})}),qh.apply(this,arguments)}function Uy(i,e){return Kh.apply(this,arguments)}function Kh(){return Kh=(0,p.Z)(function*(i,e){Td(i),Wh(i)?(i.M_.w_(e),Zp(i)):i.M_.set("Unknown")}),Kh.apply(this,arguments)}function FE(i,e,n){return Yp.apply(this,arguments)}function Yp(){return Yp=(0,p.Z)(function*(i,e,n){if(i.M_.set("Online"),e instanceof cm&&2===e.state&&e.cause)try{yield(o=(0,p.Z)(function*(l,f){const w=f.cause;for(const S of f.targetIds)l.D_.has(S)&&(yield l.remoteSyncer.rejectListen(S,w),l.D_.delete(S),l.x_.removeTarget(S))}),function u(l,f){return o.apply(this,arguments)})(i,e)}catch(o){Je("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield Ku(i,o)}else if(e instanceof vh?i.x_.$e(e):e instanceof cp?i.x_.Je(e):i.x_.Ge(e),!n.isEqual(qt.min()))try{const o=yield pd(i.localStore);n.compareTo(o)>=0&&(yield function(l,f){const w=l.x_.it(f);return w.targetChanges.forEach((S,k)=>{if(S.resumeToken.approximateByteSize()>0){const $=l.D_.get(k);$&&l.D_.set(k,$.withResumeToken(S.resumeToken,f))}}),w.targetMismatches.forEach((S,k)=>{const $=l.D_.get(S);if(!$)return;l.D_.set(S,$.withResumeToken(Jr.EMPTY_BYTE_STRING,$.snapshotVersion)),Gh(l,S);const X=new xa($.target,S,k,$.sequenceNumber);vl(l,X)}),l.remoteSyncer.applyRemoteEvent(w)}(i,n))}catch(o){Je("RemoteStore","Failed to raise snapshot:",o),yield Ku(i,o)}var o}),Yp.apply(this,arguments)}function Ku(i,e,n){return Qp.apply(this,arguments)}function Qp(){return Qp=(0,p.Z)(function*(i,e,n){if(!wi(e))throw e;i.C_.add(1),yield yl(i),i.M_.set("Offline"),n||(n=()=>pd(i.localStore)),i.asyncQueue.enqueueRetryable((0,p.Z)(function*(){Je("RemoteStore","Retrying IndexedDB access"),yield n(),i.C_.delete(1),yield xc(i)}))}),Qp.apply(this,arguments)}function Nc(i,e){return e().catch(n=>Ku(i,n,e))}function Fa(i){return Jp.apply(this,arguments)}function Jp(){return Jp=(0,p.Z)(function*(i){const e=ot(i),n=Oc(e);let o=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;Fm(e);)try{const u=yield Fh(e.localStore,o);if(null===u){0===e.b_.length&&n.Zo();break}o=u.batchId,By(e,u)}catch(u){yield Ku(e,u)}Lm(e)&&Um(e)}),Jp.apply(this,arguments)}function Fm(i){return Va(i)&&i.b_.length<10}function By(i,e){i.b_.push(e);const n=Oc(i);n.Ho()&&n.h_&&n.P_(e.mutations)}function Lm(i){return Va(i)&&!Oc(i).jo()&&i.b_.length>0}function Um(i){Oc(i).start()}function Bm(i){return Zh.apply(this,arguments)}function Zh(){return Zh=(0,p.Z)(function*(i){Oc(i).E_()}),Zh.apply(this,arguments)}function Xp(i){return jm.apply(this,arguments)}function jm(){return jm=(0,p.Z)(function*(i){const e=Oc(i);for(const n of i.b_)e.P_(n.mutations)}),jm.apply(this,arguments)}function eg(i,e,n){return Yh.apply(this,arguments)}function Yh(){return Yh=(0,p.Z)(function*(i,e,n){const o=i.b_.shift(),u=ip.from(o,e,n);yield Nc(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield Fa(i)}),Yh.apply(this,arguments)}function jy(i,e){return tg.apply(this,arguments)}function tg(){return tg=(0,p.Z)(function*(i,e){var n;e&&Oc(i).h_&&(yield(n=(0,p.Z)(function*(u,l){if(op(w=l.code)&&w!==je.ABORTED){const f=u.b_.shift();Oc(u).Yo(),yield Nc(u,()=>u.remoteSyncer.rejectFailedWrite(f.batchId,l)),yield Fa(u)}var w}),function o(u,l){return n.apply(this,arguments)})(i,e)),Lm(i)&&Um(i)}),tg.apply(this,arguments)}function ng(i,e){return rg.apply(this,arguments)}function rg(){return rg=(0,p.Z)(function*(i,e){const n=ot(i);n.asyncQueue.verifyOperationInProgress(),Je("RemoteStore","RemoteStore received new credentials");const o=Va(n);n.C_.add(3),yield yl(n),o&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield xc(n)}),rg.apply(this,arguments)}function Qh(i,e){return ig.apply(this,arguments)}function ig(){return ig=(0,p.Z)(function*(i,e){const n=ot(i);e?(n.C_.delete(2),yield xc(n)):e||(n.C_.add(2),yield yl(n),n.M_.set("Unknown"))}),ig.apply(this,arguments)}function El(i){return i.O_||(i.O_=function(n,o,u){const l=ot(n);return l.A_(),new VE(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,u)}(i.datastore,i.asyncQueue,{ho:Ly.bind(null,i),Io:Uy.bind(null,i),a_:FE.bind(null,i)}),i.v_.push(function(){var e=(0,p.Z)(function*(n){n?(i.O_.Yo(),Wh(i)?Zp(i):i.M_.set("Unknown")):(yield i.O_.stop(),Td(i))});return function(n){return e.apply(this,arguments)}}())),i.O_}function Oc(i){return i.N_||(i.N_=function(n,o,u){const l=ot(n);return l.A_(),new Wp(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,u)}(i.datastore,i.asyncQueue,{ho:Bm.bind(null,i),Io:jy.bind(null,i),T_:Xp.bind(null,i),I_:eg.bind(null,i)}),i.v_.push(function(){var e=(0,p.Z)(function*(n){n?(i.N_.Yo(),yield Fa(i)):(yield i.N_.stop(),i.b_.length>0&&(Je("RemoteStore",`Stopping write stream with ${i.b_.length} pending writes`),i.b_=[]))});return function(n){return e.apply(this,arguments)}}())),i.N_}class Jh{constructor(e,n,o,u,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=u,this.removalCallback=l,this.deferred=new xn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,u,l){const f=Date.now()+o,w=new Jh(e,n,f,u,l);return w.start(o),w}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new et(je.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kc(i,e){if(or("AsyncQueue",`${e}: ${i}`),wi(i))return new et(je.UNAVAILABLE,`${e}: ${i}`);throw i}class As{constructor(e){this.comparator=e?(n,o)=>e(n,o)||It.comparator(n.key,o.key):(n,o)=>It.comparator(n.key,o.key),this.keyedMap=I(),this.sortedSet=new Pr(this.comparator)}static emptySet(e){return new As(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,o)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof As)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,l=o.getNext().key;if(!u.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const o=new As;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}class sg{constructor(){this.B_=new Pr(It.comparator)}track(e){const n=e.doc.key,o=this.B_.get(n);o?0!==e.type&&3===o.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==o.type?this.B_=this.B_.insert(n,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.B_=this.B_.remove(n):1===e.type&&2===o.type?this.B_=this.B_.insert(n,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):_t():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,o)=>{e.push(o)}),e}}class Cd{constructor(e,n,o,u,l,f,w,S,k){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=l,this.fromCache=f,this.syncStateChanged=w,this.excludesMetadataChanges=S,this.hasCachedResults=k}static fromInitialDocuments(e,n,o,u,l){const f=[];return n.forEach(w=>{f.push({type:0,doc:w})}),new Cd(e,n,As.emptySet(n),f,o,u,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&du(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==o[u].type||!n[u].doc.isEqual(o[u].doc))return!1;return!0}}class og{constructor(){this.k_=void 0,this.listeners=[]}}class Zu{constructor(){this.queries=new Xo(e=>_c(e),du),this.onlineState="Unknown",this.q_=new Set}}function Ad(i,e){return ag.apply(this,arguments)}function ag(){return ag=(0,p.Z)(function*(i,e){const n=ot(i),o=e.query;let u=!1,l=n.queries.get(o);if(l||(u=!0,l=new og),u)try{l.k_=yield n.onListen(o)}catch(f){const w=kc(f,`Initialization of query '${Fu(e.query)}' failed`);return void e.onError(w)}n.queries.set(o,l),l.listeners.push(e),e.Q_(n.onlineState),l.k_&&e.K_(l.k_)&&Xh(n)}),ag.apply(this,arguments)}function $m(i,e){return ug.apply(this,arguments)}function ug(){return ug=(0,p.Z)(function*(i,e){const n=ot(i),o=e.query;let u=!1;const l=n.queries.get(o);if(l){const f=l.listeners.indexOf(e);f>=0&&(l.listeners.splice(f,1),u=0===l.listeners.length)}if(u)return n.queries.delete(o),n.onUnlisten(o)}),ug.apply(this,arguments)}function cg(i,e){const n=ot(i);let o=!1;for(const u of e){const f=n.queries.get(u.query);if(f){for(const w of f.listeners)w.K_(u)&&(o=!0);f.k_=u}}o&&Xh(n)}function La(i,e,n){const o=ot(i),u=o.queries.get(e);if(u)for(const l of u.listeners)l.onError(n);o.queries.delete(e)}function Xh(i){i.q_.forEach(e=>{e.next()})}class lg{constructor(e,n,o){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=o||{}}K_(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new Cd(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){return!e.fromCache||(!this.options.J_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=Cd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class LE{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}class Gi{constructor(e){this.serializer=e}hs(e){return na(this.serializer,e)}Ps(e){return e.metadata.exists?gm(this.serializer,e.document,!1):Fr.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return Ei(e)}}class $y{constructor(e,n,o){this.X_=e,this.localStore=n,this.serializer=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ef(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const o=Jn.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,o=new Gi(this.serializer);for(const u of e)if(u.metadata.queries){const l=o.hs(u.metadata.name);for(const f of u.metadata.queries){const w=(n.get(f)||dt()).add(l);n.set(f,w)}}return n}complete(){var e=this;return(0,p.Z)(function*(){const n=yield function xy(i,e,n,o){return jp.apply(this,arguments)}(e.localStore,new Gi(e.serializer),e.documents,e.X_.id),o=e.ta(e.documents);for(const u of e.queries)yield Ny(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:n}})()}}function ef(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Hm{constructor(e){this.key=e}}class zm{constructor(e){this.key=e}}class tf{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=dt(),this.mutatedKeys=dt(),this._a=Lu(e),this.aa=new As(this._a)}get ua(){return this.ia}ca(e,n){const o=n?n.la:new sg,u=n?n.aa:this.aa;let l=n?n.mutatedKeys:this.mutatedKeys,f=u,w=!1;const S="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,k="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal(($,X)=>{const fe=u.get($),Oe=ba(this.query,X)?X:null,gt=!!fe&&this.mutatedKeys.has(fe.key),Dt=!!Oe&&(Oe.hasLocalMutations||this.mutatedKeys.has(Oe.key)&&Oe.hasCommittedMutations);let wt=!1;fe&&Oe?fe.data.isEqual(Oe.data)?gt!==Dt&&(o.track({type:3,doc:Oe}),wt=!0):this.ha(fe,Oe)||(o.track({type:2,doc:Oe}),wt=!0,(S&&this._a(Oe,S)>0||k&&this._a(Oe,k)<0)&&(w=!0)):!fe&&Oe?(o.track({type:0,doc:Oe}),wt=!0):fe&&!Oe&&(o.track({type:1,doc:fe}),wt=!0,(S||k)&&(w=!0)),wt&&(Oe?(f=f.add(Oe),l=Dt?l.add($):l.delete($)):(f=f.delete($),l=l.delete($)))}),null!==this.query.limit)for(;f.size>this.query.limit;){const $="F"===this.query.limitType?f.last():f.first();f=f.delete($.key),l=l.delete($.key),o.track({type:1,doc:$})}return{aa:f,la:o,Zi:w,mutatedKeys:l}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o){const u=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const l=e.la.L_();l.sort((k,$)=>function(fe,Oe){const gt=Dt=>{switch(Dt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _t()}};return gt(fe)-gt(Oe)}(k.type,$.type)||this._a(k.doc,$.doc)),this.Pa(o);const f=n?this.Ia():[],w=0===this.oa.size&&this.current?1:0,S=w!==this.sa;return this.sa=w,0!==l.length||S?{snapshot:new Cd(this.query,e.aa,u,l,e.mutatedKeys,0===w,S,!1,!!o&&o.resumeToken.approximateByteSize()>0),Ta:f}:{Ta:f}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new sg,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=dt(),this.aa.forEach(o=>{this.Ea(o.key)&&(this.oa=this.oa.add(o.key))});const n=[];return e.forEach(o=>{this.oa.has(o)||n.push(new zm(o))}),this.oa.forEach(o=>{e.has(o)||n.push(new Hm(o))}),n}da(e){this.ia=e.ls,this.oa=dt();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return Cd.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class Gm{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class Wm{constructor(e){this.key=e,this.Ra=!1}}class Hy{constructor(e,n,o,u,l,f){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=u,this.currentUser=l,this.maxConcurrentLimboResolutions=f,this.Va={},this.ma=new Xo(w=>_c(w),du),this.fa=new Map,this.ga=new Set,this.pa=new Pr(It.comparator),this.ya=new Map,this.wa=new Np,this.Sa={},this.ba=new Map,this.Da=Wu.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function qm(i,e){return nf.apply(this,arguments)}function nf(){return nf=(0,p.Z)(function*(i,e){const n=Rd(i);let o,u;const l=n.ma.get(e);if(l)o=l.targetId,n.sharedClientState.addLocalQueryTarget(o),u=l.view.Aa();else{const f=yield Ks(n.localStore,es(e)),w=n.sharedClientState.addLocalQueryTarget(f.targetId);o=f.targetId,u=yield dg(n,e,o,"current"===w,f.resumeToken),n.isPrimaryClient&&Kp(n.remoteStore,f)}return u}),nf.apply(this,arguments)}function dg(i,e,n,o,u){return hg.apply(this,arguments)}function hg(){return hg=(0,p.Z)(function*(i,e,n,o,u){i.va=(X,fe,Oe)=>{return(gt=(0,p.Z)(function*(wt,hn,vn,_n){let ln=hn.view.ca(vn);ln.Zi&&(ln=yield Lh(wt.localStore,hn.query,!1).then(({documents:os})=>hn.view.ca(os,ln)));const Lr=_n&&_n.targetChanges.get(hn.targetId),Sr=hn.view.applyChanges(ln,wt.isPrimaryClient,Lr);return Qm(wt,hn.targetId,Sr.Ta),Sr.snapshot}),function Dt(wt,hn,vn,_n){return gt.apply(this,arguments)})(i,X,fe,Oe);var gt};const l=yield Lh(i.localStore,e,!0),f=new tf(e,l.ls),w=f.ca(l.documents),S=cl.createSynthesizedTargetChangeForCurrentChange(n,o&&"Offline"!==i.onlineState,u),k=f.applyChanges(w,i.isPrimaryClient,S);Qm(i,n,k.Ta);const $=new Gm(e,n,f);return i.ma.set(e,$),i.fa.has(n)?i.fa.get(n).push(e):i.fa.set(n,[e]),k.snapshot}),hg.apply(this,arguments)}function zy(i,e){return rf.apply(this,arguments)}function rf(){return rf=(0,p.Z)(function*(i,e){const n=ot(i),o=n.ma.get(e),u=n.fa.get(o.targetId);if(u.length>1)return n.fa.set(o.targetId,u.filter(l=>!du(l,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(o.targetId),n.sharedClientState.isActiveQueryTarget(o.targetId)||(yield ia(n.localStore,o.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(o.targetId),wd(n.remoteStore,o.targetId),Dl(n,o.targetId)}).catch(Yr))):(Dl(n,o.targetId),yield ia(n.localStore,o.targetId,!0))}),rf.apply(this,arguments)}function sa(){return sa=(0,p.Z)(function*(i,e,n){const o=Pd(i);try{const u=yield function(f,w){const S=ot(f),k=Ot.now(),$=w.reduce((Oe,gt)=>Oe.add(gt.key),dt());let X,fe;return S.persistence.runTransaction("Locally write mutations","readwrite",Oe=>{let gt=h(),Dt=dt();return S.ss.getEntries(Oe,$).next(wt=>{gt=wt,gt.forEach((hn,vn)=>{vn.isValidDocument()||(Dt=Dt.add(hn))})}).next(()=>S.localDocuments.getOverlayedDocuments(Oe,gt)).next(wt=>{X=wt;const hn=[];for(const vn of w){const _n=am(vn,X.get(vn.key).overlayedDocument);null!=_n&&hn.push(new Ma(vn.key,_n,rh(_n.value.mapValue),hi.exists(!0)))}return S.mutationQueue.addMutationBatch(Oe,k,hn,w)}).next(wt=>{fe=wt;const hn=wt.applyToLocalDocumentSet(X,Dt);return S.documentOverlayCache.saveOverlays(Oe,wt.batchId,hn)})}).then(()=>({batchId:fe.batchId,changes:U(X)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(f,w,S){let k=f.Sa[f.currentUser.toKey()];k||(k=new Pr(mn)),k=k.insert(w,S),f.Sa[f.currentUser.toKey()]=k}(o,u.batchId,n),yield Yu(o,u.changes),yield Fa(o.remoteStore)}catch(u){const l=kc(u,"Failed to persist write");n.reject(l)}}),sa.apply(this,arguments)}function Vc(i,e){return fg.apply(this,arguments)}function fg(){return fg=(0,p.Z)(function*(i,e){const n=ot(i);try{const o=yield function My(i,e){const n=ot(i),o=e.snapshotVersion;let u=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const f=n.ss.newChangeBuffer({trackRemovals:!0});u=n.ts;const w=[];e.targetChanges.forEach(($,X)=>{const fe=u.get(X);if(!fe)return;w.push(n.qr.removeMatchingKeys(l,$.removedDocuments,X).next(()=>n.qr.addMatchingKeys(l,$.addedDocuments,X)));let Oe=fe.withSequenceNumber(l.currentSequenceNumber);var Dt,wt,hn;null!==e.targetMismatches.get(X)?Oe=Oe.withResumeToken(Jr.EMPTY_BYTE_STRING,qt.min()).withLastLimboFreeSnapshotVersion(qt.min()):$.resumeToken.approximateByteSize()>0&&(Oe=Oe.withResumeToken($.resumeToken,o)),u=u.insert(X,Oe),wt=Oe,hn=$,(0===(Dt=fe).resumeToken.approximateByteSize()||wt.snapshotVersion.toMicroseconds()-Dt.snapshotVersion.toMicroseconds()>=3e8||hn.addedDocuments.size+hn.modifiedDocuments.size+hn.removedDocuments.size>0)&&w.push(n.qr.updateTargetData(l,Oe))});let S=h(),k=dt();if(e.documentUpdates.forEach($=>{e.resolvedLimboDocuments.has($)&&w.push(n.persistence.referenceDelegate.updateLimboDocument(l,$))}),w.push(Vh(l,f,e.documentUpdates).next($=>{S=$.us,k=$.cs})),!o.isEqual(qt.min())){const $=n.qr.getLastRemoteSnapshotVersion(l).next(X=>n.qr.setTargetsMetadata(l,l.currentSequenceNumber,o));w.push($)}return Re.waitFor(w).next(()=>f.apply(l)).next(()=>n.localDocuments.getLocalViewOfDocuments(l,S,k)).next(()=>S)}).then(l=>(n.ts=u,l))}(n.localStore,e);e.targetChanges.forEach((u,l)=>{const f=n.ya.get(l);f&&(Bt(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?f.Ra=!0:u.modifiedDocuments.size>0?Bt(f.Ra):u.removedDocuments.size>0&&(Bt(f.Ra),f.Ra=!1))}),yield Yu(n,o,e)}catch(o){yield Yr(o)}}),fg.apply(this,arguments)}function Km(i,e,n){const o=ot(i);if(o.isPrimaryClient&&0===n||!o.isPrimaryClient&&1===n){const u=[];o.ma.forEach((l,f)=>{const w=f.view.Q_(e);w.snapshot&&u.push(w.snapshot)}),function(f,w){const S=ot(f);S.onlineState=w;let k=!1;S.queries.forEach(($,X)=>{for(const fe of X.listeners)fe.Q_(w)&&(k=!0)}),k&&Xh(S)}(o.eventManager,e),u.length&&o.Va.a_(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Zm(i,e,n){return sf.apply(this,arguments)}function sf(){return sf=(0,p.Z)(function*(i,e,n){const o=ot(i);o.sharedClientState.updateQueryState(e,"rejected",n);const u=o.ya.get(e),l=u&&u.key;if(l){let f=new Pr(It.comparator);f=f.insert(l,Fr.newNoDocument(l,qt.min()));const w=dt().add(l),S=new ul(qt.min(),new Map,new Pr(mn),f,w);yield Vc(o,S),o.pa=o.pa.remove(l),o.ya.delete(e),Jm(o)}else yield ia(o.localStore,e,!1).then(()=>Dl(o,e,n)).catch(Yr)}),sf.apply(this,arguments)}function pg(i,e){return Fc.apply(this,arguments)}function Fc(){return Fc=(0,p.Z)(function*(i,e){const n=ot(i),o=e.batch.batchId;try{const u=yield function Up(i,e){const n=ot(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),l=n.ss.newChangeBuffer({trackRemovals:!0});return function(w,S,k,$){const X=k.batch,fe=X.keys();let Oe=Re.resolve();return fe.forEach(gt=>{Oe=Oe.next(()=>$.getEntry(S,gt)).next(Dt=>{const wt=k.docVersions.get(gt);Bt(null!==wt),Dt.version.compareTo(wt)<0&&(X.applyToRemoteDocument(Dt,k),Dt.isValidDocument()&&(Dt.setReadTime(k.commitVersion),$.addEntry(Dt)))})}),Oe.next(()=>w.mutationQueue.removeMutationBatch(S,X))}(n,o,e,l).next(()=>l.apply(o)).next(()=>n.mutationQueue.performConsistencyCheck(o)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(w){let S=dt();for(let k=0;k<w.mutationResults.length;++k)w.mutationResults[k].transformResults.length>0&&(S=S.add(w.batch.mutations[k].key));return S}(e))).next(()=>n.localDocuments.getDocuments(o,u))})}(n.localStore,e);_g(n,o,null),mg(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),yield Yu(n,u)}catch(u){yield Yr(u)}}),Fc.apply(this,arguments)}function af(i,e,n){return uf.apply(this,arguments)}function uf(){return uf=(0,p.Z)(function*(i,e,n){const o=ot(i);try{const u=yield function(f,w){const S=ot(f);return S.persistence.runTransaction("Reject batch","readwrite-primary",k=>{let $;return S.mutationQueue.lookupMutationBatch(k,w).next(X=>(Bt(null!==X),$=X.keys(),S.mutationQueue.removeMutationBatch(k,X))).next(()=>S.mutationQueue.performConsistencyCheck(k)).next(()=>S.documentOverlayCache.removeOverlaysForBatchId(k,$,w)).next(()=>S.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(k,$)).next(()=>S.localDocuments.getDocuments(k,$))})}(o.localStore,e);_g(o,e,n),mg(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),yield Yu(o,u)}catch(u){yield Yr(u)}}),uf.apply(this,arguments)}function gg(){return gg=(0,p.Z)(function*(i,e){const n=ot(i);Va(n.remoteStore)||Je("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(f){const w=ot(f);return w.persistence.runTransaction("Get highest unacknowledged batch id","readonly",S=>w.mutationQueue.getHighestUnacknowledgedBatchId(S))}(n.localStore);if(-1===o)return void e.resolve();const u=n.ba.get(o)||[];u.push(e),n.ba.set(o,u)}catch(o){const u=kc(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),gg.apply(this,arguments)}function mg(i,e){(i.ba.get(e)||[]).forEach(n=>{n.resolve()}),i.ba.delete(e)}function _g(i,e,n){const o=ot(i);let u=o.Sa[o.currentUser.toKey()];if(u){const l=u.get(e);l&&(n?l.reject(n):l.resolve(),u=u.remove(e)),o.Sa[o.currentUser.toKey()]=u}}function Dl(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.fa.get(e))i.ma.delete(o),n&&i.Va.Fa(o,n);i.fa.delete(e),i.isPrimaryClient&&i.wa.Rr(e).forEach(o=>{i.wa.containsKey(o)||yg(i,o)})}function yg(i,e){i.ga.delete(e.path.canonicalString());const n=i.pa.get(e);null!==n&&(wd(i.remoteStore,n),i.pa=i.pa.remove(e),i.ya.delete(n),Jm(i))}function Qm(i,e,n){for(const o of n)o instanceof Hm?(i.wa.addReference(o.key,e),Gy(i,o)):o instanceof zm?(Je("SyncEngine","Document no longer in limbo: "+o.key),i.wa.removeReference(o.key,e),i.wa.containsKey(o.key)||yg(i,o.key)):_t()}function Gy(i,e){const n=e.key,o=n.path.canonicalString();i.pa.get(n)||i.ga.has(o)||(Je("SyncEngine","New document in limbo: "+n),i.ga.add(o),Jm(i))}function Jm(i){for(;i.ga.size>0&&i.pa.size<i.maxConcurrentLimboResolutions;){const e=i.ga.values().next().value;i.ga.delete(e);const n=new It(Jn.fromString(e)),o=i.Da.next();i.ya.set(o,new Wm(n)),i.pa=i.pa.insert(n,o),Kp(i.remoteStore,new xa(es(lu(n.path)),o,"TargetPurposeLimboResolution",x._e))}}function Yu(i,e,n){return cf.apply(this,arguments)}function cf(){return cf=(0,p.Z)(function*(i,e,n){const o=ot(i),u=[],l=[],f=[];var w;o.ma.isEmpty()||(o.ma.forEach((w,S)=>{f.push(o.va(S,e,n).then(k=>{if((k||n)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(S.targetId,k?.fromCache?"not-current":"current"),k){u.push(k);const $=fd.Qi(S.targetId,k);l.push($)}}))}),yield Promise.all(f),o.Va.a_(u),yield(w=(0,p.Z)(function*(k,$){const X=ot(k);try{yield X.persistence.runTransaction("notifyLocalViewChanges","readwrite",fe=>Re.forEach($,Oe=>Re.forEach(Oe.ki,gt=>X.persistence.referenceDelegate.addReference(fe,Oe.targetId,gt)).next(()=>Re.forEach(Oe.qi,gt=>X.persistence.referenceDelegate.removeReference(fe,Oe.targetId,gt)))))}catch(fe){if(!wi(fe))throw fe;Je("LocalStore","Failed to update sequence numbers: "+fe)}for(const fe of $){const Oe=fe.targetId;if(!fe.fromCache){const gt=X.ts.get(Oe),wt=gt.withLastLimboFreeSnapshotVersion(gt.snapshotVersion);X.ts=X.ts.insert(Oe,wt)}}}),function S(k,$){return w.apply(this,arguments)})(o.localStore,l))}),cf.apply(this,arguments)}function Xm(i,e){return e_.apply(this,arguments)}function e_(){return e_=(0,p.Z)(function*(i,e){const n=ot(i);if(!n.currentUser.isEqual(e)){Je("SyncEngine","User change. New user:",e.toKey());const o=yield qu(n.localStore,e);n.currentUser=e,(l=n).ba.forEach(w=>{w.forEach(S=>{S.reject(new et(je.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),l.ba.clear(),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield Yu(n,o._s)}var l}),e_.apply(this,arguments)}function lf(i,e){const n=ot(i),o=n.ya.get(e);if(o&&o.Ra)return dt().add(o.key);{let u=dt();const l=n.fa.get(e);if(!l)return u;for(const f of l){const w=n.ma.get(f);u=u.unionWith(w.view.ua)}return u}}function t_(i,e){return df.apply(this,arguments)}function df(){return df=(0,p.Z)(function*(i,e){const n=ot(i),o=yield Lh(n.localStore,e.query,!0),u=e.view.da(o);return n.isPrimaryClient&&Qm(n,e.targetId,u.Ta),u}),df.apply(this,arguments)}function Wy(i,e){return hf.apply(this,arguments)}function hf(){return hf=(0,p.Z)(function*(i,e){const n=ot(i);return Bp(n.localStore,e).then(o=>Yu(n,o))}),hf.apply(this,arguments)}function n_(i,e,n,o){return Sn.apply(this,arguments)}function Sn(){return Sn=(0,p.Z)(function*(i,e,n,o){const u=ot(i),l=yield function(w,S){const k=ot(w),$=ot(k.mutationQueue);return k.persistence.runTransaction("Lookup mutation documents","readonly",X=>$.Cn(X,S).next(fe=>fe?k.localDocuments.getDocuments(X,fe):Re.resolve(null)))}(u.localStore,e);var S;null!==l?("pending"===n?yield Fa(u.remoteStore):"acknowledged"===n||"rejected"===n?(_g(u,e,o||null),mg(u,e),S=e,ot(ot(u.localStore).mutationQueue).Fn(S)):_t(),yield Yu(u,l)):Je("SyncEngine","Cannot apply mutation batch with id: "+e)}),Sn.apply(this,arguments)}function ff(){return ff=(0,p.Z)(function*(i,e){const n=ot(i);if(Rd(n),Pd(n),!0===e&&!0!==n.Ca){const o=n.sharedClientState.getAllActiveQueryTargets(),u=yield Lc(n,o.toArray());n.Ca=!0,yield Qh(n.remoteStore,!0);for(const l of u)Kp(n.remoteStore,l)}else if(!1===e&&!1!==n.Ca){const o=[];let u=Promise.resolve();n.fa.forEach((l,f)=>{n.sharedClientState.isLocalQueryTarget(f)?o.push(f):u=u.then(()=>(Dl(n,f),ia(n.localStore,f,!0))),wd(n.remoteStore,f)}),yield u,yield Lc(n,o),function(f){const w=ot(f);w.ya.forEach((S,k)=>{wd(w.remoteStore,k)}),w.wa.Vr(),w.ya=new Map,w.pa=new Pr(It.comparator)}(n),n.Ca=!1,yield Qh(n.remoteStore,!1)}}),ff.apply(this,arguments)}function Lc(i,e,n){return pf.apply(this,arguments)}function pf(){return pf=(0,p.Z)(function*(i,e,n){const o=ot(i),u=[],l=[];for(const f of e){let w;const S=o.fa.get(f);if(S&&0!==S.length){w=yield Ks(o.localStore,es(S[0]));for(const k of S){const $=o.ma.get(k),X=yield t_(o,$);X.snapshot&&l.push(X.snapshot)}}else{const k=yield Nm(o.localStore,f);w=yield Ks(o.localStore,k),yield dg(o,i_(k),f,!1,w.resumeToken)}u.push(w)}return o.Va.a_(l),u}),pf.apply(this,arguments)}function i_(i){return cu(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function gf(i){return n=ot(i).localStore,ot(ot(n).persistence).Bi();var n}function wl(i,e,n,o){return Sd.apply(this,arguments)}function Sd(){return Sd=(0,p.Z)(function*(i,e,n,o){const u=ot(i);if(u.Ca)return void Je("SyncEngine","Ignoring unexpected query state notification.");const l=u.fa.get(e);if(l&&l.length>0)switch(n){case"current":case"not-current":{const f=yield Bp(u.localStore,lh(l[0])),w=ul.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Jr.EMPTY_BYTE_STRING);yield Yu(u,f,w);break}case"rejected":yield ia(u.localStore,e,!0),Dl(u,e,o);break;default:_t()}}),Sd.apply(this,arguments)}function bd(i,e,n){return mf.apply(this,arguments)}function mf(){return mf=(0,p.Z)(function*(i,e,n){const o=Rd(i);if(o.Ca){for(const u of e){if(o.fa.has(u)){Je("SyncEngine","Adding an already active target "+u);continue}const l=yield Nm(o.localStore,u),f=yield Ks(o.localStore,l);yield dg(o,i_(l),f.targetId,!1,f.resumeToken),Kp(o.remoteStore,f)}for(const u of n)o.fa.has(u)&&(yield ia(o.localStore,u,!1).then(()=>{wd(o.remoteStore,u),Dl(o,u)}).catch(Yr))}}),mf.apply(this,arguments)}function Rd(i){const e=ot(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Vc.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lf.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Zm.bind(null,e),e.Va.a_=cg.bind(null,e.eventManager),e.Va.Fa=La.bind(null,e.eventManager),e}function Pd(i){const e=ot(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pg.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=af.bind(null,e),e}class Tl{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,p.Z)(function*(){n.serializer=Mc(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Fp(this.persistence,new kh,e.initialUser,this.serializer)}createPersistence(e){return new bc(dd.jr,this.serializer)}createSharedClientState(e){return new Oy}terminate(){var e=this;return(0,p.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Ig extends Tl{constructor(e,n,o){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,o=this;return(0,p.Z)(function*(){yield n().call(o,e),yield o.xa.initialize(o,e),yield Pd(o.xa.syncEngine),yield Fa(o.xa.remoteStore),yield o.persistence.mi(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Fp(this.persistence,new kh,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new Ty(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const o=new A(n,this.persistence);return new _(e.asyncQueue,o)}createPersistence(e){const n=Mm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Ts.withCacheSize(this.cacheSizeBytes):Ts.DEFAULT;return new Oh(this.synchronizeTabs,n,e.clientId,o,e.asyncQueue,vd(),Eu(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Oy}}class s_ extends Ig{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,o=this;return(0,p.Z)(function*(){yield n().call(o,e);const u=o.xa.syncEngine;o.sharedClientState instanceof km&&(o.sharedClientState.syncEngine={Ys:n_.bind(null,u),Zs:wl.bind(null,u),Xs:bd.bind(null,u),Bi:gf.bind(null,u),Js:Wy.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.mi(function(){var l=(0,p.Z)(function*(f){yield function r_(i,e){return ff.apply(this,arguments)}(o.xa.syncEngine,f),o.gcScheduler&&(f&&!o.gcScheduler.started?o.gcScheduler.start():f||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(f&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():f||o.indexBackfillerScheduler.stop())});return function(f){return l.apply(this,arguments)}}())})()}createSharedClientState(e){const n=vd();if(!km.D(n))throw new et(je.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=Mm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new km(n,e.asyncQueue,o,e.clientId,e.initialUser)}}class Cl{initialize(e,n){var o=this;return(0,p.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(n),o.remoteStore=o.createRemoteStore(n),o.eventManager=o.createEventManager(n),o.syncEngine=o.createSyncEngine(n,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>Km(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=Xm.bind(null,o.syncEngine),yield Qh(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Zu}createDatastore(e){const n=Mc(e.databaseInfo.databaseId),o=new yd(e.databaseInfo);return new Dd(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return o=this.localStore,u=this.datastore,l=e.asyncQueue,f=n=>Km(this.syncEngine,n,0),w=Vm.D()?new Vm:new $h,new Fy(o,u,l,f,w);var o,u,l,f,w}createSyncEngine(e,n){return function(u,l,f,w,S,k,$){const X=new Hy(u,l,f,w,S,k);return $&&(X.Ca=!0),X}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,p.Z)(function*(o){const u=ot(o);Je("RemoteStore","RemoteStore shutting down."),u.C_.add(5),yield yl(u),u.F_.shutdown(),u.M_.set("Unknown")}),function n(o){return e.apply(this,arguments)})(this.remoteStore);var e}}function Dg(i,e=10240){let n=0;return{read:()=>(0,p.Z)(function*(){if(n<i.byteLength){const o={value:i.slice(n,n+e),done:!1};return n+=e,o}return{done:!0}})(),cancel:()=>(0,p.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class _f{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):or("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class qy{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new xn,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(o=>{o&&o.Z_()?this.metadata.resolve(o.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.Y_)}`))},o=>this.metadata.reject(o))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,p.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,p.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,p.Z)(function*(){const n=yield e.qa();if(null===n)return null;const o=e.La.decode(n),u=Number(o);isNaN(u)&&e.Qa(`length string (${o}) is not valid number`);const l=yield e.Ka(u);return new LE(JSON.parse(l),n.length+u)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,p.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const n=e.$a();n<0&&e.Qa("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),o})()}Ka(e){var n=this;return(0,p.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ua())&&n.Qa("Reached the end of bundle when more is expected.");const o=n.La.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),o})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,p.Z)(function*(){const n=yield e.Ba.read();if(!n.done){const o=new Uint8Array(e.buffer.length+n.value.length);o.set(e.buffer),o.set(n.value,e.buffer.length),e.buffer=o}return n.done})()}}class Ky{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,p.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new et(je.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,p.Z)(function*(f,w){const S=ot(f),k=Xl(S.serializer)+"/documents",$={documents:w.map(gt=>Bu(S.serializer,gt))},X=yield S.Co("BatchGetDocuments",k,$,w.length),fe=new Map;X.forEach(gt=>{const Dt=function fy(i,e){return"found"in e?function(o,u){Bt(!!u.found);const l=na(o,u.found.name),f=Ei(u.found.updateTime),w=u.found.createTime?Ei(u.found.createTime):qt.min(),S=new di({mapValue:{fields:u.found.fields}});return Fr.newFoundDocument(l,f,w,S)}(i,e):"missing"in e?function(o,u){Bt(!!u.missing),Bt(!!u.readTime);const l=na(o,u.missing),f=Ei(u.readTime);return Fr.newNoDocument(l,f)}(i,e):_t()}(S.serializer,gt);fe.set(Dt.key.toString(),Dt)});const Oe=[];return w.forEach(gt=>{const Dt=fe.get(gt.toString());Bt(!!Dt),Oe.push(Dt)}),Oe}),function l(f,w){return u.apply(this,arguments)})(n.datastore,e);var u;return o.forEach(u=>n.recordVersion(u)),o})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new gu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,p.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var o;e.mutations.forEach(o=>{n.delete(o.key.toString())}),n.forEach((o,u)=>{const l=It.fromPath(u);e.mutations.push(new np(l,e.precondition(l)))}),yield(o=(0,p.Z)(function*(l,f){const w=ot(l),S=Xl(w.serializer)+"/documents",k={writes:f.map($=>dl(w.serializer,$))};yield w.wo("Commit",S,k)}),function u(l,f){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw _t();n=qt.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!n.isEqual(o))throw new et(je.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(qt.min())?hi.exists(!1):hi.updateTime(n):hi.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(qt.min()))throw new et(je.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return hi.updateTime(n)}return hi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Zy{constructor(e,n,o,u,l){this.asyncQueue=e,this.datastore=n,this.options=o,this.updateFunction=u,this.deferred=l,this.Wa=o.maxAttempts,this.zo=new Ed(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,p.Z)(function*(){const n=new Ky(e.datastore),o=e.za(n);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(u)}).catch(l=>{e.ja(l)}))}).catch(u=>{e.ja(u)})}))}za(e){try{const n=this.updateFunction(e);return!W(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!op(n)}return!1}}class o_{constructor(e,n,o,u){var l=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=u,this.user=Yt.UNAUTHENTICATED,this.clientId=_a.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var f=(0,p.Z)(function*(w){Je("FirestoreClient","Received user=",w.uid),yield l.authCredentialListener(w),l.user=w});return function(w){return f.apply(this,arguments)}}()),this.appCheckCredentials.start(o,f=>(Je("FirestoreClient","Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}getConfiguration(){var e=this;return(0,p.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new et(je.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new xn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,p.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(o){const u=kc(o,"Failed to shutdown persistence");n.reject(u)}})),n.promise}}function Md(i,e){return wg.apply(this,arguments)}function wg(){return wg=(0,p.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Je("FirestoreClient","Initializing OfflineComponentProvider");const n=yield i.getConfiguration();yield e.initialize(n);let o=n.initialUser;i.setCredentialChangeListener(function(){var u=(0,p.Z)(function*(l){o.isEqual(l)||(yield qu(e.localStore,l),o=l)});return function(l){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),wg.apply(this,arguments)}function Tg(i,e){return Zs.apply(this,arguments)}function Zs(){return Zs=(0,p.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const n=yield Cg(i);Je("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(n,o),i.setCredentialChangeListener(u=>ng(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,l)=>ng(e.remoteStore,l)),i._onlineComponents=e}),Zs.apply(this,arguments)}function a_(i){return"FirebaseError"===i.name?i.code===je.FAILED_PRECONDITION||i.code===je.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function Cg(i){return u_.apply(this,arguments)}function u_(){return u_=(0,p.Z)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Je("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Md(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!a_(n))throw n;yr("Error using user provided cache. Falling back to memory cache: "+n),yield Md(i,new Tl)}}else Je("FirestoreClient","Using default OfflineComponentProvider"),yield Md(i,new Tl);return i._offlineComponents}),u_.apply(this,arguments)}function Al(i){return yf.apply(this,arguments)}function yf(){return yf=(0,p.Z)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Je("FirestoreClient","Using user provided OnlineComponentProvider"),yield Tg(i,i._uninitializedComponentsProvider._online)):(Je("FirestoreClient","Using default OnlineComponentProvider"),yield Tg(i,new Cl))),i._onlineComponents}),yf.apply(this,arguments)}function c_(i){return Cg(i).then(e=>e.persistence)}function Sl(i){return Cg(i).then(e=>e.localStore)}function l_(i){return Al(i).then(e=>e.remoteStore)}function vf(i){return Al(i).then(e=>e.syncEngine)}function bl(i){return xd.apply(this,arguments)}function xd(){return xd=(0,p.Z)(function*(i){const e=yield Al(i),n=e.eventManager;return n.onListen=qm.bind(null,e.syncEngine),n.onUnlisten=zy.bind(null,e.syncEngine),n}),xd.apply(this,arguments)}function h_(i,e,n={}){const o=new xn;return i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return function(l,f,w,S,k){const $=new _f({next:fe=>{f.enqueueAndForget(()=>$m(l,X));const Oe=fe.docs.has(w);!Oe&&fe.fromCache?k.reject(new et(je.UNAVAILABLE,"Failed to get document because the client is offline.")):Oe&&fe.fromCache&&S&&"server"===S.source?k.reject(new et(je.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):k.resolve(fe)},error:fe=>k.reject(fe)}),X=new lg(lu(w.path),$,{includeMetadataChanges:!0,J_:!0});return Ad(l,X)}(yield bl(i),i.asyncQueue,e,n,o)})),o.promise}function oa(i,e,n={}){const o=new xn;return i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return function(l,f,w,S,k){const $=new _f({next:fe=>{f.enqueueAndForget(()=>$m(l,X)),fe.fromCache&&"server"===S.source?k.reject(new et(je.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):k.resolve(fe)},error:fe=>k.reject(fe)}),X=new lg(w,$,{includeMetadataChanges:!0,J_:!0});return Ad(l,X)}(yield bl(i),i.asyncQueue,e,n,o)})),o.promise}function Nd(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const Ef=new Map;function m_(i,e,n){if(!n)throw new et(je.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Sg(i,e,n,o){if(!0===e&&!0===o)throw new et(je.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function bg(i){if(!It.isDocumentKey(i))throw new et(je.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Rg(i){if(It.isDocumentKey(i))throw new et(je.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Od(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(o=i).constructor?o.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var o;return"function"==typeof i?"a function":_t()}function Hn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new et(je.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Od(i);throw new et(je.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function Ua(i,e){if(e<=0)throw new et(je.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class __{constructor(e){var n,o;if(void 0===e.host){if(void 0!==e.ssl)throw new et(je.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new et(je.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Sg("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Nd(null!==(o=e.experimentalLongPollingOptions)&&void 0!==o?o:{}),function(l){if(void 0!==l.timeoutSeconds){if(isNaN(l.timeoutSeconds))throw new et(je.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new et(je.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new et(je.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kd{constructor(e,n,o,u){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new __({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new et(je.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new et(je.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new __(e),void 0!==e.credentials&&(this._authCredentials=function(o){if(!o)return new nc;switch(o.type){case"firstParty":return new rc(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new et(je.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const o=Ef.get(n);o&&(Je("ComponentProvider","Removing Datastore"),Ef.delete(n),o.terminate())}(this),Promise.resolve()}}function If(i,e,n,o={}){var u;const l=(i=Hn(i,kd))._getSettings(),f=`${e}:${n}`;if("firestore.googleapis.com"!==l.host&&l.host!==f&&yr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},l),{host:f,ssl:!1})),o.mockUserToken){let w,S;if("string"==typeof o.mockUserToken)w=o.mockUserToken,S=Yt.MOCK_USER;else{w=(0,te.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const k=o.mockUserToken.sub||o.mockUserToken.user_id;if(!k)throw new et(je.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Yt(k)}i._authCredentials=new Qa(new bu(w,S))}}class gs{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new gs(this.firestore,e,this._query)}}class fi{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ba(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fi(this.firestore,e,this._key)}}class Ba extends gs{constructor(e,n,o){super(e,n,lu(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fi(this.firestore,null,new It(e))}withConverter(e){return new Ba(this.firestore,e,this._path)}}function Df(i,e,...n){if(i=(0,te.m9)(i),m_("collection","path",e),i instanceof kd){const o=Jn.fromString(e,...n);return Rg(o),new Ba(i,null,o)}{if(!(i instanceof fi||i instanceof Ba))throw new et(je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Jn.fromString(e,...n));return Rg(o),new Ba(i.firestore,null,o)}}function Vd(i,e){if(i=Hn(i,kd),m_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new et(je.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new gs(i,null,(o=e,new oo(Jn.emptyPath(),o)));var o}function Pg(i,e,...n){if(i=(0,te.m9)(i),1===arguments.length&&(e=_a.newId()),m_("doc","path",e),i instanceof kd){const o=Jn.fromString(e,...n);return bg(o),new fi(i,null,new It(o))}{if(!(i instanceof fi||i instanceof Ba))throw new et(je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Jn.fromString(e,...n));return bg(o),new fi(i.firestore,i instanceof Ba?i.converter:null,new It(o))}}function wf(i,e){return i=(0,te.m9)(i),e=(0,te.m9)(e),(i instanceof fi||i instanceof Ba)&&(e instanceof fi||e instanceof Ba)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function y_(i,e){return i=(0,te.m9)(i),e=(0,te.m9)(e),i instanceof gs&&e instanceof gs&&i.firestore===e.firestore&&du(i._query,e._query)&&i.converter===e.converter}class nv{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new Ed(this,"async_queue_retry"),this.iu=()=>{const n=Eu();n&&Je("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=Eu();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=Eu();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new xn;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,p.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(n){if(!wi(n))throw n;Je("AsyncQueue","Operation failed with retryable error: "+n)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(o=>{throw this.eu=o,this.tu=!1,or("INTERNAL UNHANDLED ERROR: ",function(f){let w=f.message||"";return f.stack&&(w=f.stack.includes(f.message)?f.stack:f.message+"\n"+f.stack),w}(o)),o}).then(o=>(this.tu=!1,o))));return this.Ja=n,n}enqueueAfterDelay(e,n,o){this.su(),this.ru.indexOf(e)>-1&&(n=0);const u=Jh.createAndSchedule(this,e,n,o,l=>this.au(l));return this.Xa.push(u),u}su(){this.eu&&_t()}verifyOperationInProgress(){}uu(){var e=this;return(0,p.Z)(function*(){let n;do{n=e.Ja,yield n}while(n!==e.Ja)})()}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,o)=>n.targetTimeMs-o.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function Tf(i){return function(n,o){if("object"!=typeof n||null===n)return!1;const u=n;for(const l of["next","error","complete"])if(l in u&&"function"==typeof u[l])return!0;return!1}(i)}class v_{constructor(){this._progressObserver={},this._taskCompletionResolver=new xn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,o){this._progressObserver={next:e,error:n,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const rv=-1;class Wr extends kd{constructor(e,n,o,u){super(e,n,o,u),this.type="firestore",this._queue=new nv,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||I_(this),this._firestoreClient.terminate()}}function E_(i,e){const n="object"==typeof i?i:(0,Y.getApp)(),o="string"==typeof i?i:e||"(default)",u=(0,Y._getProvider)(n,"firestore").getImmediate({identifier:o});if(!u._initialized){const l=(0,te.P0)("firestore");l&&If(u,...l)}return u}function qr(i){return i._firestoreClient||I_(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function I_(i){var e,n,o;const u=i._freezeSettings(),l=(S=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new eh(i._databaseId,S,i._persistenceKey,($=u).host,$.ssl,$.experimentalForceLongPolling,$.experimentalAutoDetectLongPolling,Nd($.experimentalLongPollingOptions),$.useFetchStreams));var S,$;i._firestoreClient=new o_(i._authCredentials,i._appCheckCredentials,i._queue,l),null!==(n=u.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(o=u.localCache)&&void 0!==o&&o._onlineComponentProvider&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.localCache.kind,_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider})}function D_(i,e){C_(i=Hn(i,Wr));const n=qr(i);if(n._uninitializedComponentsProvider)throw new et(je.FAILED_PRECONDITION,"SDK cache is already specified.");yr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const o=i._freezeSettings(),u=new Cl;return T_(n,u,new Ig(u,o.cacheSizeBytes,e?.forceOwnership))}function w_(i){C_(i=Hn(i,Wr));const e=qr(i);if(e._uninitializedComponentsProvider)throw new et(je.FAILED_PRECONDITION,"SDK cache is already specified.");yr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=i._freezeSettings(),o=new Cl;return T_(e,o,new s_(o,n.cacheSizeBytes))}function T_(i,e,n){const o=new xn;return i.asyncQueue.enqueue((0,p.Z)(function*(){try{yield Md(i,n),yield Tg(i,e),o.resolve()}catch(u){const l=u;if(!a_(l))throw l;yr("Error enabling indexeddb cache. Falling back to memory cache: "+l),o.reject(l)}})).then(()=>o.promise)}function sv(i){if(i._initialized&&!i._terminated)throw new et(je.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new xn;return i._queue.enqueueAndForgetEvenWhileRestricted((0,p.Z)(function*(){try{yield(n=(0,p.Z)(function*(u){if(!ro.D())return Promise.resolve();const l=u+"main";yield ro.delete(l)}),function o(u){return n.apply(this,arguments)})(Mm(i._databaseId,i._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}function Fd(i){return function(n){const o=new xn;return n.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return function Ym(i,e){return gg.apply(this,arguments)}(yield vf(n),o)})),o.promise}(qr(i=Hn(i,Wr)))}function ov(i){return function Yy(i){return i.asyncQueue.enqueue((0,p.Z)(function*(){const e=yield c_(i),n=yield l_(i);return e.setNetworkEnabled(!0),function(u){const l=ot(u);return l.C_.delete(0),xc(l)}(n)}))}(qr(i=Hn(i,Wr)))}function av(i){return function Qy(i){return i.asyncQueue.enqueue((0,p.Z)(function*(){const e=yield c_(i),n=yield l_(i);return e.setNetworkEnabled(!1),(o=(0,p.Z)(function*(l){const f=ot(l);f.C_.add(0),yield yl(f),f.M_.set("Offline")}),function u(l){return o.apply(this,arguments)})(n);var o}))}(qr(i=Hn(i,Wr)))}function uv(i,e){const n=qr(i=Hn(i,Wr)),o=new v_;return function ev(i,e,n,o){const u=function(f,w){let S;return S="string"==typeof f?qs().encode(f):f,$=function($,X){if($ instanceof Uint8Array)return Dg($,X);if($ instanceof ArrayBuffer)return Dg(new Uint8Array($),X);if($ instanceof ReadableStream)return $.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(S),new qy($,w);var $}(n,Mc(e));i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){!function vg(i,e,n){const o=ot(i);var u;(u=(0,p.Z)(function*(f,w,S){try{const k=yield w.getMetadata();if(yield function(gt,Dt){const wt=ot(gt),hn=Ei(Dt.createTime);return wt.persistence.runTransaction("hasNewerBundle","readonly",vn=>wt.Kr.getBundleMetadata(vn,Dt.id)).then(vn=>!!vn&&vn.createTime.compareTo(hn)>=0)}(f.localStore,k))return yield w.close(),S._completeWith({taskState:"Success",documentsLoaded:(gt=k).totalDocuments,bytesLoaded:gt.totalBytes,totalDocuments:gt.totalDocuments,totalBytes:gt.totalBytes}),Promise.resolve(new Set);S._updateProgress(ef(k));const $=new $y(k,f.localStore,w.serializer);let X=yield w.Ma();for(;X;){const Oe=yield $.ea(X);Oe&&S._updateProgress(Oe),X=yield w.Ma()}const fe=yield $.complete();return yield Yu(f,fe.ra,void 0),yield function(gt,Dt){const wt=ot(gt);return wt.persistence.runTransaction("Save bundle","readwrite",hn=>wt.Kr.saveBundleMetadata(hn,Dt))}(f.localStore,k),S._completeWith(fe.progress),Promise.resolve(fe.na)}catch(k){return yr("SyncEngine",`Loading bundle failed with ${k}`),S._failWith(k),Promise.resolve(new Set)}var gt}),function l(f,w,S){return u.apply(this,arguments)})(o,e,n).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield vf(i),u,o)}))}(n,i._databaseId,e,o),o}function cv(i,e){return function f_(i,e){return i.asyncQueue.enqueue((0,p.Z)(function*(){return function(o,u){const l=ot(o);return l.persistence.runTransaction("Get named query","readonly",f=>l.Kr.getNamedQuery(f,u))}(yield Sl(i),e)}))}(qr(i=Hn(i,Wr)),e).then(n=>n?new gs(i,null,n.query):null)}function C_(i){if(i._initialized||i._terminated)throw new et(je.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Iu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Iu(Jr.fromBase64String(e))}catch(n){throw new et(je.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Iu(Jr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ja{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new et(je.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class $a{constructor(e){this._methodName=e}}class Cf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new et(je.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new et(je.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return mn(this._lat,e._lat)||mn(this._long,e._long)}}const dv=/^__.*__$/;class hv{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return null!==this.fieldMask?new Ma(e,this.data,this.fieldMask,n,this.fieldTransforms):new ta(e,this.data,n,this.fieldTransforms)}}class A_{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new Ma(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function S_(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _t()}}class Af{constructor(e,n,o,u,l,f){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=u,void 0===l&&this.Pu(),this.fieldTransforms=l||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new Af(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.Tu({path:o,du:!1});return u.Au(e),u}Ru(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.Tu({path:o,du:!1});return u.Pu(),u}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return Pl(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(S_(this.Iu)&&dv.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class fv{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||Mc(e)}pu(e,n,o,u=!1){return new Af({Iu:e,methodName:n,gu:o,path:Vr.emptyPath(),du:!1,fu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qu(i){const e=i._freezeSettings(),n=Mc(i._databaseId);return new fv(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Ud(i,e,n,o,u,l={}){const f=i.pu(l.merge||l.mergeFields?2:0,e,n,u);ss("Data must be an object, but it was:",f,o);const w=aa(o,f);let S,k;if(l.merge)S=new Gs(f.fieldMask),k=f.fieldTransforms;else if(l.mergeFields){const $=[];for(const X of l.mergeFields){const fe=ua(e,X,n);if(!f.contains(fe))throw new et(je.INVALID_ARGUMENT,`Field '${fe}' is specified in your field mask but missing from your input data.`);Bc($,fe)||$.push(fe)}S=new Gs($),k=f.fieldTransforms.filter(X=>S.covers(X.field))}else S=null,k=f.fieldTransforms;return new hv(new di(w),S,k)}class Bd extends $a{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bd}}function pv(i,e,n){return new Af({Iu:3,gu:e.settings.gu,methodName:i._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Sf extends $a{_toFieldTransform(e){return new fh(e.path,new Ra)}isEqual(e){return e instanceof Sf}}class b_ extends $a{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=pv(this,e,!0),o=this.yu.map(l=>Uc(l,n)),u=new fu(o);return new fh(e.path,u)}isEqual(e){return this===e}}class jE extends $a{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=pv(this,e,!0),o=this.yu.map(l=>Uc(l,n)),u=new Pa(o);return new fh(e.path,u)}isEqual(e){return this===e}}class bf extends $a{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new pu(e.serializer,Uu(e.serializer,this.wu));return new fh(e.path,n)}isEqual(e){return this===e}}function Mg(i,e,n,o){const u=i.pu(1,e,n);ss("Data must be an object, but it was:",u,o);const l=[],f=di.empty();zs(o,(S,k)=>{const $=Ys(e,S,n);k=(0,te.m9)(k);const X=u.Ru($);if(k instanceof Bd)l.push($);else{const fe=Uc(k,X);null!=fe&&(l.push($),f.set($,fe))}});const w=new Gs(l);return new A_(f,w,u.fieldTransforms)}function xg(i,e,n,o,u,l){const f=i.pu(1,e,n),w=[ua(e,o,n)],S=[u];if(l.length%2!=0)throw new et(je.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let fe=0;fe<l.length;fe+=2)w.push(ua(e,l[fe])),S.push(l[fe+1]);const k=[],$=di.empty();for(let fe=w.length-1;fe>=0;--fe)if(!Bc(k,w[fe])){const Oe=w[fe];let gt=S[fe];gt=(0,te.m9)(gt);const Dt=f.Ru(Oe);if(gt instanceof Bd)k.push(Oe);else{const wt=Uc(gt,Dt);null!=wt&&(k.push(Oe),$.set(Oe,wt))}}const X=new Gs(k);return new A_($,X,f.fieldTransforms)}function Rf(i,e,n,o=!1){return Uc(n,i.pu(o?4:3,e))}function Uc(i,e){if(Rl(i=(0,te.m9)(i)))return ss("Unsupported field value:",e,i),aa(i,e);if(i instanceof $a)return function(o,u){if(!S_(u.Iu))throw u.mu(`${o._methodName}() can only be used with update() and set()`);if(!u.path)throw u.mu(`${o._methodName}() is not currently supported inside arrays`);const l=o._toFieldTransform(u);l&&u.fieldTransforms.push(l)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(o,u){const l=[];let f=0;for(const w of o){let S=Uc(w,u.Vu(f));null==S&&(S={nullValue:"NULL_VALUE"}),l.push(S),f++}return{arrayValue:{values:l}}}(i,e)}return function(o,u){if(null===(o=(0,te.m9)(o)))return{nullValue:"NULL_VALUE"};if("number"==typeof o)return Uu(u.serializer,o);if("boolean"==typeof o)return{booleanValue:o};if("string"==typeof o)return{stringValue:o};if(o instanceof Date){const l=Ot.fromDate(o);return{timestampValue:ll(u.serializer,l)}}if(o instanceof Ot){const l=new Ot(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:ll(u.serializer,l)}}if(o instanceof Cf)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Iu)return{bytesValue:dm(u.serializer,o._byteString)};if(o instanceof fi){const l=u.databaseId,f=o.firestore._databaseId;if(!f.isEqual(l))throw u.mu(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Eh(o.firestore._databaseId||u.databaseId,o._key.path)}}throw u.mu(`Unsupported field value: ${Od(o)}`)}(i,e)}function aa(i,e){const n={};return wa(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zs(i,(o,u)=>{const l=Uc(u,e.Eu(o));null!=l&&(n[o]=l)}),{mapValue:{fields:n}}}function Rl(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Ot||i instanceof Cf||i instanceof Iu||i instanceof fi||i instanceof $a)}function ss(i,e,n){if(!Rl(n)||"object"!=typeof(u=n)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const o=Od(n);throw e.mu("an object"===o?i+" a custom object":i+" "+o)}var u}function ua(i,e,n){if((e=(0,te.m9)(e))instanceof ja)return e._internalPath;if("string"==typeof e)return Ys(i,e);throw Pl("Field path arguments must be of type string or ",i,!1,void 0,n)}const Pf=new RegExp("[~\\*/\\[\\]]");function Ys(i,e,n){if(e.search(Pf)>=0)throw Pl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new ja(...e.split("."))._internalPath}catch{throw Pl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Pl(i,e,n,o,u){const l=o&&!o.isEmpty(),f=void 0!==u;let w=`Function ${e}() called with invalid data`;n&&(w+=" (via `toFirestore()`)"),w+=". ";let S="";return(l||f)&&(S+=" (found",l&&(S+=` in field ${o}`),f&&(S+=` in document ${u}`),S+=")"),new et(je.INVALID_ARGUMENT,w+i+S)}function Bc(i,e){return i.some(n=>n.isEqual(e))}class Ha{constructor(e,n,o,u,l){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=u,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new fi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ml(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Du("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class Ml extends Ha{data(){return super.data()}}function Du(i,e){return"string"==typeof e?Ys(i,e):e instanceof ja?e._internalPath:e._delegate._internalPath}function jc(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new et(je.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ju{}class za extends Ju{}function xl(i,e,...n){let o=[];e instanceof Ju&&o.push(e),o=o.concat(n),function(l){const f=l.filter(S=>S instanceof $c).length,w=l.filter(S=>S instanceof Ga).length;if(f>1||f>0&&w>0)throw new et(je.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const u of o)i=u._apply(i);return i}class Ga extends za{constructor(e,n,o){super(),this._field=e,this._op=n,this._value=o,this.type="where"}static _create(e,n,o){return new Ga(e,n,o)}_apply(e){const n=this._parse(e);return O_(e._query,n),new gs(e.firestore,e.converter,il(e._query,n))}_parse(e){const n=Qu(e.firestore);return function(l,f,w,S,k,$,X){let fe;if(k.isKeyField()){if("array-contains"===$||"array-contains-any"===$)throw new et(je.INVALID_ARGUMENT,`Invalid Query. You can't perform '${$}' queries on documentId().`);if("in"===$||"not-in"===$){Iv(X,$);const Oe=[];for(const gt of X)Oe.push(N_(S,l,gt));fe={arrayValue:{values:Oe}}}else fe=N_(S,l,X)}else"in"!==$&&"not-in"!==$&&"array-contains-any"!==$||Iv(X,$),fe=Rf(w,"where",X,"in"===$||"not-in"===$);return An.create(k,$,fe)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}function R_(i,e,n){const o=e,u=Du("where",i);return Ga._create(u,o,n)}class $c extends Ju{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new $c(e,n)}_parse(e){const n=this._queryConstraints.map(o=>o._parse(e)).filter(o=>o.getFilters().length>0);return 1===n.length?n[0]:Ar.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(u,l){let f=u;const w=l.getFlattenedFilters();for(const S of w)O_(f,S),f=il(f,S)}(e._query,n),new gs(e.firestore,e.converter,il(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Mf extends za{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Mf(e,n)}_apply(e){const n=function(u,l,f){if(null!==u.startAt)throw new et(je.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new et(je.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vo(l,f)}(e._query,this._field,this._direction);return new gs(e.firestore,e.converter,function(u,l){const f=u.explicitOrderBy.concat([l]);return new oo(u.path,u.collectionGroup,f,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e._query,n))}}function P_(i,e="asc"){const n=e,o=Du("orderBy",i);return Mf._create(o,n)}class jd extends za{constructor(e,n,o){super(),this.type=e,this._limit=n,this._limitType=o}static _create(e,n,o){return new jd(e,n,o)}_apply(e){return new gs(e.firestore,e.converter,mc(e._query,this._limit,this._limitType))}}function M_(i){return Ua("limit",i),jd._create("limit",i,"F")}function x_(i){return Ua("limitToLast",i),jd._create("limitToLast",i,"L")}class Nl extends za{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new Nl(e,n,o)}_apply(e){const n=Ev(e,this.type,this._docOrFields,this._inclusive);return new gs(e.firestore,e.converter,(l=n,new oo((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,l,u.endAt)));var u,l}}function _v(...i){return Nl._create("startAt",i,!0)}function $E(...i){return Nl._create("startAfter",i,!1)}class Ng extends za{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new Ng(e,n,o)}_apply(e){const n=Ev(e,this.type,this._docOrFields,this._inclusive);return new gs(e.firestore,e.converter,(l=n,new oo((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,l)));var u,l}}function yv(...i){return Ng._create("endBefore",i,!1)}function vv(...i){return Ng._create("endAt",i,!0)}function Ev(i,e,n,o){if(n[0]=(0,te.m9)(n[0]),n[0]instanceof Ha)return function(l,f,w,S,k){if(!S)throw new et(je.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${w}().`);const $=[];for(const X of Sa(l))if(X.field.isKeyField())$.push(Aa(f,S.key));else{const fe=S.data.field(X.field);if(dc(fe))throw new et(je.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+X.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===fe){const Oe=X.field.canonicalString();throw new et(je.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Oe}' (used as the orderBy) does not exist.`)}$.push(fe)}return new ko($,k)}(i._query,i.firestore._databaseId,e,n[0]._document,o);{const u=Qu(i.firestore);return function(f,w,S,k,$,X){const fe=f.explicitOrderBy;if($.length>fe.length)throw new et(je.INVALID_ARGUMENT,`Too many arguments provided to ${k}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Oe=[];for(let gt=0;gt<$.length;gt++){const Dt=$[gt];if(fe[gt].field.isKeyField()){if("string"!=typeof Dt)throw new et(je.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${k}(), but got a ${typeof Dt}`);if(!ch(f)&&-1!==Dt.indexOf("/"))throw new et(je.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${k}() must be a plain document ID, but '${Dt}' contains a slash.`);const wt=f.path.child(Jn.fromString(Dt));if(!It.isDocumentKey(wt))throw new et(je.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${k}() must result in a valid document path, but '${wt}' is not because it contains an odd number of segments.`);const hn=new It(wt);Oe.push(Aa(w,hn))}else{const wt=Rf(S,k,Dt);Oe.push(wt)}}return new ko(Oe,X)}(i._query,i.firestore._databaseId,u,e,n,o)}}function N_(i,e,n){if("string"==typeof(n=(0,te.m9)(n))){if(""===n)throw new et(je.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ch(e)&&-1!==n.indexOf("/"))throw new et(je.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(Jn.fromString(n));if(!It.isDocumentKey(o))throw new et(je.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Aa(i,new It(o))}if(n instanceof fi)return Aa(i,n._key);throw new et(je.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Od(n)}.`)}function Iv(i,e){if(!Array.isArray(i)||0===i.length)throw new et(je.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function O_(i,e){const n=function(u,l){for(const f of u)for(const w of f.getFlattenedFilters())if(l.indexOf(w.op)>=0)return w.op;return null}(i.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new et(je.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Og{convertValue(e,n="none"){switch(Mo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ds(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw _t()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return zs(e,(u,l)=>{o[u]=this.convertValue(l,n)}),o}convertGeoPoint(e){return new Cf(Gr(e.latitude),Gr(e.longitude))}convertArray(e,n){return(e.values||[]).map(o=>this.convertValue(o,n))}convertServerTimestamp(e,n){switch(n){case"previous":const o=tu(e);return null==o?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(xu(e));default:return null}}convertTimestamp(e){const n=io(e);return new Ot(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=Jn.fromString(e);Bt(yp(o));const u=new Fi(o.get(1),o.get(3)),l=new It(o.popFirst(5));return u.isEqual(n)||or(`Document ${l} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}function Ol(i,e,n){let o;return o=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,o}class $d extends Og{constructor(e){super(),this.firestore=e}convertBytes(e){return new Iu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new fi(this.firestore,null,n)}}class Hc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ca extends Ha{constructor(e,n,o,u,l,f){super(e,n,o,u,f),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Hd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(Du("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}}class Hd extends ca{data(e={}){return super.data(e)}}class zc{constructor(e,n,o,u){this._firestore=e,this._userDataWriter=n,this._snapshot=u,this.metadata=new Hc(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(o=>{e.call(n,new Hd(this._firestore,this._userDataWriter,o.key,o,new Hc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new et(je.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(u,l){if(u._snapshot.oldDocs.isEmpty()){let f=0;return u._snapshot.docChanges.map(w=>({type:"added",doc:new Hd(u._firestore,u._userDataWriter,w.doc.key,w.doc,new Hc(u._snapshot.mutatedKeys.has(w.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:f++}))}{let f=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(w=>l||3!==w.type).map(w=>{const S=new Hd(u._firestore,u._userDataWriter,w.doc.key,w.doc,new Hc(u._snapshot.mutatedKeys.has(w.doc.key),u._snapshot.fromCache),u.query.converter);let k=-1,$=-1;return 0!==w.type&&(k=f.indexOf(w.doc.key),f=f.delete(w.doc.key)),1!==w.type&&(f=f.add(w.doc),$=f.indexOf(w.doc.key)),{type:wv(w.type),doc:S,oldIndex:k,newIndex:$}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function wv(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _t()}}function Tv(i,e){return i instanceof ca&&e instanceof ca?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof zc&&e instanceof zc&&i._firestore===e._firestore&&y_(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function Vg(i){i=Hn(i,fi);const e=Hn(i.firestore,Wr);return h_(qr(e),i._key).then(n=>Lg(e,i,n))}class la extends Og{constructor(e){super(),this.firestore=e}convertBytes(e){return new Iu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new fi(this.firestore,null,n)}}function Nf(i){i=Hn(i,fi);const e=Hn(i.firestore,Wr),n=qr(e),o=new la(e);return function Jy(i,e){const n=new xn;return i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return(o=(0,p.Z)(function*(l,f,w){try{const S=yield function($,X){const fe=ot($);return fe.persistence.runTransaction("read document","readonly",Oe=>fe.localDocuments.getDocument(Oe,X))}(l,f);S.isFoundDocument()?w.resolve(S):S.isNoDocument()?w.resolve(null):w.reject(new et(je.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(S){const k=kc(S,`Failed to get document '${f} from cache`);w.reject(k)}}),function u(l,f,w){return o.apply(this,arguments)})(yield Sl(i),e,n);var o})),n.promise}(n,i._key).then(u=>new ca(e,o,i._key,u,new Hc(null!==u&&u.hasLocalMutations,!0),i.converter))}function HE(i){i=Hn(i,fi);const e=Hn(i.firestore,Wr);return h_(qr(e),i._key,{source:"server"}).then(n=>Lg(e,i,n))}function Cv(i){i=Hn(i,gs);const e=Hn(i.firestore,Wr),n=qr(e),o=new la(e);return jc(i._query),oa(n,i._query).then(u=>new zc(e,o,i,u))}function Av(i){i=Hn(i,gs);const e=Hn(i.firestore,Wr),n=qr(e),o=new la(e);return function Xy(i,e){const n=new xn;return i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return(o=(0,p.Z)(function*(l,f,w){try{const S=yield Lh(l,f,!0),k=new tf(f,S.ls),$=k.ca(S.documents),X=k.applyChanges($,!1);w.resolve(X.snapshot)}catch(S){const k=kc(S,`Failed to execute query '${f} against cache`);w.reject(k)}}),function u(l,f,w){return o.apply(this,arguments)})(yield Sl(i),e,n);var o})),n.promise}(n,i._query).then(u=>new zc(e,o,i,u))}function Fg(i){i=Hn(i,gs);const e=Hn(i.firestore,Wr),n=qr(e),o=new la(e);return oa(n,i._query,{source:"server"}).then(u=>new zc(e,o,i,u))}function Sv(i,e,n){i=Hn(i,fi);const o=Hn(i.firestore,Wr),u=Ol(i.converter,e,n);return Gc(o,[Ud(Qu(o),"setDoc",i._key,u,null!==i.converter,n).toMutation(i._key,hi.none())])}function L_(i,e,n,...o){i=Hn(i,fi);const u=Hn(i.firestore,Wr),l=Qu(u);let f;return f="string"==typeof(e=(0,te.m9)(e))||e instanceof ja?xg(l,"updateDoc",i._key,e,n,o):Mg(l,"updateDoc",i._key,e),Gc(u,[f.toMutation(i._key,hi.exists(!0))])}function bv(i){return Gc(Hn(i.firestore,Wr),[new gu(i._key,hi.none())])}function Rv(i,e){const n=Hn(i.firestore,Wr),o=Pg(i),u=Ol(i.converter,e);return Gc(n,[Ud(Qu(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,hi.exists(!1))]).then(()=>o)}function U_(i,...e){var n,o,u;i=(0,te.m9)(i);let l={includeMetadataChanges:!1},f=0;"object"!=typeof e[f]||Tf(e[f])||(l=e[f],f++);const w={includeMetadataChanges:l.includeMetadataChanges};if(Tf(e[f])){const X=e[f];e[f]=null===(n=X.next)||void 0===n?void 0:n.bind(X),e[f+1]=null===(o=X.error)||void 0===o?void 0:o.bind(X),e[f+2]=null===(u=X.complete)||void 0===u?void 0:u.bind(X)}let S,k,$;if(i instanceof fi)k=Hn(i.firestore,Wr),$=lu(i._key.path),S={next:X=>{e[f]&&e[f](Lg(k,i,X))},error:e[f+1],complete:e[f+2]};else{const X=Hn(i,gs);k=Hn(X.firestore,Wr),$=X._query;const fe=new la(k);S={next:Oe=>{e[f]&&e[f](new zc(k,fe,X,Oe))},error:e[f+1],complete:e[f+2]},jc(i._query)}return function(fe,Oe,gt,Dt){const wt=new _f(Dt),hn=new lg(Oe,wt,gt);return fe.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return Ad(yield bl(fe),hn)})),()=>{wt.Na(),fe.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return $m(yield bl(fe),hn)}))}}(qr(k),$,w,S)}function B_(i,e){return function Ag(i,e){const n=new _f(e);return i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return u=yield bl(i),l=n,ot(u).q_.add(l),void l.next();var u,l})),()=>{n.Na(),i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return u=yield bl(i),l=n,void ot(u).q_.delete(l);var u,l}))}}(qr(i=Hn(i,Wr)),Tf(e)?e:{next:e})}function Gc(i,e){return function(o,u){const l=new xn;return o.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return function Il(i,e,n){return sa.apply(this,arguments)}(yield vf(o),u,l)})),l.promise}(qr(i),e)}function Lg(i,e,n){const o=n.docs.get(e._key),u=new la(i);return new ca(i,u,e._key,o,new Hc(n.hasPendingWrites,n.fromCache),e.converter)}const Hg={maxAttempts:5};class zg{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Qu(e)}set(e,n,o){this._verifyNotCommitted();const u=wu(e,this._firestore),l=Ol(u.converter,n,o),f=Ud(this._dataReader,"WriteBatch.set",u._key,l,null!==u.converter,o);return this._mutations.push(f.toMutation(u._key,hi.none())),this}update(e,n,o,...u){this._verifyNotCommitted();const l=wu(e,this._firestore);let f;return f="string"==typeof(n=(0,te.m9)(n))||n instanceof ja?xg(this._dataReader,"WriteBatch.update",l._key,n,o,u):Mg(this._dataReader,"WriteBatch.update",l._key,n),this._mutations.push(f.toMutation(l._key,hi.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=wu(e,this._firestore);return this._mutations=this._mutations.concat(new gu(n._key,hi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new et(je.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function wu(i,e){if((i=(0,te.m9)(i)).firestore!==e)throw new et(je.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Fv extends class{constructor(n,o){this._firestore=n,this._transaction=o,this._dataReader=Qu(n)}get(n){const o=wu(n,this._firestore),u=new $d(this._firestore);return this._transaction.lookup([o._key]).then(l=>{if(!l||1!==l.length)return _t();const f=l[0];if(f.isFoundDocument())return new Ha(this._firestore,u,f.key,f,o.converter);if(f.isNoDocument())return new Ha(this._firestore,u,o._key,null,o.converter);throw _t()})}set(n,o,u){const l=wu(n,this._firestore),f=Ol(l.converter,o,u),w=Ud(this._dataReader,"Transaction.set",l._key,f,null!==l.converter,u);return this._transaction.set(l._key,w),this}update(n,o,u,...l){const f=wu(n,this._firestore);let w;return w="string"==typeof(o=(0,te.m9)(o))||o instanceof ja?xg(this._dataReader,"Transaction.update",f._key,o,u,l):Mg(this._dataReader,"Transaction.update",f._key,o),this._transaction.update(f._key,w),this}delete(n){const o=wu(n,this._firestore);return this._transaction.delete(o._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=wu(e,this._firestore),o=new la(this._firestore);return super.get(e).then(u=>new ca(this._firestore,o,n._key,u._document,new Hc(!1,!1),n.converter))}}function Lv(i,e,n){i=Hn(i,Wr);const o=Object.assign(Object.assign({},Hg),n);return function(l){if(l.maxAttempts<1)throw new et(je.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(l,f,w){const S=new xn;return l.asyncQueue.enqueueAndForget((0,p.Z)(function*(){const k=yield function d_(i){return Al(i).then(e=>e.datastore)}(l);new Zy(l.asyncQueue,k,w,f,S).run()})),S.promise}(qr(i),u=>e(new Fv(i,u)),o)}function H_(){return new Bd("deleteField")}function Gg(){return new Sf("serverTimestamp")}function z_(...i){return new b_("arrayUnion",i)}function Wg(...i){return new jE("arrayRemove",i)}function G_(i){return new bf("increment",i)}!function(e,n=!0){fr=Y.SDK_VERSION,(0,Y._registerComponent)(new z.wA("firestore",(o,{instanceIdentifier:u,options:l})=>{const f=o.getProvider("app").getImmediate(),w=new Wr(new Is(o.getProvider("auth-internal")),new po(o.getProvider("app-check-internal")),function(k,$){if(!Object.prototype.hasOwnProperty.apply(k.options,["projectId"]))throw new et(je.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fi(k.options.projectId,$)}(f,u),f);return l=Object.assign({useFetchStreams:n},l),w._setSettings(l),w},"PUBLIC").setMultipleInstances(!0)),(0,Y.registerVersion)(Qn,"4.3.2",e),(0,Y.registerVersion)(Qn,"4.3.2","esm2017")}()},9058:(Et,Me,F)=>{F.d(Me,{BH:()=>Te,G6:()=>mt,L:()=>Se,LL:()=>Qe,P0:()=>Ie,Pz:()=>Pe,Sg:()=>ke,UG:()=>ft,ZB:()=>me,ZR:()=>xe,aH:()=>de,b$:()=>Jt,eu:()=>ye,hl:()=>pe,jU:()=>Tt,m9:()=>Pn,ne:()=>wn,pd:()=>Kt,r3:()=>yn,ru:()=>Gt,tV:()=>Q,uI:()=>he,vZ:()=>In,w1:()=>zn,xO:()=>nr,xb:()=>on,z$:()=>qe,zd:()=>jt});const ue=function(ae){const G=[];let O=0;for(let P=0;P<ae.length;P++){let M=ae.charCodeAt(P);M<128?G[O++]=M:M<2048?(G[O++]=M>>6|192,G[O++]=63&M|128):55296==(64512&M)&&P+1<ae.length&&56320==(64512&ae.charCodeAt(P+1))?(M=65536+((1023&M)<<10)+(1023&ae.charCodeAt(++P)),G[O++]=M>>18|240,G[O++]=M>>12&63|128,G[O++]=M>>6&63|128,G[O++]=63&M|128):(G[O++]=M>>12|224,G[O++]=M>>6&63|128,G[O++]=63&M|128)}return G},le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ae,G){if(!Array.isArray(ae))throw Error("encodeByteArray takes an array as a parameter");this.init_();const O=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,P=[];for(let M=0;M<ae.length;M+=3){const J=ae[M],De=M+1<ae.length,We=De?ae[M+1]:0,it=M+2<ae.length,yt=it?ae[M+2]:0;let en=(15&We)<<2|yt>>6,Ht=63&yt;it||(Ht=64,De||(en=64)),P.push(O[J>>2],O[(3&J)<<4|We>>4],O[en],O[Ht])}return P.join("")},encodeString(ae,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(ae):this.encodeByteArray(ue(ae),G)},decodeString(ae,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(ae):function(ae){const G=[];let O=0,P=0;for(;O<ae.length;){const M=ae[O++];if(M<128)G[P++]=String.fromCharCode(M);else if(M>191&&M<224){const J=ae[O++];G[P++]=String.fromCharCode((31&M)<<6|63&J)}else if(M>239&&M<365){const it=((7&M)<<18|(63&ae[O++])<<12|(63&ae[O++])<<6|63&ae[O++])-65536;G[P++]=String.fromCharCode(55296+(it>>10)),G[P++]=String.fromCharCode(56320+(1023&it))}else{const J=ae[O++],De=ae[O++];G[P++]=String.fromCharCode((15&M)<<12|(63&J)<<6|63&De)}}return G.join("")}(this.decodeStringToByteArray(ae,G))},decodeStringToByteArray(ae,G){this.init_();const O=G?this.charToByteMapWebSafe_:this.charToByteMap_,P=[];for(let M=0;M<ae.length;){const J=O[ae.charAt(M++)],We=M<ae.length?O[ae.charAt(M)]:0;++M;const yt=M<ae.length?O[ae.charAt(M)]:64;++M;const Vt=M<ae.length?O[ae.charAt(M)]:64;if(++M,null==J||null==We||null==yt||null==Vt)throw new ge;P.push(J<<2|We>>4),64!==yt&&(P.push(We<<4&240|yt>>2),64!==Vt&&P.push(yt<<6&192|Vt))}return P},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ae=0;ae<this.ENCODED_VALS.length;ae++)this.byteToCharMap_[ae]=this.ENCODED_VALS.charAt(ae),this.charToByteMap_[this.byteToCharMap_[ae]]=ae,this.byteToCharMapWebSafe_[ae]=this.ENCODED_VALS_WEBSAFE.charAt(ae),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ae]]=ae,ae>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ae)]=ae,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ae)]=ae)}}};class ge extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Se=function(ae){return function(ae){const G=ue(ae);return le.encodeByteArray(G,!0)}(ae).replace(/\./g,"")},Q=function(ae){try{return le.decodeString(ae,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function me(ae,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===ae&&(ae={});break;case Array:ae=[];break;default:return G}for(const O in G)!G.hasOwnProperty(O)||!ze(O)||(ae[O]=me(ae[O],G[O]));return ae}function ze(ae){return"__proto__"!==ae}const Ge=()=>{try{return function Ne(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ae=process.env.__FIREBASE_DEFAULTS__;return ae?JSON.parse(ae):void 0})()||(()=>{if(typeof document>"u")return;let ae;try{ae=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const G=ae&&Q(ae[1]);return G&&JSON.parse(G)})()}catch(ae){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ae}`)}},Ie=ae=>{const G=(ae=>{var G,O;return null===(O=null===(G=Ge())||void 0===G?void 0:G.emulatorHosts)||void 0===O?void 0:O[ae]})(ae);if(!G)return;const O=G.lastIndexOf(":");if(O<=0||O+1===G.length)throw new Error(`Invalid host ${G} with no separate hostname and port!`);const P=parseInt(G.substring(O+1),10);return"["===G[0]?[G.substring(1,O-1),P]:[G.substring(0,O),P]},de=()=>{var ae;return null===(ae=Ge())||void 0===ae?void 0:ae.config},Pe=ae=>{var G;return null===(G=Ge())||void 0===G?void 0:G[`_${ae}`]};class Te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,O)=>{this.resolve=G,this.reject=O})}wrapCallback(G){return(O,P)=>{O?this.reject(O):this.resolve(P),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(O):G(O,P))}}}function ke(ae,G){if(ae.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const P=G||"demo-project",M=ae.iat||0,J=ae.sub||ae.user_id;if(!J)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const De=Object.assign({iss:`https://securetoken.google.com/${P}`,aud:P,iat:M,exp:M+3600,auth_time:M,sub:J,user_id:J,firebase:{sign_in_provider:"custom",identities:{}}},ae);return[Se(JSON.stringify({alg:"none",type:"JWT"})),Se(JSON.stringify(De)),""].join(".")}function qe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function he(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function ft(){var ae;const G=null===(ae=Ge())||void 0===ae?void 0:ae.forceEnvironment;if("node"===G)return!0;if("browser"===G)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Tt(){return"object"==typeof self&&self.self===self}function Gt(){const ae="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ae&&void 0!==ae.id}function Jt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function zn(){const ae=qe();return ae.indexOf("MSIE ")>=0||ae.indexOf("Trident/")>=0}function mt(){return!ft()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pe(){try{return"object"==typeof indexedDB}catch{return!1}}function ye(){return new Promise((ae,G)=>{try{let O=!0;const P="validate-browser-context-for-indexeddb-analytics-module",M=self.indexedDB.open(P);M.onsuccess=()=>{M.result.close(),O||self.indexedDB.deleteDatabase(P),ae(!0)},M.onupgradeneeded=()=>{O=!1},M.onerror=()=>{var J;G((null===(J=M.error)||void 0===J?void 0:J.message)||"")}}catch(O){G(O)}})}class xe extends Error{constructor(G,O,P){super(O),this.code=G,this.customData=P,this.name="FirebaseError",Object.setPrototypeOf(this,xe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qe.prototype.create)}}class Qe{constructor(G,O,P){this.service=G,this.serviceName=O,this.errors=P}create(G,...O){const P=O[0]||{},M=`${this.service}/${G}`,J=this.errors[G],De=J?function ct(ae,G){return ae.replace(rt,(O,P)=>{const M=G[P];return null!=M?String(M):`<${P}?>`})}(J,P):"Error";return new xe(M,`${this.serviceName}: ${De} (${M}).`,P)}}const rt=/\{\$([^}]+)}/g;function yn(ae,G){return Object.prototype.hasOwnProperty.call(ae,G)}function on(ae){for(const G in ae)if(Object.prototype.hasOwnProperty.call(ae,G))return!1;return!0}function In(ae,G){if(ae===G)return!0;const O=Object.keys(ae),P=Object.keys(G);for(const M of O){if(!P.includes(M))return!1;const J=ae[M],De=G[M];if(Dn(J)&&Dn(De)){if(!In(J,De))return!1}else if(J!==De)return!1}for(const M of P)if(!O.includes(M))return!1;return!0}function Dn(ae){return null!==ae&&"object"==typeof ae}function nr(ae){const G=[];for(const[O,P]of Object.entries(ae))Array.isArray(P)?P.forEach(M=>{G.push(encodeURIComponent(O)+"="+encodeURIComponent(M))}):G.push(encodeURIComponent(O)+"="+encodeURIComponent(P));return G.length?"&"+G.join("&"):""}function jt(ae){const G={};return ae.replace(/^\?/,"").split("&").forEach(P=>{if(P){const[M,J]=P.split("=");G[decodeURIComponent(M)]=decodeURIComponent(J)}}),G}function Kt(ae){const G=ae.indexOf("?");if(!G)return"";const O=ae.indexOf("#",G);return ae.substring(G,O>0?O:void 0)}function wn(ae,G){const O=new kn(ae,G);return O.subscribe.bind(O)}class kn{constructor(G,O){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=O,this.task.then(()=>{G(this)}).catch(P=>{this.error(P)})}next(G){this.forEachObserver(O=>{O.next(G)})}error(G){this.forEachObserver(O=>{O.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,O,P){let M;if(void 0===G&&void 0===O&&void 0===P)throw new Error("Missing Observer.");M=function Xt(ae,G){if("object"!=typeof ae||null===ae)return!1;for(const O of G)if(O in ae&&"function"==typeof ae[O])return!0;return!1}(G,["next","error","complete"])?G:{next:G,error:O,complete:P},void 0===M.next&&(M.next=Wn),void 0===M.error&&(M.error=Wn),void 0===M.complete&&(M.complete=Wn);const J=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?M.error(this.finalError):M.complete()}catch{}}),this.observers.push(M),J}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let O=0;O<this.observers.length;O++)this.sendOne(O,G)}sendOne(G,O){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{O(this.observers[G])}catch(P){typeof console<"u"&&console.error&&console.error(P)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Wn(){}function Pn(ae){return ae&&ae._delegate?ae._delegate:ae}},304:(Et,Me,F)=>{F.d(Me,{e:()=>ue});var p=F(5879),Y=F(7213),z=F(7104);let ue=(()=>{class te{constructor(){this.afAuth=(0,p.f3M)(Y.zQ),this.fireStore=(0,p.f3M)(z.ST),this._user=null}get user(){return this._user}initAuthListener(){this.afAuth.authState.subscribe(ge=>{ge?this.userSubscription=this.fireStore.collection("users").doc(ge.uid).valueChanges().subscribe(oe=>{this._user=oe,console.log(this._user)}):(this._user=null,this.userSubscription?.unsubscribe())})}register(ge){const{email:oe,password:Se}=ge;return this.afAuth.createUserWithEmailAndPassword(oe,Se).then(({user:Q})=>{const re={uid:Q?.uid,...ge};return delete re.password,this.fireStore.collection("users").doc(Q?.uid).set(re)})}login(ge,oe){return this.afAuth.signInWithEmailAndPassword(ge,oe)}logout(){return this.afAuth.signOut()}get isAuthenticated(){return null!==this.afAuth.currentUser}static#e=this.\u0275fac=function(oe){return new(oe||te)};static#t=this.\u0275prov=p.Yz7({token:te,factory:te.\u0275fac,providedIn:"root"})}return te})()},5209:(Et,Me,F)=>{var p=F(6593),Y=F(9228),te=F(5879);const le=[{path:"",canActivate:[(Mt,Kn)=>!0],loadChildren:()=>F.e(162).then(F.bind(F,8162)).then(Mt=>Mt.AuthModule)},{path:"admin",canActivate:[()=>!0],loadChildren:()=>Promise.all([F.e(592),F.e(940)]).then(F.bind(F,1940)).then(Mt=>Mt.AdminLayoutModule)},{path:"guest",loadChildren:()=>Promise.all([F.e(592),F.e(792)]).then(F.bind(F,8792)).then(Mt=>Mt.GuestLayoutModule)}];let ge=(()=>{class Mt{static#e=this.\u0275fac=function(Or){return new(Or||Mt)};static#t=this.\u0275mod=te.oAB({type:Mt});static#n=this.\u0275inj=te.cJS({imports:[Y.Bz.forRoot(le,{useHash:!0}),Y.Bz]})}return Mt})();var oe=F(304);let Se=(()=>{class Mt{constructor(){this.title="ultragroup-hotel",this.authService=(0,te.f3M)(oe.e),this.authService.initAuthListener()}static#e=this.\u0275fac=function(Or){return new(Or||Mt)};static#t=this.\u0275cmp=te.Xpm({type:Mt,selectors:[["app-root"]],decls:1,vars:0,template:function(Or,Io){1&Or&&te._UZ(0,"router-outlet")},dependencies:[Y.lC],encapsulation:2})}return Mt})();var Q=F(95),re=F(7217);const me_firebase={apiKey:"AIzaSyAqzIqi1F1feCRyxUGiv4Mn6FFgnRiw8do",authDomain:"hotel-manager-566e1.firebaseapp.com",projectId:"hotel-manager-566e1",storageBucket:"hotel-manager-566e1.appspot.com",messagingSenderId:"81150270702",appId:"1:81150270702:web:763473a03fbb6b3afbe7ff"};var ze=F(7213),Ne=F(7104),Ze=F(3182),Fe=F(1920);class tt{constructor(Kn){return Kn}}class Ge{constructor(){return(0,Ze.C6)()}}const de=new te.OlP("angularfire2._apps"),Pe={provide:tt,useFactory:function Ie(Mt){return Mt&&1===Mt.length?Mt[0]:new tt((0,Ze.Mq)())},deps:[[new te.FiY,de]]},Te={provide:Ge,deps:[[new te.FiY,de]]};function ke(Mt){return(Kn,Dr)=>{const Or=Kn.runOutsideAngular(()=>Mt(Dr));return new tt(Or)}}let qe=(()=>{class Mt{constructor(Dr){(0,Ze.KN)("angularfire",Fe.q4.full,"core"),(0,Ze.KN)("angularfire",Fe.q4.full,"app"),(0,Ze.KN)("angular",te.q4F.full,Dr.toString())}static \u0275fac=function(Or){return new(Or||Mt)(te.LFG(te.Lbi))};static \u0275mod=te.oAB({type:Mt});static \u0275inj=te.cJS({providers:[Pe,Te]})}return Mt})();function he(Mt,...Kn){return{ngModule:qe,providers:[{provide:de,useFactory:ke(Mt),multi:!0,deps:[te.R0b,te.zs3,Fe.HU,...Kn]}]}}const Jt=(0,Fe.u3)(Ze.ZF,!0);F(3560),F(9058),F(534),F(7879),F(4537);class Qe{constructor(){return(0,Fe.vb)("auth")}}var Er=F(5776);class qn{constructor(Kn){return Kn}}const Si="firestore",Mr=new te.OlP("angularfire2.firestore-instances");function Vn(Mt){return(Kn,Dr)=>{const Or=Kn.runOutsideAngular(()=>Mt(Dr));return new qn(Or)}}const as={provide:class Ir{constructor(){return(0,Fe.vb)(Si)}},deps:[[new te.FiY,Mr]]},ao={provide:qn,useFactory:function Ss(Mt,Kn){const Dr=(0,Fe.JM)(Si,Mt,Kn);return Dr&&new qn(Dr)},deps:[[new te.FiY,Mr],tt]};let Hr=(()=>{class Mt{constructor(){(0,Ze.KN)("angularfire",Fe.q4.full,"fst")}static \u0275fac=function(Or){return new(Or||Mt)};static \u0275mod=te.oAB({type:Mt});static \u0275inj=te.cJS({providers:[ao,as]})}return Mt})();function Xr(Mt,...Kn){return{ngModule:Hr,providers:[{provide:Mr,useFactory:Vn(Mt),multi:!0,deps:[te.R0b,te.zs3,Fe.HU,Ge,[new te.FiY,Qe],[new te.FiY,Fe.Rf],...Kn]}]}}const mr=(0,Fe.u3)(Er.ad,!0);let ga=(()=>{class Mt{static#e=this.\u0275fac=function(Or){return new(Or||Mt)};static#t=this.\u0275mod=te.oAB({type:Mt,bootstrap:[Se]});static#n=this.\u0275inj=te.cJS({imports:[p.b2,ge,Q.UX,re.hO.initializeApp(me_firebase),Ne.yb,ze.ww,he(()=>Jt({projectId:"hotel-manager-566e1",appId:"1:81150270702:web:763473a03fbb6b3afbe7ff",databaseURL:"https://hotel-manager-566e1-default-rtdb.firebaseio.com",storageBucket:"hotel-manager-566e1.appspot.com",apiKey:"AIzaSyAqzIqi1F1feCRyxUGiv4Mn6FFgnRiw8do",authDomain:"hotel-manager-566e1.firebaseapp.com",messagingSenderId:"81150270702"})),Xr(()=>mr())]})}return Mt})();p.q6().bootstrapModule(ga).catch(Mt=>console.error(Mt))},5619:(Et,Me,F)=>{F.d(Me,{X:()=>Y});var p=F(8645);class Y extends p.x{constructor(ue){super(),this._value=ue}get value(){return this.getValue()}_subscribe(ue){const te=super._subscribe(ue);return!te.closed&&ue.next(this._value),te}getValue(){const{hasError:ue,thrownError:te,_value:le}=this;if(ue)throw te;return this._throwIfClosed(),le}next(ue){super.next(this._value=ue)}}},5592:(Et,Me,F)=>{F.d(Me,{y:()=>oe});var p=F(305),Y=F(7394),z=F(4850),ue=F(8407),te=F(2653),le=F(4674),ge=F(1441);let oe=(()=>{class me{constructor(Ne){Ne&&(this._subscribe=Ne)}lift(Ne){const Ze=new me;return Ze.source=this,Ze.operator=Ne,Ze}subscribe(Ne,Ze,Fe){const tt=function re(me){return me&&me instanceof p.Lv||function Q(me){return me&&(0,le.m)(me.next)&&(0,le.m)(me.error)&&(0,le.m)(me.complete)}(me)&&(0,Y.Nn)(me)}(Ne)?Ne:new p.Hp(Ne,Ze,Fe);return(0,ge.x)(()=>{const{operator:Ge,source:Rt}=this;tt.add(Ge?Ge.call(tt,Rt):Rt?this._subscribe(tt):this._trySubscribe(tt))}),tt}_trySubscribe(Ne){try{return this._subscribe(Ne)}catch(Ze){Ne.error(Ze)}}forEach(Ne,Ze){return new(Ze=Se(Ze))((Fe,tt)=>{const Ge=new p.Hp({next:Rt=>{try{Ne(Rt)}catch(Ie){tt(Ie),Ge.unsubscribe()}},error:tt,complete:Fe});this.subscribe(Ge)})}_subscribe(Ne){var Ze;return null===(Ze=this.source)||void 0===Ze?void 0:Ze.subscribe(Ne)}[z.L](){return this}pipe(...Ne){return(0,ue.U)(Ne)(this)}toPromise(Ne){return new(Ne=Se(Ne))((Ze,Fe)=>{let tt;this.subscribe(Ge=>tt=Ge,Ge=>Fe(Ge),()=>Ze(tt))})}}return me.create=ze=>new me(ze),me})();function Se(me){var ze;return null!==(ze=me??te.config.Promise)&&void 0!==ze?ze:Promise}},8645:(Et,Me,F)=>{F.d(Me,{x:()=>ge});var p=F(5592),Y=F(7394);const ue=(0,F(2306).d)(Se=>function(){Se(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var te=F(9039),le=F(1441);let ge=(()=>{class Se extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(re){const me=new oe(this,this);return me.operator=re,me}_throwIfClosed(){if(this.closed)throw new ue}next(re){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const me of this.currentObservers)me.next(re)}})}error(re){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=re;const{observers:me}=this;for(;me.length;)me.shift().error(re)}})}complete(){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:re}=this;for(;re.length;)re.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var re;return(null===(re=this.observers)||void 0===re?void 0:re.length)>0}_trySubscribe(re){return this._throwIfClosed(),super._trySubscribe(re)}_subscribe(re){return this._throwIfClosed(),this._checkFinalizedStatuses(re),this._innerSubscribe(re)}_innerSubscribe(re){const{hasError:me,isStopped:ze,observers:Ne}=this;return me||ze?Y.Lc:(this.currentObservers=null,Ne.push(re),new Y.w0(()=>{this.currentObservers=null,(0,te.P)(Ne,re)}))}_checkFinalizedStatuses(re){const{hasError:me,thrownError:ze,isStopped:Ne}=this;me?re.error(ze):Ne&&re.complete()}asObservable(){const re=new p.y;return re.source=this,re}}return Se.create=(Q,re)=>new oe(Q,re),Se})();class oe extends ge{constructor(Q,re){super(),this.destination=Q,this.source=re}next(Q){var re,me;null===(me=null===(re=this.destination)||void 0===re?void 0:re.next)||void 0===me||me.call(re,Q)}error(Q){var re,me;null===(me=null===(re=this.destination)||void 0===re?void 0:re.error)||void 0===me||me.call(re,Q)}complete(){var Q,re;null===(re=null===(Q=this.destination)||void 0===Q?void 0:Q.complete)||void 0===re||re.call(Q)}_subscribe(Q){var re,me;return null!==(me=null===(re=this.source)||void 0===re?void 0:re.subscribe(Q))&&void 0!==me?me:Y.Lc}}},305:(Et,Me,F)=>{F.d(Me,{Hp:()=>Fe,Lv:()=>me});var p=F(4674),Y=F(7394),z=F(2653),ue=F(3894),te=F(2420);const le=Se("C",void 0,void 0);function Se(de,Pe,Te){return{kind:de,value:Pe,error:Te}}var Q=F(7599),re=F(1441);class me extends Y.w0{constructor(Pe){super(),this.isStopped=!1,Pe?(this.destination=Pe,(0,Y.Nn)(Pe)&&Pe.add(this)):this.destination=Ie}static create(Pe,Te,ke){return new Fe(Pe,Te,ke)}next(Pe){this.isStopped?Rt(function oe(de){return Se("N",de,void 0)}(Pe),this):this._next(Pe)}error(Pe){this.isStopped?Rt(function ge(de){return Se("E",void 0,de)}(Pe),this):(this.isStopped=!0,this._error(Pe))}complete(){this.isStopped?Rt(le,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Pe){this.destination.next(Pe)}_error(Pe){try{this.destination.error(Pe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ze=Function.prototype.bind;function Ne(de,Pe){return ze.call(de,Pe)}class Ze{constructor(Pe){this.partialObserver=Pe}next(Pe){const{partialObserver:Te}=this;if(Te.next)try{Te.next(Pe)}catch(ke){tt(ke)}}error(Pe){const{partialObserver:Te}=this;if(Te.error)try{Te.error(Pe)}catch(ke){tt(ke)}else tt(Pe)}complete(){const{partialObserver:Pe}=this;if(Pe.complete)try{Pe.complete()}catch(Te){tt(Te)}}}class Fe extends me{constructor(Pe,Te,ke){let qe;if(super(),(0,p.m)(Pe)||!Pe)qe={next:Pe??void 0,error:Te??void 0,complete:ke??void 0};else{let he;this&&z.config.useDeprecatedNextContext?(he=Object.create(Pe),he.unsubscribe=()=>this.unsubscribe(),qe={next:Pe.next&&Ne(Pe.next,he),error:Pe.error&&Ne(Pe.error,he),complete:Pe.complete&&Ne(Pe.complete,he)}):qe=Pe}this.destination=new Ze(qe)}}function tt(de){z.config.useDeprecatedSynchronousErrorHandling?(0,re.O)(de):(0,ue.h)(de)}function Rt(de,Pe){const{onStoppedNotification:Te}=z.config;Te&&Q.z.setTimeout(()=>Te(de,Pe))}const Ie={closed:!0,next:te.Z,error:function Ge(de){throw de},complete:te.Z}},7394:(Et,Me,F)=>{F.d(Me,{Lc:()=>le,w0:()=>te,Nn:()=>ge});var p=F(4674);const z=(0,F(2306).d)(Se=>function(re){Se(this),this.message=re?`${re.length} errors occurred during unsubscription:\n${re.map((me,ze)=>`${ze+1}) ${me.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=re});var ue=F(9039);class te{constructor(Q){this.initialTeardown=Q,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Q;if(!this.closed){this.closed=!0;const{_parentage:re}=this;if(re)if(this._parentage=null,Array.isArray(re))for(const Ne of re)Ne.remove(this);else re.remove(this);const{initialTeardown:me}=this;if((0,p.m)(me))try{me()}catch(Ne){Q=Ne instanceof z?Ne.errors:[Ne]}const{_finalizers:ze}=this;if(ze){this._finalizers=null;for(const Ne of ze)try{oe(Ne)}catch(Ze){Q=Q??[],Ze instanceof z?Q=[...Q,...Ze.errors]:Q.push(Ze)}}if(Q)throw new z(Q)}}add(Q){var re;if(Q&&Q!==this)if(this.closed)oe(Q);else{if(Q instanceof te){if(Q.closed||Q._hasParent(this))return;Q._addParent(this)}(this._finalizers=null!==(re=this._finalizers)&&void 0!==re?re:[]).push(Q)}}_hasParent(Q){const{_parentage:re}=this;return re===Q||Array.isArray(re)&&re.includes(Q)}_addParent(Q){const{_parentage:re}=this;this._parentage=Array.isArray(re)?(re.push(Q),re):re?[re,Q]:Q}_removeParent(Q){const{_parentage:re}=this;re===Q?this._parentage=null:Array.isArray(re)&&(0,ue.P)(re,Q)}remove(Q){const{_finalizers:re}=this;re&&(0,ue.P)(re,Q),Q instanceof te&&Q._removeParent(this)}}te.EMPTY=(()=>{const Se=new te;return Se.closed=!0,Se})();const le=te.EMPTY;function ge(Se){return Se instanceof te||Se&&"closed"in Se&&(0,p.m)(Se.remove)&&(0,p.m)(Se.add)&&(0,p.m)(Se.unsubscribe)}function oe(Se){(0,p.m)(Se)?Se():Se.unsubscribe()}},2653:(Et,Me,F)=>{F.d(Me,{config:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},2572:(Et,Me,F)=>{F.d(Me,{a:()=>Q});var p=F(5592),Y=F(7453),z=F(2459),ue=F(2737),te=F(7400),le=F(9940),ge=F(2714),oe=F(8251),Se=F(7103);function Q(...ze){const Ne=(0,le.yG)(ze),Ze=(0,le.jO)(ze),{args:Fe,keys:tt}=(0,Y.D)(ze);if(0===Fe.length)return(0,z.D)([],Ne);const Ge=new p.y(function re(ze,Ne,Ze=ue.y){return Fe=>{me(Ne,()=>{const{length:tt}=ze,Ge=new Array(tt);let Rt=tt,Ie=tt;for(let de=0;de<tt;de++)me(Ne,()=>{const Pe=(0,z.D)(ze[de],Ne);let Te=!1;Pe.subscribe((0,oe.x)(Fe,ke=>{Ge[de]=ke,Te||(Te=!0,Ie--),Ie||Fe.next(Ze(Ge.slice()))},()=>{--Rt||Fe.complete()}))},Fe)},Fe)}}(Fe,Ne,tt?Rt=>(0,ge.n)(tt,Rt):ue.y));return Ze?Ge.pipe((0,te.Z)(Ze)):Ge}function me(ze,Ne,Ze){ze?(0,Se.f)(Ze,ze,Ne):Ne()}},5211:(Et,Me,F)=>{F.d(Me,{z:()=>te});var p=F(7537),z=F(9940),ue=F(2459);function te(...le){return function Y(){return(0,p.J)(1)}()((0,ue.D)(le,(0,z.yG)(le)))}},4911:(Et,Me,F)=>{F.d(Me,{P:()=>z});var p=F(5592),Y=F(4829);function z(ue){return new p.y(te=>{(0,Y.Xf)(ue()).subscribe(te)})}},6232:(Et,Me,F)=>{F.d(Me,{E:()=>Y});const Y=new(F(5592).y)(te=>te.complete())},2459:(Et,Me,F)=>{F.d(Me,{D:()=>Pe});var p=F(4829),Y=F(3093),z=F(5137),le=F(5592),oe=F(4971),Se=F(4674),Q=F(7103);function me(Te,ke){if(!Te)throw new Error("Iterable cannot be null");return new le.y(qe=>{(0,Q.f)(qe,ke,()=>{const he=Te[Symbol.asyncIterator]();(0,Q.f)(qe,ke,()=>{he.next().then(ft=>{ft.done?qe.complete():qe.next(ft.value)})},0,!0)})})}var ze=F(8382),Ne=F(4026),Ze=F(4266),Fe=F(3664),tt=F(5726),Ge=F(9853),Rt=F(541);function Pe(Te,ke){return ke?function de(Te,ke){if(null!=Te){if((0,ze.c)(Te))return function ue(Te,ke){return(0,p.Xf)(Te).pipe((0,z.R)(ke),(0,Y.Q)(ke))}(Te,ke);if((0,Ze.z)(Te))return function ge(Te,ke){return new le.y(qe=>{let he=0;return ke.schedule(function(){he===Te.length?qe.complete():(qe.next(Te[he++]),qe.closed||this.schedule())})})}(Te,ke);if((0,Ne.t)(Te))return function te(Te,ke){return(0,p.Xf)(Te).pipe((0,z.R)(ke),(0,Y.Q)(ke))}(Te,ke);if((0,tt.D)(Te))return me(Te,ke);if((0,Fe.T)(Te))return function re(Te,ke){return new le.y(qe=>{let he;return(0,Q.f)(qe,ke,()=>{he=Te[oe.h](),(0,Q.f)(qe,ke,()=>{let ft,Tt;try{({value:ft,done:Tt}=he.next())}catch(Gt){return void qe.error(Gt)}Tt?qe.complete():qe.next(ft)},0,!0)}),()=>(0,Se.m)(he?.return)&&he.return()})}(Te,ke);if((0,Rt.L)(Te))return function Ie(Te,ke){return me((0,Rt.Q)(Te),ke)}(Te,ke)}throw(0,Ge.z)(Te)}(Te,ke):(0,p.Xf)(Te)}},4829:(Et,Me,F)=>{F.d(Me,{Xf:()=>ze});var p=F(7582),Y=F(4266),z=F(4026),ue=F(5592),te=F(8382),le=F(5726),ge=F(9853),oe=F(3664),Se=F(541),Q=F(4674),re=F(3894),me=F(4850);function ze(de){if(de instanceof ue.y)return de;if(null!=de){if((0,te.c)(de))return function Ne(de){return new ue.y(Pe=>{const Te=de[me.L]();if((0,Q.m)(Te.subscribe))return Te.subscribe(Pe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(de);if((0,Y.z)(de))return function Ze(de){return new ue.y(Pe=>{for(let Te=0;Te<de.length&&!Pe.closed;Te++)Pe.next(de[Te]);Pe.complete()})}(de);if((0,z.t)(de))return function Fe(de){return new ue.y(Pe=>{de.then(Te=>{Pe.closed||(Pe.next(Te),Pe.complete())},Te=>Pe.error(Te)).then(null,re.h)})}(de);if((0,le.D)(de))return Ge(de);if((0,oe.T)(de))return function tt(de){return new ue.y(Pe=>{for(const Te of de)if(Pe.next(Te),Pe.closed)return;Pe.complete()})}(de);if((0,Se.L)(de))return function Rt(de){return Ge((0,Se.Q)(de))}(de)}throw(0,ge.z)(de)}function Ge(de){return new ue.y(Pe=>{(function Ie(de,Pe){var Te,ke,qe,he;return(0,p.mG)(this,void 0,void 0,function*(){try{for(Te=(0,p.KL)(de);!(ke=yield Te.next()).done;)if(Pe.next(ke.value),Pe.closed)return}catch(ft){qe={error:ft}}finally{try{ke&&!ke.done&&(he=Te.return)&&(yield he.call(Te))}finally{if(qe)throw qe.error}}Pe.complete()})})(de,Pe).catch(Te=>Pe.error(Te))})}},3019:(Et,Me,F)=>{F.d(Me,{T:()=>le});var p=F(7537),Y=F(4829),z=F(6232),ue=F(9940),te=F(2459);function le(...ge){const oe=(0,ue.yG)(ge),Se=(0,ue._6)(ge,1/0),Q=ge;return Q.length?1===Q.length?(0,Y.Xf)(Q[0]):(0,p.J)(Se)((0,te.D)(Q,oe)):z.E}},2096:(Et,Me,F)=>{F.d(Me,{of:()=>z});var p=F(9940),Y=F(2459);function z(...ue){const te=(0,p.yG)(ue);return(0,Y.D)(ue,te)}},8251:(Et,Me,F)=>{F.d(Me,{x:()=>Y});var p=F(305);function Y(ue,te,le,ge,oe){return new z(ue,te,le,ge,oe)}class z extends p.Lv{constructor(te,le,ge,oe,Se,Q){super(te),this.onFinalize=Se,this.shouldUnsubscribe=Q,this._next=le?function(re){try{le(re)}catch(me){te.error(me)}}:super._next,this._error=oe?function(re){try{oe(re)}catch(me){te.error(me)}finally{this.unsubscribe()}}:super._error,this._complete=ge?function(){try{ge()}catch(re){te.error(re)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var te;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:le}=this;super.unsubscribe(),!le&&(null===(te=this.onFinalize)||void 0===te||te.call(this))}}}},3572:(Et,Me,F)=>{F.d(Me,{d:()=>z});var p=F(9360),Y=F(8251);function z(ue){return(0,p.e)((te,le)=>{let ge=!1;te.subscribe((0,Y.x)(le,oe=>{ge=!0,le.next(oe)},()=>{ge||le.next(ue),le.complete()}))})}},3997:(Et,Me,F)=>{F.d(Me,{x:()=>ue});var p=F(2737),Y=F(9360),z=F(8251);function ue(le,ge=p.y){return le=le??te,(0,Y.e)((oe,Se)=>{let Q,re=!0;oe.subscribe((0,z.x)(Se,me=>{const ze=ge(me);(re||!le(Q,ze))&&(re=!1,Q=ze,Se.next(me))}))})}function te(le,ge){return le===ge}},2181:(Et,Me,F)=>{F.d(Me,{h:()=>z});var p=F(9360),Y=F(8251);function z(ue,te){return(0,p.e)((le,ge)=>{let oe=0;le.subscribe((0,Y.x)(ge,Se=>ue.call(te,Se,oe++)&&ge.next(Se)))})}},1374:(Et,Me,F)=>{F.d(Me,{P:()=>ge});var p=F(6973),Y=F(2181),z=F(8180),ue=F(3572),te=F(3026),le=F(2737);function ge(oe,Se){const Q=arguments.length>=2;return re=>re.pipe(oe?(0,Y.h)((me,ze)=>oe(me,ze,re)):le.y,(0,z.q)(1),Q?(0,ue.d)(Se):(0,te.T)(()=>new p.K))}},7398:(Et,Me,F)=>{F.d(Me,{U:()=>z});var p=F(9360),Y=F(8251);function z(ue,te){return(0,p.e)((le,ge)=>{let oe=0;le.subscribe((0,Y.x)(ge,Se=>{ge.next(ue.call(te,Se,oe++))}))})}},7537:(Et,Me,F)=>{F.d(Me,{J:()=>z});var p=F(1631),Y=F(2737);function z(ue=1/0){return(0,p.z)(Y.y,ue)}},1631:(Et,Me,F)=>{F.d(Me,{z:()=>oe});var p=F(7398),Y=F(4829),z=F(9360),ue=F(7103),te=F(8251),ge=F(4674);function oe(Se,Q,re=1/0){return(0,ge.m)(Q)?oe((me,ze)=>(0,p.U)((Ne,Ze)=>Q(me,Ne,ze,Ze))((0,Y.Xf)(Se(me,ze))),re):("number"==typeof Q&&(re=Q),(0,z.e)((me,ze)=>function le(Se,Q,re,me,ze,Ne,Ze,Fe){const tt=[];let Ge=0,Rt=0,Ie=!1;const de=()=>{Ie&&!tt.length&&!Ge&&Q.complete()},Pe=ke=>Ge<me?Te(ke):tt.push(ke),Te=ke=>{Ne&&Q.next(ke),Ge++;let qe=!1;(0,Y.Xf)(re(ke,Rt++)).subscribe((0,te.x)(Q,he=>{ze?.(he),Ne?Pe(he):Q.next(he)},()=>{qe=!0},void 0,()=>{if(qe)try{for(Ge--;tt.length&&Ge<me;){const he=tt.shift();Ze?(0,ue.f)(Q,Ze,()=>Te(he)):Te(he)}de()}catch(he){Q.error(he)}}))};return Se.subscribe((0,te.x)(Q,Pe,()=>{Ie=!0,de()})),()=>{Fe?.()}}(me,ze,Se,re)))}},3093:(Et,Me,F)=>{F.d(Me,{Q:()=>ue});var p=F(7103),Y=F(9360),z=F(8251);function ue(te,le=0){return(0,Y.e)((ge,oe)=>{ge.subscribe((0,z.x)(oe,Se=>(0,p.f)(oe,te,()=>oe.next(Se),le),()=>(0,p.f)(oe,te,()=>oe.complete(),le),Se=>(0,p.f)(oe,te,()=>oe.error(Se),le)))})}},6699:(Et,Me,F)=>{F.d(Me,{R:()=>ue});var p=F(9360),Y=F(8251);function ue(te,le){return(0,p.e)(function z(te,le,ge,oe,Se){return(Q,re)=>{let me=ge,ze=le,Ne=0;Q.subscribe((0,Y.x)(re,Ze=>{const Fe=Ne++;ze=me?te(ze,Ze,Fe):(me=!0,Ze),oe&&re.next(ze)},Se&&(()=>{me&&re.next(ze),re.complete()})))}}(te,le,arguments.length>=2,!0))}},3020:(Et,Me,F)=>{F.d(Me,{B:()=>te});var p=F(4829),Y=F(8645),z=F(305),ue=F(9360);function te(ge={}){const{connector:oe=(()=>new Y.x),resetOnError:Se=!0,resetOnComplete:Q=!0,resetOnRefCountZero:re=!0}=ge;return me=>{let ze,Ne,Ze,Fe=0,tt=!1,Ge=!1;const Rt=()=>{Ne?.unsubscribe(),Ne=void 0},Ie=()=>{Rt(),ze=Ze=void 0,tt=Ge=!1},de=()=>{const Pe=ze;Ie(),Pe?.unsubscribe()};return(0,ue.e)((Pe,Te)=>{Fe++,!Ge&&!tt&&Rt();const ke=Ze=Ze??oe();Te.add(()=>{Fe--,0===Fe&&!Ge&&!tt&&(Ne=le(de,re))}),ke.subscribe(Te),!ze&&Fe>0&&(ze=new z.Hp({next:qe=>ke.next(qe),error:qe=>{Ge=!0,Rt(),Ne=le(Ie,Se,qe),ke.error(qe)},complete:()=>{tt=!0,Rt(),Ne=le(Ie,Q),ke.complete()}}),(0,p.Xf)(Pe).subscribe(ze))})(me)}}function le(ge,oe,...Se){if(!0===oe)return void ge();if(!1===oe)return;const Q=new z.Hp({next:()=>{Q.unsubscribe(),ge()}});return(0,p.Xf)(oe(...Se)).subscribe(Q)}},7921:(Et,Me,F)=>{F.d(Me,{O:()=>ue});var p=F(5211),Y=F(9940),z=F(9360);function ue(...te){const le=(0,Y.yG)(te);return(0,z.e)((ge,oe)=>{(le?(0,p.z)(te,ge,le):(0,p.z)(te,ge)).subscribe(oe)})}},5137:(Et,Me,F)=>{F.d(Me,{R:()=>Y});var p=F(9360);function Y(z,ue=0){return(0,p.e)((te,le)=>{le.add(z.schedule(()=>te.subscribe(le),ue))})}},4664:(Et,Me,F)=>{F.d(Me,{w:()=>ue});var p=F(4829),Y=F(9360),z=F(8251);function ue(te,le){return(0,Y.e)((ge,oe)=>{let Se=null,Q=0,re=!1;const me=()=>re&&!Se&&oe.complete();ge.subscribe((0,z.x)(oe,ze=>{Se?.unsubscribe();let Ne=0;const Ze=Q++;(0,p.Xf)(te(ze,Ze)).subscribe(Se=(0,z.x)(oe,Fe=>oe.next(le?le(ze,Fe,Ze,Ne++):Fe),()=>{Se=null,me()}))},()=>{re=!0,me()}))})}},8180:(Et,Me,F)=>{F.d(Me,{q:()=>ue});var p=F(6232),Y=F(9360),z=F(8251);function ue(te){return te<=0?()=>p.E:(0,Y.e)((le,ge)=>{let oe=0;le.subscribe((0,z.x)(ge,Se=>{++oe<=te&&(ge.next(Se),te<=oe&&ge.complete())}))})}},9773:(Et,Me,F)=>{F.d(Me,{R:()=>te});var p=F(9360),Y=F(8251),z=F(4829),ue=F(2420);function te(le){return(0,p.e)((ge,oe)=>{(0,z.Xf)(le).subscribe((0,Y.x)(oe,()=>oe.complete(),ue.Z)),!oe.closed&&ge.subscribe(oe)})}},9397:(Et,Me,F)=>{F.d(Me,{b:()=>te});var p=F(4674),Y=F(9360),z=F(8251),ue=F(2737);function te(le,ge,oe){const Se=(0,p.m)(le)||ge||oe?{next:le,error:ge,complete:oe}:le;return Se?(0,Y.e)((Q,re)=>{var me;null===(me=Se.subscribe)||void 0===me||me.call(Se);let ze=!0;Q.subscribe((0,z.x)(re,Ne=>{var Ze;null===(Ze=Se.next)||void 0===Ze||Ze.call(Se,Ne),re.next(Ne)},()=>{var Ne;ze=!1,null===(Ne=Se.complete)||void 0===Ne||Ne.call(Se),re.complete()},Ne=>{var Ze;ze=!1,null===(Ze=Se.error)||void 0===Ze||Ze.call(Se,Ne),re.error(Ne)},()=>{var Ne,Ze;ze&&(null===(Ne=Se.unsubscribe)||void 0===Ne||Ne.call(Se)),null===(Ze=Se.finalize)||void 0===Ze||Ze.call(Se)}))}):ue.y}},3026:(Et,Me,F)=>{F.d(Me,{T:()=>ue});var p=F(6973),Y=F(9360),z=F(8251);function ue(le=te){return(0,Y.e)((ge,oe)=>{let Se=!1;ge.subscribe((0,z.x)(oe,Q=>{Se=!0,oe.next(Q)},()=>Se?oe.complete():oe.error(le())))})}function te(){return new p.K}},1954:(Et,Me,F)=>{F.d(Me,{o:()=>te});var p=F(7394);class Y extends p.w0{constructor(ge,oe){super()}schedule(ge,oe=0){return this}}const z={setInterval(le,ge,...oe){const{delegate:Se}=z;return Se?.setInterval?Se.setInterval(le,ge,...oe):setInterval(le,ge,...oe)},clearInterval(le){const{delegate:ge}=z;return(ge?.clearInterval||clearInterval)(le)},delegate:void 0};var ue=F(9039);class te extends Y{constructor(ge,oe){super(ge,oe),this.scheduler=ge,this.work=oe,this.pending=!1}schedule(ge,oe=0){var Se;if(this.closed)return this;this.state=ge;const Q=this.id,re=this.scheduler;return null!=Q&&(this.id=this.recycleAsyncId(re,Q,oe)),this.pending=!0,this.delay=oe,this.id=null!==(Se=this.id)&&void 0!==Se?Se:this.requestAsyncId(re,this.id,oe),this}requestAsyncId(ge,oe,Se=0){return z.setInterval(ge.flush.bind(ge,this),Se)}recycleAsyncId(ge,oe,Se=0){if(null!=Se&&this.delay===Se&&!1===this.pending)return oe;null!=oe&&z.clearInterval(oe)}execute(ge,oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Se=this._execute(ge,oe);if(Se)return Se;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ge,oe){let Q,Se=!1;try{this.work(ge)}catch(re){Se=!0,Q=re||new Error("Scheduled action threw falsy error")}if(Se)return this.unsubscribe(),Q}unsubscribe(){if(!this.closed){const{id:ge,scheduler:oe}=this,{actions:Se}=oe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ue.P)(Se,this),null!=ge&&(this.id=this.recycleAsyncId(oe,ge,null)),this.delay=null,super.unsubscribe()}}}},2631:(Et,Me,F)=>{F.d(Me,{v:()=>z});var p=F(4552);class Y{constructor(te,le=Y.now){this.schedulerActionCtor=te,this.now=le}schedule(te,le=0,ge){return new this.schedulerActionCtor(this,te).schedule(ge,le)}}Y.now=p.l.now;class z extends Y{constructor(te,le=Y.now){super(te,le),this.actions=[],this._active=!1}flush(te){const{actions:le}=this;if(this._active)return void le.push(te);let ge;this._active=!0;do{if(ge=te.execute(te.state,te.delay))break}while(te=le.shift());if(this._active=!1,ge){for(;te=le.shift();)te.unsubscribe();throw ge}}}},6321:(Et,Me,F)=>{F.d(Me,{P:()=>ue,z:()=>z});var p=F(1954);const z=new(F(2631).v)(p.o),ue=z},4552:(Et,Me,F)=>{F.d(Me,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},7599:(Et,Me,F)=>{F.d(Me,{z:()=>p});const p={setTimeout(Y,z,...ue){const{delegate:te}=p;return te?.setTimeout?te.setTimeout(Y,z,...ue):setTimeout(Y,z,...ue)},clearTimeout(Y){const{delegate:z}=p;return(z?.clearTimeout||clearTimeout)(Y)},delegate:void 0}},4971:(Et,Me,F)=>{F.d(Me,{h:()=>Y});const Y=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(Et,Me,F)=>{F.d(Me,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(Et,Me,F)=>{F.d(Me,{K:()=>Y});const Y=(0,F(2306).d)(z=>function(){z(this),this.name="EmptyError",this.message="no elements in sequence"})},9940:(Et,Me,F)=>{F.d(Me,{_6:()=>le,jO:()=>ue,yG:()=>te});var p=F(4674),Y=F(671);function z(ge){return ge[ge.length-1]}function ue(ge){return(0,p.m)(z(ge))?ge.pop():void 0}function te(ge){return(0,Y.K)(z(ge))?ge.pop():void 0}function le(ge,oe){return"number"==typeof z(ge)?ge.pop():oe}},7453:(Et,Me,F)=>{F.d(Me,{D:()=>te});const{isArray:p}=Array,{getPrototypeOf:Y,prototype:z,keys:ue}=Object;function te(ge){if(1===ge.length){const oe=ge[0];if(p(oe))return{args:oe,keys:null};if(function le(ge){return ge&&"object"==typeof ge&&Y(ge)===z}(oe)){const Se=ue(oe);return{args:Se.map(Q=>oe[Q]),keys:Se}}}return{args:ge,keys:null}}},9039:(Et,Me,F)=>{function p(Y,z){if(Y){const ue=Y.indexOf(z);0<=ue&&Y.splice(ue,1)}}F.d(Me,{P:()=>p})},2306:(Et,Me,F)=>{function p(Y){const ue=Y(te=>{Error.call(te),te.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}F.d(Me,{d:()=>p})},2714:(Et,Me,F)=>{function p(Y,z){return Y.reduce((ue,te,le)=>(ue[te]=z[le],ue),{})}F.d(Me,{n:()=>p})},1441:(Et,Me,F)=>{F.d(Me,{O:()=>ue,x:()=>z});var p=F(2653);let Y=null;function z(te){if(p.config.useDeprecatedSynchronousErrorHandling){const le=!Y;if(le&&(Y={errorThrown:!1,error:null}),te(),le){const{errorThrown:ge,error:oe}=Y;if(Y=null,ge)throw oe}}else te()}function ue(te){p.config.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=te)}},7103:(Et,Me,F)=>{function p(Y,z,ue,te=0,le=!1){const ge=z.schedule(function(){ue(),le?Y.add(this.schedule(null,te)):this.unsubscribe()},te);if(Y.add(ge),!le)return ge}F.d(Me,{f:()=>p})},2737:(Et,Me,F)=>{function p(Y){return Y}F.d(Me,{y:()=>p})},4266:(Et,Me,F)=>{F.d(Me,{z:()=>p});const p=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},5726:(Et,Me,F)=>{F.d(Me,{D:()=>Y});var p=F(4674);function Y(z){return Symbol.asyncIterator&&(0,p.m)(z?.[Symbol.asyncIterator])}},4674:(Et,Me,F)=>{function p(Y){return"function"==typeof Y}F.d(Me,{m:()=>p})},8382:(Et,Me,F)=>{F.d(Me,{c:()=>z});var p=F(4850),Y=F(4674);function z(ue){return(0,Y.m)(ue[p.L])}},3664:(Et,Me,F)=>{F.d(Me,{T:()=>z});var p=F(4971),Y=F(4674);function z(ue){return(0,Y.m)(ue?.[p.h])}},4026:(Et,Me,F)=>{F.d(Me,{t:()=>Y});var p=F(4674);function Y(z){return(0,p.m)(z?.then)}},541:(Et,Me,F)=>{F.d(Me,{L:()=>ue,Q:()=>z});var p=F(7582),Y=F(4674);function z(te){return(0,p.FC)(this,arguments,function*(){const ge=te.getReader();try{for(;;){const{value:oe,done:Se}=yield(0,p.qq)(ge.read());if(Se)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(oe)}}finally{ge.releaseLock()}})}function ue(te){return(0,Y.m)(te?.getReader)}},671:(Et,Me,F)=>{F.d(Me,{K:()=>Y});var p=F(4674);function Y(z){return z&&(0,p.m)(z.schedule)}},9360:(Et,Me,F)=>{F.d(Me,{A:()=>Y,e:()=>z});var p=F(4674);function Y(ue){return(0,p.m)(ue?.lift)}function z(ue){return te=>{if(Y(te))return te.lift(function(le){try{return ue(le,this)}catch(ge){this.error(ge)}});throw new TypeError("Unable to lift unknown Observable type")}}},7400:(Et,Me,F)=>{F.d(Me,{Z:()=>ue});var p=F(7398);const{isArray:Y}=Array;function ue(te){return(0,p.U)(le=>function z(te,le){return Y(le)?te(...le):te(le)}(te,le))}},2420:(Et,Me,F)=>{function p(){}F.d(Me,{Z:()=>p})},8407:(Et,Me,F)=>{F.d(Me,{U:()=>z,z:()=>Y});var p=F(2737);function Y(...ue){return z(ue)}function z(ue){return 0===ue.length?p.y:1===ue.length?ue[0]:function(le){return ue.reduce((ge,oe)=>oe(ge),le)}}},3894:(Et,Me,F)=>{F.d(Me,{h:()=>z});var p=F(2653),Y=F(7599);function z(ue){Y.z.setTimeout(()=>{const{onUnhandledError:te}=p.config;if(!te)throw ue;te(ue)})}},9853:(Et,Me,F)=>{function p(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Me,{z:()=>p})},6814:(Et,Me,F)=>{F.d(Me,{Do:()=>Fe,EM:()=>ys,HT:()=>ue,JF:()=>Yi,K0:()=>le,Mx:()=>Ir,NF:()=>ni,O5:()=>ei,PM:()=>Ns,S$:()=>ze,V_:()=>oe,Ye:()=>tt,b0:()=>Ze,bD:()=>Ln,ez:()=>pi,q:()=>z,sg:()=>Hr,w_:()=>te});var p=F(5879);let Y=null;function z(){return Y}function ue(D){Y||(Y=D)}class te{}const le=new p.OlP("DocumentToken");let ge=(()=>{class D{historyGo(R){throw new Error("Not implemented")}static#e=this.\u0275fac=function(B){return new(B||D)};static#t=this.\u0275prov=p.Yz7({token:D,factory:function(){return(0,p.f3M)(Se)},providedIn:"platform"})}return D})();const oe=new p.OlP("Location Initialized");let Se=(()=>{class D extends ge{constructor(){super(),this._doc=(0,p.f3M)(le),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return z().getBaseHref(this._doc)}onPopState(R){const B=z().getGlobalEventTarget(this._doc,"window");return B.addEventListener("popstate",R,!1),()=>B.removeEventListener("popstate",R)}onHashChange(R){const B=z().getGlobalEventTarget(this._doc,"window");return B.addEventListener("hashchange",R,!1),()=>B.removeEventListener("hashchange",R)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(R){this._location.pathname=R}pushState(R,B,ie){this._history.pushState(R,B,ie)}replaceState(R,B,ie){this._history.replaceState(R,B,ie)}forward(){this._history.forward()}back(){this._history.back()}historyGo(R=0){this._history.go(R)}getState(){return this._history.state}static#e=this.\u0275fac=function(B){return new(B||D)};static#t=this.\u0275prov=p.Yz7({token:D,factory:function(){return new D},providedIn:"platform"})}return D})();function Q(D,j){if(0==D.length)return j;if(0==j.length)return D;let R=0;return D.endsWith("/")&&R++,j.startsWith("/")&&R++,2==R?D+j.substring(1):1==R?D+j:D+"/"+j}function re(D){const j=D.match(/#|\?|$/),R=j&&j.index||D.length;return D.slice(0,R-("/"===D[R-1]?1:0))+D.slice(R)}function me(D){return D&&"?"!==D[0]?"?"+D:D}let ze=(()=>{class D{historyGo(R){throw new Error("Not implemented")}static#e=this.\u0275fac=function(B){return new(B||D)};static#t=this.\u0275prov=p.Yz7({token:D,factory:function(){return(0,p.f3M)(Ze)},providedIn:"root"})}return D})();const Ne=new p.OlP("appBaseHref");let Ze=(()=>{class D extends ze{constructor(R,B){super(),this._platformLocation=R,this._removeListenerFns=[],this._baseHref=B??this._platformLocation.getBaseHrefFromDOM()??(0,p.f3M)(le).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(R){this._removeListenerFns.push(this._platformLocation.onPopState(R),this._platformLocation.onHashChange(R))}getBaseHref(){return this._baseHref}prepareExternalUrl(R){return Q(this._baseHref,R)}path(R=!1){const B=this._platformLocation.pathname+me(this._platformLocation.search),ie=this._platformLocation.hash;return ie&&R?`${B}${ie}`:B}pushState(R,B,ie,Ve){const Ke=this.prepareExternalUrl(ie+me(Ve));this._platformLocation.pushState(R,B,Ke)}replaceState(R,B,ie,Ve){const Ke=this.prepareExternalUrl(ie+me(Ve));this._platformLocation.replaceState(R,B,Ke)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(R=0){this._platformLocation.historyGo?.(R)}static#e=this.\u0275fac=function(B){return new(B||D)(p.LFG(ge),p.LFG(Ne,8))};static#t=this.\u0275prov=p.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"})}return D})(),Fe=(()=>{class D extends ze{constructor(R,B){super(),this._platformLocation=R,this._baseHref="",this._removeListenerFns=[],null!=B&&(this._baseHref=B)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(R){this._removeListenerFns.push(this._platformLocation.onPopState(R),this._platformLocation.onHashChange(R))}getBaseHref(){return this._baseHref}path(R=!1){let B=this._platformLocation.hash;return null==B&&(B="#"),B.length>0?B.substring(1):B}prepareExternalUrl(R){const B=Q(this._baseHref,R);return B.length>0?"#"+B:B}pushState(R,B,ie,Ve){let Ke=this.prepareExternalUrl(ie+me(Ve));0==Ke.length&&(Ke=this._platformLocation.pathname),this._platformLocation.pushState(R,B,Ke)}replaceState(R,B,ie,Ve){let Ke=this.prepareExternalUrl(ie+me(Ve));0==Ke.length&&(Ke=this._platformLocation.pathname),this._platformLocation.replaceState(R,B,Ke)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(R=0){this._platformLocation.historyGo?.(R)}static#e=this.\u0275fac=function(B){return new(B||D)(p.LFG(ge),p.LFG(Ne,8))};static#t=this.\u0275prov=p.Yz7({token:D,factory:D.\u0275fac})}return D})(),tt=(()=>{class D{constructor(R){this._subject=new p.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=R;const B=this._locationStrategy.getBaseHref();this._basePath=function de(D){if(new RegExp("^(https?:)?//").test(D)){const[,R]=D.split(/\/\/[^\/]+/);return R}return D}(re(Ie(B))),this._locationStrategy.onPopState(ie=>{this._subject.emit({url:this.path(!0),pop:!0,state:ie.state,type:ie.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(R=!1){return this.normalize(this._locationStrategy.path(R))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(R,B=""){return this.path()==this.normalize(R+me(B))}normalize(R){return D.stripTrailingSlash(function Rt(D,j){if(!D||!j.startsWith(D))return j;const R=j.substring(D.length);return""===R||["/",";","?","#"].includes(R[0])?R:j}(this._basePath,Ie(R)))}prepareExternalUrl(R){return R&&"/"!==R[0]&&(R="/"+R),this._locationStrategy.prepareExternalUrl(R)}go(R,B="",ie=null){this._locationStrategy.pushState(ie,"",R,B),this._notifyUrlChangeListeners(this.prepareExternalUrl(R+me(B)),ie)}replaceState(R,B="",ie=null){this._locationStrategy.replaceState(ie,"",R,B),this._notifyUrlChangeListeners(this.prepareExternalUrl(R+me(B)),ie)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(R=0){this._locationStrategy.historyGo?.(R)}onUrlChange(R){return this._urlChangeListeners.push(R),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(B=>{this._notifyUrlChangeListeners(B.url,B.state)})),()=>{const B=this._urlChangeListeners.indexOf(R);this._urlChangeListeners.splice(B,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(R="",B){this._urlChangeListeners.forEach(ie=>ie(R,B))}subscribe(R,B,ie){return this._subject.subscribe({next:R,error:B,complete:ie})}static#e=this.normalizeQueryParams=me;static#t=this.joinWithSlash=Q;static#n=this.stripTrailingSlash=re;static#r=this.\u0275fac=function(B){return new(B||D)(p.LFG(ze))};static#i=this.\u0275prov=p.Yz7({token:D,factory:function(){return function Ge(){return new tt((0,p.LFG)(ze))}()},providedIn:"root"})}return D})();function Ie(D){return D.replace(/\/index.html$/,"")}function Ir(D,j){j=encodeURIComponent(j);for(const R of D.split(";")){const B=R.indexOf("="),[ie,Ve]=-1==B?[R,""]:[R.slice(0,B),R.slice(B+1)];if(ie.trim()===j)return decodeURIComponent(Ve)}return null}class ao{constructor(j,R,B,ie){this.$implicit=j,this.ngForOf=R,this.index=B,this.count=ie}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Hr=(()=>{class D{set ngForOf(R){this._ngForOf=R,this._ngForOfDirty=!0}set ngForTrackBy(R){this._trackByFn=R}get ngForTrackBy(){return this._trackByFn}constructor(R,B,ie){this._viewContainer=R,this._template=B,this._differs=ie,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(R){R&&(this._template=R)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const R=this._ngForOf;!this._differ&&R&&(this._differ=this._differs.find(R).create(this.ngForTrackBy))}if(this._differ){const R=this._differ.diff(this._ngForOf);R&&this._applyChanges(R)}}_applyChanges(R){const B=this._viewContainer;R.forEachOperation((ie,Ve,Ke)=>{if(null==ie.previousIndex)B.createEmbeddedView(this._template,new ao(ie.item,this._ngForOf,-1,-1),null===Ke?void 0:Ke);else if(null==Ke)B.remove(null===Ve?void 0:Ve);else if(null!==Ve){const Ft=B.get(Ve);B.move(Ft,Ke),Xr(Ft,ie)}});for(let ie=0,Ve=B.length;ie<Ve;ie++){const Ft=B.get(ie).context;Ft.index=ie,Ft.count=Ve,Ft.ngForOf=this._ngForOf}R.forEachIdentityChange(ie=>{Xr(B.get(ie.currentIndex),ie)})}static ngTemplateContextGuard(R,B){return!0}static#e=this.\u0275fac=function(B){return new(B||D)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))};static#t=this.\u0275dir=p.lG2({type:D,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return D})();function Xr(D,j){D.context.$implicit=j.item}let ei=(()=>{class D{constructor(R,B){this._viewContainer=R,this._context=new us,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=B}set ngIf(R){this._context.$implicit=this._context.ngIf=R,this._updateView()}set ngIfThen(R){Wi("ngIfThen",R),this._thenTemplateRef=R,this._thenViewRef=null,this._updateView()}set ngIfElse(R){Wi("ngIfElse",R),this._elseTemplateRef=R,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(R,B){return!0}static#e=this.\u0275fac=function(B){return new(B||D)(p.Y36(p.s_b),p.Y36(p.Rgc))};static#t=this.\u0275dir=p.lG2({type:D,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return D})();class us{constructor(){this.$implicit=null,this.ngIf=null}}function Wi(D,j){if(j&&!j.createEmbeddedView)throw new Error(`${D} must be a TemplateRef, but received '${(0,p.AaK)(j)}'.`)}let pi=(()=>{class D{static#e=this.\u0275fac=function(B){return new(B||D)};static#t=this.\u0275mod=p.oAB({type:D});static#n=this.\u0275inj=p.cJS({})}return D})();const Ln="browser",mr="server";function ni(D){return D===Ln}function Ns(D){return D===mr}let ys=(()=>{class D{static#e=this.\u0275prov=(0,p.Yz7)({token:D,providedIn:"root",factory:()=>new ri((0,p.LFG)(le),window)})}return D})();class ri{constructor(j,R){this.document=j,this.window=R,this.offset=()=>[0,0]}setOffset(j){this.offset=Array.isArray(j)?()=>j:j}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(j){this.supportsScrolling()&&this.window.scrollTo(j[0],j[1])}scrollToAnchor(j){if(!this.supportsScrolling())return;const R=function gi(D,j){const R=D.getElementById(j)||D.getElementsByName(j)[0];if(R)return R;if("function"==typeof D.createTreeWalker&&D.body&&"function"==typeof D.body.attachShadow){const B=D.createTreeWalker(D.body,NodeFilter.SHOW_ELEMENT);let ie=B.currentNode;for(;ie;){const Ve=ie.shadowRoot;if(Ve){const Ke=Ve.getElementById(j)||Ve.querySelector(`[name="${j}"]`);if(Ke)return Ke}ie=B.nextNode()}}return null}(this.document,j);R&&(this.scrollToElement(R),R.focus())}setHistoryScrollRestoration(j){this.supportsScrolling()&&(this.window.history.scrollRestoration=j)}scrollToElement(j){const R=j.getBoundingClientRect(),B=R.left+this.window.pageXOffset,ie=R.top+this.window.pageYOffset,Ve=this.offset();this.window.scrollTo(B-Ve[0],ie-Ve[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Yi{}},5879:(Et,Me,F)=>{F.d(Me,{$8M:()=>ko,$WT:()=>ti,$Z:()=>pf,AFp:()=>$p,AaK:()=>me,AsE:()=>Wv,CHM:()=>oc,CRH:()=>M0,DdM:()=>d0,EJc:()=>xC,EpF:()=>H_,F4k:()=>z_,FYo:()=>Fm,FiY:()=>ba,Gf:()=>R0,GfV:()=>Bm,Gpc:()=>Ze,HDt:()=>X0,JOm:()=>gu,KtG:()=>zi,LFG:()=>it,LSH:()=>Nh,Lbi:()=>gl,Lck:()=>gT,MMx:()=>n0,NdJ:()=>Wg,Ojb:()=>Hp,OlP:()=>xt,Oqu:()=>Gv,P3R:()=>Pm,PXZ:()=>aA,Q6J:()=>Ug,QGY:()=>Gg,QbO:()=>jh,Qsj:()=>By,R0b:()=>Gi,RDi:()=>zu,Rgc:()=>im,SBq:()=>Fa,Sil:()=>kC,Suo:()=>P0,TTD:()=>Yt,TgZ:()=>jg,VuI:()=>HA,X6Q:()=>gA,XFs:()=>jt,Xpm:()=>Ps,Xq5:()=>b_,Xts:()=>ld,Y36:()=>Lc,YKP:()=>e0,YNc:()=>U_,Yjl:()=>ms,Yz7:()=>Ut,Z0I:()=>yn,ZZ4:()=>AE,_Bn:()=>XI,_UZ:()=>j_,_Vd:()=>Ku,_c5:()=>MA,_uU:()=>sI,aQg:()=>SE,c2e:()=>J0,cJS:()=>pn,cg1:()=>qv,dDg:()=>rA,dqk:()=>Xt,eFA:()=>cD,eJc:()=>lE,ekj:()=>Hv,eoX:()=>sD,f3M:()=>Ct,g9A:()=>Uh,h0i:()=>Wd,hGG:()=>xA,hij:()=>K_,iGM:()=>b0,ifc:()=>Pt,ip1:()=>Q0,jDz:()=>r0,kL8:()=>CI,lG2:()=>xs,lqb:()=>Ks,lri:()=>rD,n5z:()=>tl,oAB:()=>Pi,oxw:()=>Bv,q4F:()=>Zh,qFp:()=>GA,qLn:()=>Zu,qOj:()=>ja,qZA:()=>$g,rWj:()=>iD,rg0:()=>Ve,sBO:()=>mA,s_b:()=>ty,soG:()=>ry,tb:()=>EE,tp0:()=>Lu,uIk:()=>Pl,vHH:()=>de,vpe:()=>La,wAp:()=>Lf,xp6:()=>r_,z2F:()=>$f,zSh:()=>Up,zs3:()=>As});var p=F(8645),Y=F(7394),z=F(5592),ue=F(3019),te=F(5619),le=F(2096),ge=F(3020),oe=F(4664),Se=F(3997);function Q(t){for(let r in t)if(t[r]===Q)return r;throw Error("Could not find renamed property on target object.")}function re(t,r){for(const s in r)r.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(t[s]=r[s])}function me(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(me).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const r=t.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function ze(t,r){return null==t||""===t?null===r?"":r:null==r||""===r?t:t+" "+r}const Ne=Q({__forward_ref__:Q});function Ze(t){return t.__forward_ref__=Ze,t.toString=function(){return me(this())},t}function Fe(t){return tt(t)?t():t}function tt(t){return"function"==typeof t&&t.hasOwnProperty(Ne)&&t.__forward_ref__===Ze}function Ge(t){return t&&!!t.\u0275providers}const Ie="https://g.co/ng/security#xss";class de extends Error{constructor(r,s){super(function Pe(t,r){return`NG0${Math.abs(t)}${r?": "+r:""}`}(r,s)),this.code=r}}function Te(t){return"string"==typeof t?t:null==t?"":String(t)}function Tt(t,r){throw new de(-201,!1)}function ct(t,r){null==t&&function rt(t,r,s,a){throw new Error(`ASSERTION ERROR: ${t}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,t,null,"!=")}function Ut(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function pn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Qt(t){return On(t,In)||On(t,vr)}function yn(t){return null!==Qt(t)}function On(t,r){return t.hasOwnProperty(r)?t[r]:null}function Xn(t){return t&&(t.hasOwnProperty(Dn)||t.hasOwnProperty(nr))?t[Dn]:null}const In=Q({\u0275prov:Q}),Dn=Q({\u0275inj:Q}),vr=Q({ngInjectableDef:Q}),nr=Q({ngInjectorDef:Q});var jt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(jt||{});let Kt;function wn(t){const r=Kt;return Kt=t,r}function kn(t,r,s){const a=Qt(t);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&jt.Optional?null:void 0!==r?r:void Tt(me(t))}const Xt=globalThis;class xt{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=Ut({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const sn={},ir="__NG_DI_FLAG__",Pn="ngTempTokenPath",G=/\n/gm,P="__source";let M;function De(t){const r=M;return M=t,r}function We(t,r=jt.Default){if(void 0===M)throw new de(-203,!1);return null===M?kn(t,void 0,r):M.get(t,r&jt.Optional?null:void 0,r)}function it(t,r=jt.Default){return(function zt(){return Kt}()||We)(Fe(t),r)}function Ct(t,r=jt.Default){return it(t,Vt(r))}function Vt(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function en(t){const r=[];for(let s=0;s<t.length;s++){const a=Fe(t[s]);if(Array.isArray(a)){if(0===a.length)throw new de(900,!1);let c,d=jt.Default;for(let m=0;m<a.length;m++){const v=a[m],T=ar(v);"number"==typeof T?-1===T?c=v.token:d|=T:c=v}r.push(it(c,d))}else r.push(it(a))}return r}function Ht(t,r){return t[ir]=r,t.prototype[ir]=r,t}function ar(t){return t[ir]}function we(t){return{toString:t}.toString()}var nt=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(nt||{}),Pt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Pt||{});const Wt={},St=[],gn=Q({\u0275cmp:Q}),Er=Q({\u0275dir:Q}),qn=Q({\u0275pipe:Q}),Si=Q({\u0275mod:Q}),Ir=Q({\u0275fac:Q}),Ii=Q({__NG_ELEMENT_ID__:Q}),Mr=Q({__NG_ENV_ID__:Q});function Ss(t,r,s){let a=t.length;for(;;){const c=t.indexOf(r,s);if(-1===c)return c;if(0===c||t.charCodeAt(c-1)<=32){const d=r.length;if(c+d===a||t.charCodeAt(c+d)<=32)return c}s=c+1}}function Vn(t,r,s){let a=0;for(;a<s.length;){const c=s[a];if("number"==typeof c){if(0!==c)break;a++;const d=s[a++],m=s[a++],v=s[a++];t.setAttribute(r,m,v,d)}else{const d=c,m=s[++a];ao(d)?t.setProperty(r,d,m):t.setAttribute(r,d,m),a++}}return a}function as(t){return 3===t||4===t||6===t}function ao(t){return 64===t.charCodeAt(0)}function Hr(t,r){if(null!==r&&0!==r.length)if(null===t||0===t.length)t=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const c=r[a];"number"==typeof c?s=c:0===s||Xr(t,s,c,null,-1===s||2===s?r[++a]:null)}}return t}function Xr(t,r,s,a,c){let d=0,m=t.length;if(-1===r)m=-1;else for(;d<t.length;){const v=t[d++];if("number"==typeof v){if(v===r){m=-1;break}if(v>r){m=d-1;break}}}for(;d<t.length;){const v=t[d];if("number"==typeof v)break;if(v===s){if(null===a)return void(null!==c&&(t[d+1]=c));if(a===t[d+1])return void(t[d+2]=c)}d++,null!==a&&d++,null!==c&&d++}-1!==m&&(t.splice(m,0,r),d=m+1),t.splice(d++,0,s),null!==a&&t.splice(d++,0,a),null!==c&&t.splice(d++,0,c)}const bs="ng-template";function ei(t,r,s){let a=0,c=!0;for(;a<t.length;){let d=t[a++];if("string"==typeof d&&c){const m=t[a++];if(s&&"class"===d&&-1!==Ss(m.toLowerCase(),r,0))return!0}else{if(1===d){for(;a<t.length&&"string"==typeof(d=t[a++]);)if(d.toLowerCase()===r)return!0;return!1}"number"==typeof d&&(c=!1)}}return!1}function us(t){return 4===t.type&&t.value!==bs}function Wi(t,r,s){return r===(4!==t.type||s?t.value:bs)}function qi(t,r,s){let a=4;const c=t.attrs||[],d=function Ui(t){for(let r=0;r<t.length;r++)if(as(t[r]))return r;return t.length}(c);let m=!1;for(let v=0;v<r.length;v++){const T=r[v];if("number"!=typeof T){if(!m)if(4&a){if(a=2|1&a,""!==T&&!Wi(t,T,s)||""===T&&1===r.length){if(gr(a))return!1;m=!0}}else{const N=8&a?T:r[++v];if(8&a&&null!==t.attrs){if(!ei(t.attrs,N,s)){if(gr(a))return!1;m=!0}continue}const ee=bi(8&a?"class":T,c,us(t),s);if(-1===ee){if(gr(a))return!1;m=!0;continue}if(""!==N){let Ee;Ee=ee>d?"":c[ee+1].toLowerCase();const Ae=8&a?Ee:null;if(Ae&&-1!==Ss(Ae,N,0)||2&a&&N!==Ee){if(gr(a))return!1;m=!0}}}}else{if(!m&&!gr(a)&&!gr(T))return!1;if(m&&gr(T))continue;m=!1,a=T|1&a}}return gr(a)||m}function gr(t){return 0==(1&t)}function bi(t,r,s,a){if(null===r)return-1;let c=0;if(a||!s){let d=!1;for(;c<r.length;){const m=r[c];if(m===t)return c;if(3===m||6===m)d=!0;else{if(1===m||2===m){let v=r[++c];for(;"string"==typeof v;)v=r[++c];continue}if(4===m)break;if(0===m){c+=4;continue}}c+=d?1:2}return-1}return function Bo(t,r){let s=t.indexOf(4);if(s>-1)for(s++;s<t.length;){const a=t[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,t)}function Rs(t,r,s=!1){for(let a=0;a<r.length;a++)if(qi(t,r[a],s))return!0;return!1}function uo(t,r){return t?":not("+r.trim()+")":r}function fa(t){let r=t[0],s=1,a=2,c="",d=!1;for(;s<t.length;){let m=t[s];if("string"==typeof m)if(2&a){const v=t[++s];c+="["+m+(v.length>0?'="'+v+'"':"")+"]"}else 8&a?c+="."+m:4&a&&(c+=" "+m);else""!==c&&!gr(m)&&(r+=uo(d,c),c=""),a=m,d=d||!gr(a);s++}return""!==c&&(r+=uo(d,c)),r}function Ps(t){return we(()=>{const r=Bi(t),s={...r,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===nt.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Pt.Emulated,styles:t.styles||St,_:null,schemas:t.schemas||null,tView:null,id:""};_s(s);const a=t.dependencies;return s.directiveDefs=Un(a,!1),s.pipeDefs=Un(a,!0),s.id=function ls(t){let r=0;const s=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const c of s)r=Math.imul(31,r)+c.charCodeAt(0)<<0;return r+=2147483648,"c"+r}(s),s})}function cs(t){return un(t)||lr(t)}function Ms(t){return null!==t}function Pi(t){return we(()=>({type:t.type,bootstrap:t.bootstrap||St,declarations:t.declarations||St,imports:t.imports||St,exports:t.exports||St,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function co(t,r){if(null==t)return Wt;const s={};for(const a in t)if(t.hasOwnProperty(a)){let c=t[a],d=c;Array.isArray(c)&&(d=c[1],c=c[0]),s[c]=a,r&&(r[c]=d)}return s}function xs(t){return we(()=>{const r=Bi(t);return _s(r),r})}function ms(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function un(t){return t[gn]||null}function lr(t){return t[Er]||null}function ur(t){return t[qn]||null}function ti(t){const r=un(t)||lr(t)||ur(t);return null!==r&&r.standalone}function xr(t,r){const s=t[Si]||null;if(!s&&!0===r)throw new Error(`Type ${me(t)} does not have '\u0275mod' property.`);return s}function Bi(t){const r={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputTransforms:null,inputConfig:t.inputs||Wt,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||St,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:co(t.inputs,r),outputs:co(t.outputs)}}function _s(t){t.features?.forEach(r=>r(t))}function Un(t,r){if(!t)return null;const s=r?ur:cs;return()=>("function"==typeof t?t():t).map(a=>s(a)).filter(Ms)}const Bn=0,vt=1,tn=2,Fn=3,zr=4,xi=5,er=6,pi=7,Ln=8,mr=9,ds=10,nn=11,ni=12,Ns=13,Os=14,dr=15,Qs=16,ys=17,ri=18,gi=19,Eo=20,Yi=21,Br=22,ks=23,Vs=24,cn=25,Di=1,Nr=2,ii=7,Ls=9,br=11;function Tn(t){return Array.isArray(t)&&"object"==typeof t[Di]}function jr(t){return Array.isArray(t)&&!0===t[Di]}function Js(t){return 0!=(4&t.flags)}function _r(t){return t.componentOffset>-1}function vs(t){return 1==(1&t.flags)}function Ni(t){return!!t.template}function Xs(t){return 0!=(512&t[tn])}function ui(t,r){return t.hasOwnProperty(Ir)?t[Ir]:null}let wr=null,Bs=!1;function mi(t){const r=wr;return wr=t,r}const Au={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function _i(t){if(!ki(t)||t.dirty){if(!t.producerMustRecompute(t)&&!Ka(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function js(t){t.dirty=!0,function Co(t){if(void 0===t.liveConsumerNode)return;const r=Bs;Bs=!0;try{for(const s of t.liveConsumerNode)s.dirty||js(s)}finally{Bs=r}}(t),t.consumerMarkedDirty?.(t)}function qa(t){return t&&(t.nextProducerIndex=0),mi(t)}function Oi(t,r){if(mi(r),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(ki(t))for(let s=t.nextProducerIndex;s<t.producerNode.length;s++)ho(t.producerNode[s],t.producerIndexOfThis[s]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Ka(t){Ao(t);for(let r=0;r<t.producerNode.length;r++){const s=t.producerNode[r],a=t.producerLastReadVersion[r];if(a!==s.version||(_i(s),a!==s.version))return!0}return!1}function Zn(t){if(Ao(t),ki(t))for(let r=0;r<t.producerNode.length;r++)ho(t.producerNode[r],t.producerIndexOfThis[r]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function ho(t,r){if(function So(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Ao(t),1===t.liveConsumerNode.length)for(let a=0;a<t.producerNode.length;a++)ho(t.producerNode[a],t.producerIndexOfThis[a]);const s=t.liveConsumerNode.length-1;if(t.liveConsumerNode[r]=t.liveConsumerNode[s],t.liveConsumerIndexOfThis[r]=t.liveConsumerIndexOfThis[s],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,r<t.liveConsumerNode.length){const a=t.liveConsumerIndexOfThis[r],c=t.liveConsumerNode[r];Ao(c),c.producerIndexOfThis[a]=r}}function ki(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Ao(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let bo=null;function Ve(t){const r=mi(null);try{return t()}finally{mi(r)}}const Ft=()=>{},sr=(()=>({...Au,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:Ft}))();class Qn{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function Yt(){return fr}function fr(t){return t.type.prototype.ngOnChanges&&(t.setInput=kr),Mn}function Mn(){const t=Je(this),r=t?.current;if(r){const s=t.previous;if(s===Wt)t.previous=r;else for(let a in r)s[a]=r[a];t.current=null,this.ngOnChanges(r)}}function kr(t,r,s,a){const c=this.declaredInputs[s],d=Je(t)||function or(t,r){return t[no]=r}(t,{previous:Wt,current:null}),m=d.current||(d.current={}),v=d.previous,T=v[c];m[c]=new Qn(T&&T.currentValue,r,v===Wt),t[a]=r}Yt.ngInherit=!0;const no="__ngSimpleChanges__";function Je(t){return t[no]||null}const _t=function(t,r,s){};function ot(t){for(;Array.isArray(t);)t=t[Bn];return t}function et(t,r){return ot(r[t])}function xn(t,r){return ot(r[t.index])}function nc(t,r){return t.data[r]}function Is(t,r){const s=r[t];return Tn(s)?s:s[Bn]}function po(t,r){return null==r?null:t[r]}function Ru(t){t[ys]=0}function go(t){1024&t[tn]||(t[tn]|=1024,mn(t,1))}function _a(t){1024&t[tn]&&(t[tn]&=-1025,mn(t,-1))}function mn(t,r){let s=t[Fn];if(null===s)return;s[xi]+=r;let a=s;for(s=s[Fn];null!==s&&(1===r&&1===a[xi]||-1===r&&0===a[xi]);)s[xi]+=r,a=s,s=s[Fn]}const Ot={lFrame:fs(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function It(){return Ot.bindingsEnabled}function Xe(){return Ot.lFrame.lView}function jn(){return Ot.lFrame.tView}function oc(t){return Ot.lFrame.contextLView=t,t[Ln]}function zi(t){return Ot.lFrame.contextLView=null,t}function li(){let t=va();for(;null!==t&&64===t.type;)t=t.parent;return t}function va(){return Ot.lFrame.currentTNode}function Yr(t,r){const s=Ot.lFrame;s.currentTNode=t,s.isParent=r}function Po(){return Ot.lFrame.isParent}function Hs(){return Ot.lFrame.bindingIndex++}function E(t){const r=Ot.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+t,s}function A(t,r){const s=Ot.lFrame;s.bindingIndex=s.bindingRootIndex=t,W(r)}function W(t){Ot.lFrame.currentDirectiveIndex=t}function Ue(){return Ot.lFrame.currentQueryIndex}function be(t){Ot.lFrame.currentQueryIndex=t}function Nt(t){const r=t[vt];return 2===r.type?r.declTNode:1===r.type?t[er]:null}function Cn(t,r,s){if(s&jt.SkipSelf){let c=r,d=t;for(;!(c=c.parent,null!==c||s&jt.Host||(c=Nt(d),null===c||(d=d[Os],10&c.type))););if(null===c)return!1;r=c,t=d}const a=Ot.lFrame=Nn();return a.currentTNode=r,a.lView=t,!0}function $n(t){const r=Nn(),s=t[vt];Ot.lFrame=r,r.currentTNode=s.firstChild,r.lView=t,r.tView=s,r.contextLView=t,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function Nn(){const t=Ot.lFrame,r=null===t?null:t.child;return null===r?fs(t):r}function fs(t){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=r),r}function Ko(){const t=Ot.lFrame;return Ot.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Ia=Ko;function Ja(){const t=Ko();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ps(){return Ot.lFrame.selectedIndex}function Xa(t){Ot.lFrame.selectedIndex=t}function Qr(){const t=Ot.lFrame;return nc(t.tView,t.selectedIndex)}let Qd=!0;function Pu(){return Qd}function _o(t){Qd=t}function Jc(t,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const d=t.data[s].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:v,ngAfterViewInit:T,ngAfterViewChecked:N,ngOnDestroy:H}=d;m&&(t.contentHooks??=[]).push(-s,m),v&&((t.contentHooks??=[]).push(s,v),(t.contentCheckHooks??=[]).push(s,v)),T&&(t.viewHooks??=[]).push(-s,T),N&&((t.viewHooks??=[]).push(s,N),(t.viewCheckHooks??=[]).push(s,N)),null!=H&&(t.destroyHooks??=[]).push(s,H)}}function eu(t,r,s){Mu(t,r,3,s)}function uc(t,r,s,a){(3&t[tn])===s&&Mu(t,r,s,a)}function Zo(t,r){let s=t[tn];(3&s)===r&&(s&=8191,s+=1,t[tn]=s)}function Mu(t,r,s,a){const d=a??-1,m=r.length-1;let v=0;for(let T=void 0!==a?65535&t[ys]:0;T<m;T++)if("number"==typeof r[T+1]){if(v=r[T],null!=a&&v>=a)break}else r[T]<0&&(t[ys]+=65536),(v<d||-1==d)&&(Jd(t,s,r,T),t[ys]=(4294901760&t[ys])+T+2),T++}function Ti(t,r){_t(4,t,r);const s=mi(null);try{r.call(t)}finally{mi(s),_t(5,t,r)}}function Jd(t,r,s,a){const c=s[a]<0,d=s[a+1],v=t[c?-s[a]:s[a]];c?t[tn]>>13<t[ys]>>16&&(3&t[tn])===r&&(t[tn]+=8192,Ti(v,d)):Ti(v,d)}const zs=-1;class wa{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function cc(t){return t!==zs}function Jr(t){return 32767&t}function io(t,r){let s=function lc(t){return t>>16}(t),a=r;for(;s>0;)a=a[Os],s--;return a}let Gr=!0;function Ds(t){const r=Gr;return Gr=t,r}const tu=255,xu=5;let eh=0;const Fi={};function nu(t,r){const s=Ws(t,r);if(-1!==s)return s;const a=r[vt];a.firstCreatePass&&(t.injectorIndex=r.length,Mo(a.data,t),Mo(r,null),Mo(a.blueprint,null));const c=Ca(t,r),d=t.injectorIndex;if(cc(c)){const m=Jr(c),v=io(c,r),T=v[vt].data;for(let N=0;N<8;N++)r[d+N]=v[m+N]|T[m+N]}return r[d+8]=c,d}function Mo(t,r){t.push(0,0,0,0,0,0,0,0,r)}function Ws(t,r){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===r[t.injectorIndex+8]?-1:t.injectorIndex}function Ca(t,r){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let s=0,a=null,c=r;for(;null!==c;){if(a=Fr(c),null===a)return zs;if(s++,c=c[Os],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return zs}function xo(t,r,s){!function Yo(t,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(Ii)&&(a=s[Ii]),null==a&&(a=s[Ii]=eh++);const c=a&tu;r.data[t+(c>>xu)]|=1<<c}(t,r,s)}function ru(t,r,s){if(s&jt.Optional||void 0!==t)return t;Tt()}function el(t,r,s,a){if(s&jt.Optional&&void 0===a&&(a=null),!(s&(jt.Self|jt.Host))){const c=t[mr],d=wn(void 0);try{return c?c.get(r,a,s&jt.Optional):kn(r,a,s&jt.Optional)}finally{wn(d)}}return ru(a,0,s)}function iu(t,r,s,a=jt.Default,c){if(null!==t){if(2048&r[tn]&&!(a&jt.Self)){const m=function rh(t,r,s,a,c){let d=t,m=r;for(;null!==d&&null!==m&&2048&m[tn]&&!(512&m[tn]);){const v=Aa(d,m,s,a|jt.Self,Fi);if(v!==Fi)return v;let T=d.parent;if(!T){const N=m[Eo];if(N){const H=N.get(s,Fi,a);if(H!==Fi)return H}T=Fr(m),m=m[Os]}d=T}return c}(t,r,s,a,Fi);if(m!==Fi)return m}const d=Aa(t,r,s,a,Fi);if(d!==Fi)return d}return el(r,s,a,c)}function Aa(t,r,s,a,c){const d=function jl(t){if("string"==typeof t)return t.charCodeAt(0)||0;const r=t.hasOwnProperty(Ii)?t[Ii]:void 0;return"number"==typeof r?r>=0?r&tu:nh:r}(s);if("function"==typeof d){if(!Cn(r,t,a))return a&jt.Host?ru(c,0,a):el(r,s,a,c);try{let m;if(m=d(a),null!=m||a&jt.Optional)return m;Tt()}finally{Ia()}}else if("number"==typeof d){let m=null,v=Ws(t,r),T=zs,N=a&jt.Host?r[dr][er]:null;for((-1===v||a&jt.SkipSelf)&&(T=-1===v?Ca(t,r):r[v+8],T!==zs&&Nu(a,!1)?(m=r[vt],v=Jr(T),r=io(T,r)):v=-1);-1!==v;){const H=r[vt];if(su(d,v,H.data)){const ee=hc(v,r,s,m,a,N);if(ee!==Fi)return ee}T=r[v+8],T!==zs&&Nu(a,r[vt].data[v+8]===N)&&su(d,v,r)?(m=H,v=Jr(T),r=io(T,r)):v=-1}}return c}function hc(t,r,s,a,c,d){const m=r[vt],v=m.data[t+8],H=No(v,m,s,null==a?_r(v)&&Gr:a!=m&&0!=(3&v.type),c&jt.Host&&d===v);return null!==H?Oo(r,m,H,v):Fi}function No(t,r,s,a,c){const d=t.providerIndexes,m=r.data,v=1048575&d,T=t.directiveStart,H=d>>20,Ee=c?v+H:t.directiveEnd;for(let Ae=a?v:v+H;Ae<Ee;Ae++){const Ye=m[Ae];if(Ae<T&&s===Ye||Ae>=T&&Ye.type===s)return Ae}if(c){const Ae=m[T];if(Ae&&Ni(Ae)&&Ae.type===s)return T}return null}function Oo(t,r,s,a){let c=t[s];const d=r.data;if(function Pr(t){return t instanceof wa}(c)){const m=c;m.resolving&&function qe(t,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${t}`:"";throw new de(-200,`Circular dependency in DI detected for ${t}${s}`)}(function ke(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Te(t)}(d[s]));const v=Ds(m.canSeeViewProviders);m.resolving=!0;const N=m.injectImpl?wn(m.injectImpl):null;Cn(t,a,jt.Default);try{c=t[s]=m.factory(void 0,d,t,a),r.firstCreatePass&&s>=a.directiveStart&&function Qc(t,r,s){const{ngOnChanges:a,ngOnInit:c,ngDoCheck:d}=r.type.prototype;if(a){const m=fr(r);(s.preOrderHooks??=[]).push(t,m),(s.preOrderCheckHooks??=[]).push(t,m)}c&&(s.preOrderHooks??=[]).push(0-t,c),d&&((s.preOrderHooks??=[]).push(t,d),(s.preOrderCheckHooks??=[]).push(t,d))}(s,d[s],r)}finally{null!==N&&wn(N),Ds(v),m.resolving=!1,Ia()}}return c}function su(t,r,s){return!!(s[r+(t>>xu)]&1<<t)}function Nu(t,r){return!(t&jt.Self||t&jt.Host&&r)}class Xi{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return iu(this._tNode,this._lView,r,Vt(a),s)}}function nh(){return new Xi(li(),Xe())}function tl(t){return we(()=>{const r=t.prototype.constructor,s=r[Ir]||di(r),a=Object.prototype;let c=Object.getPrototypeOf(t.prototype).constructor;for(;c&&c!==a;){const d=c[Ir]||di(c);if(d&&d!==s)return d;c=Object.getPrototypeOf(c)}return d=>new d})}function di(t){return tt(t)?()=>{const r=di(Fe(t));return r&&r()}:ui(t)}function Fr(t){const r=t[vt],s=r.type;return 2===s?r.declTNode:1===s?t[er]:null}function ko(t){return function Xc(t,r){if("class"===r)return t.classes;if("style"===r)return t.styles;const s=t.attrs;if(s){const a=s.length;let c=0;for(;c<a;){const d=s[c];if(as(d))break;if(0===d)c+=2;else if("number"==typeof d)for(c++;c<a&&"string"==typeof s[c];)c++;else{if(d===r)return s[c+1];c+=2}}}return null}(li(),t)}const au="__parameters__";function An(t,r,s){return we(()=>{const a=function nl(t){return function(...s){if(t){const a=t(...s);for(const c in a)this[c]=a[c]}}}(r);function c(...d){if(this instanceof c)return a.apply(this,d),this;const m=new c(...d);return v.annotation=m,v;function v(T,N,H){const ee=T.hasOwnProperty(au)?T[au]:Object.defineProperty(T,au,{value:[]})[au];for(;ee.length<=H;)ee.push(null);return(ee[H]=ee[H]||[]).push(m),T}}return s&&(c.prototype=Object.create(s.prototype)),c.prototype.ngMetadataName=t,c.annotationCls=c,c})}function ku(t,r){t.forEach(s=>Array.isArray(s)?ku(s,r):r(s))}function uh(t,r,s){r>=t.length?t.push(s):t.splice(r,0,s)}function Vu(t,r){return r>=t.length-1?t.pop():t.splice(r,1)[0]}function ws(t,r,s){let a=cu(t,r);return a>=0?t[1|a]=s:(a=~a,function rl(t,r,s,a){let c=t.length;if(c==r)t.push(s,a);else if(1===c)t.push(a,t[0]),t[0]=s;else{for(c--,t.push(t[c-1],t[c]);c>r;)t[c]=t[c-2],c--;t[r]=s,t[r+1]=a}}(t,a,r,s)),a}function oo(t,r){const s=cu(t,r);if(s>=0)return t[1|s]}function cu(t,r){return function Gl(t,r,s){let a=0,c=t.length>>s;for(;c!==a;){const d=a+(c-a>>1),m=t[d<<s];if(r===m)return d<<s;m>r?c=d:a=d+1}return~(c<<s)}(t,r,1)}const ba=Ht(An("Optional"),8),Lu=Ht(An("SkipSelf"),4);function Zl(t){return 128==(128&t.flags)}var gu=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(gu||{});const sp=new Map;let cy=0;const yh="__ngContext__";function ns(t,r){Tn(r)?(t[yh]=r[gi],function cr(t){sp.set(t[gi],t)}(r)):t[yh]=r}let hp;function fp(t,r){return hp(t,r)}function vc(t){const r=t[Fn];return jr(r)?r[Fn]:r}function hm(t){return Eh(t[ni])}function Ei(t){return Eh(t[zr])}function Eh(t){for(;null!==t&&!jr(t);)t=t[zr];return t}function Ec(t,r,s,a,c){if(null!=a){let d,m=!1;jr(a)?d=a:Tn(a)&&(m=!0,a=a[Bn]);const v=ot(a);0===t&&null!==s?null==c?_m(r,s,v):Ic(r,s,v,c||null,!0):1===t&&null!==s?Ic(r,s,v,c||null,!0):2===t?function Hu(t,r,s){const a=td(t,r);a&&function ju(t,r,s,a){t.removeChild(r,s,a)}(t,a,r,s)}(r,v,m):3===t&&r.destroyNode(v),null!=d&&function my(t,r,s,a,c){const d=s[ii];d!==ot(s)&&Ec(r,t,a,d,c);for(let v=br;v<s.length;v++){const T=s[v];wc(T[vt],T,t,r,a,d)}}(r,t,d,s,c)}}function Jl(t,r,s){return t.createElement(r,s)}function dl(t,r){const s=t[Ls],a=s.indexOf(r);_a(r),s.splice(a,1)}function hl(t,r){if(t.length<=br)return;const s=br+r,a=t[s];if(a){const c=a[Qs];null!==c&&c!==t&&dl(c,a),r>0&&(t[s-1][zr]=a[zr]);const d=Vu(t,br+r);!function Xl(t,r){wc(t,r,r[nn],2,null,null),r[Bn]=null,r[er]=null}(a[vt],a);const m=d[ri];null!==m&&m.detachView(d[vt]),a[Fn]=null,a[zr]=null,a[tn]&=-129}return a}function pp(t,r){if(!(256&r[tn])){const s=r[nn];r[ks]&&Zn(r[ks]),r[Vs]&&Zn(r[Vs]),s.destroyNode&&wc(t,r,s,3,null,null),function gm(t){let r=t[ni];if(!r)return Ih(t[vt],t);for(;r;){let s=null;if(Tn(r))s=r[ni];else{const a=r[br];a&&(s=a)}if(!s){for(;r&&!r[zr]&&r!==t;)Tn(r)&&Ih(r[vt],r),r=r[Fn];null===r&&(r=t),Tn(r)&&Ih(r[vt],r),s=r&&r[zr]}r=s}}(r)}}function Ih(t,r){if(!(256&r[tn])){r[tn]&=-129,r[tn]|=256,function mm(t,r){let s;if(null!=t&&null!=(s=t.destroyHooks))for(let a=0;a<s.length;a+=2){const c=r[s[a]];if(!(c instanceof wa)){const d=s[a+1];if(Array.isArray(d))for(let m=0;m<d.length;m+=2){const v=c[d[m]],T=d[m+1];_t(4,v,T);try{T.call(v)}finally{_t(5,v,T)}}else{_t(4,c,d);try{d.call(c)}finally{_t(5,c,d)}}}}}(t,r),function gp(t,r){const s=t.cleanup,a=r[pi];if(null!==s)for(let d=0;d<s.length-1;d+=2)if("string"==typeof s[d]){const m=s[d+3];m>=0?a[m]():a[-m].unsubscribe(),d+=2}else s[d].call(a[s[d+1]]);null!==a&&(r[pi]=null);const c=r[Yi];if(null!==c){r[Yi]=null;for(let d=0;d<c.length;d++)(0,c[d])()}}(t,r),1===r[vt].type&&r[nn].destroy();const s=r[Qs];if(null!==s&&jr(r[Fn])){s!==r[Fn]&&dl(s,r);const a=r[ri];null!==a&&a.detachView(t)}!function um(t){sp.delete(t[gi])}(r)}}function mp(t,r,s){return function _p(t,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[Bn];{const{componentOffset:c}=a;if(c>-1){const{encapsulation:d}=t.data[a.directiveStart+c];if(d===Pt.None||d===Pt.Emulated)return null}return xn(a,s)}}(t,r.parent,s)}function Ic(t,r,s,a,c){t.insertBefore(r,s,a,c)}function _m(t,r,s){t.appendChild(r,s)}function ym(t,r,s,a,c){null!==a?Ic(t,r,s,a,c):_m(t,r,s)}function td(t,r){return t.parentNode(r)}let Ep,yu,sd,vp=function xa(t,r,s){return 40&t.type?xn(t,s):null};function Dc(t,r,s,a){const c=mp(t,a,r),d=r[nn],v=function yp(t,r,s){return vp(t,r,s)}(a.parent||r[er],a,r);if(null!=c)if(Array.isArray(s))for(let T=0;T<s.length;T++)ym(d,c,s[T],v,!1);else ym(d,c,s,v,!1);void 0!==Ep&&Ep(d,a,r,s,c)}function ra(t,r){if(null!==r){const s=r.type;if(3&s)return xn(r,t);if(4&s)return _u(-1,t[r.index]);if(8&s){const a=r.child;if(null!==a)return ra(t,a);{const c=t[r.index];return jr(c)?_u(-1,c):ot(c)}}if(32&s)return fp(r,t)()||ot(t[r.index]);{const a=$u(t,r);return null!==a?Array.isArray(a)?a[0]:ra(vc(t[dr]),a):ra(t,r.next)}}return null}function $u(t,r){return null!==r?t[dr][er].projection[r.projection]:null}function _u(t,r){const s=br+t+1;if(s<r.length){const a=r[s],c=a[vt].firstChild;if(null!==c)return ra(a,c)}return r[ii]}function nd(t,r,s,a,c,d,m){for(;null!=s;){const v=a[s.index],T=s.type;if(m&&0===r&&(v&&ns(ot(v),a),s.flags|=2),32!=(32&s.flags))if(8&T)nd(t,r,s.child,a,c,d,!1),Ec(r,t,c,v,d);else if(32&T){const N=fp(s,a);let H;for(;H=N();)Ec(r,t,c,H,d);Ec(r,t,c,v,d)}else 16&T?wp(t,r,a,s,c,d):Ec(r,t,c,v,d);s=m?s.projectionNext:s.next}}function wc(t,r,s,a,c,d){nd(s,a,t.firstChild,r,c,d,!1)}function wp(t,r,s,a,c,d){const m=s[dr],T=m[er].projection[a.projection];if(Array.isArray(T))for(let N=0;N<T.length;N++)Ec(r,t,c,T[N],d);else{let N=T;const H=m[Fn];Zl(a)&&(N.flags|=128),nd(t,r,N,H,c,d,!0)}}function rd(t,r,s){""===s?t.removeAttribute(r,"class"):t.setAttribute(r,"class",s)}function fl(t,r,s){const{mergedAttrs:a,classes:c,styles:d}=s;null!==a&&Vn(t,r,a),null!==c&&rd(t,r,c),null!==d&&function Im(t,r,s){t.setAttribute(r,"style",s)}(t,r,d)}function zu(t){yu=t}function Th(t){return function Dh(){if(void 0===sd&&(sd=null,Xt.trustedTypes))try{sd=Xt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return sd}()?.createScriptURL(t)||t}class Cp{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ie})`}}function Oa(t){return t instanceof Cp?t.changingThisBreaksApplicationSecurity:t}function Gu(t,r){const s=function Ey(t){return t instanceof Cp&&t.getTypeName()||null}(t);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see ${Ie})`)}return s===r}const bh=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Sc=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Sc||{});function Nh(t){const r=bc();return r?r.sanitize(Sc.URL,t)||"":Gu(t,"URL")?Oa(t):function Rh(t){return(t=String(t)).match(bh)?t:"unsafe:"+t}(Te(t))}function Rm(t){const r=bc();if(r)return Th(r.sanitize(Sc.RESOURCE_URL,t)||"");if(Gu(t,"ResourceURL"))return Th(Oa(t));throw new de(904,!1)}function Pm(t,r,s){return function Ry(t,r){return"src"===r&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===r&&("base"===t||"link"===t)?Rm:Nh}(r,s)(t)}function bc(){const t=Xe();return t&&t[ds].sanitizer}const ld=new xt("ENVIRONMENT_INITIALIZER"),dd=new xt("INJECTOR",-1),hd=new xt("INJECTOR_DEF_TYPES");class Op{get(r,s=sn){if(s===sn){const a=new Error(`NullInjectorError: No provider for ${me(r)}!`);throw a.name="NullInjectorError",a}return s}}function Vp(...t){return{\u0275providers:Oh(0,t),\u0275fromNgModule:!0}}function Oh(t,...r){const s=[],a=new Set;let c;const d=m=>{s.push(m)};return ku(r,m=>{const v=m;Rc(v,d,[],a)&&(c||=[],c.push(v))}),void 0!==c&&pl(c,d),s}function pl(t,r){for(let s=0;s<t.length;s++){const{ngModule:a,providers:c}=t[s];fd(c,d=>{r(d,a)})}}function Rc(t,r,s,a){if(!(t=Fe(t)))return!1;let c=null,d=Xn(t);const m=!d&&un(t);if(d||m){if(m&&!m.standalone)return!1;c=t}else{const T=t.ngModule;if(d=Xn(T),!d)return!1;c=T}const v=a.has(c);if(m){if(v)return!1;if(a.add(c),m.dependencies){const T="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const N of T)Rc(N,r,s,a)}}else{if(!d)return!1;{if(null!=d.imports&&!v){let N;a.add(c);try{ku(d.imports,H=>{Rc(H,r,s,a)&&(N||=[],N.push(H))})}finally{}void 0!==N&&pl(N,r)}if(!v){const N=ui(c)||(()=>new c);r({provide:c,useFactory:N,deps:St},c),r({provide:hd,useValue:c,multi:!0},c),r({provide:ld,useValue:()=>it(c),multi:!0},c)}const T=d.providers;if(null!=T&&!v){const N=t;fd(T,H=>{r(H,N)})}}}return c!==t&&void 0!==t.providers}function fd(t,r){for(let s of t)Ge(s)&&(s=s.\u0275providers),Array.isArray(s)?fd(s,r):r(s)}const Py=Q({provide:String,useValue:Q});function kh(t){return null!==t&&"object"==typeof t&&Py in t}function qu(t){return"function"==typeof t}const Up=new xt("Set Injector scope."),pd={},My={};let Vh;function Fh(){return void 0===Vh&&(Vh=new Op),Vh}class Ks{}class ia extends Ks{get destroyed(){return this._destroyed}constructor(r,s,a,c){super(),this.parent=s,this.source=a,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,md(r,m=>this.processProvider(m)),this.records.set(dd,Pc(void 0,this)),c.has("environment")&&this.records.set(Ks,Pc(void 0,this));const d=this.records.get(Up);null!=d&&"string"==typeof d.value&&this.scopes.add(d.value),this.injectorDefTypes=new Set(this.get(hd.multi,St,jt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();const r=this._onDestroyHooks;this._onDestroyHooks=[];for(const s of r)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(r){return this.assertNotDestroyed(),this._onDestroyHooks.push(r),()=>this.removeOnDestroy(r)}runInContext(r){this.assertNotDestroyed();const s=De(this),a=wn(void 0);try{return r()}finally{De(s),wn(a)}}get(r,s=sn,a=jt.Default){if(this.assertNotDestroyed(),r.hasOwnProperty(Mr))return r[Mr](this);a=Vt(a);const d=De(this),m=wn(void 0);try{if(!(a&jt.SkipSelf)){let T=this.records.get(r);if(void 0===T){const N=function Ny(t){return"function"==typeof t||"object"==typeof t&&t instanceof xt}(r)&&Qt(r);T=N&&this.injectableDefInScope(N)?Pc(gd(r),pd):null,this.records.set(r,T)}if(null!=T)return this.hydrate(r,T)}return(a&jt.Self?Fh():this.parent).get(r,s=a&jt.Optional&&s===sn?null:s)}catch(v){if("NullInjectorError"===v.name){if((v[Pn]=v[Pn]||[]).unshift(me(r)),d)throw v;return function ai(t,r,s,a){const c=t[Pn];throw r[P]&&c.unshift(r[P]),t.message=function Be(t,r,s,a=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let c=me(r);if(Array.isArray(r))c=r.map(me).join(" -> ");else if("object"==typeof r){let d=[];for(let m in r)if(r.hasOwnProperty(m)){let v=r[m];d.push(m+":"+("string"==typeof v?JSON.stringify(v):me(v)))}c=`{${d.join(", ")}}`}return`${s}${a?"("+a+")":""}[${c}]: ${t.replace(G,"\n  ")}`}("\n"+t.message,c,s,a),t.ngTokenPath=c,t[Pn]=null,t}(v,r,"R3InjectorError",this.source)}throw v}finally{wn(m),De(d)}}resolveInjectorInitializers(){const r=De(this),s=wn(void 0);try{const c=this.get(ld.multi,St,jt.Self);for(const d of c)d()}finally{De(r),wn(s)}}toString(){const r=[],s=this.records;for(const a of s.keys())r.push(me(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new de(205,!1)}processProvider(r){let s=qu(r=Fe(r))?r:Fe(r&&r.provide);const a=function Nm(t){return kh(t)?Pc(void 0,t.useValue):Pc(Bp(t),pd)}(r);if(qu(r)||!0!==r.multi)this.records.get(s);else{let c=this.records.get(s);c||(c=Pc(void 0,pd,!0),c.factory=()=>en(c.multi),this.records.set(s,c)),s=r,c.multi.push(r)}this.records.set(s,a)}hydrate(r,s){return s.value===pd&&(s.value=My,s.value=s.factory()),"object"==typeof s.value&&s.value&&function jp(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=Fe(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}removeOnDestroy(r){const s=this._onDestroyHooks.indexOf(r);-1!==s&&this._onDestroyHooks.splice(s,1)}}function gd(t){const r=Qt(t),s=null!==r?r.factory:ui(t);if(null!==s)return s;if(t instanceof xt)throw new de(204,!1);if(t instanceof Function)return function Lh(t){const r=t.length;if(r>0)throw function yo(t,r){const s=[];for(let a=0;a<t;a++)s.push(r);return s}(r,"?"),new de(204,!1);const s=function on(t){return t&&(t[In]||t[vr])||null}(t);return null!==s?()=>s.factory(t):()=>new t}(t);throw new de(204,!1)}function Bp(t,r,s){let a;if(qu(t)){const c=Fe(t);return ui(c)||gd(c)}if(kh(t))a=()=>Fe(t.useValue);else if(function Fp(t){return!(!t||!t.useFactory)}(t))a=()=>t.useFactory(...en(t.deps||[]));else if(function xm(t){return!(!t||!t.useExisting)}(t))a=()=>it(Fe(t.useExisting));else{const c=Fe(t&&(t.useClass||t.provide));if(!function xy(t){return!!t.deps}(t))return ui(c)||gd(c);a=()=>new c(...en(t.deps))}return a}function Pc(t,r,s=!1){return{factory:t,value:r,multi:s?[]:void 0}}function md(t,r){for(const s of t)Array.isArray(s)?md(s,r):s&&Ge(s)?md(s.\u0275providers,r):r(s)}const $p=new xt("AppId",{providedIn:"root",factory:()=>Om}),Om="ng",Uh=new xt("Platform Initializer"),gl=new xt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),jh=new xt("AnimationModuleType"),Hp=new xt("CSP nonce",{providedIn:"root",factory:()=>function Cc(){if(void 0!==yu)return yu;if(typeof document<"u")return document;throw new de(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Hh=(t,r,s)=>null;function xc(t,r,s=!1){return Hh(t,r,s)}class Ly{}class qh{}class Yp{resolveComponentFactory(r){throw function Uy(t){const r=Error(`No component factory found for ${me(t)}.`);return r.ngComponent=t,r}(r)}}let Ku=(()=>{class t{static#e=this.NULL=new Yp}return t})();function Qp(){return Nc(li(),Xe())}function Nc(t,r){return new Fa(xn(t,r))}let Fa=(()=>{class t{constructor(s){this.nativeElement=s}static#e=this.__NG_ELEMENT_ID__=Qp}return t})();function Jp(t){return t instanceof Fa?t.nativeElement:t}class Fm{}let By=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Lm(){const t=Xe(),s=Is(li().index,t);return(Tn(s)?s:t)[nn]}()}return t})(),Um=(()=>{class t{static#e=this.\u0275prov=Ut({token:t,providedIn:"root",factory:()=>null})}return t})();class Bm{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Zh=new Bm("16.2.12"),Xp={};function Jh(t,r=null,s=null,a){const c=kc(t,r,s,a);return c.resolveInjectorInitializers(),c}function kc(t,r=null,s=null,a,c=new Set){const d=[s||St,Vp(t)];return a=a||("object"==typeof t?void 0:me(t)),new ia(d,r||Fh(),a||null,c)}let As=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=sn;static#t=this.NULL=new Op;static create(s,a){if(Array.isArray(s))return Jh({name:""},a,s,"");{const c=s.name??"";return Jh({name:c},s.parent,s.providers,c)}}static#n=this.\u0275prov=Ut({token:t,providedIn:"any",factory:()=>it(dd)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function og(t){return t.ngOriginalError}class Zu{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&og(r);for(;s&&og(s);)s=og(s);return s||null}}function cg(t){return r=>{setTimeout(t,void 0,r)}}const La=class ug extends p.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){let c=r,d=s||(()=>null),m=a;if(r&&"object"==typeof r){const T=r;c=T.next?.bind(T),d=T.error?.bind(T),m=T.complete?.bind(T)}this.__isAsync&&(d=cg(d),c&&(c=cg(c)),m&&(m=cg(m)));const v=super.subscribe({next:c,error:d,complete:m});return r instanceof Y.w0&&r.add(v),v}};function Xh(...t){}class Gi{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new La(!1),this.onMicrotaskEmpty=new La(!1),this.onStable=new La(!1),this.onError=new La(!1),typeof Zone>"u")throw new de(908,!1);Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!a&&s,c.shouldCoalesceRunChangeDetection=a,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function lg(){const t="function"==typeof Xt.requestAnimationFrame;let r=Xt[t?"requestAnimationFrame":"setTimeout"],s=Xt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&r&&s){const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function zm(t){const r=()=>{!function Hm(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Xt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,tf(t),t.isCheckStableRunning=!0,ef(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),tf(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,c,d,m,v)=>{if(function dg(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(v))return s.invokeTask(c,d,m,v);try{return Gm(t),s.invokeTask(c,d,m,v)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||t.shouldCoalesceRunChangeDetection)&&r(),Wm(t)}},onInvoke:(s,a,c,d,m,v,T)=>{try{return Gm(t),s.invoke(c,d,m,v,T)}finally{t.shouldCoalesceRunChangeDetection&&r(),Wm(t)}},onHasTask:(s,a,c,d)=>{s.hasTask(c,d),a===c&&("microTask"==d.change?(t._hasPendingMicrotasks=d.microTask,tf(t),ef(t)):"macroTask"==d.change&&(t.hasPendingMacrotasks=d.macroTask))},onHandleError:(s,a,c,d)=>(s.handleError(c,d),t.runOutsideAngular(()=>t.onError.emit(d)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Gi.isInAngularZone())throw new de(909,!1)}static assertNotInAngularZone(){if(Gi.isInAngularZone())throw new de(909,!1)}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,c){const d=this._inner,m=d.scheduleEventTask("NgZoneEvent: "+c,r,$y,Xh,Xh);try{return d.runTask(m,s,a)}finally{d.cancelTask(m)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const $y={};function ef(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function tf(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Gm(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Wm(t){t._nesting--,ef(t)}class Hy{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new La,this.onMicrotaskEmpty=new La,this.onStable=new La,this.onError=new La}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,c){return r.apply(s,a)}}const qm=new xt("",{providedIn:"root",factory:nf});function nf(){const t=Ct(Gi);let r=!0;const s=new z.y(c=>{r=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{c.next(r),c.complete()})}),a=new z.y(c=>{let d;t.runOutsideAngular(()=>{d=t.onStable.subscribe(()=>{Gi.assertNotInAngularZone(),queueMicrotask(()=>{!r&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(r=!0,c.next(!0))})})});const m=t.onUnstable.subscribe(()=>{Gi.assertInAngularZone(),r&&(r=!1,t.runOutsideAngular(()=>{c.next(!1)}))});return()=>{d.unsubscribe(),m.unsubscribe()}});return(0,ue.T)(s,a.pipe((0,ge.B)()))}function sa(t){return t instanceof Function?t():t}let pg=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Ut({token:t,providedIn:"root",factory:()=>new t})}return t})();function Fc(t){for(;t;){t[tn]|=64;const r=vc(t);if(Xs(t)&&!r)return t;t=r}return null}const Ym=new xt("",{providedIn:"root",factory:()=>!1});let lf=null;function t_(t,r){return t[r]??n_()}function df(t,r){const s=n_();s.producerNode?.length&&(t[r]=lf,s.lView=t,lf=hf())}const Wy={...Au,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Fc(t.lView)},lView:null};function hf(){return Object.create(Wy)}function n_(){return lf??=hf(),lf}const Sn={};function r_(t){ff(jn(),Xe(),ps()+t,!1)}function ff(t,r,s,a){if(!a)if(3==(3&r[tn])){const d=t.preOrderCheckHooks;null!==d&&eu(r,d,s)}else{const d=t.preOrderHooks;null!==d&&uc(r,d,0,s)}Xa(s)}function Lc(t,r=jt.Default){const s=Xe();return null===s?it(t,r):iu(li(),s,Fe(t),r)}function pf(){throw new Error("invalid")}function gf(t,r,s,a,c,d,m,v,T,N,H){const ee=r.blueprint.slice();return ee[Bn]=c,ee[tn]=140|a,(null!==N||t&&2048&t[tn])&&(ee[tn]|=2048),Ru(ee),ee[Fn]=ee[Os]=t,ee[Ln]=s,ee[ds]=m||t&&t[ds],ee[nn]=v||t&&t[nn],ee[mr]=T||t&&t[mr]||null,ee[er]=d,ee[gi]=function Li(){return cy++}(),ee[Br]=H,ee[Eo]=N,ee[dr]=2==r.type?t[dr]:ee,ee}function wl(t,r,s,a,c){let d=t.data[r];if(null===d)d=function Sd(t,r,s,a,c){const d=va(),m=Po(),T=t.data[r]=function Zy(t,r,s,a,c,d){let m=r?r.injectorIndex:-1,v=0;return function Hi(){return null!==Ot.skipHydrationRootTNode}()&&(v|=128),{type:s,index:a,insertBeforeIndex:null,injectorIndex:m,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:v,providerIndexes:0,value:c,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?d:d&&d.parent,s,r,a,c);return null===t.firstChild&&(t.firstChild=T),null!==d&&(m?null==d.child&&null!==T.parent&&(d.child=T):null===d.next&&(d.next=T,T.prev=d)),T}(t,r,s,a,c),function C(){return Ot.lFrame.inI18n}()&&(d.flags|=32);else if(64&d.type){d.type=s,d.value=a,d.attrs=c;const m=function qo(){const t=Ot.lFrame,r=t.currentTNode;return t.isParent?r:r.parent}();d.injectorIndex=null===m?-1:m.injectorIndex}return Yr(d,!0),d}function bd(t,r,s,a){if(0===s)return-1;const c=r.length;for(let d=0;d<s;d++)r.push(a),t.blueprint.push(a),t.data.push(null);return c}function mf(t,r,s,a,c){const d=t_(r,ks),m=ps(),v=2&a;try{Xa(-1),v&&r.length>cn&&ff(t,r,cn,!1),_t(v?2:0,c);const N=v?d:null,H=qa(N);try{null!==N&&(N.dirty=!1),s(a,c)}finally{Oi(N,H)}}finally{v&&null===r[ks]&&df(r,ks),Xa(m),_t(v?3:1,c)}}function Rd(t,r,s){if(Js(r)){const a=mi(null);try{const d=r.directiveEnd;for(let m=r.directiveStart;m<d;m++){const v=t.data[m];v.contentQueries&&v.contentQueries(1,s[m],m)}}finally{mi(a)}}}function Pd(t,r,s){It()&&(function l_(t,r,s,a){const c=s.directiveStart,d=s.directiveEnd;_r(s)&&function Xy(t,r,s){const a=xn(r,t),c=Tl(s);let m=16;s.signals?m=4096:s.onPush&&(m=64);const v=Nd(t,gf(t,c,null,m,a,r,null,t[ds].rendererFactory.createRenderer(a,s),null,null,null));t[r.index]=v}(r,s,t.data[c+s.componentOffset]),t.firstCreatePass||nu(s,r),ns(a,r);const m=s.initialInputs;for(let v=c;v<d;v++){const T=t.data[v],N=Oo(r,t,v,s);ns(N,r),null!==m&&ev(0,v-c,N,T,0,m),Ni(T)&&(Is(s.index,r)[Ln]=Oo(r,t,v,s))}}(t,r,s,xn(s,r)),64==(64&s.flags)&&vf(t,r,s))}function vg(t,r,s=xn){const a=r.localNames;if(null!==a){let c=r.index+1;for(let d=0;d<a.length;d+=2){const m=a[d+1],v=-1===m?s(r,t):t[m];t[c++]=v}}}function Tl(t){const r=t.tView;return null===r||r.incompleteFirstPass?t.tView=Eg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):r}function Eg(t,r,s,a,c,d,m,v,T,N,H){const ee=cn+a,Ee=ee+c,Ae=function Ig(t,r){const s=[];for(let a=0;a<r;a++)s.push(a<t?null:Sn);return s}(ee,Ee),Ye="function"==typeof N?N():N;return Ae[vt]={type:t,blueprint:Ae,template:s,queries:null,viewQuery:v,declTNode:r,data:Ae.slice().fill(null,ee),bindingStartIndex:ee,expandoStartIndex:Ee,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:T,consts:Ye,incompleteFirstPass:!1,ssrId:H}}let Dg=t=>null;function o_(t,r,s,a){for(let c in t)if(t.hasOwnProperty(c)){s=null===s?{}:s;const d=t[c];null===a?Md(s,r,c,d):a.hasOwnProperty(c)&&Md(s,r,a[c],d)}return s}function Md(t,r,s,a){t.hasOwnProperty(s)?t[s].push(r,a):t[s]=[r,a]}function Al(t,r,s,a){if(It()){const c=null===a?null:{"":-1},d=function bl(t,r){const s=t.directiveRegistry;let a=null,c=null;if(s)for(let d=0;d<s.length;d++){const m=s[d];if(Rs(r,m.selectors,!1))if(a||(a=[]),Ni(m))if(null!==m.findHostDirectiveDefs){const v=[];c=c||new Map,m.findHostDirectiveDefs(m,v,c),a.unshift(...v,m),xd(t,r,v.length)}else a.unshift(m),xd(t,r,0);else c=c||new Map,m.findHostDirectiveDefs?.(m,a,c),a.push(m)}return null===a?null:[a,c]}(t,s);let m,v;null===d?m=v=null:[m,v]=d,null!==m&&yf(t,r,s,m,c,v),c&&function Yy(t,r,s){if(r){const a=t.localNames=[];for(let c=0;c<r.length;c+=2){const d=s[r[c+1]];if(null==d)throw new de(-301,!1);a.push(r[c],d)}}}(s,a,c)}s.mergedAttrs=Hr(s.mergedAttrs,s.attrs)}function yf(t,r,s,a,c,d){for(let N=0;N<a.length;N++)xo(nu(s,r),t,a[N].type);!function Jy(t,r,s){t.flags|=1,t.directiveStart=r,t.directiveEnd=r+s,t.providerIndexes=r}(s,t.data.length,a.length);for(let N=0;N<a.length;N++){const H=a[N];H.providersResolver&&H.providersResolver(H)}let m=!1,v=!1,T=bd(t,r,a.length,null);for(let N=0;N<a.length;N++){const H=a[N];s.mergedAttrs=Hr(s.mergedAttrs,H.hostAttrs),h_(t,s,r,T,H),Qy(T,H,c),null!==H.contentQueries&&(s.flags|=4),(null!==H.hostBindings||null!==H.hostAttrs||0!==H.hostVars)&&(s.flags|=64);const ee=H.type.prototype;!m&&(ee.ngOnChanges||ee.ngOnInit||ee.ngDoCheck)&&((t.preOrderHooks??=[]).push(s.index),m=!0),!v&&(ee.ngOnChanges||ee.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(s.index),v=!0),T++}!function wg(t,r,s){const c=r.directiveEnd,d=t.data,m=r.attrs,v=[];let T=null,N=null;for(let H=r.directiveStart;H<c;H++){const ee=d[H],Ee=s?s.get(ee):null,Ye=Ee?Ee.outputs:null;T=o_(ee.inputs,H,T,Ee?Ee.inputs:null),N=o_(ee.outputs,H,N,Ye);const ht=null===T||null===m||us(r)?null:tv(T,H,m);v.push(ht)}null!==T&&(T.hasOwnProperty("class")&&(r.flags|=8),T.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=v,r.inputs=T,r.outputs=N}(t,s,d)}function vf(t,r,s){const a=s.directiveStart,c=s.directiveEnd,d=s.index,m=function x(){return Ot.lFrame.currentDirectiveIndex}();try{Xa(d);for(let v=a;v<c;v++){const T=t.data[v],N=r[v];W(v),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&d_(T,N)}}finally{Xa(-1),W(m)}}function d_(t,r){null!==t.hostBindings&&t.hostBindings(1,r)}function xd(t,r,s){r.componentOffset=s,(t.components??=[]).push(r.index)}function Qy(t,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=t;Ni(r)&&(s[""]=t)}}function h_(t,r,s,a,c){t.data[a]=c;const d=c.factory||(c.factory=ui(c.type)),m=new wa(d,Ni(c),Lc);t.blueprint[a]=m,s[a]=m,function c_(t,r,s,a,c){const d=c.hostBindings;if(d){let m=t.hostBindingOpCodes;null===m&&(m=t.hostBindingOpCodes=[]);const v=~r.index;(function Sl(t){let r=t.length;for(;r>0;){const s=t[--r];if("number"==typeof s&&s<0)return s}return 0})(m)!=v&&m.push(v),m.push(s,a,d)}}(t,r,a,bd(t,s,c.hostVars,Sn),c)}function oa(t,r,s,a,c,d){const m=xn(t,r);!function Ag(t,r,s,a,c,d,m){if(null==d)t.removeAttribute(r,c,s);else{const v=null==m?Te(d):m(d,a||"",c);t.setAttribute(r,c,v,s)}}(r[nn],m,d,t.value,s,a,c)}function ev(t,r,s,a,c,d){const m=d[r];if(null!==m)for(let v=0;v<m.length;)f_(a,s,m[v++],m[v++],m[v++])}function f_(t,r,s,a,c){const d=mi(null);try{const m=t.inputTransforms;null!==m&&m.hasOwnProperty(a)&&(c=m[a].call(r,c)),null!==t.setInput?t.setInput(r,c,s,a):r[a]=c}finally{mi(d)}}function tv(t,r,s){let a=null,c=0;for(;c<s.length;){const d=s[c];if(0!==d)if(5!==d){if("number"==typeof d)break;if(t.hasOwnProperty(d)){null===a&&(a=[]);const m=t[d];for(let v=0;v<m.length;v+=2)if(m[v]===r){a.push(d,m[v+1],s[c+1]);break}}c+=2}else c+=2;else c+=4}return a}function p_(t,r,s,a){return[t,!0,!1,r,null,0,a,s,null,null,null]}function g_(t,r){const s=t.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const d=s[a+1];if(-1!==d){const m=t.data[d];be(s[a]),m.contentQueries(2,r[d],d)}}}function Nd(t,r){return t[ni]?t[Ns][zr]=r:t[ni]=r,t[Ns]=r,r}function Ef(t,r,s){be(0);const a=mi(null);try{r(t,s)}finally{mi(a)}}function Sg(t){return t[pi]||(t[pi]=[])}function bg(t){return t.cleanup||(t.cleanup=[])}function Od(t,r){const s=t[mr],a=s?s.get(Zu,null):null;a&&a.handleError(r)}function Hn(t,r,s,a,c){for(let d=0;d<s.length;){const m=s[d++],v=s[d++];f_(t.data[m],r[m],a,v,c)}}function Ua(t,r,s){const a=et(r,t);!function na(t,r,s){t.setValue(r,s)}(t[nn],a,s)}function __(t,r){const s=Is(r,t),a=s[vt];!function kd(t,r){for(let s=r.length;s<t.blueprint.length;s++)r.push(t.blueprint[s])}(a,s);const c=s[Bn];null!==c&&null===s[Br]&&(s[Br]=xc(c,s[mr])),If(a,s,s[Ln])}function If(t,r,s){$n(r);try{const a=t.viewQuery;null!==a&&Ef(1,a,s);const c=t.template;null!==c&&mf(t,r,c,1,s),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&g_(t,r),t.staticViewQueries&&Ef(2,t.viewQuery,s);const d=t.components;null!==d&&function gs(t,r){for(let s=0;s<r.length;s++)__(t,r[s])}(r,d)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),a}finally{r[tn]&=-5,Ja()}}let fi=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(s,a,c){const d=typeof Zone>"u"?null:Zone.current,m=function Ke(t,r,s){const a=Object.create(sr);s&&(a.consumerAllowSignalWrites=!0),a.fn=t,a.schedule=r;const c=m=>{a.cleanupFn=m};return a.ref={notify:()=>js(a),run:()=>{if(a.dirty=!1,a.hasRun&&!Ka(a))return;a.hasRun=!0;const m=qa(a);try{a.cleanupFn(),a.cleanupFn=Ft,a.fn(c)}finally{Oi(a,m)}},cleanup:()=>a.cleanupFn()},a.ref}(s,N=>{this.all.has(N)&&this.queue.set(N,d)},c);let v;this.all.add(m),m.notify();const T=()=>{m.cleanup(),v?.(),this.all.delete(m),this.queue.delete(m)};return v=a?.onDestroy(T),{destroy:T}}flush(){if(0!==this.queue.size)for(const[s,a]of this.queue)this.queue.delete(s),a?a.run(()=>s.run()):s.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Ut({token:t,providedIn:"root",factory:()=>new t})}return t})();function Df(t,r,s){let a=s?t.styles:null,c=s?t.classes:null,d=0;if(null!==r)for(let m=0;m<r.length;m++){const v=r[m];"number"==typeof v?d=v:1==d?c=ze(c,v):2==d&&(a=ze(a,v+": "+r[++m]+";"))}s?t.styles=a:t.stylesWithoutHost=a,s?t.classes=c:t.classesWithoutHost=c}function Vd(t,r,s,a,c=!1){for(;null!==s;){const d=r[s.index];null!==d&&a.push(ot(d)),jr(d)&&Pg(d,a);const m=s.type;if(8&m)Vd(t,r,s.child,a);else if(32&m){const v=fp(s,r);let T;for(;T=v();)a.push(T)}else if(16&m){const v=$u(r,s);if(Array.isArray(v))a.push(...v);else{const T=vc(r[dr]);Vd(T[vt],T,v,a,!0)}}s=c?s.projectionNext:s.next}return a}function Pg(t,r){for(let s=br;s<t.length;s++){const a=t[s],c=a[vt].firstChild;null!==c&&Vd(a[vt],a,c,r)}t[ii]!==t[Bn]&&r.push(t[ii])}function wf(t,r,s,a=!0){const c=r[ds],d=c.rendererFactory,m=c.afterRenderEventManager;d.begin?.(),m?.begin();try{Tf(t,r,t.template,s)}catch(T){throw a&&Od(r,T),T}finally{d.end?.(),c.effectManager?.flush(),m?.end()}}function Tf(t,r,s,a){const c=r[tn];if(256!=(256&c)){r[ds].effectManager?.flush(),$n(r);try{Ru(r),function Kc(t){return Ot.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==s&&mf(t,r,s,2,a);const m=3==(3&c);if(m){const N=t.preOrderCheckHooks;null!==N&&eu(r,N,null)}else{const N=t.preOrderHooks;null!==N&&uc(r,N,0,null),Zo(r,0)}if(function rv(t){for(let r=hm(t);null!==r;r=Ei(r)){if(!r[Nr])continue;const s=r[Ls];for(let a=0;a<s.length;a++){go(s[a])}}}(r),v_(r,2),null!==t.contentQueries&&g_(t,r),m){const N=t.contentCheckHooks;null!==N&&eu(r,N)}else{const N=t.contentHooks;null!==N&&uc(r,N,1),Zo(r,1)}!function i_(t,r){const s=t.hostBindingOpCodes;if(null===s)return;const a=t_(r,Vs);try{for(let c=0;c<s.length;c++){const d=s[c];if(d<0)Xa(~d);else{const m=d,v=s[++c],T=s[++c];A(v,m),a.dirty=!1;const N=qa(a);try{T(2,r[m])}finally{Oi(a,N)}}}}finally{null===r[Vs]&&df(r,Vs),Xa(-1)}}(t,r);const v=t.components;null!==v&&E_(r,v,0);const T=t.viewQuery;if(null!==T&&Ef(2,T,a),m){const N=t.viewCheckHooks;null!==N&&eu(r,N)}else{const N=t.viewHooks;null!==N&&uc(r,N,2),Zo(r,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),r[tn]&=-73,_a(r)}finally{Ja()}}}function v_(t,r){for(let s=hm(t);null!==s;s=Ei(s))for(let a=br;a<s.length;a++)iv(s[a],r)}function Wr(t,r,s){iv(Is(r,t),s)}function iv(t,r){if(!function rc(t){return 128==(128&t[tn])}(t))return;const s=t[vt],a=t[tn];if(80&a&&0===r||1024&a||2===r)Tf(s,t,s.template,t[Ln]);else if(t[xi]>0){v_(t,1);const c=s.components;null!==c&&E_(t,c,1)}}function E_(t,r,s){for(let a=0;a<r.length;a++)Wr(t,r[a],s)}class qr{get rootNodes(){const r=this._lView,s=r[vt];return Vd(s,r,s.firstChild,[])}constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ln]}set context(r){this._lView[Ln]=r}get destroyed(){return 256==(256&this._lView[tn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[Fn];if(jr(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(hl(r,a),Vu(s,a))}this._attachedToViewContainer=!1}pp(this._lView[vt],this._lView)}onDestroy(r){!function ya(t,r){if(256==(256&t[tn]))throw new de(911,!1);null===t[Yi]&&(t[Yi]=[]),t[Yi].push(r)}(this._lView,r)}markForCheck(){Fc(this._cdRefInjectingView||this._lView)}detach(){this._lView[tn]&=-129}reattach(){this._lView[tn]|=128}detectChanges(){wf(this._lView[vt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new de(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function pm(t,r){wc(t,r,r[nn],2,null,null)}(this._lView[vt],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new de(902,!1);this._appRef=r}}class I_ extends qr{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;wf(r[vt],r,r[Ln],!1)}checkNoChanges(){}get context(){return null}}class D_ extends Ku{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=un(r);return new Fd(s,this.ngModule)}}function w_(t){const r=[];for(let s in t)t.hasOwnProperty(s)&&r.push({propName:t[s],templateName:s});return r}class sv{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,a){a=Vt(a);const c=this.injector.get(r,Xp,a);return c!==Xp||s===Xp?c:this.parentInjector.get(r,s,a)}}class Fd extends qh{get inputs(){const r=this.componentDef,s=r.inputTransforms,a=w_(r.inputs);if(null!==s)for(const c of a)s.hasOwnProperty(c.propName)&&(c.transform=s[c.propName]);return a}get outputs(){return w_(this.componentDef.outputs)}constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Ri(t){return t.map(fa).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}create(r,s,a,c){let d=(c=c||this.ngModule)instanceof Ks?c:c?.injector;d&&null!==this.componentDef.getStandaloneInjector&&(d=this.componentDef.getStandaloneInjector(d)||d);const m=d?new sv(r,d):r,v=m.get(Fm,null);if(null===v)throw new de(407,!1);const ee={rendererFactory:v,sanitizer:m.get(Um,null),effectManager:m.get(fi,null),afterRenderEventManager:m.get(pg,null)},Ee=v.createRenderer(null,this.componentDef),Ae=this.componentDef.selectors[0][0]||"div",Ye=a?function s_(t,r,s,a){const d=a.get(Ym,!1)||s===Pt.ShadowDom,m=t.selectRootElement(r,d);return function Cl(t){Dg(t)}(m),m}(Ee,a,this.componentDef.encapsulation,m):Jl(Ee,Ae,function T_(t){const r=t.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(Ae)),rn=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let st=null;null!==Ye&&(st=xc(Ye,m,!0));const bn=Eg(0,null,null,1,0,null,null,null,null,null,null),Gn=gf(null,bn,null,rn,null,null,ee,Ee,m,null,st);let $r,Uo;$n(Gn);try{const Wc=this.componentDef;let Hf,RE=null;Wc.findHostDirectiveDefs?(Hf=[],RE=new Map,Wc.findHostDirectiveDefs(Wc,Hf,RE),Hf.push(Wc)):Hf=[Wc];const WA=function av(t,r){const s=t[vt],a=cn;return t[a]=r,wl(s,a,2,"#host",null)}(Gn,Ye),qA=function UE(t,r,s,a,c,d,m){const v=c[vt];!function uv(t,r,s,a){for(const c of t)r.mergedAttrs=Hr(r.mergedAttrs,c.hostAttrs);null!==r.mergedAttrs&&(Df(r,r.mergedAttrs,!0),null!==s&&fl(a,s,r))}(a,t,r,m);let T=null;null!==r&&(T=xc(r,c[mr]));const N=d.rendererFactory.createRenderer(r,s);let H=16;s.signals?H=4096:s.onPush&&(H=64);const ee=gf(c,Tl(s),null,H,c[t.index],t,d,N,null,null,T);return v.firstCreatePass&&xd(v,t,a.length-1),Nd(c,ee),c[t.index]=ee}(WA,Ye,Wc,Hf,Gn,ee,Ee);Uo=nc(bn,cn),Ye&&function C_(t,r,s,a){if(a)Vn(t,s,["ng-version",Zh.full]);else{const{attrs:c,classes:d}=function pa(t){const r=[],s=[];let a=1,c=2;for(;a<t.length;){let d=t[a];if("string"==typeof d)2===c?""!==d&&r.push(d,t[++a]):8===c&&s.push(d);else{if(!gr(c))break;c=d}a++}return{attrs:r,classes:s}}(r.selectors[0]);c&&Vn(t,s,c),d&&d.length>0&&rd(t,s,d.join(" "))}}(Ee,Wc,Ye,a),void 0!==s&&function Ld(t,r,s){const a=t.projection=[];for(let c=0;c<r.length;c++){const d=s[c];a.push(null!=d?Array.from(d):null)}}(Uo,this.ngContentSelectors,s),$r=function cv(t,r,s,a,c,d){const m=li(),v=c[vt],T=xn(m,c);yf(v,c,m,s,null,a);for(let H=0;H<s.length;H++)ns(Oo(c,v,m.directiveStart+H,m),c);vf(v,c,m),T&&ns(T,c);const N=Oo(c,v,m.directiveStart+m.componentOffset,m);if(t[Ln]=c[Ln]=N,null!==d)for(const H of d)H(N,r);return Rd(v,m,t),N}(qA,Wc,Hf,RE,Gn,[lv]),If(bn,Gn,null)}finally{Ja()}return new ov(this.componentType,$r,Nc(Uo,Gn),Gn,Uo)}}class ov extends Ly{constructor(r,s,a,c,d){super(),this.location=a,this._rootLView=c,this._tNode=d,this.previousInputValues=null,this.instance=s,this.hostView=this.changeDetectorRef=new I_(c),this.componentType=r}setInput(r,s){const a=this._tNode.inputs;let c;if(null!==a&&(c=a[r])){if(this.previousInputValues??=new Map,this.previousInputValues.has(r)&&Object.is(this.previousInputValues.get(r),s))return;const d=this._rootLView;Hn(d[vt],d,c,r,s),this.previousInputValues.set(r,s),Fc(Is(this._tNode.index,d))}}get injector(){return new Xi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function lv(){const t=li();Jc(Xe()[vt],t)}function ja(t){let r=function Iu(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),s=!0;const a=[t];for(;r;){let c;if(Ni(t))c=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new de(903,!1);c=r.\u0275dir}if(c){if(s){a.push(c);const m=t;m.inputs=$a(t.inputs),m.inputTransforms=$a(t.inputTransforms),m.declaredInputs=$a(t.declaredInputs),m.outputs=$a(t.outputs);const v=c.hostBindings;v&&hv(t,v);const T=c.viewQuery,N=c.contentQueries;if(T&&Cf(t,T),N&&dv(t,N),re(t.inputs,c.inputs),re(t.declaredInputs,c.declaredInputs),re(t.outputs,c.outputs),null!==c.inputTransforms&&(null===m.inputTransforms&&(m.inputTransforms={}),re(m.inputTransforms,c.inputTransforms)),Ni(c)&&c.data.animation){const H=t.data;H.animation=(H.animation||[]).concat(c.data.animation)}}const d=c.features;if(d)for(let m=0;m<d.length;m++){const v=d[m];v&&v.ngInherit&&v(t),v===ja&&(s=!1)}}r=Object.getPrototypeOf(r)}!function BE(t){let r=0,s=null;for(let a=t.length-1;a>=0;a--){const c=t[a];c.hostVars=r+=c.hostVars,c.hostAttrs=Hr(c.hostAttrs,s=Hr(s,c.hostAttrs))}}(a)}function $a(t){return t===Wt?{}:t===St?[]:t}function Cf(t,r){const s=t.viewQuery;t.viewQuery=s?(a,c)=>{r(a,c),s(a,c)}:r}function dv(t,r){const s=t.contentQueries;t.contentQueries=s?(a,c,d)=>{r(a,c,d),s(a,c,d)}:r}function hv(t,r){const s=t.hostBindings;t.hostBindings=s?(a,c)=>{r(a,c),s(a,c)}:r}function b_(t){const r=t.inputConfig,s={};for(const a in r)if(r.hasOwnProperty(a)){const c=r[a];Array.isArray(c)&&c[2]&&(s[a]=c[2])}t.inputTransforms=s}function bf(t){return!!Rf(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Rf(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function ss(t,r,s){return!Object.is(t[r],s)&&(t[r]=s,!0)}function Pl(t,r,s,a){const c=Xe();return ss(c,Hs(),r)&&(jn(),oa(Qr(),c,t,r,s,a)),Pl}function Ml(t,r,s,a,c,d){const v=function ua(t,r,s,a){const c=ss(t,r,s);return ss(t,r+1,a)||c}(t,function wi(){return Ot.lFrame.bindingIndex}(),s,c);return E(2),v?r+Te(s)+a+Te(c)+d:Sn}function U_(t,r,s,a,c,d,m,v){const T=Xe(),N=jn(),H=t+cn,ee=N.firstCreatePass?function Rv(t,r,s,a,c,d,m,v,T){const N=r.consts,H=wl(r,t,4,m||null,po(N,v));Al(r,s,H,po(N,T)),Jc(r,H);const ee=H.tView=Eg(2,H,a,c,d,r.directiveRegistry,r.pipeRegistry,null,r.schemas,N,null);return null!==r.queries&&(r.queries.template(r,H),ee.queries=r.queries.embeddedTView(H)),H}(H,N,T,r,s,a,c,d,m):N.data[H];Yr(ee,!1);const Ee=B_(N,T,ee,t);Pu()&&Dc(N,T,Ee,ee),ns(Ee,T),Nd(T,T[H]=p_(Ee,T,Ee,ee)),vs(ee)&&Pd(N,T,ee),null!=m&&vg(T,ee,v)}let B_=function Gc(t,r,s,a){return _o(!0),r[nn].createComment("")};function Ug(t,r,s){const a=Xe();return ss(a,Hs(),r)&&function Zs(t,r,s,a,c,d,m,v){const T=xn(r,s);let H,N=r.inputs;!v&&null!=N&&(H=N[a])?(Hn(t,s,H,a,c),_r(r)&&function a_(t,r){const s=Is(r,t);16&s[tn]||(s[tn]|=64)}(s,r.index)):3&r.type&&(a=function Tg(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(a),c=null!=m?m(c,r.value||"",a):c,d.setProperty(T,a,c))}(jn(),Qr(),a,t,r,a[nn],s,!1),Ug}function Bg(t,r,s,a,c){const m=c?"class":"style";Hn(t,s,r.inputs[m],m,a)}function jg(t,r,s,a){const c=Xe(),d=jn(),m=cn+t,v=c[nn],T=d.firstCreatePass?function xv(t,r,s,a,c,d){const m=r.consts,T=wl(r,t,2,a,po(m,c));return Al(r,s,T,po(m,d)),null!==T.attrs&&Df(T,T.attrs,!1),null!==T.mergedAttrs&&Df(T,T.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,T),T}(m,d,c,r,s,a):d.data[m],N=Nv(d,c,T,v,r,t);c[m]=N;const H=vs(T);return Yr(T,!0),fl(v,N,T),32!=(32&T.flags)&&Pu()&&Dc(d,c,N,T),0===function Jn(){return Ot.lFrame.elementDepthCount}()&&ns(N,c),function sc(){Ot.lFrame.elementDepthCount++}(),H&&(Pd(d,c,T),Rd(d,T,c)),null!==a&&vg(c,T),jg}function $g(){let t=li();Po()?function Re(){Ot.lFrame.isParent=!1}():(t=t.parent,Yr(t,!1));const r=t;(function qc(t){return Ot.skipHydrationRootTNode===t})(r)&&function Yd(){Ot.skipHydrationRootTNode=null}(),function Vr(){Ot.lFrame.elementDepthCount--}();const s=jn();return s.firstCreatePass&&(Jc(s,t),Js(t)&&s.queries.elementEnd(t)),null!=r.classesWithoutHost&&function Xd(t){return 0!=(8&t.flags)}(r)&&Bg(s,r,Xe(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Ta(t){return 0!=(16&t.flags)}(r)&&Bg(s,r,Xe(),r.stylesWithoutHost,!1),$g}function j_(t,r,s,a){return jg(t,r,s,a),$g(),j_}let Nv=(t,r,s,a,c,d)=>(_o(!0),Jl(a,c,function Yc(){return Ot.lFrame.currentNamespace}()));function H_(){return Xe()}function Gg(t){return!!t&&"function"==typeof t.then}function z_(t){return!!t&&"function"==typeof t.subscribe}function Wg(t,r,s,a){const c=Xe(),d=jn(),m=li();return function Uv(t,r,s,a,c,d,m){const v=vs(a),N=t.firstCreatePass&&bg(t),H=r[Ln],ee=Sg(r);let Ee=!0;if(3&a.type||m){const ht=xn(a,r),kt=m?m(ht):ht,rn=ee.length,st=m?Gn=>m(ot(Gn[a.index])):a.index;let bn=null;if(!m&&v&&(bn=function GE(t,r,s,a){const c=t.cleanup;if(null!=c)for(let d=0;d<c.length-1;d+=2){const m=c[d];if(m===s&&c[d+1]===a){const v=r[pi],T=c[d+2];return v.length>T?v[T]:null}"string"==typeof m&&(d+=2)}return null}(t,r,c,a.index)),null!==bn)(bn.__ngLastListenerFn__||bn).__ngNextListenerFn__=d,bn.__ngLastListenerFn__=d,Ee=!1;else{d=W_(a,r,H,d,!1);const Gn=s.listen(kt,c,d);ee.push(d,Gn),N&&N.push(c,st,rn,rn+1)}}else d=W_(a,r,H,d,!1);const Ae=a.outputs;let Ye;if(Ee&&null!==Ae&&(Ye=Ae[c])){const ht=Ye.length;if(ht)for(let kt=0;kt<ht;kt+=2){const $r=r[Ye[kt]][Ye[kt+1]].subscribe(d),Uo=ee.length;ee.push(d,$r),N&&N.push(c,a.index,Uo,-(Uo+1))}}}(d,c,c[nn],m,t,r,a),Wg}function qg(t,r,s,a){try{return _t(6,r,s),!1!==s(a)}catch(c){return Od(t,c),!1}finally{_t(7,r,s)}}function W_(t,r,s,a,c){return function d(m){if(m===Function)return a;Fc(t.componentOffset>-1?Is(t.index,r):r);let T=qg(r,s,a,m),N=d.__ngNextListenerFn__;for(;N;)T=qg(r,s,N,m)&&T,N=N.__ngNextListenerFn__;return c&&!1===T&&m.preventDefault(),T}}function Bv(t=1){return function Da(t){return(Ot.lFrame.contextLView=function Zc(t,r){for(;t>0;)r=r[Os],t--;return r}(t,Ot.lFrame.contextLView))[Ln]}(t)}function l(t,r){return t<<17|r<<2}function f(t){return t>>17&32767}function k(t){return 2|t}function $(t){return(131068&t)>>2}function X(t,r){return-131069&t|r<<2}function Oe(t){return 1|t}function vn(t,r,s,a,c){const d=t[s+1],m=null===r;let v=a?f(d):$(d),T=!1;for(;0!==v&&(!1===T||m);){const H=t[v+1];_n(t[v],r)&&(T=!0,t[v+1]=a?Oe(H):k(H)),v=a?f(H):$(H)}T&&(t[s+1]=a?k(d):Oe(d))}function _n(t,r){return null===t||null==r||(Array.isArray(t)?t[1]:t)===r||!(!Array.isArray(t)||"string"!=typeof r)&&cu(t,r)>=0}function Hv(t,r){return function Tu(t,r,s,a){const c=Xe(),d=jn(),m=E(2);d.firstUpdatePass&&function eI(t,r,s,a){const c=t.data;if(null===c[s+1]){const d=c[ps()],m=function XE(t,r){return r>=t.expandoStartIndex}(t,s);(function iI(t,r){return 0!=(t.flags&(r?8:16))})(d,a)&&null===r&&!m&&(r=!1),r=function BD(t,r,s,a){const c=function ne(t){const r=Ot.lFrame.currentDirectiveIndex;return-1===r?null:t[r]}(t);let d=a?r.residualClasses:r.residualStyles;if(null===c)0===(a?r.classBindings:r.styleBindings)&&(s=Yg(s=zv(null,t,r,s,a),r.attrs,a),d=null);else{const m=r.directiveStylingLast;if(-1===m||t[m]!==c)if(s=zv(c,t,r,s,a),null===d){let T=function jD(t,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==$(a))return t[f(a)]}(t,r,a);void 0!==T&&Array.isArray(T)&&(T=zv(null,t,r,T[1],a),T=Yg(T,r.attrs,a),function $D(t,r,s,a){t[f(s?r.classBindings:r.styleBindings)]=a}(t,r,a,T))}else d=function HD(t,r,s){let a;const c=r.directiveEnd;for(let d=1+r.directiveStylingLast;d<c;d++)a=Yg(a,t[d].hostAttrs,s);return Yg(a,r.attrs,s)}(t,r,a)}return void 0!==d&&(a?r.residualClasses=d:r.residualStyles=d),s}(c,d,r,a),function wt(t,r,s,a,c,d){let m=d?r.classBindings:r.styleBindings,v=f(m),T=$(m);t[a]=s;let H,N=!1;if(Array.isArray(s)?(H=s[1],(null===H||cu(s,H)>0)&&(N=!0)):H=s,c)if(0!==T){const Ee=f(t[v+1]);t[a+1]=l(Ee,v),0!==Ee&&(t[Ee+1]=X(t[Ee+1],a)),t[v+1]=function S(t,r){return 131071&t|r<<17}(t[v+1],a)}else t[a+1]=l(v,0),0!==v&&(t[v+1]=X(t[v+1],a)),v=a;else t[a+1]=l(T,0),0===v?v=a:t[T+1]=X(t[T+1],a),T=a;N&&(t[a+1]=k(t[a+1])),vn(t,H,a,!0),vn(t,H,a,!1),function hn(t,r,s,a,c){const d=c?t.residualClasses:t.residualStyles;null!=d&&"string"==typeof r&&cu(d,r)>=0&&(s[a+1]=Oe(s[a+1]))}(r,H,t,a,d),m=l(v,T),d?r.classBindings=m:r.styleBindings=m}(c,d,r,s,m,a)}}(d,t,m,a),r!==Sn&&ss(c,m,r)&&function nI(t,r,s,a,c,d,m,v){if(!(3&r.type))return;const T=t.data,N=T[v+1],H=function fe(t){return 1==(1&t)}(N)?rI(T,r,s,c,$(N),m):void 0;q_(H)||(q_(d)||function w(t){return 2==(2&t)}(N)&&(d=rI(T,null,s,c,v,m)),function Em(t,r,s,a,c){if(r)c?t.addClass(s,a):t.removeClass(s,a);else{let d=-1===a.indexOf("-")?void 0:gu.DashCase;null==c?t.removeStyle(s,a,d):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),d|=gu.Important),t.setStyle(s,a,c,d))}}(a,m,et(ps(),s),c,d))}(d,d.data[ps()],c,c[nn],t,c[m+1]=function qD(t,r){return null==t||""===t||("string"==typeof r?t+=r:"object"==typeof t&&(t=me(Oa(t)))),t}(r,s),a,m)}(t,r,null,!0),Hv}function zv(t,r,s,a,c){let d=null;const m=s.directiveEnd;let v=s.directiveStylingLast;for(-1===v?v=s.directiveStart:v++;v<m&&(d=r[v],a=Yg(a,d.hostAttrs,c),d!==t);)v++;return null!==t&&(s.directiveStylingLast=v),a}function Yg(t,r,s){const a=s?1:2;let c=-1;if(null!==r)for(let d=0;d<r.length;d++){const m=r[d];"number"==typeof m?c=m:c===a&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ws(t,m,!!s||r[++d]))}return void 0===t?null:t}function rI(t,r,s,a,c,d){const m=null===r;let v;for(;c>0;){const T=t[c],N=Array.isArray(T),H=N?T[1]:T,ee=null===H;let Ee=s[c+1];Ee===Sn&&(Ee=ee?St:void 0);let Ae=ee?oo(Ee,a):H===a?Ee:void 0;if(N&&!q_(Ae)&&(Ae=oo(T,a)),q_(Ae)&&(v=Ae,m))return v;const Ye=t[c+1];c=m?f(Ye):$(Ye)}if(null!==r){let T=d?r.residualClasses:r.residualStyles;null!=T&&(v=oo(T,a))}return v}function q_(t){return void 0!==t}function sI(t,r=""){const s=Xe(),a=jn(),c=t+cn,d=a.firstCreatePass?wl(a,c,1,r,null):a.data[c],m=oI(a,s,d,r,t);s[c]=m,Pu()&&Dc(a,s,m,d),Yr(d,!1)}let oI=(t,r,s,a,c)=>(_o(!0),function Bu(t,r){return t.createText(r)}(r[nn],a));function Gv(t){return K_("",t,""),Gv}function K_(t,r,s){const a=Xe(),c=function Ha(t,r,s,a){return ss(t,Hs(),s)?r+Te(s)+a:Sn}(a,t,r,s);return c!==Sn&&Ua(a,ps(),c),K_}function Wv(t,r,s,a,c){const d=Xe(),m=Ml(d,t,r,s,a,c);return m!==Sn&&Ua(d,ps(),m),Wv}const Gd=void 0;var gw=["en",[["a","p"],["AM","PM"],Gd],[["AM","PM"],Gd,Gd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Gd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Gd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Gd,"{1} 'at' {0}",Gd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function pw(t){const s=Math.floor(Math.abs(t)),a=t.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let Ff={};function qv(t){const r=function mw(t){return t.toLowerCase().replace(/_/g,"-")}(t);let s=AI(r);if(s)return s;const a=r.split("-")[0];if(s=AI(a),s)return s;if("en"===a)return gw;throw new de(701,!1)}function CI(t){return qv(t)[Lf.PluralCase]}function AI(t){return t in Ff||(Ff[t]=Xt.ng&&Xt.ng.common&&Xt.ng.common.locales&&Xt.ng.common.locales[t]),Ff[t]}var Lf=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Lf||{});const Uf="en-US";let SI=Uf;function Yv(t,r,s,a,c){if(t=Fe(t),Array.isArray(t))for(let d=0;d<t.length;d++)Yv(t[d],r,s,a,c);else{const d=jn(),m=Xe(),v=li();let T=qu(t)?t:Fe(t.provide);const N=Bp(t),H=1048575&v.providerIndexes,ee=v.directiveStart,Ee=v.providerIndexes>>20;if(qu(t)||!t.multi){const Ae=new wa(N,c,Lc),Ye=Jv(T,r,c?H:H+Ee,ee);-1===Ye?(xo(nu(v,m),d,T),Qv(d,t,r.length),r.push(T),v.directiveStart++,v.directiveEnd++,c&&(v.providerIndexes+=1048576),s.push(Ae),m.push(Ae)):(s[Ye]=Ae,m[Ye]=Ae)}else{const Ae=Jv(T,r,H+Ee,ee),Ye=Jv(T,r,H,H+Ee),kt=Ye>=0&&s[Ye];if(c&&!kt||!c&&!(Ae>=0&&s[Ae])){xo(nu(v,m),d,T);const rn=function pT(t,r,s,a,c){const d=new wa(t,s,Lc);return d.multi=[],d.index=r,d.componentProviders=0,JI(d,c,a&&!s),d}(c?fT:hT,s.length,c,a,N);!c&&kt&&(s[Ye].providerFactory=rn),Qv(d,t,r.length,0),r.push(T),v.directiveStart++,v.directiveEnd++,c&&(v.providerIndexes+=1048576),s.push(rn),m.push(rn)}else Qv(d,t,Ae>-1?Ae:Ye,JI(s[c?Ye:Ae],N,!c&&a));!c&&a&&kt&&s[Ye].componentProviders++}}}function Qv(t,r,s,a){const c=qu(r),d=function Lp(t){return!!t.useClass}(r);if(c||d){const T=(d?Fe(r.useClass):r).prototype.ngOnDestroy;if(T){const N=t.destroyHooks||(t.destroyHooks=[]);if(!c&&r.multi){const H=N.indexOf(s);-1===H?N.push(s,[a,T]):N[H+1].push(a,T)}else N.push(s,T)}}}function JI(t,r,s){return s&&t.componentProviders++,t.multi.push(r)-1}function Jv(t,r,s,a){for(let c=s;c<a;c++)if(r[c]===t)return c;return-1}function hT(t,r,s,a){return Xv(this.multi,[])}function fT(t,r,s,a){const c=this.multi;let d;if(this.providerFactory){const m=this.providerFactory.componentProviders,v=Oo(s,s[vt],this.providerFactory.index,a);d=v.slice(0,m),Xv(c,d);for(let T=m;T<v.length;T++)d.push(v[T])}else d=[],Xv(c,d);return d}function Xv(t,r){for(let s=0;s<t.length;s++)r.push((0,t[s])());return r}function XI(t,r=[]){return s=>{s.providersResolver=(a,c)=>function dT(t,r,s){const a=jn();if(a.firstCreatePass){const c=Ni(t);Yv(s,a.data,a.blueprint,c,!0),Yv(r,a.data,a.blueprint,c,!1)}}(a,c?c(t):t,r)}}class Wd{}class e0{}function gT(t,r){return new eE(t,r??null,[])}class eE extends Wd{constructor(r,s,a){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new D_(this);const c=xr(r);this._bootstrapComponents=sa(c.bootstrap),this._r3Injector=kc(r,s,[{provide:Wd,useValue:this},{provide:Ku,useValue:this.componentFactoryResolver},...a],me(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class tE extends e0{constructor(r){super(),this.moduleType=r}create(r){return new eE(this.moduleType,r,[])}}class t0 extends Wd{constructor(r){super(),this.componentFactoryResolver=new D_(this),this.instance=null;const s=new ia([...r.providers,{provide:Wd,useValue:this},{provide:Ku,useValue:this.componentFactoryResolver}],r.parent||Fh(),r.debugName,new Set(["environment"]));this.injector=s,r.runEnvironmentInitializers&&s.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function n0(t,r,s=null){return new t0({providers:t,parent:r,debugName:s,runEnvironmentInitializers:!0}).injector}let _T=(()=>{class t{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s)){const a=Oh(0,s.type),c=a.length>0?n0([a],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s,c)}return this.cachedInjectors.get(s)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Ut({token:t,providedIn:"environment",factory:()=>new t(it(Ks))})}return t})();function r0(t){t.getStandaloneInjector=r=>r.get(_T).getOrCreateStandaloneInjector(t)}function d0(t,r,s){const a=function vi(){const t=Ot.lFrame;let r=t.bindingRootIndex;return-1===r&&(r=t.bindingRootIndex=t.tView.bindingStartIndex),r}()+t,c=Xe();return c[a]===Sn?function aa(t,r,s){return t[r]=s}(c,a,s?r.call(s):r()):function Rl(t,r){return t[r]}(c,a)}function $T(){return this._results[Symbol.iterator]()}class rE{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new La)}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=rE.prototype;s[Symbol.iterator]||(s[Symbol.iterator]=$T)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const c=function so(t){return t.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function Hl(t,r,s){if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++){let c=t[a],d=r[a];if(s&&(c=s(c),d=s(d)),d!==c)return!1}return!0}(a._results,c,s))&&(a._results=c,a.length=c.length,a.last=c[this.length-1],a.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function zT(t,r,s,a=!0){const c=r[vt];if(function fy(t,r,s,a){const c=br+a,d=s.length;a>0&&(s[c-1][zr]=r),a<d-br?(r[zr]=s[c],uh(s,br+a,r)):(s.push(r),r[zr]=null),r[Fn]=s;const m=r[Qs];null!==m&&s!==m&&function py(t,r){const s=t[Ls];r[dr]!==r[Fn][Fn][dr]&&(t[Nr]=!0),null===s?t[Ls]=[r]:s.push(r)}(m,r);const v=r[ri];null!==v&&v.insertView(t),r[tn]|=128}(c,r,t,s),a){const d=_u(s,t),m=r[nn],v=td(m,t[ii]);null!==v&&function fm(t,r,s,a,c,d){a[Bn]=c,a[er]=r,wc(t,a,s,1,c,d)}(c,t[er],m,r,v,d)}}let im=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=qT}return t})();const GT=im,WT=class extends GT{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(r,s){return this.createEmbeddedViewImpl(r,s)}createEmbeddedViewImpl(r,s,a){const c=function HT(t,r,s,a){const c=r.tView,v=gf(t,c,s,4096&t[tn]?4096:16,null,r,null,null,null,a?.injector??null,a?.hydrationInfo??null);v[Qs]=t[r.index];const N=t[ri];return null!==N&&(v[ri]=N.createEmbeddedView(c)),If(c,v,s),v}(this._declarationLView,this._declarationTContainer,r,{injector:s,hydrationInfo:a});return new qr(c)}};function qT(){return X_(li(),Xe())}function X_(t,r){return 4&t.type?new WT(r,t,Nc(t,r)):null}let ty=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=XT}return t})();function XT(){return w0(li(),Xe())}const eC=ty,I0=class extends eC{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return Nc(this._hostTNode,this._hostLView)}get injector(){return new Xi(this._hostTNode,this._hostLView)}get parentInjector(){const r=Ca(this._hostTNode,this._hostLView);if(cc(r)){const s=io(r,this._hostLView),a=Jr(r);return new Xi(s[vt].data[a+8],s)}return new Xi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=D0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-br}createEmbeddedView(r,s,a){let c,d;"number"==typeof a?c=a:null!=a&&(c=a.index,d=a.injector);const v=r.createEmbeddedViewImpl(s||{},d,null);return this.insertImpl(v,c,false),v}createComponent(r,s,a,c,d){const m=r&&!function fc(t){return"function"==typeof t}(r);let v;if(m)v=s;else{const ht=s||{};v=ht.index,a=ht.injector,c=ht.projectableNodes,d=ht.environmentInjector||ht.ngModuleRef}const T=m?r:new Fd(un(r)),N=a||this.parentInjector;if(!d&&null==T.ngModule){const kt=(m?N:this.parentInjector).get(Ks,null);kt&&(d=kt)}un(T.componentType??{});const Ae=T.create(N,c,null,d);return this.insertImpl(Ae.hostView,v,false),Ae}insert(r,s){return this.insertImpl(r,s,!1)}insertImpl(r,s,a){const c=r._lView;if(function ic(t){return jr(t[Fn])}(c)){const T=this.indexOf(r);if(-1!==T)this.detach(T);else{const N=c[Fn],H=new I0(N,N[er],N[Fn]);H.detach(H.indexOf(r))}}const m=this._adjustIndex(s),v=this._lContainer;return zT(v,c,m,!a),r.attachToViewContainerRef(),uh(iE(v),m,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=D0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=hl(this._lContainer,s);a&&(Vu(iE(this._lContainer),s),pp(a[vt],a))}detach(r){const s=this._adjustIndex(r,-1),a=hl(this._lContainer,s);return a&&null!=Vu(iE(this._lContainer),s)?new qr(a):null}_adjustIndex(r,s=0){return r??this.length+s}};function D0(t){return t[8]}function iE(t){return t[8]||(t[8]=[])}function w0(t,r){let s;const a=r[t.index];return jr(a)?s=a:(s=p_(a,r,null,t),r[t.index]=s,Nd(r,s)),T0(s,r,t,a),new I0(s,t,r)}let T0=function C0(t,r,s,a){if(t[ii])return;let c;c=8&s.type?ot(a):function tC(t,r){const s=t[nn],a=s.createComment(""),c=xn(r,t);return Ic(s,td(s,c),a,function gy(t,r){return t.nextSibling(r)}(s,c),!1),a}(r,s),t[ii]=c};class sE{constructor(r){this.queryList=r,this.matches=null}clone(){return new sE(this.queryList)}setDirty(){this.queryList.setDirty()}}class oE{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,c=[];for(let d=0;d<a;d++){const m=s.getByIndex(d);c.push(this.queries[m.indexInDeclarationView].clone())}return new oE(c)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==O0(r,s).matches&&this.queries[s].setDirty()}}class A0{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class aE{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const c=null!==s?s.length:0,d=this.getByIndex(a).embeddedTView(r,c);d&&(d.indexInDeclarationView=a,null!==s?s.push(d):s=[d])}return null!==s?new aE(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class uE{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new uE(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let c=0;c<a.length;c++){const d=a[c];this.matchTNodeWithReadOption(r,s,iC(s,d)),this.matchTNodeWithReadOption(r,s,No(s,r,d,!1,!1))}else a===im?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,No(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const c=this.metadata.read;if(null!==c)if(c===Fa||c===ty||c===im&&4&s.type)this.addMatch(s.index,-2);else{const d=No(s,r,c,!1,!1);null!==d&&this.addMatch(s.index,d)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function iC(t,r){const s=t.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function oC(t,r,s,a){return-1===s?function sC(t,r){return 11&t.type?Nc(t,r):4&t.type?X_(t,r):null}(r,t):-2===s?function aC(t,r,s){return s===Fa?Nc(r,t):s===im?X_(r,t):s===ty?w0(r,t):void 0}(t,r,a):Oo(t,t[vt],s,r)}function S0(t,r,s,a){const c=r[ri].queries[a];if(null===c.matches){const d=t.data,m=s.matches,v=[];for(let T=0;T<m.length;T+=2){const N=m[T];v.push(N<0?null:oC(r,d[N],m[T+1],s.metadata.read))}c.matches=v}return c.matches}function cE(t,r,s,a){const c=t.queries.getByIndex(s),d=c.matches;if(null!==d){const m=S0(t,r,c,s);for(let v=0;v<d.length;v+=2){const T=d[v];if(T>0)a.push(m[v/2]);else{const N=d[v+1],H=r[-T];for(let ee=br;ee<H.length;ee++){const Ee=H[ee];Ee[Qs]===Ee[Fn]&&cE(Ee[vt],Ee,N,a)}if(null!==H[Ls]){const ee=H[Ls];for(let Ee=0;Ee<ee.length;Ee++){const Ae=ee[Ee];cE(Ae[vt],Ae,N,a)}}}}}return a}function b0(t){const r=Xe(),s=jn(),a=Ue();be(a+1);const c=O0(s,a);if(t.dirty&&function Kd(t){return 4==(4&t[tn])}(r)===(2==(2&c.metadata.flags))){if(null===c.matches)t.reset([]);else{const d=c.crossesNgTemplate?cE(s,r,a,[]):S0(s,r,c,a);t.reset(d,Jp),t.notifyOnChanges()}return!0}return!1}function R0(t,r,s){const a=jn();a.firstCreatePass&&(N0(a,new A0(t,r,s),-1),2==(2&r)&&(a.staticViewQueries=!0)),x0(a,Xe(),r)}function P0(t,r,s,a){const c=jn();if(c.firstCreatePass){const d=li();N0(c,new A0(r,s,a),d.index),function cC(t,r){const s=t.contentQueries||(t.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(t.queries.length-1,r)}(c,t),2==(2&s)&&(c.staticContentQueries=!0)}x0(c,Xe(),s)}function M0(){return function uC(t,r){return t[ri].queries[r].queryList}(Xe(),Ue())}function x0(t,r,s){const a=new rE(4==(4&s));(function Ky(t,r,s,a){const c=Sg(r);c.push(s),t.firstCreatePass&&bg(t).push(a,c.length-1)})(t,r,a,a.destroy),null===r[ri]&&(r[ri]=new oE),r[ri].queries.push(new sE(a))}function N0(t,r,s){null===t.queries&&(t.queries=new aE),t.queries.track(new uE(r,s))}function O0(t,r){return t.queries.getByIndex(r)}function lE(t){return!!xr(t)}const Q0=new xt("Application Initializer");let gE=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((s,a)=>{this.resolve=s,this.reject=a}),this.appInits=Ct(Q0,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const s=[];for(const c of this.appInits){const d=c();if(Gg(d))s.push(d);else if(z_(d)){const m=new Promise((v,T)=>{d.subscribe({complete:v,error:T})});s.push(m)}}const a=()=>{this.done=!0,this.resolve()};Promise.all(s).then(()=>{a()}).catch(c=>{this.reject(c)}),0===s.length&&a(),this.initialized=!0}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),J0=(()=>{class t{log(s){console.log(s)}warn(s){console.warn(s)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Ut({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const ry=new xt("LocaleId",{providedIn:"root",factory:()=>Ct(ry,jt.Optional|jt.SkipSelf)||function MC(){return typeof $localize<"u"&&$localize.locale||Uf}()}),xC=new xt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let X0=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new te.X(!1)}add(){this.hasPendingTasks.next(!0);const s=this.taskId++;return this.pendingTasks.add(s),s}remove(s){this.pendingTasks.delete(s),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class OC{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let kC=(()=>{class t{compileModuleSync(s){return new tE(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),d=sa(xr(s).declarations).reduce((m,v)=>{const T=un(v);return T&&m.push(new Fd(T)),m},[]);return new OC(a,d)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const rD=new xt(""),iD=new xt("");let yE,rA=(()=>{class t{constructor(s,a,c){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,yE||(function iA(t){yE=t}(c),c.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Gi.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,c){let d=-1;a&&a>0&&(d=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==d),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:d,updateCb:c})}whenStable(s,a,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,c){return[]}static#e=this.\u0275fac=function(a){return new(a||t)(it(Gi),it(sD),it(iD))};static#t=this.\u0275prov=Ut({token:t,factory:t.\u0275fac})}return t})(),sD=(()=>{class t{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return yE?.findTestabilityInTree(this,s,a)??null}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Ut({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),kl=null;const oD=new xt("AllowMultipleToken"),vE=new xt("PlatformDestroyListeners"),EE=new xt("appBootstrapListener");class aA{constructor(r,s){this.name=r,this.token=s}}function cD(t,r,s=[]){const a=`Platform: ${r}`,c=new xt(a);return(d=[])=>{let m=IE();if(!m||m.injector.get(oD,!1)){const v=[...s,...d,{provide:c,useValue:!0}];t?t(v):function uA(t){if(kl&&!kl.get(oD,!1))throw new de(400,!1);(function aD(){!function Ro(t){bo=t}(()=>{throw new de(600,!1)})})(),kl=t;const r=t.get(dD);(function uD(t){t.get(Uh,null)?.forEach(s=>s())})(t)}(function lD(t=[],r){return As.create({name:r,providers:[{provide:Up,useValue:"platform"},{provide:vE,useValue:new Set([()=>kl=null])},...t]})}(v,a))}return function lA(t){const r=IE();if(!r)throw new de(401,!1);return r}()}}function IE(){return kl?.get(dD)??null}let dD=(()=>{class t{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const c=function dA(t="zone.js",r){return"noop"===t?new Hy:"zone.js"===t?new Gi(r):t}(a?.ngZone,function hD(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:a?.ngZoneEventCoalescing,runCoalescing:a?.ngZoneRunCoalescing}));return c.run(()=>{const d=function mT(t,r,s){return new eE(t,r,s)}(s.moduleType,this.injector,function _D(t){return[{provide:Gi,useFactory:t},{provide:ld,multi:!0,useFactory:()=>{const r=Ct(fA,{optional:!0});return()=>r.initialize()}},{provide:mD,useFactory:hA},{provide:qm,useFactory:nf}]}(()=>c)),m=d.injector.get(Zu,null);return c.runOutsideAngular(()=>{const v=c.onError.subscribe({next:T=>{m.handleError(T)}});d.onDestroy(()=>{sy(this._modules,d),v.unsubscribe()})}),function fD(t,r,s){try{const a=s();return Gg(a)?a.catch(c=>{throw r.runOutsideAngular(()=>t.handleError(c)),c}):a}catch(a){throw r.runOutsideAngular(()=>t.handleError(a)),a}}(m,c,()=>{const v=d.injector.get(gE);return v.runInitializers(),v.donePromise.then(()=>(function bI(t){ct(t,"Expected localeId to be defined"),"string"==typeof t&&(SI=t.toLowerCase().replace(/_/g,"-"))}(d.injector.get(ry,Uf)||Uf),this._moduleDoBootstrap(d),d))})})}bootstrapModule(s,a=[]){const c=pD({},a);return function sA(t,r,s){const a=new tE(s);return Promise.resolve(a)}(0,0,s).then(d=>this.bootstrapModuleFactory(d,c))}_moduleDoBootstrap(s){const a=s.injector.get($f);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(c=>a.bootstrap(c));else{if(!s.instance.ngDoBootstrap)throw new de(-403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new de(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(vE,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(a){return new(a||t)(it(As))};static#t=this.\u0275prov=Ut({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function pD(t,r){return Array.isArray(r)?r.reduce(pD,t):{...t,...r}}let $f=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ct(mD),this.zoneIsStable=Ct(qm),this.componentTypes=[],this.components=[],this.isStable=Ct(X0).hasPendingTasks.pipe((0,oe.w)(s=>s?(0,le.of)(!1):this.zoneIsStable),(0,Se.x)(),(0,ge.B)()),this._injector=Ct(Ks)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,a){const c=s instanceof qh;if(!this._injector.get(gE).done)throw!c&&ti(s),new de(405,!1);let m;m=c?s:this._injector.get(Ku).resolveComponentFactory(s),this.componentTypes.push(m.componentType);const v=function oA(t){return t.isBoundToModule}(m)?void 0:this._injector.get(Wd),N=m.create(As.NULL,[],a||m.selector,v),H=N.location.nativeElement,ee=N.injector.get(rD,null);return ee?.registerApplication(H),N.onDestroy(()=>{this.detachView(N.hostView),sy(this.components,N),ee?.unregisterApplication(H)}),this._loadComponent(N),N}tick(){if(this._runningTick)throw new de(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;sy(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s);const a=this._injector.get(EE,[]);a.push(...this._bootstrapListeners),a.forEach(c=>c(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>sy(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new de(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function sy(t,r){const s=t.indexOf(r);s>-1&&t.splice(s,1)}const mD=new xt("",{providedIn:"root",factory:()=>Ct(Zu).handleError.bind(void 0)});function hA(){const t=Ct(Gi),r=Ct(Zu);return s=>t.runOutsideAngular(()=>r.handleError(s))}let fA=(()=>{class t{constructor(){this.zone=Ct(Gi),this.applicationRef=Ct($f)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function gA(){return!1}let mA=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=_A}return t})();function _A(t){return function yA(t,r,s){if(_r(t)&&!s){const a=Is(t.index,r);return new qr(a,a)}return 47&t.type?new qr(r[dr],r):null}(li(),Xe(),16==(16&t))}class ID{constructor(){}supports(r){return bf(r)}create(r){return new TA(r)}}const wA=(t,r)=>r;class TA{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||wA}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,c=0,d=null;for(;s||a;){const m=!a||s&&s.currentIndex<wD(a,c,d)?s:a,v=wD(m,c,d),T=m.currentIndex;if(m===a)c--,a=a._nextRemoved;else if(s=s._next,null==m.previousIndex)c++;else{d||(d=[]);const N=v-c,H=T-c;if(N!=H){for(let Ee=0;Ee<N;Ee++){const Ae=Ee<d.length?d[Ee]:d[Ee]=0,Ye=Ae+Ee;H<=Ye&&Ye<N&&(d[Ee]=Ae+1)}d[m.previousIndex]=H-N}}v!==T&&r(m,v,T)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!bf(r))throw new de(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let c,d,m,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let v=0;v<this.length;v++)d=r[v],m=this._trackByFn(v,d),null!==s&&Object.is(s.trackById,m)?(a&&(s=this._verifyReinsertion(s,d,m,v)),Object.is(s.item,d)||this._addIdentityChange(s,d)):(s=this._mismatch(s,d,m,v),a=!0),s=s._next}else c=0,function xg(t,r){if(Array.isArray(t))for(let s=0;s<t.length;s++)r(t[s]);else{const s=t[Symbol.iterator]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,v=>{m=this._trackByFn(c,v),null!==s&&Object.is(s.trackById,m)?(a&&(s=this._verifyReinsertion(s,v,m,c)),Object.is(s.item,v)||this._addIdentityChange(s,v)):(s=this._mismatch(s,v,m,c),a=!0),s=s._next,c++}),this.length=c;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,c){let d;return null===r?d=this._itTail:(d=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,d,c)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,c))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,d,c)):r=this._addAfter(new CA(s,a),d,c),r}_verifyReinsertion(r,s,a,c){let d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==d?r=this._reinsertAfter(d,r._prev,c):r.currentIndex!=c&&(r.currentIndex=c,this._addToMoves(r,c)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const c=r._prevRemoved,d=r._nextRemoved;return null===c?this._removalsHead=d:c._nextRemoved=d,null===d?this._removalsTail=c:d._prevRemoved=c,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const c=null===s?this._itHead:s._next;return r._next=c,r._prev=s,null===c?this._itTail=r:c._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new DD),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new DD),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class CA{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class AA{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class DD{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new AA,this.map.set(s,a)),a.add(r)}get(r,s){const c=this.map.get(r);return c?c.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function wD(t,r,s){const a=t.previousIndex;if(null===a)return a;let c=0;return s&&a<s.length&&(c=s[a]),a+r+c}class TD{constructor(){}supports(r){return r instanceof Map||Rf(r)}create(){return new SA}}class SA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Rf(r)))throw new de(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,c)=>{if(s&&s.key===c)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const d=this._getOrCreateRecordForKey(c,a);s=this._insertBeforeOrAppend(s,d)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const c=this._records.get(r);this._maybeAddToChanges(c,s);const d=c._prev,m=c._next;return d&&(d._next=m),m&&(m._prev=d),c._next=null,c._prev=null,c}const a=new bA(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class bA{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function CD(){return new AE([new ID])}let AE=(()=>{class t{static#e=this.\u0275prov=Ut({token:t,providedIn:"root",factory:CD});constructor(s){this.factories=s}static create(s,a){if(null!=a){const c=a.factories.slice();s=s.concat(c)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||CD()),deps:[[t,new Lu,new ba]]}}find(s){const a=this.factories.find(c=>c.supports(s));if(null!=a)return a;throw new de(901,!1)}}return t})();function AD(){return new SE([new TD])}let SE=(()=>{class t{static#e=this.\u0275prov=Ut({token:t,providedIn:"root",factory:AD});constructor(s){this.factories=s}static create(s,a){if(a){const c=a.factories.slice();s=s.concat(c)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||AD()),deps:[[t,new Lu,new ba]]}}find(s){const a=this.factories.find(c=>c.supports(s));if(a)return a;throw new de(901,!1)}}return t})();const MA=cD(null,"core",[]);let xA=(()=>{class t{constructor(s){}static#e=this.\u0275fac=function(a){return new(a||t)(it($f))};static#t=this.\u0275mod=Pi({type:t});static#n=this.\u0275inj=pn({})}return t})();function HA(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function GA(t){const r=un(t);if(!r)return null;const s=new Fd(r);return{get selector(){return s.selector},get type(){return s.componentType},get inputs(){return s.inputs},get outputs(){return s.outputs},get ngContentSelectors(){return s.ngContentSelectors},get isStandalone(){return r.standalone},get isSignal(){return r.signals}}}},7213:(Et,Me,F)=>{F.d(Me,{zQ:()=>zn,ww:()=>At,rT:()=>Tt,f7:()=>Jt,L6:()=>he,_Q:()=>ft,lh:()=>Gt,Qv:()=>qe,nw:()=>pr}),F(6365);var Y=F(6814),z=F(5879),ue=F(1920),te=F(7217),le=F(8645),ge=F(2096),oe=F(5592),Se=F(2459),Q=F(3019),re=F(3093),me=F(4664),ze=F(7398),Ne=F(4552);class Ze extends le.x{constructor(mt=1/0,pe=1/0,ye=Ne.l){super(),this._bufferSize=mt,this._windowTime=pe,this._timestampProvider=ye,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=pe===1/0,this._bufferSize=Math.max(1,mt),this._windowTime=Math.max(1,pe)}next(mt){const{isStopped:pe,_buffer:ye,_infiniteTimeWindow:Ce,_timestampProvider:ve,_windowTime:xe}=this;pe||(ye.push(mt),!Ce&&ye.push(ve.now()+xe)),this._trimBuffer(),super.next(mt)}_subscribe(mt){this._throwIfClosed(),this._trimBuffer();const pe=this._innerSubscribe(mt),{_infiniteTimeWindow:ye,_buffer:Ce}=this,ve=Ce.slice();for(let xe=0;xe<ve.length&&!mt.closed;xe+=ye?1:2)mt.next(ve[xe]);return this._checkFinalizedStatuses(mt),pe}_trimBuffer(){const{_bufferSize:mt,_timestampProvider:pe,_buffer:ye,_infiniteTimeWindow:Ce}=this,ve=(Ce?1:2)*mt;if(mt<1/0&&ve<ye.length&&ye.splice(0,ye.length-ve),!Ce){const xe=pe.now();let Qe=0;for(let ct=1;ct<ye.length&&ye[ct]<=xe;ct+=2)Qe=ct;Qe&&ye.splice(0,Qe+1)}}}var Fe=F(3020);function tt(pt,mt,pe){let ye,Ce=!1;return pt&&"object"==typeof pt?({bufferSize:ye=1/0,windowTime:mt=1/0,refCount:Ce=!1,scheduler:pe}=pt):ye=pt??1/0,(0,Fe.B)({connector:()=>new Ze(ye,mt,pe),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Ce})}var Ge=F(1374),Rt=F(4674);function Ie(pt,mt){return(0,Rt.m)(mt)?(0,me.w)(()=>pt,mt):(0,me.w)(()=>pt)}var de=F(5137),Pe=F(2181),Te=F(7142);const qe=new z.OlP("angularfire2.auth.use-emulator"),he=new z.OlP("angularfire2.auth.settings"),ft=new z.OlP("angularfire2.auth.tenant-id"),Tt=new z.OlP("angularfire2.auth.langugage-code"),Gt=new z.OlP("angularfire2.auth.use-device-language"),Jt=new z.OlP("angularfire.auth.persistence"),pr=(pt,mt,pe,ye,Ce,ve,xe,Qe)=>(0,te.cc)(`${pt.name}.auth`,"AngularFireAuth",pt.name,()=>{const ct=mt.runOutsideAngular(()=>pt.auth());if(pe&&ct.useEmulator(...pe),ye&&(ct.tenantId=ye),ct.languageCode=Ce,ve&&ct.useDeviceLanguage(),xe)for(const[rt,at]of Object.entries(xe))ct.settings[rt]=at;return Qe&&ct.setPersistence(Qe),ct},[pe,ye,Ce,ve,xe,Qe]);let zn=(()=>{class pt{authState;idToken;user;idTokenResult;credential;constructor(pe,ye,Ce,ve,xe,Qe,ct,rt,at,Lt,fn,Ut){const En=new le.x,pn=(0,ge.of)(void 0).pipe((0,re.Q)(xe.outsideAngular),(0,me.w)(()=>ve.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,6365)))),(0,ze.U)(()=>(0,te.on)(pe,ve,ye)),(0,ze.U)(Qt=>pr(Qt,ve,Qe,rt,at,Lt,ct,fn)),tt({bufferSize:1,refCount:!1}));if((0,Y.PM)(Ce))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ge.of)(null);else{pn.pipe((0,Ge.P)()).subscribe();const Qt=pn.pipe((0,me.w)(on=>on.getRedirectResult().then(Xn=>Xn,()=>null)),ue.iC,tt({bufferSize:1,refCount:!1})),yn=pn.pipe((0,me.w)(on=>new oe.y(Xn=>({unsubscribe:ve.runOutsideAngular(()=>on.onAuthStateChanged(In=>Xn.next(In),In=>Xn.error(In),()=>Xn.complete()))})))),On=pn.pipe((0,me.w)(on=>new oe.y(Xn=>({unsubscribe:ve.runOutsideAngular(()=>on.onIdTokenChanged(In=>Xn.next(In),In=>Xn.error(In),()=>Xn.complete()))}))));this.authState=Qt.pipe(Ie(yn),(0,de.R)(xe.outsideAngular),(0,re.Q)(xe.insideAngular)),this.user=Qt.pipe(Ie(On),(0,de.R)(xe.outsideAngular),(0,re.Q)(xe.insideAngular)),this.idToken=this.user.pipe((0,me.w)(on=>on?(0,Se.D)(on.getIdToken()):(0,ge.of)(null))),this.idTokenResult=this.user.pipe((0,me.w)(on=>on?(0,Se.D)(on.getIdTokenResult()):(0,ge.of)(null))),this.credential=(0,Q.T)(Qt,En,this.authState.pipe((0,Pe.h)(on=>!on))).pipe((0,ze.U)(on=>on?.user?on:null),(0,de.R)(xe.outsideAngular),(0,re.Q)(xe.insideAngular))}return(0,te.pX)(this,pn,ve,{spy:{apply:(Qt,yn,On)=>{(Qt.startsWith("signIn")||Qt.startsWith("createUser"))&&On.then(on=>En.next(on))}}})}static \u0275fac=function(ye){return new(ye||pt)(z.LFG(te.Dh),z.LFG(te.xv,8),z.LFG(z.Lbi),z.LFG(z.R0b),z.LFG(ue.HU),z.LFG(qe,8),z.LFG(he,8),z.LFG(ft,8),z.LFG(Tt,8),z.LFG(Gt,8),z.LFG(Jt,8),z.LFG(ue.Rf,8))};static \u0275prov=z.Yz7({token:pt,factory:pt.\u0275fac,providedIn:"any"})}return pt})(),At=(()=>{class pt{constructor(){Te.Z.registerVersion("angularfire",ue.q4.full,"auth-compat")}static \u0275fac=function(ye){return new(ye||pt)};static \u0275mod=z.oAB({type:pt});static \u0275inj=z.cJS({providers:[zn]})}return pt})()},7104:(Et,Me,F)=>{F.d(Me,{ST:()=>Ur,yb:()=>Rn});var p=F(6814),Y=F(5879),z=F(1920),ue=F(7217),te=F(7213),le=F(6321),ge=F(5592),oe=F(2459),Se=F(2096),Q=F(7921),re=F(9360),me=F(8251);function ze(){return(0,re.e)((He,Z)=>{let se,Le=!1;He.subscribe((0,me.x)(Z,lt=>{const sn=se;se=lt,Le&&Z.next([sn,lt]),Le=!0}))})}var Ne=F(7398),Ze=F(6699),Fe=F(3997),tt=F(2181),Rt=(F(6365),F(3106)),Ie=F(5776),de=F(9058),Pe=F(4537);function qe(He,Z){if(void 0===Z)return{merge:!1};if(void 0!==Z.mergeFields&&void 0!==Z.merge)throw new Ie.WA("invalid-argument",`Invalid options passed to function ${He}(): You cannot specify both "merge" and "mergeFields".`);return Z}function he(){if(typeof Uint8Array>"u")throw new Ie.WA("unimplemented","Uint8Arrays are not available in this environment.")}function ft(){if(!(0,Ie.Me)())throw new Ie.WA("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Tt{constructor(Z){this._delegate=Z}static fromBase64String(Z){return ft(),new Tt(Ie.Jj.fromBase64String(Z))}static fromUint8Array(Z){return he(),new Tt(Ie.Jj.fromUint8Array(Z))}toBase64(){return ft(),this._delegate.toBase64()}toUint8Array(){return he(),this._delegate.toUint8Array()}isEqual(Z){return this._delegate.isEqual(Z._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Gt(He){return function Jt(He,Z){if("object"!=typeof He||null===He)return!1;const se=He;for(const Le of Z)if(Le in se&&"function"==typeof se[Le])return!0;return!1}(He,["next","error","complete"])}class pr{enableIndexedDbPersistence(Z,se){return(0,Ie.ST)(Z._delegate,{forceOwnership:se})}enableMultiTabIndexedDbPersistence(Z){return(0,Ie.fH)(Z._delegate)}clearIndexedDbPersistence(Z){return(0,Ie.Fc)(Z._delegate)}}class zn{constructor(Z,se,Le){this._delegate=se,this._persistenceProvider=Le,this.INTERNAL={delete:()=>this.terminate()},Z instanceof Ie.l7||(this._appCompat=Z)}get _databaseId(){return this._delegate._databaseId}settings(Z){const se=this._delegate._getSettings();!Z.merge&&se.host!==Z.host&&(0,Ie.yq)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),Z.merge&&delete(Z=Object.assign(Object.assign({},se),Z)).merge,this._delegate._setSettings(Z)}useEmulator(Z,se,Le={}){(0,Ie.at)(this._delegate,Z,se,Le)}enableNetwork(){return(0,Ie.Ix)(this._delegate)}disableNetwork(){return(0,Ie.TF)(this._delegate)}enablePersistence(Z){let se=!1,Le=!1;return Z&&(se=!!Z.synchronizeTabs,Le=!!Z.experimentalForceOwningTab,(0,Ie.Wi)("synchronizeTabs",se,"experimentalForceOwningTab",Le)),se?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,Le)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,Ie.Mx)(this._delegate)}onSnapshotsInSync(Z){return(0,Ie.sc)(this._delegate,Z)}get app(){if(!this._appCompat)throw new Ie.WA("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(Z){try{return new Ut(this,(0,Ie.hJ)(this._delegate,Z))}catch(se){throw ve(se,"collection()","Firestore.collection()")}}doc(Z){try{return new Ce(this,(0,Ie.JU)(this._delegate,Z))}catch(se){throw ve(se,"doc()","Firestore.doc()")}}collectionGroup(Z){try{return new at(this,(0,Ie.B$)(this._delegate,Z))}catch(se){throw ve(se,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(Z){return(0,Ie.i3)(this._delegate,se=>Z(new mt(this,se)))}batch(){return(0,Ie.qY)(this._delegate),new pe(new Ie.PU(this._delegate,Z=>(0,Ie.GL)(this._delegate,Z)))}loadBundle(Z){return(0,Ie.Pb)(this._delegate,Z)}namedQuery(Z){return(0,Ie.L$)(this._delegate,Z).then(se=>se?new at(this,se):null)}}class At extends Ie.u7{constructor(Z){super(),this.firestore=Z}convertBytes(Z){return new Tt(new Ie.Jj(Z))}convertReference(Z){const se=this.convertDocumentKey(Z,this.firestore._databaseId);return Ce.forKey(se,this.firestore,null)}}class mt{constructor(Z,se){this._firestore=Z,this._delegate=se,this._userDataWriter=new At(Z)}get(Z){const se=En(Z);return this._delegate.get(se).then(Le=>new ct(this._firestore,new Ie.xU(this._firestore._delegate,this._userDataWriter,Le._key,Le._document,Le.metadata,se.converter)))}set(Z,se,Le){const lt=En(Z);return Le?(qe("Transaction.set",Le),this._delegate.set(lt,se,Le)):this._delegate.set(lt,se),this}update(Z,se,Le,...lt){const sn=En(Z);return 2===arguments.length?this._delegate.update(sn,se):this._delegate.update(sn,se,Le,...lt),this}delete(Z){const se=En(Z);return this._delegate.delete(se),this}}class pe{constructor(Z){this._delegate=Z}set(Z,se,Le){const lt=En(Z);return Le?(qe("WriteBatch.set",Le),this._delegate.set(lt,se,Le)):this._delegate.set(lt,se),this}update(Z,se,Le,...lt){const sn=En(Z);return 2===arguments.length?this._delegate.update(sn,se):this._delegate.update(sn,se,Le,...lt),this}delete(Z){const se=En(Z);return this._delegate.delete(se),this}commit(){return this._delegate.commit()}}class ye{constructor(Z,se,Le){this._firestore=Z,this._userDataWriter=se,this._delegate=Le}fromFirestore(Z,se){const Le=new Ie.$q(this._firestore._delegate,this._userDataWriter,Z._key,Z._document,Z.metadata,null);return this._delegate.fromFirestore(new rt(this._firestore,Le),se??{})}toFirestore(Z,se){return se?this._delegate.toFirestore(Z,se):this._delegate.toFirestore(Z)}static getInstance(Z,se){const Le=ye.INSTANCES;let lt=Le.get(Z);lt||(lt=new WeakMap,Le.set(Z,lt));let sn=lt.get(se);return sn||(sn=new ye(Z,new At(Z),se),lt.set(se,sn)),sn}}ye.INSTANCES=new WeakMap;class Ce{constructor(Z,se){this.firestore=Z,this._delegate=se,this._userDataWriter=new At(Z)}static forPath(Z,se,Le){if(Z.length%2!=0)throw new Ie.WA("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${Z.canonicalString()} has ${Z.length}`);return new Ce(se,new Ie.my(se._delegate,Le,new Ie.Ky(Z)))}static forKey(Z,se,Le){return new Ce(se,new Ie.my(se._delegate,Le,Z))}get id(){return this._delegate.id}get parent(){return new Ut(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(Z){try{return new Ut(this.firestore,(0,Ie.hJ)(this._delegate,Z))}catch(se){throw ve(se,"collection()","DocumentReference.collection()")}}isEqual(Z){return(Z=(0,de.m9)(Z))instanceof Ie.my&&(0,Ie.Eo)(this._delegate,Z)}set(Z,se){se=qe("DocumentReference.set",se);try{return se?(0,Ie.pl)(this._delegate,Z,se):(0,Ie.pl)(this._delegate,Z)}catch(Le){throw ve(Le,"setDoc()","DocumentReference.set()")}}update(Z,se,...Le){try{return 1===arguments.length?(0,Ie.r7)(this._delegate,Z):(0,Ie.r7)(this._delegate,Z,se,...Le)}catch(lt){throw ve(lt,"updateDoc()","DocumentReference.update()")}}delete(){return(0,Ie.oe)(this._delegate)}onSnapshot(...Z){const se=xe(Z),Le=Qe(Z,lt=>new ct(this.firestore,new Ie.xU(this.firestore._delegate,this._userDataWriter,lt._key,lt._document,lt.metadata,this._delegate.converter)));return(0,Ie.cf)(this._delegate,se,Le)}get(Z){let se;return se="cache"===Z?.source?(0,Ie.kl)(this._delegate):"server"===Z?.source?(0,Ie.Xk)(this._delegate):(0,Ie.QT)(this._delegate),se.then(Le=>new ct(this.firestore,new Ie.xU(this.firestore._delegate,this._userDataWriter,Le._key,Le._document,Le.metadata,this._delegate.converter)))}withConverter(Z){return new Ce(this.firestore,this._delegate.withConverter(Z?ye.getInstance(this.firestore,Z):null))}}function ve(He,Z,se){return He.message=He.message.replace(Z,se),He}function xe(He){for(const Z of He)if("object"==typeof Z&&!Gt(Z))return Z;return{}}function Qe(He,Z){var se,Le;let lt;return lt=Gt(He[0])?He[0]:Gt(He[1])?He[1]:"function"==typeof He[0]?{next:He[0],error:He[1],complete:He[2]}:{next:He[1],error:He[2],complete:He[3]},{next:sn=>{lt.next&&lt.next(Z(sn))},error:null===(se=lt.error)||void 0===se?void 0:se.bind(lt),complete:null===(Le=lt.complete)||void 0===Le?void 0:Le.bind(lt)}}class ct{constructor(Z,se){this._firestore=Z,this._delegate=se}get ref(){return new Ce(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(Z){return this._delegate.data(Z)}get(Z,se){return this._delegate.get(Z,se)}isEqual(Z){return(0,Ie.qK)(this._delegate,Z._delegate)}}class rt extends ct{data(Z){const se=this._delegate.data(Z);return(0,Ie.K9)(void 0!==se,"Document in a QueryDocumentSnapshot should exist"),se}}class at{constructor(Z,se){this.firestore=Z,this._delegate=se,this._userDataWriter=new At(Z)}where(Z,se,Le){try{return new at(this.firestore,(0,Ie.IO)(this._delegate,(0,Ie.ar)(Z,se,Le)))}catch(lt){throw ve(lt,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(Z,se){try{return new at(this.firestore,(0,Ie.IO)(this._delegate,(0,Ie.Xo)(Z,se)))}catch(Le){throw ve(Le,/(orderBy|where)\(\)/,"Query.$1()")}}limit(Z){try{return new at(this.firestore,(0,Ie.IO)(this._delegate,(0,Ie.b9)(Z)))}catch(se){throw ve(se,"limit()","Query.limit()")}}limitToLast(Z){try{return new at(this.firestore,(0,Ie.IO)(this._delegate,(0,Ie.vh)(Z)))}catch(se){throw ve(se,"limitToLast()","Query.limitToLast()")}}startAt(...Z){try{return new at(this.firestore,(0,Ie.IO)(this._delegate,(0,Ie.e0)(...Z)))}catch(se){throw ve(se,"startAt()","Query.startAt()")}}startAfter(...Z){try{return new at(this.firestore,(0,Ie.IO)(this._delegate,(0,Ie.TQ)(...Z)))}catch(se){throw ve(se,"startAfter()","Query.startAfter()")}}endBefore(...Z){try{return new at(this.firestore,(0,Ie.IO)(this._delegate,(0,Ie.Lx)(...Z)))}catch(se){throw ve(se,"endBefore()","Query.endBefore()")}}endAt(...Z){try{return new at(this.firestore,(0,Ie.IO)(this._delegate,(0,Ie.Wu)(...Z)))}catch(se){throw ve(se,"endAt()","Query.endAt()")}}isEqual(Z){return(0,Ie.iE)(this._delegate,Z._delegate)}get(Z){let se;return se="cache"===Z?.source?(0,Ie.UQ)(this._delegate):"server"===Z?.source?(0,Ie.zN)(this._delegate):(0,Ie.PL)(this._delegate),se.then(Le=>new fn(this.firestore,new Ie.W(this.firestore._delegate,this._userDataWriter,this._delegate,Le._snapshot)))}onSnapshot(...Z){const se=xe(Z),Le=Qe(Z,lt=>new fn(this.firestore,new Ie.W(this.firestore._delegate,this._userDataWriter,this._delegate,lt._snapshot)));return(0,Ie.cf)(this._delegate,se,Le)}withConverter(Z){return new at(this.firestore,this._delegate.withConverter(Z?ye.getInstance(this.firestore,Z):null))}}class Lt{constructor(Z,se){this._firestore=Z,this._delegate=se}get type(){return this._delegate.type}get doc(){return new rt(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class fn{constructor(Z,se){this._firestore=Z,this._delegate=se}get query(){return new at(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(Z=>new rt(this._firestore,Z))}docChanges(Z){return this._delegate.docChanges(Z).map(se=>new Lt(this._firestore,se))}forEach(Z,se){this._delegate.forEach(Le=>{Z.call(se,new rt(this._firestore,Le))})}isEqual(Z){return(0,Ie.qK)(this._delegate,Z._delegate)}}class Ut extends at{constructor(Z,se){super(Z,se),this.firestore=Z,this._delegate=se}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const Z=this._delegate.parent;return Z?new Ce(this.firestore,Z):null}doc(Z){try{return new Ce(this.firestore,void 0===Z?(0,Ie.JU)(this._delegate):(0,Ie.JU)(this._delegate,Z))}catch(se){throw ve(se,"doc()","CollectionReference.doc()")}}add(Z){return(0,Ie.ET)(this._delegate,Z).then(se=>new Ce(this.firestore,se))}isEqual(Z){return(0,Ie.Eo)(this._delegate,Z._delegate)}withConverter(Z){return new Ut(this.firestore,this._delegate.withConverter(Z?ye.getInstance(this.firestore,Z):null))}}function En(He){return(0,Ie.Cf)(He,Ie.my)}class pn{constructor(...Z){this._delegate=new Ie.Lz(...Z)}static documentId(){return new pn(Ie.Xb.keyField().canonicalString())}isEqual(Z){return(Z=(0,de.m9)(Z))instanceof Ie.Lz&&this._delegate._internalPath.isEqual(Z._internalPath)}}class Qt{constructor(Z){this._delegate=Z}static serverTimestamp(){const Z=(0,Ie.Bt)();return Z._methodName="FieldValue.serverTimestamp",new Qt(Z)}static delete(){const Z=(0,Ie.AK)();return Z._methodName="FieldValue.delete",new Qt(Z)}static arrayUnion(...Z){const se=(0,Ie.vr)(...Z);return se._methodName="FieldValue.arrayUnion",new Qt(se)}static arrayRemove(...Z){const se=(0,Ie.Ab)(...Z);return se._methodName="FieldValue.arrayRemove",new Qt(se)}static increment(Z){const se=(0,Ie.nP)(Z);return se._methodName="FieldValue.increment",new Qt(se)}isEqual(Z){return this._delegate.isEqual(Z._delegate)}}const yn={Firestore:zn,GeoPoint:Ie.F8,Timestamp:Ie.EK,Blob:Tt,Transaction:mt,WriteBatch:pe,DocumentReference:Ce,DocumentSnapshot:ct,Query:at,QueryDocumentSnapshot:rt,QuerySnapshot:fn,CollectionReference:Ut,FieldPath:pn,FieldValue:Qt,setLogLevel:function pt(He){(0,Ie.Ub)(He)},CACHE_SIZE_UNLIMITED:Ie.IX};!function on(He){(function On(He,Z){He.INTERNAL.registerComponent(new Pe.wA("firestore-compat",se=>{const Le=se.getProvider("app-compat").getImmediate(),lt=se.getProvider("firestore").getImmediate();return Z(Le,lt)},"PUBLIC").setServiceProps(Object.assign({},yn)))})(He,(Z,se)=>new zn(Z,se,new pr)),He.registerVersion("@firebase/firestore-compat","0.3.21")}(Rt.Z);var Xn=F(7142);function Dn(He,Z){return function In(He,Z=le.z){return new ge.y(se=>{let Le;return null!=Z?Z.schedule(()=>{Le=He.onSnapshot({includeMetadataChanges:!0},se)}):Le=He.onSnapshot({includeMetadataChanges:!0},se),()=>{Le?.()}})}(He,Z)}function nr(He,Z){return Dn(He,Z).pipe((0,Ne.U)(se=>({payload:se,type:"query"})))}class jt{ref;afs;constructor(Z,se){this.ref=Z,this.afs=se}set(Z,se){return this.ref.set(Z,se)}update(Z){return this.ref.update(Z)}delete(){return this.ref.delete()}collection(Z,se){const Le=this.ref.collection(Z),{ref:lt,query:sn}=Cr(Le,se);return new Wn(lt,sn,this.afs)}snapshotChanges(){return function vr(He,Z){return Dn(He,Z).pipe((0,Q.O)(void 0),ze(),(0,Ne.U)(se=>{const[Le,lt]=se;return lt.exists?Le?.exists?{payload:lt,type:"modified"}:{payload:lt,type:"added"}:{payload:lt,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(z.iC)}valueChanges(Z={}){return this.snapshotChanges().pipe((0,Ne.U)(({payload:se})=>Z.idField?{...se.data(),[Z.idField]:se.id}:se.data()))}get(Z){return(0,oe.D)(this.ref.get(Z)).pipe(z.iC)}}function Kt(He,Z){return nr(He,Z).pipe((0,Q.O)(void 0),ze(),(0,Ne.U)(se=>{const[Le,lt]=se,sn=lt.payload.docChanges(),ir=sn.map(Pn=>({type:Pn.type,payload:Pn}));return Le&&JSON.stringify(Le.payload.metadata)!==JSON.stringify(lt.payload.metadata)&&lt.payload.docs.forEach((Pn,ae)=>{const G=sn.find(P=>P.doc.ref.isEqual(Pn.ref)),O=Le?.payload.docs.find(P=>P.ref.isEqual(Pn.ref));G&&JSON.stringify(G.doc.metadata)===JSON.stringify(Pn.metadata)||!G&&O&&JSON.stringify(O.metadata)===JSON.stringify(Pn.metadata)||ir.push({type:"modified",payload:{oldIndex:ae,newIndex:ae,type:"modified",doc:Pn}})}),ir}))}function zt(He,Z,se){return Kt(He,se).pipe((0,Ze.R)((Le,lt)=>function wn(He,Z,se){return Z.forEach(Le=>{se.indexOf(Le.type)>-1&&(He=function dn(He,Z){switch(Z.type){case"added":if(!He[Z.newIndex]||!He[Z.newIndex].doc.ref.isEqual(Z.doc.ref))return kn(He,Z.newIndex,0,Z);break;case"modified":if(null==He[Z.oldIndex]||He[Z.oldIndex].doc.ref.isEqual(Z.doc.ref)){if(Z.oldIndex!==Z.newIndex){const se=He.slice();return se.splice(Z.oldIndex,1),se.splice(Z.newIndex,0,Z),se}return kn(He,Z.newIndex,1,Z)}break;case"removed":if(He[Z.oldIndex]&&He[Z.oldIndex].doc.ref.isEqual(Z.doc.ref))return kn(He,Z.oldIndex,1)}return He}(He,Le))}),He}(Le,lt.map(sn=>sn.payload),Z),[]),(0,Fe.x)(),(0,Ne.U)(Le=>Le.map(lt=>({type:lt.type,payload:lt}))))}function kn(He,Z,se,...Le){const lt=He.slice();return lt.splice(Z,se,...Le),lt}function Xt(He){return(!He||0===He.length)&&(He=["added","removed","modified"]),He}class Wn{ref;query;afs;constructor(Z,se,Le){this.ref=Z,this.query=se,this.afs=Le}stateChanges(Z){let se=Kt(this.query,this.afs.schedulers.outsideAngular);return Z&&Z.length>0&&(se=se.pipe((0,Ne.U)(Le=>Le.filter(lt=>Z.indexOf(lt.type)>-1)))),se.pipe((0,Q.O)(void 0),ze(),(0,tt.h)(([Le,lt])=>lt.length>0||!Le),(0,Ne.U)(([,Le])=>Le),z.iC)}auditTrail(Z){return this.stateChanges(Z).pipe((0,Ze.R)((se,Le)=>[...se,...Le],[]))}snapshotChanges(Z){const se=Xt(Z);return zt(this.query,se,this.afs.schedulers.outsideAngular).pipe(z.iC)}valueChanges(Z={}){return nr(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ne.U)(se=>se.payload.docs.map(Le=>Z.idField?{...Le.data(),[Z.idField]:Le.id}:Le.data())),z.iC)}get(Z){return(0,oe.D)(this.query.get(Z)).pipe(z.iC)}add(Z){return this.ref.add(Z)}doc(Z){return new jt(this.ref.doc(Z),this.afs)}}class Kr{query;afs;constructor(Z,se){this.query=Z,this.afs=se}stateChanges(Z){return Z&&0!==Z.length?Kt(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ne.U)(se=>se.filter(Le=>Z.indexOf(Le.type)>-1)),(0,tt.h)(se=>se.length>0),z.iC):Kt(this.query,this.afs.schedulers.outsideAngular).pipe(z.iC)}auditTrail(Z){return this.stateChanges(Z).pipe((0,Ze.R)((se,Le)=>[...se,...Le],[]))}snapshotChanges(Z){const se=Xt(Z);return zt(this.query,se,this.afs.schedulers.outsideAngular).pipe(z.iC)}valueChanges(Z={}){return nr(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ne.U)(Le=>Le.payload.docs.map(lt=>Z.idField?{[Z.idField]:lt.id,...lt.data()}:lt.data())),z.iC)}get(Z){return(0,oe.D)(this.query.get(Z)).pipe(z.iC)}}const xt=new Y.OlP("angularfire2.enableFirestorePersistence"),Zr=new Y.OlP("angularfire2.firestore.persistenceSettings"),Zt=new Y.OlP("angularfire2.firestore.settings"),rr=new Y.OlP("angularfire2.firestore.use-emulator");function Cr(He,Z=(se=>se)){return{query:Z(He),ref:He}}let Ur=(()=>{class He{schedulers;firestore;persistenceEnabled$;constructor(se,Le,lt,sn,ir,Pn,ae,G,O,P,M,J,De,We,it,yt,Ct){this.schedulers=ae;const Vt=(0,ue.on)(se,Pn,Le),en=O;P&&(0,te.nw)(Vt,Pn,M,De,We,it,J,yt),[this.firestore,this.persistenceEnabled$]=(0,ue.cc)(`${Vt.name}.firestore`,"AngularFirestore",Vt.name,()=>{const Ht=Pn.runOutsideAngular(()=>Vt.firestore());if(sn&&Ht.settings(sn),en&&Ht.useEmulator(...en),lt&&!(0,p.PM)(ir)){const ar=()=>{try{return(0,oe.D)(Ht.enablePersistence(G||void 0).then(()=>!0,()=>!1))}catch(ai){return typeof console<"u"&&console.warn(ai),(0,Se.of)(!1)}};return[Ht,Pn.runOutsideAngular(ar)]}return[Ht,(0,Se.of)(!1)]},[sn,en,lt])}collection(se,Le){let lt;lt="string"==typeof se?this.firestore.collection(se):se;const{ref:sn,query:ir}=Cr(lt,Le),Pn=this.schedulers.ngZone.run(()=>sn);return new Wn(Pn,ir,this)}collectionGroup(se,Le){const lt=Le||(ir=>ir),sn=this.firestore.collectionGroup(se);return new Kr(lt(sn),this)}doc(se){let Le;Le="string"==typeof se?this.firestore.doc(se):se;const lt=this.schedulers.ngZone.run(()=>Le);return new jt(lt,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(Le){return new(Le||He)(Y.LFG(ue.Dh),Y.LFG(ue.xv,8),Y.LFG(xt,8),Y.LFG(Zt,8),Y.LFG(Y.Lbi),Y.LFG(Y.R0b),Y.LFG(z.HU),Y.LFG(Zr,8),Y.LFG(rr,8),Y.LFG(te.zQ,8),Y.LFG(te.Qv,8),Y.LFG(te.L6,8),Y.LFG(te._Q,8),Y.LFG(te.rT,8),Y.LFG(te.lh,8),Y.LFG(te.f7,8),Y.LFG(z.Rf,8))};static \u0275prov=Y.Yz7({token:He,factory:He.\u0275fac,providedIn:"any"})}return He})(),Rn=(()=>{class He{constructor(){Xn.Z.registerVersion("angularfire",z.q4.full,"fst-compat")}static enablePersistence(se){return{ngModule:He,providers:[{provide:xt,useValue:!0},{provide:Zr,useValue:se}]}}static \u0275fac=function(Le){return new(Le||He)};static \u0275mod=Y.oAB({type:He});static \u0275inj=Y.cJS({providers:[Ur]})}return He})()},7217:(Et,Me,F)=>{F.d(Me,{Dh:()=>oe,GT:()=>le,cc:()=>Ne,hO:()=>ze,on:()=>Q,pX:()=>te,xv:()=>Se});var p=F(5879),Y=F(1920),z=F(7142);const ue=["ngOnDestroy"],te=(Ge,Rt,Ie,de={})=>new Proxy(Ge,{get:(Pe,Te)=>Ie.runOutsideAngular(()=>{if(Ge[Te])return de?.spy?.get&&de.spy.get(Te,Ge[Te]),Ge[Te];if(ue.indexOf(Te)>-1)return()=>{};const ke=Rt.toPromise().then(qe=>{const he=qe?.[Te];return"function"==typeof he?he.bind(qe):he?.then?he.then(ft=>Ie.run(()=>ft)):Ie.run(()=>he)});return new Proxy(()=>{},{get:(qe,he)=>ke[he],apply:(qe,he,ft)=>ke.then(Tt=>{const Gt=Tt?.(...ft);return de?.spy?.apply&&de.spy.apply(Te,ft,Gt),Gt})})})}),le=(Ge,Rt)=>{Rt.forEach(Ie=>{Object.getOwnPropertyNames(Ie.prototype||Ie).forEach(de=>{Object.defineProperty(Ge.prototype,de,Object.getOwnPropertyDescriptor(Ie.prototype||Ie,de))})})};class ge{constructor(Rt){return Rt}}const oe=new p.OlP("angularfire2.app.options"),Se=new p.OlP("angularfire2.app.name");function Q(Ge,Rt,Ie){const Pe="object"==typeof Ie&&Ie||{};Pe.name=Pe.name||"string"==typeof Ie&&Ie||"[DEFAULT]";const ke=z.Z.apps.filter(qe=>qe&&qe.name===Pe.name)[0]||Rt.runOutsideAngular(()=>z.Z.initializeApp(Ge,Pe));try{if(JSON.stringify(Ge)!==JSON.stringify(ke.options)){const qe=!!module.hot;re("error",`${ke.name} Firebase App already initialized with different options${qe?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new ge(ke)}const re=(Ge,...Rt)=>{(0,p.X6Q)()&&typeof console<"u"&&console[Ge](...Rt)},me={provide:ge,useFactory:Q,deps:[oe,p.R0b,[new p.FiY,Se]]};let ze=(()=>{class Ge{static initializeApp(Ie,de){return{ngModule:Ge,providers:[{provide:oe,useValue:Ie},{provide:Se,useValue:de}]}}constructor(Ie){z.Z.registerVersion("angularfire",Y.q4.full,"core"),z.Z.registerVersion("angularfire",Y.q4.full,"app-compat"),z.Z.registerVersion("angular",p.q4F.full,Ie.toString())}static \u0275fac=function(de){return new(de||Ge)(p.LFG(p.Lbi))};static \u0275mod=p.oAB({type:Ge});static \u0275inj=p.cJS({providers:[me]})}return Ge})();function Ne(Ge,Rt,Ie,de,Pe){const[,Te,ke]=globalThis.\u0275AngularfireInstanceCache.find(qe=>qe[0]===Ge)||[];if(Te)return function Ze(Ge,Rt){try{return Ge.toString()===Rt.toString()}catch{return Ge===Rt}}(Pe,ke)||(tt("error",`${Rt} was already initialized on the ${Ie} Firebase App with different settings.${Fe?" You may need to reload as Firebase is not HMR aware.":""}`),tt("warn",{is:Pe,was:ke})),Te;{const qe=de();return globalThis.\u0275AngularfireInstanceCache.push([Ge,qe,Pe]),qe}}const Fe=typeof module<"u"&&!!module.hot,tt=(Ge,...Rt)=>{(0,p.X6Q)()&&typeof console<"u"&&console[Ge](...Rt)};globalThis.\u0275AngularfireInstanceCache||=[]},1920:(Et,Me,F)=>{F.d(Me,{q4:()=>Ne,iC:()=>Gt,HU:()=>Te,Rf:()=>Ge,vb:()=>tt,JM:()=>Fe,u3:()=>zn});var p=F(5879),Y=F(3182),z=F(1954),te=F(2631);const ge=new class le extends te.v{}(class ue extends z.o{constructor(pt,mt){super(pt,mt),this.scheduler=pt,this.work=mt}schedule(pt,mt=0){return mt>0?super.schedule(pt,mt):(this.delay=mt,this.state=pt,this.scheduler.flush(this),this)}execute(pt,mt){return mt>0||this.closed?super.execute(pt,mt):this._execute(pt,mt)}requestAsyncId(pt,mt,pe=0){return null!=pe&&pe>0||null==pe&&this.delay>0?super.requestAsyncId(pt,mt,pe):(pt.flush(this),0)}});var Se=F(6321),Q=F(5592),re=F(9397),me=F(5137),ze=F(3093);const Ne=new p.GfV("ANGULARFIRE2_VERSION");function Fe(At,pt,mt){if(pt){if(1===pt.length)return pt[0];const Ce=pt.filter(ve=>ve.app===mt);if(1===Ce.length)return Ce[0]}return mt.container.getProvider(At).getImmediate({optional:!0})}const tt=(At,pt)=>{const mt=pt?[pt]:(0,Y.C6)(),pe=[];return mt.forEach(ye=>{ye.container.getProvider(At).instances.forEach(ve=>{pe.includes(ve)||pe.push(ve)})}),pe};class Ge{constructor(){return tt(Rt)}}const Rt="app-check";function Ie(){}class de{zone;delegate;constructor(pt,mt=ge){this.zone=pt,this.delegate=mt}now(){return this.delegate.now()}schedule(pt,mt,pe){const ye=this.zone;return this.delegate.schedule(function(ve){ye.runGuarded(()=>{pt.apply(this,[ve])})},mt,pe)}}class Pe{zone;task=null;constructor(pt){this.zone=pt}call(pt,mt){const pe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ie,{},Ie,Ie)),mt.pipe((0,re.b)({next:pe,complete:pe,error:pe})).subscribe(pt).add(pe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Te=(()=>{class At{ngZone;outsideAngular;insideAngular;constructor(mt){this.ngZone=mt,this.outsideAngular=mt.runOutsideAngular(()=>new de(Zone.current)),this.insideAngular=mt.run(()=>new de(Zone.current,Se.z)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(pe){return new(pe||At)(p.LFG(p.R0b))};static \u0275prov=p.Yz7({token:At,factory:At.\u0275fac,providedIn:"root"})}return At})();function ke(){const At=globalThis.\u0275AngularFireScheduler;if(!At)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return At}function he(At){return ke().ngZone.run(()=>At())}function Gt(At){return function Jt(At){return function(mt){return(mt=mt.lift(new Pe(At.ngZone))).pipe((0,me.R)(At.outsideAngular),(0,ze.Q)(At.insideAngular))}}(ke())(At)}const pr=(At,pt)=>function(){const pe=arguments;return pt&&setTimeout(()=>{"scheduled"===pt.state&&pt.invoke()},10),he(()=>At.apply(void 0,pe))},zn=(At,pt)=>function(){let mt;const pe=arguments;for(let Ce=0;Ce<arguments.length;Ce++)"function"==typeof pe[Ce]&&(pt&&(mt||=he(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ie,{},Ie,Ie))),pe[Ce]=pr(pe[Ce],mt));const ye=function qe(At){return ke().ngZone.runOutsideAngular(()=>At())}(()=>At.apply(this,pe));if(!pt){if(ye instanceof Q.y){const Ce=ke();return ye.pipe((0,me.R)(Ce.outsideAngular),(0,ze.Q)(Ce.insideAngular))}return he(()=>ye)}return ye instanceof Q.y?ye.pipe(Gt):ye instanceof Promise?he(()=>new Promise((Ce,ve)=>ye.then(xe=>he(()=>Ce(xe)),xe=>he(()=>ve(xe))))):"function"==typeof ye&&mt?function(){return setTimeout(()=>{mt&&"scheduled"===mt.state&&mt.invoke()},10),ye.apply(this,arguments)}:he(()=>ye)}},95:(Et,Me,F)=>{F.d(Me,{Wl:()=>tt,Fj:()=>de,CE:()=>xi,qu:()=>Dr,u:()=>Ln,sg:()=>vt,x0:()=>Fn,u5:()=>Wa,JJ:()=>Kt,JL:()=>zt,F:()=>bi,On:()=>Mi,YN:()=>Ns,wV:()=>ms,UX:()=>Do,EJ:()=>ni,kI:()=>ft,_Y:()=>co,Kr:()=>gi});var p=F(5879),Y=F(6814),z=F(2459),ue=F(5592),te=F(7453),le=F(4829),ge=F(9940),oe=F(8251),Se=F(7400),Q=F(2714),me=F(7398);let ze=(()=>{class V{constructor(b,q){this._renderer=b,this._elementRef=q,this.onChange=ce=>{},this.onTouched=()=>{}}setProperty(b,q){this._renderer.setProperty(this._elementRef.nativeElement,b,q)}registerOnTouched(b){this.onTouched=b}registerOnChange(b){this.onChange=b}setDisabledState(b){this.setProperty("disabled",b)}static#e=this.\u0275fac=function(q){return new(q||V)(p.Y36(p.Qsj),p.Y36(p.SBq))};static#t=this.\u0275dir=p.lG2({type:V})}return V})(),Ne=(()=>{class V extends ze{static#e=this.\u0275fac=function(){let b;return function(ce){return(b||(b=p.n5z(V)))(ce||V)}}();static#t=this.\u0275dir=p.lG2({type:V,features:[p.qOj]})}return V})();const Ze=new p.OlP("NgValueAccessor"),Fe={provide:Ze,useExisting:(0,p.Gpc)(()=>tt),multi:!0};let tt=(()=>{class V extends Ne{writeValue(b){this.setProperty("checked",b)}static#e=this.\u0275fac=function(){let b;return function(ce){return(b||(b=p.n5z(V)))(ce||V)}}();static#t=this.\u0275dir=p.lG2({type:V,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(q,ce){1&q&&p.NdJ("change",function(an){return ce.onChange(an.target.checked)})("blur",function(){return ce.onTouched()})},features:[p._Bn([Fe]),p.qOj]})}return V})();const Ge={provide:Ze,useExisting:(0,p.Gpc)(()=>de),multi:!0},Ie=new p.OlP("CompositionEventMode");let de=(()=>{class V extends ze{constructor(b,q,ce){super(b,q),this._compositionMode=ce,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Rt(){const V=(0,Y.q)()?(0,Y.q)().getUserAgent():"";return/android (\d+)/.test(V.toLowerCase())}())}writeValue(b){this.setProperty("value",b??"")}_handleInput(b){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(b)}_compositionStart(){this._composing=!0}_compositionEnd(b){this._composing=!1,this._compositionMode&&this.onChange(b)}static#e=this.\u0275fac=function(q){return new(q||V)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(Ie,8))};static#t=this.\u0275dir=p.lG2({type:V,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(q,ce){1&q&&p.NdJ("input",function(an){return ce._handleInput(an.target.value)})("blur",function(){return ce.onTouched()})("compositionstart",function(){return ce._compositionStart()})("compositionend",function(an){return ce._compositionEnd(an.target.value)})},features:[p._Bn([Ge]),p.qOj]})}return V})();function Pe(V){return null==V||("string"==typeof V||Array.isArray(V))&&0===V.length}function Te(V){return null!=V&&"number"==typeof V.length}const ke=new p.OlP("NgValidators"),qe=new p.OlP("NgAsyncValidators"),he=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ft{static min(L){return function Tt(V){return L=>{if(Pe(L.value)||Pe(V))return null;const b=parseFloat(L.value);return!isNaN(b)&&b<V?{min:{min:V,actual:L.value}}:null}}(L)}static max(L){return function Gt(V){return L=>{if(Pe(L.value)||Pe(V))return null;const b=parseFloat(L.value);return!isNaN(b)&&b>V?{max:{max:V,actual:L.value}}:null}}(L)}static required(L){return function Jt(V){return Pe(V.value)?{required:!0}:null}(L)}static requiredTrue(L){return function pr(V){return!0===V.value?null:{required:!0}}(L)}static email(L){return function zn(V){return Pe(V.value)||he.test(V.value)?null:{email:!0}}(L)}static minLength(L){return function At(V){return L=>Pe(L.value)||!Te(L.value)?null:L.value.length<V?{minlength:{requiredLength:V,actualLength:L.value.length}}:null}(L)}static maxLength(L){return function pt(V){return L=>Te(L.value)&&L.value.length>V?{maxlength:{requiredLength:V,actualLength:L.value.length}}:null}(L)}static pattern(L){return function mt(V){if(!V)return pe;let L,b;return"string"==typeof V?(b="","^"!==V.charAt(0)&&(b+="^"),b+=V,"$"!==V.charAt(V.length-1)&&(b+="$"),L=new RegExp(b)):(b=V.toString(),L=V),q=>{if(Pe(q.value))return null;const ce=q.value;return L.test(ce)?null:{pattern:{requiredPattern:b,actualValue:ce}}}}(L)}static nullValidator(L){return null}static compose(L){return rt(L)}static composeAsync(L){return Lt(L)}}function pe(V){return null}function ye(V){return null!=V}function Ce(V){return(0,p.QGY)(V)?(0,z.D)(V):V}function ve(V){let L={};return V.forEach(b=>{L=null!=b?{...L,...b}:L}),0===Object.keys(L).length?null:L}function xe(V,L){return L.map(b=>b(V))}function ct(V){return V.map(L=>function Qe(V){return!V.validate}(L)?L:b=>L.validate(b))}function rt(V){if(!V)return null;const L=V.filter(ye);return 0==L.length?null:function(b){return ve(xe(b,L))}}function at(V){return null!=V?rt(ct(V)):null}function Lt(V){if(!V)return null;const L=V.filter(ye);return 0==L.length?null:function(b){return function re(...V){const L=(0,ge.jO)(V),{args:b,keys:q}=(0,te.D)(V),ce=new ue.y(bt=>{const{length:an}=b;if(!an)return void bt.complete();const oi=new Array(an);let Us=an,Ji=an;for(let wo=0;wo<an;wo++){let ui=!1;(0,le.Xf)(b[wo]).subscribe((0,oe.x)(bt,ci=>{ui||(ui=!0,Ji--),oi[wo]=ci},()=>Us--,void 0,()=>{(!Us||!ui)&&(Ji||bt.next(q?(0,Q.n)(q,oi):oi),bt.complete())}))}});return L?ce.pipe((0,Se.Z)(L)):ce}(xe(b,L).map(Ce)).pipe((0,me.U)(ve))}}function fn(V){return null!=V?Lt(ct(V)):null}function Ut(V,L){return null===V?[L]:Array.isArray(V)?[...V,L]:[V,L]}function En(V){return V._rawValidators}function pn(V){return V._rawAsyncValidators}function Qt(V){return V?Array.isArray(V)?V:[V]:[]}function yn(V,L){return Array.isArray(V)?V.includes(L):V===L}function On(V,L){const b=Qt(L);return Qt(V).forEach(ce=>{yn(b,ce)||b.push(ce)}),b}function on(V,L){return Qt(L).filter(b=>!yn(V,b))}class Xn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(L){this._rawValidators=L||[],this._composedValidatorFn=at(this._rawValidators)}_setAsyncValidators(L){this._rawAsyncValidators=L||[],this._composedAsyncValidatorFn=fn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(L){this._onDestroyCallbacks.push(L)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(L=>L()),this._onDestroyCallbacks=[]}reset(L=void 0){this.control&&this.control.reset(L)}hasError(L,b){return!!this.control&&this.control.hasError(L,b)}getError(L,b){return this.control?this.control.getError(L,b):null}}class In extends Xn{get formDirective(){return null}get path(){return null}}class Dn extends Xn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class vr{constructor(L){this._cd=L}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Kt=(()=>{class V extends vr{constructor(b){super(b)}static#e=this.\u0275fac=function(q){return new(q||V)(p.Y36(Dn,2))};static#t=this.\u0275dir=p.lG2({type:V,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(q,ce){2&q&&p.ekj("ng-untouched",ce.isUntouched)("ng-touched",ce.isTouched)("ng-pristine",ce.isPristine)("ng-dirty",ce.isDirty)("ng-valid",ce.isValid)("ng-invalid",ce.isInvalid)("ng-pending",ce.isPending)},features:[p.qOj]})}return V})(),zt=(()=>{class V extends vr{constructor(b){super(b)}static#e=this.\u0275fac=function(q){return new(q||V)(p.Y36(In,10))};static#t=this.\u0275dir=p.lG2({type:V,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(q,ce){2&q&&p.ekj("ng-untouched",ce.isUntouched)("ng-touched",ce.isTouched)("ng-pristine",ce.isPristine)("ng-dirty",ce.isDirty)("ng-valid",ce.isValid)("ng-invalid",ce.isInvalid)("ng-pending",ce.isPending)("ng-submitted",ce.isSubmitted)},features:[p.qOj]})}return V})();const lt="VALID",sn="INVALID",ir="PENDING",Pn="DISABLED";function ae(V){return(M(V)?V.validators:V)||null}function O(V,L){return(M(L)?L.asyncValidators:V)||null}function M(V){return null!=V&&!Array.isArray(V)&&"object"==typeof V}function J(V,L,b){const q=V.controls;if(!(L?Object.keys(q):q).length)throw new p.vHH(1e3,"");if(!q[b])throw new p.vHH(1001,"")}function De(V,L,b){V._forEachChild((q,ce)=>{if(void 0===b[ce])throw new p.vHH(1002,"")})}class We{constructor(L,b){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(L),this._assignAsyncValidators(b)}get validator(){return this._composedValidatorFn}set validator(L){this._rawValidators=this._composedValidatorFn=L}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(L){this._rawAsyncValidators=this._composedAsyncValidatorFn=L}get parent(){return this._parent}get valid(){return this.status===lt}get invalid(){return this.status===sn}get pending(){return this.status==ir}get disabled(){return this.status===Pn}get enabled(){return this.status!==Pn}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(L){this._assignValidators(L)}setAsyncValidators(L){this._assignAsyncValidators(L)}addValidators(L){this.setValidators(On(L,this._rawValidators))}addAsyncValidators(L){this.setAsyncValidators(On(L,this._rawAsyncValidators))}removeValidators(L){this.setValidators(on(L,this._rawValidators))}removeAsyncValidators(L){this.setAsyncValidators(on(L,this._rawAsyncValidators))}hasValidator(L){return yn(this._rawValidators,L)}hasAsyncValidator(L){return yn(this._rawAsyncValidators,L)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(L={}){this.touched=!0,this._parent&&!L.onlySelf&&this._parent.markAsTouched(L)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(L=>L.markAllAsTouched())}markAsUntouched(L={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(b=>{b.markAsUntouched({onlySelf:!0})}),this._parent&&!L.onlySelf&&this._parent._updateTouched(L)}markAsDirty(L={}){this.pristine=!1,this._parent&&!L.onlySelf&&this._parent.markAsDirty(L)}markAsPristine(L={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(b=>{b.markAsPristine({onlySelf:!0})}),this._parent&&!L.onlySelf&&this._parent._updatePristine(L)}markAsPending(L={}){this.status=ir,!1!==L.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!L.onlySelf&&this._parent.markAsPending(L)}disable(L={}){const b=this._parentMarkedDirty(L.onlySelf);this.status=Pn,this.errors=null,this._forEachChild(q=>{q.disable({...L,onlySelf:!0})}),this._updateValue(),!1!==L.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...L,skipPristineCheck:b}),this._onDisabledChange.forEach(q=>q(!0))}enable(L={}){const b=this._parentMarkedDirty(L.onlySelf);this.status=lt,this._forEachChild(q=>{q.enable({...L,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:L.emitEvent}),this._updateAncestors({...L,skipPristineCheck:b}),this._onDisabledChange.forEach(q=>q(!1))}_updateAncestors(L){this._parent&&!L.onlySelf&&(this._parent.updateValueAndValidity(L),L.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(L){this._parent=L}getRawValue(){return this.value}updateValueAndValidity(L={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===lt||this.status===ir)&&this._runAsyncValidator(L.emitEvent)),!1!==L.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!L.onlySelf&&this._parent.updateValueAndValidity(L)}_updateTreeValidity(L={emitEvent:!0}){this._forEachChild(b=>b._updateTreeValidity(L)),this.updateValueAndValidity({onlySelf:!0,emitEvent:L.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Pn:lt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(L){if(this.asyncValidator){this.status=ir,this._hasOwnPendingAsyncValidator=!0;const b=Ce(this.asyncValidator(this));this._asyncValidationSubscription=b.subscribe(q=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(q,{emitEvent:L})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(L,b={}){this.errors=L,this._updateControlsErrors(!1!==b.emitEvent)}get(L){let b=L;return null==b||(Array.isArray(b)||(b=b.split(".")),0===b.length)?null:b.reduce((q,ce)=>q&&q._find(ce),this)}getError(L,b){const q=b?this.get(b):this;return q&&q.errors?q.errors[L]:null}hasError(L,b){return!!this.getError(L,b)}get root(){let L=this;for(;L._parent;)L=L._parent;return L}_updateControlsErrors(L){this.status=this._calculateStatus(),L&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(L)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?Pn:this.errors?sn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ir)?ir:this._anyControlsHaveStatus(sn)?sn:lt}_anyControlsHaveStatus(L){return this._anyControls(b=>b.status===L)}_anyControlsDirty(){return this._anyControls(L=>L.dirty)}_anyControlsTouched(){return this._anyControls(L=>L.touched)}_updatePristine(L={}){this.pristine=!this._anyControlsDirty(),this._parent&&!L.onlySelf&&this._parent._updatePristine(L)}_updateTouched(L={}){this.touched=this._anyControlsTouched(),this._parent&&!L.onlySelf&&this._parent._updateTouched(L)}_registerOnCollectionChange(L){this._onCollectionChange=L}_setUpdateStrategy(L){M(L)&&null!=L.updateOn&&(this._updateOn=L.updateOn)}_parentMarkedDirty(L){return!L&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(L){return null}_assignValidators(L){this._rawValidators=Array.isArray(L)?L.slice():L,this._composedValidatorFn=function G(V){return Array.isArray(V)?at(V):V||null}(this._rawValidators)}_assignAsyncValidators(L){this._rawAsyncValidators=Array.isArray(L)?L.slice():L,this._composedAsyncValidatorFn=function P(V){return Array.isArray(V)?fn(V):V||null}(this._rawAsyncValidators)}}class it extends We{constructor(L,b,q){super(ae(b),O(q,b)),this.controls=L,this._initObservables(),this._setUpdateStrategy(b),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(L,b){return this.controls[L]?this.controls[L]:(this.controls[L]=b,b.setParent(this),b._registerOnCollectionChange(this._onCollectionChange),b)}addControl(L,b,q={}){this.registerControl(L,b),this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}removeControl(L,b={}){this.controls[L]&&this.controls[L]._registerOnCollectionChange(()=>{}),delete this.controls[L],this.updateValueAndValidity({emitEvent:b.emitEvent}),this._onCollectionChange()}setControl(L,b,q={}){this.controls[L]&&this.controls[L]._registerOnCollectionChange(()=>{}),delete this.controls[L],b&&this.registerControl(L,b),this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}contains(L){return this.controls.hasOwnProperty(L)&&this.controls[L].enabled}setValue(L,b={}){De(this,0,L),Object.keys(L).forEach(q=>{J(this,!0,q),this.controls[q].setValue(L[q],{onlySelf:!0,emitEvent:b.emitEvent})}),this.updateValueAndValidity(b)}patchValue(L,b={}){null!=L&&(Object.keys(L).forEach(q=>{const ce=this.controls[q];ce&&ce.patchValue(L[q],{onlySelf:!0,emitEvent:b.emitEvent})}),this.updateValueAndValidity(b))}reset(L={},b={}){this._forEachChild((q,ce)=>{q.reset(L?L[ce]:null,{onlySelf:!0,emitEvent:b.emitEvent})}),this._updatePristine(b),this._updateTouched(b),this.updateValueAndValidity(b)}getRawValue(){return this._reduceChildren({},(L,b,q)=>(L[q]=b.getRawValue(),L))}_syncPendingControls(){let L=this._reduceChildren(!1,(b,q)=>!!q._syncPendingControls()||b);return L&&this.updateValueAndValidity({onlySelf:!0}),L}_forEachChild(L){Object.keys(this.controls).forEach(b=>{const q=this.controls[b];q&&L(q,b)})}_setUpControls(){this._forEachChild(L=>{L.setParent(this),L._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(L){for(const[b,q]of Object.entries(this.controls))if(this.contains(b)&&L(q))return!0;return!1}_reduceValue(){return this._reduceChildren({},(b,q,ce)=>((q.enabled||this.disabled)&&(b[ce]=q.value),b))}_reduceChildren(L,b){let q=L;return this._forEachChild((ce,bt)=>{q=b(q,ce,bt)}),q}_allControlsDisabled(){for(const L of Object.keys(this.controls))if(this.controls[L].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(L){return this.controls.hasOwnProperty(L)?this.controls[L]:null}}class Vt extends it{}const Ht=new p.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>ar}),ar="always";function ai(V,L){return[...L.path,V]}function Be(V,L,b=ar){Wt(V,L),L.valueAccessor.writeValue(V.value),(V.disabled||"always"===b)&&L.valueAccessor.setDisabledState?.(V.disabled),function gn(V,L){L.valueAccessor.registerOnChange(b=>{V._pendingValue=b,V._pendingChange=!0,V._pendingDirty=!0,"change"===V.updateOn&&qn(V,L)})}(V,L),function Si(V,L){const b=(q,ce)=>{L.valueAccessor.writeValue(q),ce&&L.viewToModelUpdate(q)};V.registerOnChange(b),L._registerOnDestroy(()=>{V._unregisterOnChange(b)})}(V,L),function Er(V,L){L.valueAccessor.registerOnTouched(()=>{V._pendingTouched=!0,"blur"===V.updateOn&&V._pendingChange&&qn(V,L),"submit"!==V.updateOn&&V.markAsTouched()})}(V,L),function Pt(V,L){if(L.valueAccessor.setDisabledState){const b=q=>{L.valueAccessor.setDisabledState(q)};V.registerOnDisabledChange(b),L._registerOnDestroy(()=>{V._unregisterOnDisabledChange(b)})}}(V,L)}function we(V,L,b=!0){const q=()=>{};L.valueAccessor&&(L.valueAccessor.registerOnChange(q),L.valueAccessor.registerOnTouched(q)),St(V,L),V&&(L._invokeOnDestroyCallbacks(),V._registerOnCollectionChange(()=>{}))}function nt(V,L){V.forEach(b=>{b.registerOnValidatorChange&&b.registerOnValidatorChange(L)})}function Wt(V,L){const b=En(V);null!==L.validator?V.setValidators(Ut(b,L.validator)):"function"==typeof b&&V.setValidators([b]);const q=pn(V);null!==L.asyncValidator?V.setAsyncValidators(Ut(q,L.asyncValidator)):"function"==typeof q&&V.setAsyncValidators([q]);const ce=()=>V.updateValueAndValidity();nt(L._rawValidators,ce),nt(L._rawAsyncValidators,ce)}function St(V,L){let b=!1;if(null!==V){if(null!==L.validator){const ce=En(V);if(Array.isArray(ce)&&ce.length>0){const bt=ce.filter(an=>an!==L.validator);bt.length!==ce.length&&(b=!0,V.setValidators(bt))}}if(null!==L.asyncValidator){const ce=pn(V);if(Array.isArray(ce)&&ce.length>0){const bt=ce.filter(an=>an!==L.asyncValidator);bt.length!==ce.length&&(b=!0,V.setAsyncValidators(bt))}}}const q=()=>{};return nt(L._rawValidators,q),nt(L._rawAsyncValidators,q),b}function qn(V,L){V._pendingDirty&&V.markAsDirty(),V.setValue(V._pendingValue,{emitModelToViewChange:!1}),L.viewToModelUpdate(V._pendingValue),V._pendingChange=!1}function Ir(V,L){Wt(V,L)}function Hr(V,L){if(!V.hasOwnProperty("model"))return!1;const b=V.model;return!!b.isFirstChange()||!Object.is(L,b.currentValue)}function bs(V,L){V._syncPendingControls(),L.forEach(b=>{const q=b.control;"submit"===q.updateOn&&q._pendingChange&&(b.viewToModelUpdate(q._pendingValue),q._pendingChange=!1)})}function ei(V,L){if(!L)return null;let b,q,ce;return Array.isArray(L),L.forEach(bt=>{bt.constructor===de?b=bt:function Xr(V){return Object.getPrototypeOf(V.constructor)===Ne}(bt)?q=bt:ce=bt}),ce||q||b||null}const qi={provide:In,useExisting:(0,p.Gpc)(()=>bi)},gr=(()=>Promise.resolve())();let bi=(()=>{class V extends In{constructor(b,q,ce){super(),this.callSetDisabledState=ce,this.submitted=!1,this._directives=new Set,this.ngSubmit=new p.vpe,this.form=new it({},at(b),fn(q))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(b){gr.then(()=>{const q=this._findContainer(b.path);b.control=q.registerControl(b.name,b.control),Be(b.control,b,this.callSetDisabledState),b.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(b)})}getControl(b){return this.form.get(b.path)}removeControl(b){gr.then(()=>{const q=this._findContainer(b.path);q&&q.removeControl(b.name),this._directives.delete(b)})}addFormGroup(b){gr.then(()=>{const q=this._findContainer(b.path),ce=new it({});Ir(ce,b),q.registerControl(b.name,ce),ce.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(b){gr.then(()=>{const q=this._findContainer(b.path);q&&q.removeControl(b.name)})}getFormGroup(b){return this.form.get(b.path)}updateModel(b,q){gr.then(()=>{this.form.get(b.path).setValue(q)})}setValue(b){this.control.setValue(b)}onSubmit(b){return this.submitted=!0,bs(this.form,this._directives),this.ngSubmit.emit(b),"dialog"===b?.target?.method}onReset(){this.resetForm()}resetForm(b=void 0){this.form.reset(b),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(b){return b.pop(),b.length?this.form.get(b):this.form}static#e=this.\u0275fac=function(q){return new(q||V)(p.Y36(ke,10),p.Y36(qe,10),p.Y36(Ht,8))};static#t=this.\u0275dir=p.lG2({type:V,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(q,ce){1&q&&p.NdJ("submit",function(an){return ce.onSubmit(an)})("reset",function(){return ce.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([qi]),p.qOj]})}return V})();function Rs(V,L){const b=V.indexOf(L);b>-1&&V.splice(b,1)}function ha(V){return"object"==typeof V&&null!==V&&2===Object.keys(V).length&&"value"in V&&"disabled"in V}const Ui=class extends We{constructor(L=null,b,q){super(ae(b),O(q,b)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(L),this._setUpdateStrategy(b),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),M(b)&&(b.nonNullable||b.initialValueIsDefault)&&(this.defaultValue=ha(L)?L.value:L)}setValue(L,b={}){this.value=this._pendingValue=L,this._onChange.length&&!1!==b.emitModelToViewChange&&this._onChange.forEach(q=>q(this.value,!1!==b.emitViewToModelChange)),this.updateValueAndValidity(b)}patchValue(L,b={}){this.setValue(L,b)}reset(L=this.defaultValue,b={}){this._applyFormState(L),this.markAsPristine(b),this.markAsUntouched(b),this.setValue(this.value,b),this._pendingChange=!1}_updateValue(){}_anyControls(L){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(L){this._onChange.push(L)}_unregisterOnChange(L){Rs(this._onChange,L)}registerOnDisabledChange(L){this._onDisabledChange.push(L)}_unregisterOnDisabledChange(L){Rs(this._onDisabledChange,L)}_forEachChild(L){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(L){ha(L)?(this.value=this._pendingValue=L.value,L.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=L}};let uo=(()=>{class V extends In{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return ai(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static#e=this.\u0275fac=function(){let b;return function(ce){return(b||(b=p.n5z(V)))(ce||V)}}();static#t=this.\u0275dir=p.lG2({type:V,features:[p.qOj]})}return V})();const Ms={provide:Dn,useExisting:(0,p.Gpc)(()=>Mi)},Pi=(()=>Promise.resolve())();let Mi=(()=>{class V extends Dn{constructor(b,q,ce,bt,an,oi){super(),this._changeDetectorRef=an,this.callSetDisabledState=oi,this.control=new Ui,this._registered=!1,this.name="",this.update=new p.vpe,this._parent=b,this._setValidators(q),this._setAsyncValidators(ce),this.valueAccessor=ei(0,bt)}ngOnChanges(b){if(this._checkForErrors(),!this._registered||"name"in b){if(this._registered&&(this._checkName(),this.formDirective)){const q=b.name.previousValue;this.formDirective.removeControl({name:q,path:this._getPath(q)})}this._setUpControl()}"isDisabled"in b&&this._updateDisabled(b),Hr(b,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(b){this.viewModel=b,this.update.emit(b)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Be(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(b){Pi.then(()=>{this.control.setValue(b,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(b){const q=b.isDisabled.currentValue,ce=0!==q&&(0,p.VuI)(q);Pi.then(()=>{ce&&!this.control.disabled?this.control.disable():!ce&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(b){return this._parent?ai(b,this._parent):[b]}static#e=this.\u0275fac=function(q){return new(q||V)(p.Y36(In,9),p.Y36(ke,10),p.Y36(qe,10),p.Y36(Ze,10),p.Y36(p.sBO,8),p.Y36(Ht,8))};static#t=this.\u0275dir=p.lG2({type:V,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([Ms]),p.qOj,p.TTD]})}return V})(),co=(()=>{class V{static#e=this.\u0275fac=function(q){return new(q||V)};static#t=this.\u0275dir=p.lG2({type:V,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return V})();const xs={provide:Ze,useExisting:(0,p.Gpc)(()=>ms),multi:!0};let ms=(()=>{class V extends Ne{writeValue(b){this.setProperty("value",b??"")}registerOnChange(b){this.onChange=q=>{b(""==q?null:parseFloat(q))}}static#e=this.\u0275fac=function(){let b;return function(ce){return(b||(b=p.n5z(V)))(ce||V)}}();static#t=this.\u0275dir=p.lG2({type:V,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(q,ce){1&q&&p.NdJ("input",function(an){return ce.onChange(an.target.value)})("blur",function(){return ce.onTouched()})},features:[p._Bn([xs]),p.qOj]})}return V})(),ur=(()=>{class V{static#e=this.\u0275fac=function(q){return new(q||V)};static#t=this.\u0275mod=p.oAB({type:V});static#n=this.\u0275inj=p.cJS({})}return V})();const Un=new p.OlP("NgModelWithFormControlWarning"),Bn={provide:In,useExisting:(0,p.Gpc)(()=>vt)};let vt=(()=>{class V extends In{constructor(b,q,ce){super(),this.callSetDisabledState=ce,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(b),this._setAsyncValidators(q)}ngOnChanges(b){this._checkFormPresent(),b.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(St(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(b){const q=this.form.get(b.path);return Be(q,b,this.callSetDisabledState),q.updateValueAndValidity({emitEvent:!1}),this.directives.push(b),q}getControl(b){return this.form.get(b.path)}removeControl(b){we(b.control||null,b,!1),function us(V,L){const b=V.indexOf(L);b>-1&&V.splice(b,1)}(this.directives,b)}addFormGroup(b){this._setUpFormContainer(b)}removeFormGroup(b){this._cleanUpFormContainer(b)}getFormGroup(b){return this.form.get(b.path)}addFormArray(b){this._setUpFormContainer(b)}removeFormArray(b){this._cleanUpFormContainer(b)}getFormArray(b){return this.form.get(b.path)}updateModel(b,q){this.form.get(b.path).setValue(q)}onSubmit(b){return this.submitted=!0,bs(this.form,this.directives),this.ngSubmit.emit(b),"dialog"===b?.target?.method}onReset(){this.resetForm()}resetForm(b=void 0){this.form.reset(b),this.submitted=!1}_updateDomValue(){this.directives.forEach(b=>{const q=b.control,ce=this.form.get(b.path);q!==ce&&(we(q||null,b),(V=>V instanceof Ui)(ce)&&(Be(ce,b,this.callSetDisabledState),b.control=ce))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(b){const q=this.form.get(b.path);Ir(q,b),q.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(b){if(this.form){const q=this.form.get(b.path);q&&function Ii(V,L){return St(V,L)}(q,b)&&q.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Wt(this.form,this),this._oldForm&&St(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(q){return new(q||V)(p.Y36(ke,10),p.Y36(qe,10),p.Y36(Ht,8))};static#t=this.\u0275dir=p.lG2({type:V,selectors:[["","formGroup",""]],hostBindings:function(q,ce){1&q&&p.NdJ("submit",function(an){return ce.onSubmit(an)})("reset",function(){return ce.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([Bn]),p.qOj,p.TTD]})}return V})();const tn={provide:In,useExisting:(0,p.Gpc)(()=>Fn)};let Fn=(()=>{class V extends uo{constructor(b,q,ce){super(),this.name=null,this._parent=b,this._setValidators(q),this._setAsyncValidators(ce)}_checkParentType(){er(this._parent)}static#e=this.\u0275fac=function(q){return new(q||V)(p.Y36(In,13),p.Y36(ke,10),p.Y36(qe,10))};static#t=this.\u0275dir=p.lG2({type:V,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[p._Bn([tn]),p.qOj]})}return V})();const zr={provide:In,useExisting:(0,p.Gpc)(()=>xi)};let xi=(()=>{class V extends In{constructor(b,q,ce){super(),this.name=null,this._parent=b,this._setValidators(q),this._setAsyncValidators(ce)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return ai(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){er(this._parent)}static#e=this.\u0275fac=function(q){return new(q||V)(p.Y36(In,13),p.Y36(ke,10),p.Y36(qe,10))};static#t=this.\u0275dir=p.lG2({type:V,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[p._Bn([zr]),p.qOj]})}return V})();function er(V){return!(V instanceof Fn||V instanceof vt||V instanceof xi)}const pi={provide:Dn,useExisting:(0,p.Gpc)(()=>Ln)};let Ln=(()=>{class V extends Dn{set isDisabled(b){}static#e=this._ngModelWarningSentOnce=!1;constructor(b,q,ce,bt,an){super(),this._ngModelWarningConfig=an,this._added=!1,this.name=null,this.update=new p.vpe,this._ngModelWarningSent=!1,this._parent=b,this._setValidators(q),this._setAsyncValidators(ce),this.valueAccessor=ei(0,bt)}ngOnChanges(b){this._added||this._setUpControl(),Hr(b,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(b){this.viewModel=b,this.update.emit(b)}get path(){return ai(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(q){return new(q||V)(p.Y36(In,13),p.Y36(ke,10),p.Y36(qe,10),p.Y36(Ze,10),p.Y36(Un,8))};static#n=this.\u0275dir=p.lG2({type:V,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[p._Bn([pi]),p.qOj,p.TTD]})}return V})();const mr={provide:Ze,useExisting:(0,p.Gpc)(()=>ni),multi:!0};function ds(V,L){return null==V?`${L}`:(L&&"object"==typeof L&&(L="Object"),`${V}: ${L}`.slice(0,50))}let ni=(()=>{class V extends Ne{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(b){this._compareWith=b}writeValue(b){this.value=b;const ce=ds(this._getOptionId(b),b);this.setProperty("value",ce)}registerOnChange(b){this.onChange=q=>{this.value=this._getOptionValue(q),b(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(b){for(const q of this._optionMap.keys())if(this._compareWith(this._optionMap.get(q),b))return q;return null}_getOptionValue(b){const q=function nn(V){return V.split(":")[0]}(b);return this._optionMap.has(q)?this._optionMap.get(q):b}static#e=this.\u0275fac=function(){let b;return function(ce){return(b||(b=p.n5z(V)))(ce||V)}}();static#t=this.\u0275dir=p.lG2({type:V,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(q,ce){1&q&&p.NdJ("change",function(an){return ce.onChange(an.target.value)})("blur",function(){return ce.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([mr]),p.qOj]})}return V})(),Ns=(()=>{class V{constructor(b,q,ce){this._element=b,this._renderer=q,this._select=ce,this._select&&(this.id=this._select._registerOption())}set ngValue(b){null!=this._select&&(this._select._optionMap.set(this.id,b),this._setElementValue(ds(this.id,b)),this._select.writeValue(this._select.value))}set value(b){this._setElementValue(b),this._select&&this._select.writeValue(this._select.value)}_setElementValue(b){this._renderer.setProperty(this._element.nativeElement,"value",b)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(q){return new(q||V)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(ni,9))};static#t=this.\u0275dir=p.lG2({type:V,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return V})();const Os={provide:Ze,useExisting:(0,p.Gpc)(()=>ri),multi:!0};function dr(V,L){return null==V?`${L}`:("string"==typeof L&&(L=`'${L}'`),L&&"object"==typeof L&&(L="Object"),`${V}: ${L}`.slice(0,50))}let ri=(()=>{class V extends Ne{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(b){this._compareWith=b}writeValue(b){let q;if(this.value=b,Array.isArray(b)){const ce=b.map(bt=>this._getOptionId(bt));q=(bt,an)=>{bt._setSelected(ce.indexOf(an.toString())>-1)}}else q=(ce,bt)=>{ce._setSelected(!1)};this._optionMap.forEach(q)}registerOnChange(b){this.onChange=q=>{const ce=[],bt=q.selectedOptions;if(void 0!==bt){const an=bt;for(let oi=0;oi<an.length;oi++){const Ji=this._getOptionValue(an[oi].value);ce.push(Ji)}}else{const an=q.options;for(let oi=0;oi<an.length;oi++){const Us=an[oi];if(Us.selected){const Ji=this._getOptionValue(Us.value);ce.push(Ji)}}}this.value=ce,b(ce)}}_registerOption(b){const q=(this._idCounter++).toString();return this._optionMap.set(q,b),q}_getOptionId(b){for(const q of this._optionMap.keys())if(this._compareWith(this._optionMap.get(q)._value,b))return q;return null}_getOptionValue(b){const q=function Qs(V){return V.split(":")[0]}(b);return this._optionMap.has(q)?this._optionMap.get(q)._value:b}static#e=this.\u0275fac=function(){let b;return function(ce){return(b||(b=p.n5z(V)))(ce||V)}}();static#t=this.\u0275dir=p.lG2({type:V,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(q,ce){1&q&&p.NdJ("change",function(an){return ce.onChange(an.target)})("blur",function(){return ce.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([Os]),p.qOj]})}return V})(),gi=(()=>{class V{constructor(b,q,ce){this._element=b,this._renderer=q,this._select=ce,this._select&&(this.id=this._select._registerOption(this))}set ngValue(b){null!=this._select&&(this._value=b,this._setElementValue(dr(this.id,b)),this._select.writeValue(this._select.value))}set value(b){this._select?(this._value=b,this._setElementValue(dr(this.id,b)),this._select.writeValue(this._select.value)):this._setElementValue(b)}_setElementValue(b){this._renderer.setProperty(this._element.nativeElement,"value",b)}_setSelected(b){this._renderer.setProperty(this._element.nativeElement,"selected",b)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(q){return new(q||V)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(ri,9))};static#t=this.\u0275dir=p.lG2({type:V,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return V})(),$i=(()=>{class V{static#e=this.\u0275fac=function(q){return new(q||V)};static#t=this.\u0275mod=p.oAB({type:V});static#n=this.\u0275inj=p.cJS({imports:[ur]})}return V})();class Qi extends We{constructor(L,b,q){super(ae(b),O(q,b)),this.controls=L,this._initObservables(),this._setUpdateStrategy(b),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(L){return this.controls[this._adjustIndex(L)]}push(L,b={}){this.controls.push(L),this._registerControl(L),this.updateValueAndValidity({emitEvent:b.emitEvent}),this._onCollectionChange()}insert(L,b,q={}){this.controls.splice(L,0,b),this._registerControl(b),this.updateValueAndValidity({emitEvent:q.emitEvent})}removeAt(L,b={}){let q=this._adjustIndex(L);q<0&&(q=0),this.controls[q]&&this.controls[q]._registerOnCollectionChange(()=>{}),this.controls.splice(q,1),this.updateValueAndValidity({emitEvent:b.emitEvent})}setControl(L,b,q={}){let ce=this._adjustIndex(L);ce<0&&(ce=0),this.controls[ce]&&this.controls[ce]._registerOnCollectionChange(()=>{}),this.controls.splice(ce,1),b&&(this.controls.splice(ce,0,b),this._registerControl(b)),this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(L,b={}){De(this,0,L),L.forEach((q,ce)=>{J(this,!1,ce),this.at(ce).setValue(q,{onlySelf:!0,emitEvent:b.emitEvent})}),this.updateValueAndValidity(b)}patchValue(L,b={}){null!=L&&(L.forEach((q,ce)=>{this.at(ce)&&this.at(ce).patchValue(q,{onlySelf:!0,emitEvent:b.emitEvent})}),this.updateValueAndValidity(b))}reset(L=[],b={}){this._forEachChild((q,ce)=>{q.reset(L[ce],{onlySelf:!0,emitEvent:b.emitEvent})}),this._updatePristine(b),this._updateTouched(b),this.updateValueAndValidity(b)}getRawValue(){return this.controls.map(L=>L.getRawValue())}clear(L={}){this.controls.length<1||(this._forEachChild(b=>b._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:L.emitEvent}))}_adjustIndex(L){return L<0?L+this.length:L}_syncPendingControls(){let L=this.controls.reduce((b,q)=>!!q._syncPendingControls()||b,!1);return L&&this.updateValueAndValidity({onlySelf:!0}),L}_forEachChild(L){this.controls.forEach((b,q)=>{L(b,q)})}_updateValue(){this.value=this.controls.filter(L=>L.enabled||this.disabled).map(L=>L.value)}_anyControls(L){return this.controls.some(b=>b.enabled&&L(b))}_setUpControls(){this._forEachChild(L=>this._registerControl(L))}_allControlsDisabled(){for(const L of this.controls)if(L.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(L){L.setParent(this),L._registerOnCollectionChange(this._onCollectionChange)}_find(L){return this.at(L)??null}}function Kn(V){return!!V&&(void 0!==V.asyncValidators||void 0!==V.validators||void 0!==V.updateOn)}let Dr=(()=>{class V{constructor(){this.useNonNullable=!1}get nonNullable(){const b=new V;return b.useNonNullable=!0,b}group(b,q=null){const ce=this._reduceControls(b);let bt={};return Kn(q)?bt=q:null!==q&&(bt.validators=q.validator,bt.asyncValidators=q.asyncValidator),new it(ce,bt)}record(b,q=null){const ce=this._reduceControls(b);return new Vt(ce,q)}control(b,q,ce){let bt={};return this.useNonNullable?(Kn(q)?bt=q:(bt.validators=q,bt.asyncValidators=ce),new Ui(b,{...bt,nonNullable:!0})):new Ui(b,q,ce)}array(b,q,ce){const bt=b.map(an=>this._createControl(an));return new Qi(bt,q,ce)}_reduceControls(b){const q={};return Object.keys(b).forEach(ce=>{q[ce]=this._createControl(b[ce])}),q}_createControl(b){return b instanceof Ui||b instanceof We?b:Array.isArray(b)?this.control(b[0],b.length>1?b[1]:null,b.length>2?b[2]:null):this.control(b)}static#e=this.\u0275fac=function(q){return new(q||V)};static#t=this.\u0275prov=p.Yz7({token:V,factory:V.\u0275fac,providedIn:"root"})}return V})(),Wa=(()=>{class V{static withConfig(b){return{ngModule:V,providers:[{provide:Ht,useValue:b.callSetDisabledState??ar}]}}static#e=this.\u0275fac=function(q){return new(q||V)};static#t=this.\u0275mod=p.oAB({type:V});static#n=this.\u0275inj=p.cJS({imports:[$i]})}return V})(),Do=(()=>{class V{static withConfig(b){return{ngModule:V,providers:[{provide:Un,useValue:b.warnOnNgModelWithFormControl??"always"},{provide:Ht,useValue:b.callSetDisabledState??ar}]}}static#e=this.\u0275fac=function(q){return new(q||V)};static#t=this.\u0275mod=p.oAB({type:V});static#n=this.\u0275inj=p.cJS({imports:[$i]})}return V})()},6593:(Et,Me,F)=>{F.d(Me,{Dx:()=>Dn,b2:()=>yn,q6:()=>Ut});var p=F(5879),Y=F(6814);class z extends Y.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ue extends z{static makeCurrent(){(0,Y.HT)(new ue)}onAndCancel(O,P,M){return O.addEventListener(P,M),()=>{O.removeEventListener(P,M)}}dispatchEvent(O,P){O.dispatchEvent(P)}remove(O){O.parentNode&&O.parentNode.removeChild(O)}createElement(O,P){return(P=P||this.getDefaultDocument()).createElement(O)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(O){return O.nodeType===Node.ELEMENT_NODE}isShadowRoot(O){return O instanceof DocumentFragment}getGlobalEventTarget(O,P){return"window"===P?window:"document"===P?O:"body"===P?O.body:null}getBaseHref(O){const P=function le(){return te=te||document.querySelector("base"),te?te.getAttribute("href"):null}();return null==P?null:function oe(G){ge=ge||document.createElement("a"),ge.setAttribute("href",G);const O=ge.pathname;return"/"===O.charAt(0)?O:`/${O}`}(P)}resetBaseElement(){te=null}getUserAgent(){return window.navigator.userAgent}getCookie(O){return(0,Y.Mx)(document.cookie,O)}}let ge,te=null,Q=(()=>{class G{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(M){return new(M||G)};static#t=this.\u0275prov=p.Yz7({token:G,factory:G.\u0275fac})}return G})();const re=new p.OlP("EventManagerPlugins");let me=(()=>{class G{constructor(P,M){this._zone=M,this._eventNameToPlugin=new Map,P.forEach(J=>{J.manager=this}),this._plugins=P.slice().reverse()}addEventListener(P,M,J){return this._findPluginFor(M).addEventListener(P,M,J)}getZone(){return this._zone}_findPluginFor(P){let M=this._eventNameToPlugin.get(P);if(M)return M;if(M=this._plugins.find(De=>De.supports(P)),!M)throw new p.vHH(5101,!1);return this._eventNameToPlugin.set(P,M),M}static#e=this.\u0275fac=function(M){return new(M||G)(p.LFG(re),p.LFG(p.R0b))};static#t=this.\u0275prov=p.Yz7({token:G,factory:G.\u0275fac})}return G})();class ze{constructor(O){this._doc=O}}const Ne="ng-app-id";let Ze=(()=>{class G{constructor(P,M,J,De={}){this.doc=P,this.appId=M,this.nonce=J,this.platformId=De,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,Y.PM)(De),this.resetHostNodes()}addStyles(P){for(const M of P)1===this.changeUsageCount(M,1)&&this.onStyleAdded(M)}removeStyles(P){for(const M of P)this.changeUsageCount(M,-1)<=0&&this.onStyleRemoved(M)}ngOnDestroy(){const P=this.styleNodesInDOM;P&&(P.forEach(M=>M.remove()),P.clear());for(const M of this.getAllStyles())this.onStyleRemoved(M);this.resetHostNodes()}addHost(P){this.hostNodes.add(P);for(const M of this.getAllStyles())this.addStyleToHost(P,M)}removeHost(P){this.hostNodes.delete(P)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(P){for(const M of this.hostNodes)this.addStyleToHost(M,P)}onStyleRemoved(P){const M=this.styleRef;M.get(P)?.elements?.forEach(J=>J.remove()),M.delete(P)}collectServerRenderedStyles(){const P=this.doc.head?.querySelectorAll(`style[${Ne}="${this.appId}"]`);if(P?.length){const M=new Map;return P.forEach(J=>{null!=J.textContent&&M.set(J.textContent,J)}),M}return null}changeUsageCount(P,M){const J=this.styleRef;if(J.has(P)){const De=J.get(P);return De.usage+=M,De.usage}return J.set(P,{usage:M,elements:[]}),M}getStyleElement(P,M){const J=this.styleNodesInDOM,De=J?.get(M);if(De?.parentNode===P)return J.delete(M),De.removeAttribute(Ne),De;{const We=this.doc.createElement("style");return this.nonce&&We.setAttribute("nonce",this.nonce),We.textContent=M,this.platformIsServer&&We.setAttribute(Ne,this.appId),We}}addStyleToHost(P,M){const J=this.getStyleElement(P,M);P.appendChild(J);const De=this.styleRef,We=De.get(M)?.elements;We?We.push(J):De.set(M,{elements:[J],usage:1})}resetHostNodes(){const P=this.hostNodes;P.clear(),P.add(this.doc.head)}static#e=this.\u0275fac=function(M){return new(M||G)(p.LFG(Y.K0),p.LFG(p.AFp),p.LFG(p.Ojb,8),p.LFG(p.Lbi))};static#t=this.\u0275prov=p.Yz7({token:G,factory:G.\u0275fac})}return G})();const Fe={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},tt=/%COMP%/g,Pe=new p.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function qe(G,O){return O.map(P=>P.replace(tt,G))}let he=(()=>{class G{constructor(P,M,J,De,We,it,yt,Ct=null){this.eventManager=P,this.sharedStylesHost=M,this.appId=J,this.removeStylesOnCompDestroy=De,this.doc=We,this.platformId=it,this.ngZone=yt,this.nonce=Ct,this.rendererByCompId=new Map,this.platformIsServer=(0,Y.PM)(it),this.defaultRenderer=new ft(P,We,yt,this.platformIsServer)}createRenderer(P,M){if(!P||!M)return this.defaultRenderer;this.platformIsServer&&M.encapsulation===p.ifc.ShadowDom&&(M={...M,encapsulation:p.ifc.Emulated});const J=this.getOrCreateRenderer(P,M);return J instanceof At?J.applyToHost(P):J instanceof zn&&J.applyStyles(),J}getOrCreateRenderer(P,M){const J=this.rendererByCompId;let De=J.get(M.id);if(!De){const We=this.doc,it=this.ngZone,yt=this.eventManager,Ct=this.sharedStylesHost,Vt=this.removeStylesOnCompDestroy,en=this.platformIsServer;switch(M.encapsulation){case p.ifc.Emulated:De=new At(yt,Ct,M,this.appId,Vt,We,it,en);break;case p.ifc.ShadowDom:return new pr(yt,Ct,P,M,We,it,this.nonce,en);default:De=new zn(yt,Ct,M,Vt,We,it,en)}J.set(M.id,De)}return De}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(M){return new(M||G)(p.LFG(me),p.LFG(Ze),p.LFG(p.AFp),p.LFG(Pe),p.LFG(Y.K0),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(p.Ojb))};static#t=this.\u0275prov=p.Yz7({token:G,factory:G.\u0275fac})}return G})();class ft{constructor(O,P,M,J){this.eventManager=O,this.doc=P,this.ngZone=M,this.platformIsServer=J,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(O,P){return P?this.doc.createElementNS(Fe[P]||P,O):this.doc.createElement(O)}createComment(O){return this.doc.createComment(O)}createText(O){return this.doc.createTextNode(O)}appendChild(O,P){(Jt(O)?O.content:O).appendChild(P)}insertBefore(O,P,M){O&&(Jt(O)?O.content:O).insertBefore(P,M)}removeChild(O,P){O&&O.removeChild(P)}selectRootElement(O,P){let M="string"==typeof O?this.doc.querySelector(O):O;if(!M)throw new p.vHH(-5104,!1);return P||(M.textContent=""),M}parentNode(O){return O.parentNode}nextSibling(O){return O.nextSibling}setAttribute(O,P,M,J){if(J){P=J+":"+P;const De=Fe[J];De?O.setAttributeNS(De,P,M):O.setAttribute(P,M)}else O.setAttribute(P,M)}removeAttribute(O,P,M){if(M){const J=Fe[M];J?O.removeAttributeNS(J,P):O.removeAttribute(`${M}:${P}`)}else O.removeAttribute(P)}addClass(O,P){O.classList.add(P)}removeClass(O,P){O.classList.remove(P)}setStyle(O,P,M,J){J&(p.JOm.DashCase|p.JOm.Important)?O.style.setProperty(P,M,J&p.JOm.Important?"important":""):O.style[P]=M}removeStyle(O,P,M){M&p.JOm.DashCase?O.style.removeProperty(P):O.style[P]=""}setProperty(O,P,M){O[P]=M}setValue(O,P){O.nodeValue=P}listen(O,P,M){if("string"==typeof O&&!(O=(0,Y.q)().getGlobalEventTarget(this.doc,O)))throw new Error(`Unsupported event target ${O} for event ${P}`);return this.eventManager.addEventListener(O,P,this.decoratePreventDefault(M))}decoratePreventDefault(O){return P=>{if("__ngUnwrap__"===P)return O;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>O(P)):O(P))&&P.preventDefault()}}}function Jt(G){return"TEMPLATE"===G.tagName&&void 0!==G.content}class pr extends ft{constructor(O,P,M,J,De,We,it,yt){super(O,De,We,yt),this.sharedStylesHost=P,this.hostEl=M,this.shadowRoot=M.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Ct=qe(J.id,J.styles);for(const Vt of Ct){const en=document.createElement("style");it&&en.setAttribute("nonce",it),en.textContent=Vt,this.shadowRoot.appendChild(en)}}nodeOrShadowRoot(O){return O===this.hostEl?this.shadowRoot:O}appendChild(O,P){return super.appendChild(this.nodeOrShadowRoot(O),P)}insertBefore(O,P,M){return super.insertBefore(this.nodeOrShadowRoot(O),P,M)}removeChild(O,P){return super.removeChild(this.nodeOrShadowRoot(O),P)}parentNode(O){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(O)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class zn extends ft{constructor(O,P,M,J,De,We,it,yt){super(O,De,We,it),this.sharedStylesHost=P,this.removeStylesOnCompDestroy=J,this.styles=yt?qe(yt,M.styles):M.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class At extends zn{constructor(O,P,M,J,De,We,it,yt){const Ct=J+"-"+M.id;super(O,P,M,De,We,it,yt,Ct),this.contentAttr=function Te(G){return"_ngcontent-%COMP%".replace(tt,G)}(Ct),this.hostAttr=function ke(G){return"_nghost-%COMP%".replace(tt,G)}(Ct)}applyToHost(O){this.applyStyles(),this.setAttribute(O,this.hostAttr,"")}createElement(O,P){const M=super.createElement(O,P);return super.setAttribute(M,this.contentAttr,""),M}}let pt=(()=>{class G extends ze{constructor(P){super(P)}supports(P){return!0}addEventListener(P,M,J){return P.addEventListener(M,J,!1),()=>this.removeEventListener(P,M,J)}removeEventListener(P,M,J){return P.removeEventListener(M,J)}static#e=this.\u0275fac=function(M){return new(M||G)(p.LFG(Y.K0))};static#t=this.\u0275prov=p.Yz7({token:G,factory:G.\u0275fac})}return G})();const mt=["alt","control","meta","shift"],pe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ye={alt:G=>G.altKey,control:G=>G.ctrlKey,meta:G=>G.metaKey,shift:G=>G.shiftKey};let Ce=(()=>{class G extends ze{constructor(P){super(P)}supports(P){return null!=G.parseEventName(P)}addEventListener(P,M,J){const De=G.parseEventName(M),We=G.eventCallback(De.fullKey,J,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,Y.q)().onAndCancel(P,De.domEventName,We))}static parseEventName(P){const M=P.toLowerCase().split("."),J=M.shift();if(0===M.length||"keydown"!==J&&"keyup"!==J)return null;const De=G._normalizeKey(M.pop());let We="",it=M.indexOf("code");if(it>-1&&(M.splice(it,1),We="code."),mt.forEach(Ct=>{const Vt=M.indexOf(Ct);Vt>-1&&(M.splice(Vt,1),We+=Ct+".")}),We+=De,0!=M.length||0===De.length)return null;const yt={};return yt.domEventName=J,yt.fullKey=We,yt}static matchEventFullKeyCode(P,M){let J=pe[P.key]||P.key,De="";return M.indexOf("code.")>-1&&(J=P.code,De="code."),!(null==J||!J)&&(J=J.toLowerCase()," "===J?J="space":"."===J&&(J="dot"),mt.forEach(We=>{We!==J&&(0,ye[We])(P)&&(De+=We+".")}),De+=J,De===M)}static eventCallback(P,M,J){return De=>{G.matchEventFullKeyCode(De,P)&&J.runGuarded(()=>M(De))}}static _normalizeKey(P){return"esc"===P?"escape":P}static#e=this.\u0275fac=function(M){return new(M||G)(p.LFG(Y.K0))};static#t=this.\u0275prov=p.Yz7({token:G,factory:G.\u0275fac})}return G})();const Ut=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:Y.bD},{provide:p.g9A,useValue:function rt(){ue.makeCurrent()},multi:!0},{provide:Y.K0,useFactory:function Lt(){return(0,p.RDi)(document),document},deps:[]}]),En=new p.OlP(""),pn=[{provide:p.rWj,useClass:class Se{addToWindow(O){p.dqk.getAngularTestability=(M,J=!0)=>{const De=O.findTestabilityInTree(M,J);if(null==De)throw new p.vHH(5103,!1);return De},p.dqk.getAllAngularTestabilities=()=>O.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>O.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(M=>{const J=p.dqk.getAllAngularTestabilities();let De=J.length,We=!1;const it=function(yt){We=We||yt,De--,0==De&&M(We)};J.forEach(yt=>{yt.whenStable(it)})})}findTestabilityInTree(O,P,M){return null==P?null:O.getTestability(P)??(M?(0,Y.q)().isShadowRoot(P)?this.findTestabilityInTree(O,P.host,!0):this.findTestabilityInTree(O,P.parentElement,!0):null)}},deps:[]},{provide:p.lri,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]}],Qt=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function at(){return new p.qLn},deps:[]},{provide:re,useClass:pt,multi:!0,deps:[Y.K0,p.R0b,p.Lbi]},{provide:re,useClass:Ce,multi:!0,deps:[Y.K0]},he,Ze,me,{provide:p.FYo,useExisting:he},{provide:Y.JF,useClass:Q,deps:[]},[]];let yn=(()=>{class G{constructor(P){}static withServerTransition(P){return{ngModule:G,providers:[{provide:p.AFp,useValue:P.appId}]}}static#e=this.\u0275fac=function(M){return new(M||G)(p.LFG(En,12))};static#t=this.\u0275mod=p.oAB({type:G});static#n=this.\u0275inj=p.cJS({providers:[...Qt,...pn],imports:[Y.ez,p.hGG]})}return G})(),Dn=(()=>{class G{constructor(P){this._doc=P}getTitle(){return this._doc.title}setTitle(P){this._doc.title=P||""}static#e=this.\u0275fac=function(M){return new(M||G)(p.LFG(Y.K0))};static#t=this.\u0275prov=p.Yz7({token:G,factory:function(M){let J=null;return J=M?new M:function In(){return new Dn((0,p.LFG)(Y.K0))}(),J},providedIn:"root"})}return G})();typeof window<"u"&&window},9228:(Et,Me,F)=>{F.d(Me,{F0:()=>hs,rH:()=>et,Bz:()=>zi,lC:()=>zr});var p=F(5879),Y=F(5592),z=F(4674),te=F(2459),le=F(2096),ge=F(5619),oe=F(2572),Se=F(6973),Q=F(5211),re=F(4911),me=F(8407);function ze(E,C){const _=(0,z.m)(E)?E:()=>E,A=x=>x.error(_());return new Y.y(C?x=>C.schedule(A,0,x):A)}var Ne=F(6232),Ze=F(7394),Fe=F(9360),tt=F(8251);function Ge(){return(0,Fe.e)((E,C)=>{let _=null;E._refCount++;const A=(0,tt.x)(C,void 0,void 0,void 0,()=>{if(!E||E._refCount<=0||0<--E._refCount)return void(_=null);const x=E._connection,W=_;_=null,x&&(!W||x===W)&&x.unsubscribe(),C.unsubscribe()});E.subscribe(A),A.closed||(_=E.connect())})}class Rt extends Y.y{constructor(C,_){super(),this.source=C,this.subjectFactory=_,this._subject=null,this._refCount=0,this._connection=null,(0,Fe.A)(C)&&(this.lift=C.lift)}_subscribe(C){return this.getSubject().subscribe(C)}getSubject(){const C=this._subject;return(!C||C.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:C}=this;this._subject=this._connection=null,C?.unsubscribe()}connect(){let C=this._connection;if(!C){C=this._connection=new Ze.w0;const _=this.getSubject();C.add(this.source.subscribe((0,tt.x)(_,void 0,()=>{this._teardown(),_.complete()},A=>{this._teardown(),_.error(A)},()=>this._teardown()))),C.closed&&(this._connection=null,C=Ze.w0.EMPTY)}return C}refCount(){return Ge()(this)}}var Ie=F(8645),de=F(6814),Pe=F(7398),Te=F(4664),ke=F(8180),qe=F(7921),he=F(2181),ft=F(1631),Tt=F(1374);function Gt(E,C){return(0,z.m)(C)?(0,ft.z)(E,C,1):(0,ft.z)(E,1)}var Jt=F(9397),pr=F(4829);function zn(E){return(0,Fe.e)((C,_)=>{let W,A=null,x=!1;A=C.subscribe((0,tt.x)(_,void 0,void 0,ne=>{W=(0,pr.Xf)(E(ne,zn(E)(C))),A?(A.unsubscribe(),A=null,W.subscribe(_)):x=!0})),x&&(A.unsubscribe(),A=null,W.subscribe(_))})}var At=F(6699),pt=F(3572);function mt(E){return E<=0?()=>Ne.E:(0,Fe.e)((C,_)=>{let A=[];C.subscribe((0,tt.x)(_,x=>{A.push(x),E<A.length&&A.shift()},()=>{for(const x of A)_.next(x);_.complete()},void 0,()=>{A=null}))})}var pe=F(3026),ye=F(2737);function xe(E){return(0,Fe.e)((C,_)=>{try{C.subscribe(_)}finally{_.add(E)}})}var Qe=F(9773),ct=F(7537),rt=F(6593);const at="primary",Lt=Symbol("RouteTitle");class fn{constructor(C){this.params=C||{}}has(C){return Object.prototype.hasOwnProperty.call(this.params,C)}get(C){if(this.has(C)){const _=this.params[C];return Array.isArray(_)?_[0]:_}return null}getAll(C){if(this.has(C)){const _=this.params[C];return Array.isArray(_)?_:[_]}return[]}get keys(){return Object.keys(this.params)}}function Ut(E){return new fn(E)}function En(E,C,_){const A=_.path.split("/");if(A.length>E.length||"full"===_.pathMatch&&(C.hasChildren()||A.length<E.length))return null;const x={};for(let W=0;W<A.length;W++){const ne=A[W],Ue=E[W];if(ne.startsWith(":"))x[ne.substring(1)]=Ue;else if(ne!==Ue.path)return null}return{consumed:E.slice(0,A.length),posParams:x}}function Qt(E,C){const _=E?Object.keys(E):void 0,A=C?Object.keys(C):void 0;if(!_||!A||_.length!=A.length)return!1;let x;for(let W=0;W<_.length;W++)if(x=_[W],!yn(E[x],C[x]))return!1;return!0}function yn(E,C){if(Array.isArray(E)&&Array.isArray(C)){if(E.length!==C.length)return!1;const _=[...E].sort(),A=[...C].sort();return _.every((x,W)=>A[W]===x)}return E===C}function On(E){return E.length>0?E[E.length-1]:null}function on(E){return function ue(E){return!!E&&(E instanceof Y.y||(0,z.m)(E.lift)&&(0,z.m)(E.subscribe))}(E)?E:(0,p.QGY)(E)?(0,te.D)(Promise.resolve(E)):(0,le.of)(E)}const Xn={exact:function nr(E,C,_){if(!Kr(E.segments,C.segments)||!wn(E.segments,C.segments,_)||E.numberOfChildren!==C.numberOfChildren)return!1;for(const A in C.children)if(!E.children[A]||!nr(E.children[A],C.children[A],_))return!1;return!0},subset:Kt},In={exact:function vr(E,C){return Qt(E,C)},subset:function jt(E,C){return Object.keys(C).length<=Object.keys(E).length&&Object.keys(C).every(_=>yn(E[_],C[_]))},ignored:()=>!0};function Dn(E,C,_){return Xn[_.paths](E.root,C.root,_.matrixParams)&&In[_.queryParams](E.queryParams,C.queryParams)&&!("exact"===_.fragment&&E.fragment!==C.fragment)}function Kt(E,C,_){return zt(E,C,C.segments,_)}function zt(E,C,_,A){if(E.segments.length>_.length){const x=E.segments.slice(0,_.length);return!(!Kr(x,_)||C.hasChildren()||!wn(x,_,A))}if(E.segments.length===_.length){if(!Kr(E.segments,_)||!wn(E.segments,_,A))return!1;for(const x in C.children)if(!E.children[x]||!Kt(E.children[x],C.children[x],A))return!1;return!0}{const x=_.slice(0,E.segments.length),W=_.slice(E.segments.length);return!!(Kr(E.segments,x)&&wn(E.segments,x,A)&&E.children[at])&&zt(E.children[at],C,W,A)}}function wn(E,C,_){return C.every((A,x)=>In[_](E[x].parameters,A.parameters))}class kn{constructor(C=new dn([],{}),_={},A=null){this.root=C,this.queryParams=_,this.fragment=A}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ut(this.queryParams)),this._queryParamMap}toString(){return rr.serialize(this)}}class dn{constructor(C,_){this.segments=C,this.children=_,this.parent=null,Object.values(_).forEach(A=>A.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Cr(this)}}class Xt{constructor(C,_){this.path=C,this.parameters=_}get parameterMap(){return this._parameterMap||(this._parameterMap=Ut(this.parameters)),this._parameterMap}toString(){return sn(this)}}function Kr(E,C){return E.length===C.length&&E.every((_,A)=>_.path===C[A].path)}let Zr=(()=>{class E{static#e=this.\u0275fac=function(A){return new(A||E)};static#t=this.\u0275prov=p.Yz7({token:E,factory:function(){return new Zt},providedIn:"root"})}return E})();class Zt{parse(C){const _=new it(C);return new kn(_.parseRootSegment(),_.parseQueryParams(),_.parseFragment())}serialize(C){const _=`/${Ur(C.root,!0)}`,A=function Pn(E){const C=Object.keys(E).map(_=>{const A=E[_];return Array.isArray(A)?A.map(x=>`${He(_)}=${He(x)}`).join("&"):`${He(_)}=${He(A)}`}).filter(_=>!!_);return C.length?`?${C.join("&")}`:""}(C.queryParams);return`${_}${A}${"string"==typeof C.fragment?`#${function Z(E){return encodeURI(E)}(C.fragment)}`:""}`}}const rr=new Zt;function Cr(E){return E.segments.map(C=>sn(C)).join("/")}function Ur(E,C){if(!E.hasChildren())return Cr(E);if(C){const _=E.children[at]?Ur(E.children[at],!1):"",A=[];return Object.entries(E.children).forEach(([x,W])=>{x!==at&&A.push(`${x}:${Ur(W,!1)}`)}),A.length>0?`${_}(${A.join("//")})`:_}{const _=function xt(E,C){let _=[];return Object.entries(E.children).forEach(([A,x])=>{A===at&&(_=_.concat(C(x,A)))}),Object.entries(E.children).forEach(([A,x])=>{A!==at&&(_=_.concat(C(x,A)))}),_}(E,(A,x)=>x===at?[Ur(E.children[at],!1)]:[`${x}:${Ur(A,!1)}`]);return 1===Object.keys(E.children).length&&null!=E.children[at]?`${Cr(E)}/${_[0]}`:`${Cr(E)}/(${_.join("//")})`}}function Rn(E){return encodeURIComponent(E).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function He(E){return Rn(E).replace(/%3B/gi,";")}function se(E){return Rn(E).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Le(E){return decodeURIComponent(E)}function lt(E){return Le(E.replace(/\+/g,"%20"))}function sn(E){return`${se(E.path)}${function ir(E){return Object.keys(E).map(C=>`;${se(C)}=${se(E[C])}`).join("")}(E.parameters)}`}const ae=/^[^\/()?;#]+/;function G(E){const C=E.match(ae);return C?C[0]:""}const O=/^[^\/()?;=#]+/,M=/^[^=?&#]+/,De=/^[^&#]+/;class it{constructor(C){this.url=C,this.remaining=C}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new dn([],{}):new dn([],this.parseChildren())}parseQueryParams(){const C={};if(this.consumeOptional("?"))do{this.parseQueryParam(C)}while(this.consumeOptional("&"));return C}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const C=[];for(this.peekStartsWith("(")||C.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),C.push(this.parseSegment());let _={};this.peekStartsWith("/(")&&(this.capture("/"),_=this.parseParens(!0));let A={};return this.peekStartsWith("(")&&(A=this.parseParens(!1)),(C.length>0||Object.keys(_).length>0)&&(A[at]=new dn(C,_)),A}parseSegment(){const C=G(this.remaining);if(""===C&&this.peekStartsWith(";"))throw new p.vHH(4009,!1);return this.capture(C),new Xt(Le(C),this.parseMatrixParams())}parseMatrixParams(){const C={};for(;this.consumeOptional(";");)this.parseParam(C);return C}parseParam(C){const _=function P(E){const C=E.match(O);return C?C[0]:""}(this.remaining);if(!_)return;this.capture(_);let A="";if(this.consumeOptional("=")){const x=G(this.remaining);x&&(A=x,this.capture(A))}C[Le(_)]=Le(A)}parseQueryParam(C){const _=function J(E){const C=E.match(M);return C?C[0]:""}(this.remaining);if(!_)return;this.capture(_);let A="";if(this.consumeOptional("=")){const ne=function We(E){const C=E.match(De);return C?C[0]:""}(this.remaining);ne&&(A=ne,this.capture(A))}const x=lt(_),W=lt(A);if(C.hasOwnProperty(x)){let ne=C[x];Array.isArray(ne)||(ne=[ne],C[x]=ne),ne.push(W)}else C[x]=W}parseParens(C){const _={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const A=G(this.remaining),x=this.remaining[A.length];if("/"!==x&&")"!==x&&";"!==x)throw new p.vHH(4010,!1);let W;A.indexOf(":")>-1?(W=A.slice(0,A.indexOf(":")),this.capture(W),this.capture(":")):C&&(W=at);const ne=this.parseChildren();_[W]=1===Object.keys(ne).length?ne[at]:new dn([],ne),this.consumeOptional("//")}return _}peekStartsWith(C){return this.remaining.startsWith(C)}consumeOptional(C){return!!this.peekStartsWith(C)&&(this.remaining=this.remaining.substring(C.length),!0)}capture(C){if(!this.consumeOptional(C))throw new p.vHH(4011,!1)}}function yt(E){return E.segments.length>0?new dn([],{[at]:E}):E}function Ct(E){const C={};for(const A of Object.keys(E.children)){const W=Ct(E.children[A]);if(A===at&&0===W.segments.length&&W.hasChildren())for(const[ne,Ue]of Object.entries(W.children))C[ne]=Ue;else(W.segments.length>0||W.hasChildren())&&(C[A]=W)}return function Vt(E){if(1===E.numberOfChildren&&E.children[at]){const C=E.children[at];return new dn(E.segments.concat(C.segments),C.children)}return E}(new dn(E.segments,C))}function en(E){return E instanceof kn}function ar(E){let C;const x=yt(function _(W){const ne={};for(const be of W.children){const Nt=_(be);ne[be.outlet]=Nt}const Ue=new dn(W.url,ne);return W===E&&(C=Ue),Ue}(E.root));return C??x}function ai(E,C,_,A){let x=E;for(;x.parent;)x=x.parent;if(0===C.length)return nt(x,x,x,_,A);const W=function St(E){if("string"==typeof E[0]&&1===E.length&&"/"===E[0])return new Wt(!0,0,E);let C=0,_=!1;const A=E.reduce((x,W,ne)=>{if("object"==typeof W&&null!=W){if(W.outlets){const Ue={};return Object.entries(W.outlets).forEach(([be,Nt])=>{Ue[be]="string"==typeof Nt?Nt.split("/"):Nt}),[...x,{outlets:Ue}]}if(W.segmentPath)return[...x,W.segmentPath]}return"string"!=typeof W?[...x,W]:0===ne?(W.split("/").forEach((Ue,be)=>{0==be&&"."===Ue||(0==be&&""===Ue?_=!0:".."===Ue?C++:""!=Ue&&x.push(Ue))}),x):[...x,W]},[]);return new Wt(_,C,A)}(C);if(W.toRoot())return nt(x,x,new dn([],{}),_,A);const ne=function Er(E,C,_){if(E.isAbsolute)return new gn(C,!0,0);if(!_)return new gn(C,!1,NaN);if(null===_.parent)return new gn(_,!0,0);const A=Be(E.commands[0])?0:1;return function qn(E,C,_){let A=E,x=C,W=_;for(;W>x;){if(W-=x,A=A.parent,!A)throw new p.vHH(4005,!1);x=A.segments.length}return new gn(A,!1,x-W)}(_,_.segments.length-1+A,E.numberOfDoubleDots)}(W,x,E),Ue=ne.processChildren?Ii(ne.segmentGroup,ne.index,W.commands):Ir(ne.segmentGroup,ne.index,W.commands);return nt(x,ne.segmentGroup,Ue,_,A)}function Be(E){return"object"==typeof E&&null!=E&&!E.outlets&&!E.segmentPath}function we(E){return"object"==typeof E&&null!=E&&E.outlets}function nt(E,C,_,A,x){let ne,W={};A&&Object.entries(A).forEach(([be,Nt])=>{W[be]=Array.isArray(Nt)?Nt.map(Cn=>`${Cn}`):`${Nt}`}),ne=E===C?_:Pt(E,C,_);const Ue=yt(Ct(ne));return new kn(Ue,W,x)}function Pt(E,C,_){const A={};return Object.entries(E.children).forEach(([x,W])=>{A[x]=W===C?_:Pt(W,C,_)}),new dn(E.segments,A)}class Wt{constructor(C,_,A){if(this.isAbsolute=C,this.numberOfDoubleDots=_,this.commands=A,C&&A.length>0&&Be(A[0]))throw new p.vHH(4003,!1);const x=A.find(we);if(x&&x!==On(A))throw new p.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class gn{constructor(C,_,A){this.segmentGroup=C,this.processChildren=_,this.index=A}}function Ir(E,C,_){if(E||(E=new dn([],{})),0===E.segments.length&&E.hasChildren())return Ii(E,C,_);const A=function Mr(E,C,_){let A=0,x=C;const W={match:!1,pathIndex:0,commandIndex:0};for(;x<E.segments.length;){if(A>=_.length)return W;const ne=E.segments[x],Ue=_[A];if(we(Ue))break;const be=`${Ue}`,Nt=A<_.length-1?_[A+1]:null;if(x>0&&void 0===be)break;if(be&&Nt&&"object"==typeof Nt&&void 0===Nt.outlets){if(!ao(be,Nt,ne))return W;A+=2}else{if(!ao(be,{},ne))return W;A++}x++}return{match:!0,pathIndex:x,commandIndex:A}}(E,C,_),x=_.slice(A.commandIndex);if(A.match&&A.pathIndex<E.segments.length){const W=new dn(E.segments.slice(0,A.pathIndex),{});return W.children[at]=new dn(E.segments.slice(A.pathIndex),E.children),Ii(W,0,x)}return A.match&&0===x.length?new dn(E.segments,{}):A.match&&!E.hasChildren()?Ss(E,C,_):A.match?Ii(E,0,x):Ss(E,C,_)}function Ii(E,C,_){if(0===_.length)return new dn(E.segments,{});{const A=function Si(E){return we(E[0])?E[0].outlets:{[at]:E}}(_),x={};if(Object.keys(A).some(W=>W!==at)&&E.children[at]&&1===E.numberOfChildren&&0===E.children[at].segments.length){const W=Ii(E.children[at],C,_);return new dn(E.segments,W.children)}return Object.entries(A).forEach(([W,ne])=>{"string"==typeof ne&&(ne=[ne]),null!==ne&&(x[W]=Ir(E.children[W],C,ne))}),Object.entries(E.children).forEach(([W,ne])=>{void 0===A[W]&&(x[W]=ne)}),new dn(E.segments,x)}}function Ss(E,C,_){const A=E.segments.slice(0,C);let x=0;for(;x<_.length;){const W=_[x];if(we(W)){const be=Vn(W.outlets);return new dn(A,be)}if(0===x&&Be(_[0])){A.push(new Xt(E.segments[C].path,as(_[0]))),x++;continue}const ne=we(W)?W.outlets[at]:`${W}`,Ue=x<_.length-1?_[x+1]:null;ne&&Ue&&Be(Ue)?(A.push(new Xt(ne,as(Ue))),x+=2):(A.push(new Xt(ne,{})),x++)}return new dn(A,{})}function Vn(E){const C={};return Object.entries(E).forEach(([_,A])=>{"string"==typeof A&&(A=[A]),null!==A&&(C[_]=Ss(new dn([],{}),0,A))}),C}function as(E){const C={};return Object.entries(E).forEach(([_,A])=>C[_]=`${A}`),C}function ao(E,C,_){return E==_.path&&Qt(C,_.parameters)}const Hr="imperative";class Xr{constructor(C,_){this.id=C,this.url=_}}class bs extends Xr{constructor(C,_,A="imperative",x=null){super(C,_),this.type=0,this.navigationTrigger=A,this.restoredState=x}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ei extends Xr{constructor(C,_,A){super(C,_),this.urlAfterRedirects=A,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class us extends Xr{constructor(C,_,A,x){super(C,_),this.reason=A,this.code=x,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Wi extends Xr{constructor(C,_,A,x){super(C,_),this.reason=A,this.code=x,this.type=16}}class qi extends Xr{constructor(C,_,A,x){super(C,_),this.error=A,this.target=x,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class gr extends Xr{constructor(C,_,A,x){super(C,_),this.urlAfterRedirects=A,this.state=x,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bi extends Xr{constructor(C,_,A,x){super(C,_),this.urlAfterRedirects=A,this.state=x,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rs extends Xr{constructor(C,_,A,x,W){super(C,_),this.urlAfterRedirects=A,this.state=x,this.shouldActivate=W,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ha extends Xr{constructor(C,_,A,x){super(C,_),this.urlAfterRedirects=A,this.state=x,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ui extends Xr{constructor(C,_,A,x){super(C,_),this.urlAfterRedirects=A,this.state=x,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bo{constructor(C){this.route=C,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class jo{constructor(C){this.route=C,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class uo{constructor(C){this.snapshot=C,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fa{constructor(C){this.snapshot=C,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ri{constructor(C){this.snapshot=C,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pa{constructor(C){this.snapshot=C,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ps{constructor(C,_,A){this.routerEvent=C,this.position=_,this.anchor=A,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Ki{}class cs{constructor(C){this.url=C}}class Pi{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Mi,this.attachRef=null}}let Mi=(()=>{class E{constructor(){this.contexts=new Map}onChildOutletCreated(_,A){const x=this.getOrCreateContext(_);x.outlet=A,this.contexts.set(_,x)}onChildOutletDestroyed(_){const A=this.getContext(_);A&&(A.outlet=null,A.attachRef=null)}onOutletDeactivated(){const _=this.contexts;return this.contexts=new Map,_}onOutletReAttached(_){this.contexts=_}getOrCreateContext(_){let A=this.getContext(_);return A||(A=new Pi,this.contexts.set(_,A)),A}getContext(_){return this.contexts.get(_)||null}static#e=this.\u0275fac=function(A){return new(A||E)};static#t=this.\u0275prov=p.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();class co{constructor(C){this._root=C}get root(){return this._root.value}parent(C){const _=this.pathFromRoot(C);return _.length>1?_[_.length-2]:null}children(C){const _=xs(C,this._root);return _?_.children.map(A=>A.value):[]}firstChild(C){const _=xs(C,this._root);return _&&_.children.length>0?_.children[0].value:null}siblings(C){const _=ms(C,this._root);return _.length<2?[]:_[_.length-2].children.map(x=>x.value).filter(x=>x!==C)}pathFromRoot(C){return ms(C,this._root).map(_=>_.value)}}function xs(E,C){if(E===C.value)return C;for(const _ of C.children){const A=xs(E,_);if(A)return A}return null}function ms(E,C){if(E===C.value)return[C];for(const _ of C.children){const A=ms(E,_);if(A.length)return A.unshift(C),A}return[]}class un{constructor(C,_){this.value=C,this.children=_}toString(){return`TreeNode(${this.value})`}}function lr(E){const C={};return E&&E.children.forEach(_=>C[_.value.outlet]=_),C}class ur extends co{constructor(C,_){super(C),this.snapshot=_,Bn(this,C)}toString(){return this.snapshot.toString()}}function ti(E,C){const _=function xr(E,C){const ne=new Zi([],{},{},"",{},at,C,null,{});return new ls("",new un(ne,[]))}(0,C),A=new ge.X([new Xt("",{})]),x=new ge.X({}),W=new ge.X({}),ne=new ge.X({}),Ue=new ge.X(""),be=new Bi(A,x,ne,Ue,W,at,C,_.root);return be.snapshot=_.root,new ur(new un(be,[]),_)}class Bi{constructor(C,_,A,x,W,ne,Ue,be){this.urlSubject=C,this.paramsSubject=_,this.queryParamsSubject=A,this.fragmentSubject=x,this.dataSubject=W,this.outlet=ne,this.component=Ue,this._futureSnapshot=be,this.title=this.dataSubject?.pipe((0,Pe.U)(Nt=>Nt[Lt]))??(0,le.of)(void 0),this.url=C,this.params=_,this.queryParams=A,this.fragment=x,this.data=W}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Pe.U)(C=>Ut(C)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Pe.U)(C=>Ut(C)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function _s(E,C="emptyOnly"){const _=E.pathFromRoot;let A=0;if("always"!==C)for(A=_.length-1;A>=1;){const x=_[A],W=_[A-1];if(x.routeConfig&&""===x.routeConfig.path)A--;else{if(W.component)break;A--}}return function Un(E){return E.reduce((C,_)=>({params:{...C.params,..._.params},data:{...C.data,..._.data},resolve:{..._.data,...C.resolve,..._.routeConfig?.data,..._._resolvedData}}),{params:{},data:{},resolve:{}})}(_.slice(A))}class Zi{get title(){return this.data?.[Lt]}constructor(C,_,A,x,W,ne,Ue,be,Nt){this.url=C,this.params=_,this.queryParams=A,this.fragment=x,this.data=W,this.outlet=ne,this.component=Ue,this.routeConfig=be,this._resolve=Nt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ut(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ut(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(A=>A.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ls extends co{constructor(C,_){super(_),this.url=C,Bn(this,_)}toString(){return vt(this._root)}}function Bn(E,C){C.value._routerState=E,C.children.forEach(_=>Bn(E,_))}function vt(E){const C=E.children.length>0?` { ${E.children.map(vt).join(", ")} } `:"";return`${E.value}${C}`}function tn(E){if(E.snapshot){const C=E.snapshot,_=E._futureSnapshot;E.snapshot=_,Qt(C.queryParams,_.queryParams)||E.queryParamsSubject.next(_.queryParams),C.fragment!==_.fragment&&E.fragmentSubject.next(_.fragment),Qt(C.params,_.params)||E.paramsSubject.next(_.params),function pn(E,C){if(E.length!==C.length)return!1;for(let _=0;_<E.length;++_)if(!Qt(E[_],C[_]))return!1;return!0}(C.url,_.url)||E.urlSubject.next(_.url),Qt(C.data,_.data)||E.dataSubject.next(_.data)}else E.snapshot=E._futureSnapshot,E.dataSubject.next(E._futureSnapshot.data)}function Fn(E,C){const _=Qt(E.params,C.params)&&function Wn(E,C){return Kr(E,C)&&E.every((_,A)=>Qt(_.parameters,C[A].parameters))}(E.url,C.url);return _&&!(!E.parent!=!C.parent)&&(!E.parent||Fn(E.parent,C.parent))}let zr=(()=>{class E{constructor(){this.activated=null,this._activatedRoute=null,this.name=at,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.parentContexts=(0,p.f3M)(Mi),this.location=(0,p.f3M)(p.s_b),this.changeDetector=(0,p.f3M)(p.sBO),this.environmentInjector=(0,p.f3M)(p.lqb),this.inputBinder=(0,p.f3M)(er,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(_){if(_.name){const{firstChange:A,previousValue:x}=_.name;if(A)return;this.isTrackedInParentContexts(x)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(x)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(_){return this.parentContexts.getContext(_)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const _=this.parentContexts.getContext(this.name);_?.route&&(_.attachRef?this.attach(_.attachRef,_.route):this.activateWith(_.route,_.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.vHH(4012,!1);this.location.detach();const _=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(_.instance),_}attach(_,A){this.activated=_,this._activatedRoute=A,this.location.insert(_.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(_.instance)}deactivate(){if(this.activated){const _=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(_)}}activateWith(_,A){if(this.isActivated)throw new p.vHH(4013,!1);this._activatedRoute=_;const x=this.location,ne=_.snapshot.component,Ue=this.parentContexts.getOrCreateContext(this.name).children,be=new xi(_,Ue,x.injector);this.activated=x.createComponent(ne,{index:x.length,injector:be,environmentInjector:A??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(A){return new(A||E)};static#t=this.\u0275dir=p.lG2({type:E,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[p.TTD]})}return E})();class xi{constructor(C,_,A){this.route=C,this.childContexts=_,this.parent=A}get(C,_){return C===Bi?this.route:C===Mi?this.childContexts:this.parent.get(C,_)}}const er=new p.OlP("");let pi=(()=>{class E{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(_){this.unsubscribeFromRouteData(_),this.subscribeToRouteData(_)}unsubscribeFromRouteData(_){this.outletDataSubscriptions.get(_)?.unsubscribe(),this.outletDataSubscriptions.delete(_)}subscribeToRouteData(_){const{activatedRoute:A}=_,x=(0,oe.a)([A.queryParams,A.params,A.data]).pipe((0,Te.w)(([W,ne,Ue],be)=>(Ue={...W,...ne,...Ue},0===be?(0,le.of)(Ue):Promise.resolve(Ue)))).subscribe(W=>{if(!_.isActivated||!_.activatedComponentRef||_.activatedRoute!==A||null===A.component)return void this.unsubscribeFromRouteData(_);const ne=(0,p.qFp)(A.component);if(ne)for(const{templateName:Ue}of ne.inputs)_.activatedComponentRef.setInput(Ue,W[Ue]);else this.unsubscribeFromRouteData(_)});this.outletDataSubscriptions.set(_,x)}static#e=this.\u0275fac=function(A){return new(A||E)};static#t=this.\u0275prov=p.Yz7({token:E,factory:E.\u0275fac})}return E})();function mr(E,C,_){if(_&&E.shouldReuseRoute(C.value,_.value.snapshot)){const A=_.value;A._futureSnapshot=C.value;const x=function ds(E,C,_){return C.children.map(A=>{for(const x of _.children)if(E.shouldReuseRoute(A.value,x.value.snapshot))return mr(E,A,x);return mr(E,A)})}(E,C,_);return new un(A,x)}{if(E.shouldAttach(C.value)){const W=E.retrieve(C.value);if(null!==W){const ne=W.route;return ne.value._futureSnapshot=C.value,ne.children=C.children.map(Ue=>mr(E,Ue)),ne}}const A=function nn(E){return new Bi(new ge.X(E.url),new ge.X(E.params),new ge.X(E.queryParams),new ge.X(E.fragment),new ge.X(E.data),E.outlet,E.component,E)}(C.value),x=C.children.map(W=>mr(E,W));return new un(A,x)}}const ni="ngNavigationCancelingError";function Ns(E,C){const{redirectTo:_,navigationBehaviorOptions:A}=en(C)?{redirectTo:C,navigationBehaviorOptions:void 0}:C,x=Os(!1,0,C);return x.url=_,x.navigationBehaviorOptions=A,x}function Os(E,C,_){const A=new Error("NavigationCancelingError: "+(E||""));return A[ni]=!0,A.cancellationCode=C,_&&(A.url=_),A}function Qs(E){return E&&E[ni]}let ys=(()=>{class E{static#e=this.\u0275fac=function(A){return new(A||E)};static#t=this.\u0275cmp=p.Xpm({type:E,selectors:[["ng-component"]],standalone:!0,features:[p.jDz],decls:1,vars:0,template:function(A,x){1&A&&p._UZ(0,"router-outlet")},dependencies:[zr],encapsulation:2})}return E})();function Di(E){const C=E.children&&E.children.map(Di),_=C?{...E,children:C}:{...E};return!_.component&&!_.loadComponent&&(C||_.loadChildren)&&_.outlet&&_.outlet!==at&&(_.component=ys),_}function Nr(E){return E.outlet||at}function ji(E){if(!E)return null;if(E.routeConfig?._injector)return E.routeConfig._injector;for(let C=E.parent;C;C=C.parent){const _=C.routeConfig;if(_?._loadedInjector)return _._loadedInjector;if(_?._injector)return _._injector}return null}class br{constructor(C,_,A,x,W){this.routeReuseStrategy=C,this.futureState=_,this.currState=A,this.forwardEvent=x,this.inputBindingEnabled=W}activate(C){const _=this.futureState._root,A=this.currState?this.currState._root:null;this.deactivateChildRoutes(_,A,C),tn(this.futureState.root),this.activateChildRoutes(_,A,C)}deactivateChildRoutes(C,_,A){const x=lr(_);C.children.forEach(W=>{const ne=W.value.outlet;this.deactivateRoutes(W,x[ne],A),delete x[ne]}),Object.values(x).forEach(W=>{this.deactivateRouteAndItsChildren(W,A)})}deactivateRoutes(C,_,A){const x=C.value,W=_?_.value:null;if(x===W)if(x.component){const ne=A.getContext(x.outlet);ne&&this.deactivateChildRoutes(C,_,ne.children)}else this.deactivateChildRoutes(C,_,A);else W&&this.deactivateRouteAndItsChildren(_,A)}deactivateRouteAndItsChildren(C,_){C.value.component&&this.routeReuseStrategy.shouldDetach(C.value.snapshot)?this.detachAndStoreRouteSubtree(C,_):this.deactivateRouteAndOutlet(C,_)}detachAndStoreRouteSubtree(C,_){const A=_.getContext(C.value.outlet),x=A&&C.value.component?A.children:_,W=lr(C);for(const ne of Object.keys(W))this.deactivateRouteAndItsChildren(W[ne],x);if(A&&A.outlet){const ne=A.outlet.detach(),Ue=A.children.onOutletDeactivated();this.routeReuseStrategy.store(C.value.snapshot,{componentRef:ne,route:C,contexts:Ue})}}deactivateRouteAndOutlet(C,_){const A=_.getContext(C.value.outlet),x=A&&C.value.component?A.children:_,W=lr(C);for(const ne of Object.keys(W))this.deactivateRouteAndItsChildren(W[ne],x);A&&(A.outlet&&(A.outlet.deactivate(),A.children.onOutletDeactivated()),A.attachRef=null,A.route=null)}activateChildRoutes(C,_,A){const x=lr(_);C.children.forEach(W=>{this.activateRoutes(W,x[W.value.outlet],A),this.forwardEvent(new pa(W.value.snapshot))}),C.children.length&&this.forwardEvent(new fa(C.value.snapshot))}activateRoutes(C,_,A){const x=C.value,W=_?_.value:null;if(tn(x),x===W)if(x.component){const ne=A.getOrCreateContext(x.outlet);this.activateChildRoutes(C,_,ne.children)}else this.activateChildRoutes(C,_,A);else if(x.component){const ne=A.getOrCreateContext(x.outlet);if(this.routeReuseStrategy.shouldAttach(x.snapshot)){const Ue=this.routeReuseStrategy.retrieve(x.snapshot);this.routeReuseStrategy.store(x.snapshot,null),ne.children.onOutletReAttached(Ue.contexts),ne.attachRef=Ue.componentRef,ne.route=Ue.route.value,ne.outlet&&ne.outlet.attach(Ue.componentRef,Ue.route.value),tn(Ue.route.value),this.activateChildRoutes(C,null,ne.children)}else{const Ue=ji(x.snapshot);ne.attachRef=null,ne.route=x,ne.injector=Ue,ne.outlet&&ne.outlet.activateWith(x,ne.injector),this.activateChildRoutes(C,null,ne.children)}}else this.activateChildRoutes(C,null,A)}}class lo{constructor(C){this.path=C,this.route=this.path[this.path.length-1]}}class Tn{constructor(C,_){this.component=C,this.route=_}}function jr(E,C,_){const A=E._root;return vs(A,C?C._root:null,_,[A.value])}function _r(E,C){const _=Symbol(),A=C.get(E,_);return A===_?"function"!=typeof E||(0,p.Z0I)(E)?C.get(E):E:A}function vs(E,C,_,A,x={canDeactivateChecks:[],canActivateChecks:[]}){const W=lr(C);return E.children.forEach(ne=>{(function Ni(E,C,_,A,x={canDeactivateChecks:[],canActivateChecks:[]}){const W=E.value,ne=C?C.value:null,Ue=_?_.getContext(E.value.outlet):null;if(ne&&W.routeConfig===ne.routeConfig){const be=function Xs(E,C,_){if("function"==typeof _)return _(E,C);switch(_){case"pathParamsChange":return!Kr(E.url,C.url);case"pathParamsOrQueryParamsChange":return!Kr(E.url,C.url)||!Qt(E.queryParams,C.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Fn(E,C)||!Qt(E.queryParams,C.queryParams);default:return!Fn(E,C)}}(ne,W,W.routeConfig.runGuardsAndResolvers);be?x.canActivateChecks.push(new lo(A)):(W.data=ne.data,W._resolvedData=ne._resolvedData),vs(E,C,W.component?Ue?Ue.children:null:_,A,x),be&&Ue&&Ue.outlet&&Ue.outlet.isActivated&&x.canDeactivateChecks.push(new Tn(Ue.outlet.component,ne))}else ne&&$i(C,Ue,x),x.canActivateChecks.push(new lo(A)),vs(E,null,W.component?Ue?Ue.children:null:_,A,x)})(ne,W[ne.value.outlet],_,A.concat([ne.value]),x),delete W[ne.value.outlet]}),Object.entries(W).forEach(([ne,Ue])=>$i(Ue,_.getContext(ne),x)),x}function $i(E,C,_){const A=lr(E),x=E.value;Object.entries(A).forEach(([W,ne])=>{$i(ne,x.component?C?C.children.getContext(W):null:C,_)}),_.canDeactivateChecks.push(new Tn(x.component&&C&&C.outlet&&C.outlet.isActivated?C.outlet.component:null,x))}function Qi(E){return"function"==typeof E}function Do(E){return E instanceof Se.K||"EmptyError"===E?.name}const V=Symbol("INITIAL_VALUE");function L(){return(0,Te.w)(E=>(0,oe.a)(E.map(C=>C.pipe((0,ke.q)(1),(0,qe.O)(V)))).pipe((0,Pe.U)(C=>{for(const _ of C)if(!0!==_){if(_===V)return V;if(!1===_||_ instanceof kn)return _}return!0}),(0,he.h)(C=>C!==V),(0,ke.q)(1)))}function ui(E){return(0,me.z)((0,Jt.b)(C=>{if(en(C))throw Ns(0,C)}),(0,Pe.U)(C=>!0===C))}class Es{constructor(C){this.segmentGroup=C||null}}class eo{constructor(C){this.urlTree=C}}function wr(E){return ze(new Es(E))}function Bs(E){return ze(new eo(E))}class To{constructor(C,_){this.urlSerializer=C,this.urlTree=_}noMatchError(C){return new p.vHH(4002,!1)}lineralizeSegments(C,_){let A=[],x=_.root;for(;;){if(A=A.concat(x.segments),0===x.numberOfChildren)return(0,le.of)(A);if(x.numberOfChildren>1||!x.children[at])return ze(new p.vHH(4e3,!1));x=x.children[at]}}applyRedirectCommands(C,_,A){return this.applyRedirectCreateUrlTree(_,this.urlSerializer.parse(_),C,A)}applyRedirectCreateUrlTree(C,_,A,x){const W=this.createSegmentGroup(C,_.root,A,x);return new kn(W,this.createQueryParams(_.queryParams,this.urlTree.queryParams),_.fragment)}createQueryParams(C,_){const A={};return Object.entries(C).forEach(([x,W])=>{if("string"==typeof W&&W.startsWith(":")){const Ue=W.substring(1);A[x]=_[Ue]}else A[x]=W}),A}createSegmentGroup(C,_,A,x){const W=this.createSegments(C,_.segments,A,x);let ne={};return Object.entries(_.children).forEach(([Ue,be])=>{ne[Ue]=this.createSegmentGroup(C,be,A,x)}),new dn(W,ne)}createSegments(C,_,A,x){return _.map(W=>W.path.startsWith(":")?this.findPosParam(C,W,x):this.findOrReturn(W,A))}findPosParam(C,_,A){const x=A[_.path.substring(1)];if(!x)throw new p.vHH(4001,!1);return x}findOrReturn(C,_){let A=0;for(const x of _){if(x.path===C.path)return _.splice(A),x;A++}return C}}const _i={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Co(E,C,_,A,x){const W=$o(E,C,_);return W.matched?(A=function ri(E,C){return E.providers&&!E._injector&&(E._injector=(0,p.MMx)(E.providers,C,`Route: ${E.path}`)),E._injector??C}(C,A),function ci(E,C,_,A){const x=C.canMatch;if(!x||0===x.length)return(0,le.of)(!0);const W=x.map(ne=>{const Ue=_r(ne,E);return on(function Io(E){return E&&Qi(E.canMatch)}(Ue)?Ue.canMatch(C,_):E.runInContext(()=>Ue(C,_)))});return(0,le.of)(W).pipe(L(),ui())}(A,C,_).pipe((0,Pe.U)(ne=>!0===ne?W:{..._i}))):(0,le.of)(W)}function $o(E,C,_){if(""===C.path)return"full"===C.pathMatch&&(E.hasChildren()||_.length>0)?{..._i}:{matched:!0,consumedSegments:[],remainingSegments:_,parameters:{},positionalParamSegments:{}};const x=(C.matcher||En)(_,E,C);if(!x)return{..._i};const W={};Object.entries(x.posParams??{}).forEach(([Ue,be])=>{W[Ue]=be.path});const ne=x.consumed.length>0?{...W,...x.consumed[x.consumed.length-1].parameters}:W;return{matched:!0,consumedSegments:x.consumed,remainingSegments:_.slice(x.consumed.length),parameters:ne,positionalParamSegments:x.posParams??{}}}function js(E,C,_,A){return _.length>0&&function Ka(E,C,_){return _.some(A=>ma(E,C,A)&&Nr(A)!==at)}(E,_,A)?{segmentGroup:new dn(C,Oi(A,new dn(_,E.children))),slicedSegments:[]}:0===_.length&&function Zn(E,C,_){return _.some(A=>ma(E,C,A))}(E,_,A)?{segmentGroup:new dn(E.segments,qa(E,0,_,A,E.children)),slicedSegments:_}:{segmentGroup:new dn(E.segments,E.children),slicedSegments:_}}function qa(E,C,_,A,x){const W={};for(const ne of A)if(ma(E,_,ne)&&!x[Nr(ne)]){const Ue=new dn([],{});W[Nr(ne)]=Ue}return{...x,...W}}function Oi(E,C){const _={};_[at]=C;for(const A of E)if(""===A.path&&Nr(A)!==at){const x=new dn([],{});_[Nr(A)]=x}return _}function ma(E,C,_){return(!(E.hasChildren()||C.length>0)||"full"!==_.pathMatch)&&""===_.path}class So{constructor(C,_,A,x,W,ne,Ue){this.injector=C,this.configLoader=_,this.rootComponentType=A,this.config=x,this.urlTree=W,this.paramsInheritanceStrategy=ne,this.urlSerializer=Ue,this.allowRedirects=!0,this.applyRedirects=new To(this.urlSerializer,this.urlTree)}noMatchError(C){return new p.vHH(4002,!1)}recognize(){const C=js(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,C,at).pipe(zn(_=>{if(_ instanceof eo)return this.allowRedirects=!1,this.urlTree=_.urlTree,this.match(_.urlTree);throw _ instanceof Es?this.noMatchError(_):_}),(0,Pe.U)(_=>{const A=new Zi([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},at,this.rootComponentType,null,{}),x=new un(A,_),W=new ls("",x),ne=function Ht(E,C,_=null,A=null){return ai(ar(E),C,_,A)}(A,[],this.urlTree.queryParams,this.urlTree.fragment);return ne.queryParams=this.urlTree.queryParams,W.url=this.urlSerializer.serialize(ne),this.inheritParamsAndData(W._root),{state:W,tree:ne}}))}match(C){return this.processSegmentGroup(this.injector,this.config,C.root,at).pipe(zn(A=>{throw A instanceof Es?this.noMatchError(A):A}))}inheritParamsAndData(C){const _=C.value,A=_s(_,this.paramsInheritanceStrategy);_.params=Object.freeze(A.params),_.data=Object.freeze(A.data),C.children.forEach(x=>this.inheritParamsAndData(x))}processSegmentGroup(C,_,A,x){return 0===A.segments.length&&A.hasChildren()?this.processChildren(C,_,A):this.processSegment(C,_,A,A.segments,x,!0)}processChildren(C,_,A){const x=[];for(const W of Object.keys(A.children))"primary"===W?x.unshift(W):x.push(W);return(0,te.D)(x).pipe(Gt(W=>{const ne=A.children[W],Ue=function ii(E,C){const _=E.filter(A=>Nr(A)===C);return _.push(...E.filter(A=>Nr(A)!==C)),_}(_,W);return this.processSegmentGroup(C,Ue,ne,W)}),(0,At.R)((W,ne)=>(W.push(...ne),W)),(0,pt.d)(null),function Ce(E,C){const _=arguments.length>=2;return A=>A.pipe(E?(0,he.h)((x,W)=>E(x,W,A)):ye.y,mt(1),_?(0,pt.d)(C):(0,pe.T)(()=>new Se.K))}(),(0,ft.z)(W=>{if(null===W)return wr(A);const ne=Za(W);return function Ho(E){E.sort((C,_)=>C.value.outlet===at?-1:_.value.outlet===at?1:C.value.outlet.localeCompare(_.value.outlet))}(ne),(0,le.of)(ne)}))}processSegment(C,_,A,x,W,ne){return(0,te.D)(_).pipe(Gt(Ue=>this.processSegmentAgainstRoute(Ue._injector??C,_,Ue,A,x,W,ne).pipe(zn(be=>{if(be instanceof Es)return(0,le.of)(null);throw be}))),(0,Tt.P)(Ue=>!!Ue),zn(Ue=>{if(Do(Ue))return function ki(E,C,_){return 0===C.length&&!E.children[_]}(A,x,W)?(0,le.of)([]):wr(A);throw Ue}))}processSegmentAgainstRoute(C,_,A,x,W,ne,Ue){return function ho(E,C,_,A){return!!(Nr(E)===A||A!==at&&ma(C,_,E))&&("**"===E.path||$o(C,E,_).matched)}(A,x,W,ne)?void 0===A.redirectTo?this.matchSegmentAgainstRoute(C,x,A,W,ne,Ue):Ue&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(C,x,_,A,W,ne):wr(x):wr(x)}expandSegmentAgainstRouteUsingRedirect(C,_,A,x,W,ne){return"**"===x.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(C,A,x,ne):this.expandRegularSegmentAgainstRouteUsingRedirect(C,_,A,x,W,ne)}expandWildCardWithParamsAgainstRouteUsingRedirect(C,_,A,x){const W=this.applyRedirects.applyRedirectCommands([],A.redirectTo,{});return A.redirectTo.startsWith("/")?Bs(W):this.applyRedirects.lineralizeSegments(A,W).pipe((0,ft.z)(ne=>{const Ue=new dn(ne,{});return this.processSegment(C,_,Ue,ne,x,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(C,_,A,x,W,ne){const{matched:Ue,consumedSegments:be,remainingSegments:Nt,positionalParamSegments:Cn}=$o(_,x,W);if(!Ue)return wr(_);const $n=this.applyRedirects.applyRedirectCommands(be,x.redirectTo,Cn);return x.redirectTo.startsWith("/")?Bs($n):this.applyRedirects.lineralizeSegments(x,$n).pipe((0,ft.z)(Nn=>this.processSegment(C,A,_,Nn.concat(Nt),ne,!1)))}matchSegmentAgainstRoute(C,_,A,x,W,ne){let Ue;if("**"===A.path){const be=x.length>0?On(x).parameters:{},Nt=new Zi(x,be,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Vi(A),Nr(A),A.component??A._loadedComponent??null,A,yi(A));Ue=(0,le.of)({snapshot:Nt,consumedSegments:[],remainingSegments:[]}),_.children={}}else Ue=Co(_,A,x,C).pipe((0,Pe.U)(({matched:be,consumedSegments:Nt,remainingSegments:Cn,parameters:$n})=>be?{snapshot:new Zi(Nt,$n,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Vi(A),Nr(A),A.component??A._loadedComponent??null,A,yi(A)),consumedSegments:Nt,remainingSegments:Cn}:null));return Ue.pipe((0,Te.w)(be=>null===be?wr(_):this.getChildConfig(C=A._injector??C,A,x).pipe((0,Te.w)(({routes:Nt})=>{const Cn=A._loadedInjector??C,{snapshot:$n,consumedSegments:Nn,remainingSegments:fs}=be,{segmentGroup:Ko,slicedSegments:Ia}=js(_,Nn,fs,Nt);if(0===Ia.length&&Ko.hasChildren())return this.processChildren(Cn,Nt,Ko).pipe((0,Pe.U)(Da=>null===Da?null:[new un($n,Da)]));if(0===Nt.length&&0===Ia.length)return(0,le.of)([new un($n,[])]);const Ja=Nr(A)===W;return this.processSegment(Cn,Nt,Ko,Ia,Ja?at:W,!0).pipe((0,Pe.U)(Da=>[new un($n,Da)]))}))))}getChildConfig(C,_,A){return _.children?(0,le.of)({routes:_.children,injector:C}):_.loadChildren?void 0!==_._loadedRoutes?(0,le.of)({routes:_._loadedRoutes,injector:_._loadedInjector}):function wo(E,C,_,A){const x=C.canLoad;if(void 0===x||0===x.length)return(0,le.of)(!0);const W=x.map(ne=>{const Ue=_r(ne,E);return on(function Mt(E){return E&&Qi(E.canLoad)}(Ue)?Ue.canLoad(C,_):E.runInContext(()=>Ue(C,_)))});return(0,le.of)(W).pipe(L(),ui())}(C,_,A).pipe((0,ft.z)(x=>x?this.configLoader.loadChildren(C,_).pipe((0,Jt.b)(W=>{_._loadedRoutes=W.routes,_._loadedInjector=W.injector})):function Au(E){return ze(Os(!1,3))}())):(0,le.of)({routes:[],injector:C})}}function tc(E){const C=E.value.routeConfig;return C&&""===C.path}function Za(E){const C=[],_=new Set;for(const A of E){if(!tc(A)){C.push(A);continue}const x=C.find(W=>A.value.routeConfig===W.value.routeConfig);void 0!==x?(x.children.push(...A.children),_.add(x)):C.push(A)}for(const A of _){const x=Za(A.children);C.push(new un(A.value,x))}return C.filter(A=>!_.has(A))}function Vi(E){return E.data||{}}function yi(E){return E.resolve||{}}function Ya(E){return"string"==typeof E.title||null===E.title}function D(E){return(0,Te.w)(C=>{const _=E(C);return _?(0,te.D)(_).pipe((0,Pe.U)(()=>C)):(0,le.of)(C)})}const j=new p.OlP("ROUTES");let R=(()=>{class E{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,p.f3M)(p.Sil)}loadComponent(_){if(this.componentLoaders.get(_))return this.componentLoaders.get(_);if(_._loadedComponent)return(0,le.of)(_._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(_);const A=on(_.loadComponent()).pipe((0,Pe.U)(Ve),(0,Jt.b)(W=>{this.onLoadEndListener&&this.onLoadEndListener(_),_._loadedComponent=W}),xe(()=>{this.componentLoaders.delete(_)})),x=new Rt(A,()=>new Ie.x).pipe(Ge());return this.componentLoaders.set(_,x),x}loadChildren(_,A){if(this.childrenLoaders.get(A))return this.childrenLoaders.get(A);if(A._loadedRoutes)return(0,le.of)({routes:A._loadedRoutes,injector:A._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(A);const W=function B(E,C,_,A){return on(E.loadChildren()).pipe((0,Pe.U)(Ve),(0,ft.z)(x=>x instanceof p.YKP||Array.isArray(x)?(0,le.of)(x):(0,te.D)(C.compileModuleAsync(x))),(0,Pe.U)(x=>{A&&A(E);let W,ne,Ue=!1;return Array.isArray(x)?(ne=x,!0):(W=x.create(_).injector,ne=W.get(j,[],{optional:!0,self:!0}).flat()),{routes:ne.map(Di),injector:W}}))}(A,this.compiler,_,this.onLoadEndListener).pipe(xe(()=>{this.childrenLoaders.delete(A)})),ne=new Rt(W,()=>new Ie.x).pipe(Ge());return this.childrenLoaders.set(A,ne),ne}static#e=this.\u0275fac=function(A){return new(A||E)};static#t=this.\u0275prov=p.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();function Ve(E){return function ie(E){return E&&"object"==typeof E&&"default"in E}(E)?E.default:E}let Ke=(()=>{class E{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ie.x,this.transitionAbortSubject=new Ie.x,this.configLoader=(0,p.f3M)(R),this.environmentInjector=(0,p.f3M)(p.lqb),this.urlSerializer=(0,p.f3M)(Zr),this.rootContexts=(0,p.f3M)(Mi),this.inputBindingEnabled=null!==(0,p.f3M)(er,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,le.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=x=>this.events.next(new jo(x)),this.configLoader.onLoadStartListener=x=>this.events.next(new Bo(x))}complete(){this.transitions?.complete()}handleNavigationRequest(_){const A=++this.navigationId;this.transitions?.next({...this.transitions.value,..._,id:A})}setupNavigations(_,A,x){return this.transitions=new ge.X({id:0,currentUrlTree:A,currentRawUrl:A,currentBrowserUrl:A,extractedUrl:_.urlHandlingStrategy.extract(A),urlAfterRedirects:_.urlHandlingStrategy.extract(A),rawUrl:A,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Hr,restoredState:null,currentSnapshot:x.snapshot,targetSnapshot:null,currentRouterState:x,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,he.h)(W=>0!==W.id),(0,Pe.U)(W=>({...W,extractedUrl:_.urlHandlingStrategy.extract(W.rawUrl)})),(0,Te.w)(W=>{this.currentTransition=W;let ne=!1,Ue=!1;return(0,le.of)(W).pipe((0,Jt.b)(be=>{this.currentNavigation={id:be.id,initialUrl:be.rawUrl,extractedUrl:be.extractedUrl,trigger:be.source,extras:be.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Te.w)(be=>{const Nt=be.currentBrowserUrl.toString(),Cn=!_.navigated||be.extractedUrl.toString()!==Nt||Nt!==be.currentUrlTree.toString();if(!Cn&&"reload"!==(be.extras.onSameUrlNavigation??_.onSameUrlNavigation)){const Nn="";return this.events.next(new Wi(be.id,this.urlSerializer.serialize(be.rawUrl),Nn,0)),be.resolve(null),Ne.E}if(_.urlHandlingStrategy.shouldProcessUrl(be.rawUrl))return(0,le.of)(be).pipe((0,Te.w)(Nn=>{const fs=this.transitions?.getValue();return this.events.next(new bs(Nn.id,this.urlSerializer.serialize(Nn.extractedUrl),Nn.source,Nn.restoredState)),fs!==this.transitions?.getValue()?Ne.E:Promise.resolve(Nn)}),function bo(E,C,_,A,x,W){return(0,ft.z)(ne=>function Ao(E,C,_,A,x,W,ne="emptyOnly"){return new So(E,C,_,A,x,ne,W).recognize()}(E,C,_,A,ne.extractedUrl,x,W).pipe((0,Pe.U)(({state:Ue,tree:be})=>({...ne,targetSnapshot:Ue,urlAfterRedirects:be}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,_.config,this.urlSerializer,_.paramsInheritanceStrategy),(0,Jt.b)(Nn=>{W.targetSnapshot=Nn.targetSnapshot,W.urlAfterRedirects=Nn.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:Nn.urlAfterRedirects};const fs=new gr(Nn.id,this.urlSerializer.serialize(Nn.extractedUrl),this.urlSerializer.serialize(Nn.urlAfterRedirects),Nn.targetSnapshot);this.events.next(fs)}));if(Cn&&_.urlHandlingStrategy.shouldProcessUrl(be.currentRawUrl)){const{id:Nn,extractedUrl:fs,source:Ko,restoredState:Ia,extras:Ja}=be,Da=new bs(Nn,this.urlSerializer.serialize(fs),Ko,Ia);this.events.next(Da);const Zc=ti(0,this.rootComponentType).snapshot;return this.currentTransition=W={...be,targetSnapshot:Zc,urlAfterRedirects:fs,extras:{...Ja,skipLocationChange:!1,replaceUrl:!1}},(0,le.of)(W)}{const Nn="";return this.events.next(new Wi(be.id,this.urlSerializer.serialize(be.extractedUrl),Nn,1)),be.resolve(null),Ne.E}}),(0,Jt.b)(be=>{const Nt=new bi(be.id,this.urlSerializer.serialize(be.extractedUrl),this.urlSerializer.serialize(be.urlAfterRedirects),be.targetSnapshot);this.events.next(Nt)}),(0,Pe.U)(be=>(this.currentTransition=W={...be,guards:jr(be.targetSnapshot,be.currentSnapshot,this.rootContexts)},W)),function b(E,C){return(0,ft.z)(_=>{const{targetSnapshot:A,currentSnapshot:x,guards:{canActivateChecks:W,canDeactivateChecks:ne}}=_;return 0===ne.length&&0===W.length?(0,le.of)({..._,guardsResult:!0}):function q(E,C,_,A){return(0,te.D)(E).pipe((0,ft.z)(x=>function Ji(E,C,_,A,x){const W=C&&C.routeConfig?C.routeConfig.canDeactivate:null;if(!W||0===W.length)return(0,le.of)(!0);const ne=W.map(Ue=>{const be=ji(C)??x,Nt=_r(Ue,be);return on(function Or(E){return E&&Qi(E.canDeactivate)}(Nt)?Nt.canDeactivate(E,C,_,A):be.runInContext(()=>Nt(E,C,_,A))).pipe((0,Tt.P)())});return(0,le.of)(ne).pipe(L())}(x.component,x.route,_,C,A)),(0,Tt.P)(x=>!0!==x,!0))}(ne,A,x,E).pipe((0,ft.z)(Ue=>Ue&&function ga(E){return"boolean"==typeof E}(Ue)?function ce(E,C,_,A){return(0,te.D)(C).pipe(Gt(x=>(0,Q.z)(function an(E,C){return null!==E&&C&&C(new uo(E)),(0,le.of)(!0)}(x.route.parent,A),function bt(E,C){return null!==E&&C&&C(new Ri(E)),(0,le.of)(!0)}(x.route,A),function Us(E,C,_){const A=C[C.length-1],W=C.slice(0,C.length-1).reverse().map(ne=>function Js(E){const C=E.routeConfig?E.routeConfig.canActivateChild:null;return C&&0!==C.length?{node:E,guards:C}:null}(ne)).filter(ne=>null!==ne).map(ne=>(0,re.P)(()=>{const Ue=ne.guards.map(be=>{const Nt=ji(ne.node)??_,Cn=_r(be,Nt);return on(function Dr(E){return E&&Qi(E.canActivateChild)}(Cn)?Cn.canActivateChild(A,E):Nt.runInContext(()=>Cn(A,E))).pipe((0,Tt.P)())});return(0,le.of)(Ue).pipe(L())}));return(0,le.of)(W).pipe(L())}(E,x.path,_),function oi(E,C,_){const A=C.routeConfig?C.routeConfig.canActivate:null;if(!A||0===A.length)return(0,le.of)(!0);const x=A.map(W=>(0,re.P)(()=>{const ne=ji(C)??_,Ue=_r(W,ne);return on(function Kn(E){return E&&Qi(E.canActivate)}(Ue)?Ue.canActivate(C,E):ne.runInContext(()=>Ue(C,E))).pipe((0,Tt.P)())}));return(0,le.of)(x).pipe(L())}(E,x.route,_))),(0,Tt.P)(x=>!0!==x,!0))}(A,W,E,C):(0,le.of)(Ue)),(0,Pe.U)(Ue=>({..._,guardsResult:Ue})))})}(this.environmentInjector,be=>this.events.next(be)),(0,Jt.b)(be=>{if(W.guardsResult=be.guardsResult,en(be.guardsResult))throw Ns(0,be.guardsResult);const Nt=new Rs(be.id,this.urlSerializer.serialize(be.extractedUrl),this.urlSerializer.serialize(be.urlAfterRedirects),be.targetSnapshot,!!be.guardsResult);this.events.next(Nt)}),(0,he.h)(be=>!!be.guardsResult||(this.cancelNavigationTransition(be,"",3),!1)),D(be=>{if(be.guards.canActivateChecks.length)return(0,le.of)(be).pipe((0,Jt.b)(Nt=>{const Cn=new ha(Nt.id,this.urlSerializer.serialize(Nt.extractedUrl),this.urlSerializer.serialize(Nt.urlAfterRedirects),Nt.targetSnapshot);this.events.next(Cn)}),(0,Te.w)(Nt=>{let Cn=!1;return(0,le.of)(Nt).pipe(function zo(E,C){return(0,ft.z)(_=>{const{targetSnapshot:A,guards:{canActivateChecks:x}}=_;if(!x.length)return(0,le.of)(_);let W=0;return(0,te.D)(x).pipe(Gt(ne=>function Ro(E,C,_,A){const x=E.routeConfig,W=E._resolve;return void 0!==x?.title&&!Ya(x)&&(W[Lt]=x.title),function Go(E,C,_,A){const x=function Su(E){return[...Object.keys(E),...Object.getOwnPropertySymbols(E)]}(E);if(0===x.length)return(0,le.of)({});const W={};return(0,te.D)(x).pipe((0,ft.z)(ne=>function to(E,C,_,A){const x=ji(C)??A,W=_r(E,x);return on(W.resolve?W.resolve(C,_):x.runInContext(()=>W(C,_)))}(E[ne],C,_,A).pipe((0,Tt.P)(),(0,Jt.b)(Ue=>{W[ne]=Ue}))),mt(1),function ve(E){return(0,Pe.U)(()=>E)}(W),zn(ne=>Do(ne)?Ne.E:ze(ne)))}(W,E,C,A).pipe((0,Pe.U)(ne=>(E._resolvedData=ne,E.data=_s(E,_).resolve,x&&Ya(x)&&(E.data[Lt]=x.title),null)))}(ne.route,A,E,C)),(0,Jt.b)(()=>W++),mt(1),(0,ft.z)(ne=>W===x.length?(0,le.of)(_):Ne.E))})}(_.paramsInheritanceStrategy,this.environmentInjector),(0,Jt.b)({next:()=>Cn=!0,complete:()=>{Cn||this.cancelNavigationTransition(Nt,"",2)}}))}),(0,Jt.b)(Nt=>{const Cn=new Ui(Nt.id,this.urlSerializer.serialize(Nt.extractedUrl),this.urlSerializer.serialize(Nt.urlAfterRedirects),Nt.targetSnapshot);this.events.next(Cn)}))}),D(be=>{const Nt=Cn=>{const $n=[];Cn.routeConfig?.loadComponent&&!Cn.routeConfig._loadedComponent&&$n.push(this.configLoader.loadComponent(Cn.routeConfig).pipe((0,Jt.b)(Nn=>{Cn.component=Nn}),(0,Pe.U)(()=>{})));for(const Nn of Cn.children)$n.push(...Nt(Nn));return $n};return(0,oe.a)(Nt(be.targetSnapshot.root)).pipe((0,pt.d)(),(0,ke.q)(1))}),D(()=>this.afterPreactivation()),(0,Pe.U)(be=>{const Nt=function Ln(E,C,_){const A=mr(E,C._root,_?_._root:void 0);return new ur(A,C)}(_.routeReuseStrategy,be.targetSnapshot,be.currentRouterState);return this.currentTransition=W={...be,targetRouterState:Nt},W}),(0,Jt.b)(()=>{this.events.next(new Ki)}),((E,C,_,A)=>(0,Pe.U)(x=>(new br(C,x.targetRouterState,x.currentRouterState,_,A).activate(E),x)))(this.rootContexts,_.routeReuseStrategy,be=>this.events.next(be),this.inputBindingEnabled),(0,ke.q)(1),(0,Jt.b)({next:be=>{ne=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ei(be.id,this.urlSerializer.serialize(be.extractedUrl),this.urlSerializer.serialize(be.urlAfterRedirects))),_.titleStrategy?.updateTitle(be.targetRouterState.snapshot),be.resolve(!0)},complete:()=>{ne=!0}}),(0,Qe.R)(this.transitionAbortSubject.pipe((0,Jt.b)(be=>{throw be}))),xe(()=>{ne||Ue||this.cancelNavigationTransition(W,"",1),this.currentNavigation?.id===W.id&&(this.currentNavigation=null)}),zn(be=>{if(Ue=!0,Qs(be))this.events.next(new us(W.id,this.urlSerializer.serialize(W.extractedUrl),be.message,be.cancellationCode)),function dr(E){return Qs(E)&&en(E.url)}(be)?this.events.next(new cs(be.url)):W.resolve(!1);else{this.events.next(new qi(W.id,this.urlSerializer.serialize(W.extractedUrl),be,W.targetSnapshot??void 0));try{W.resolve(_.errorHandler(be))}catch(Nt){W.reject(Nt)}}return Ne.E}))}))}cancelNavigationTransition(_,A,x){const W=new us(_.id,this.urlSerializer.serialize(_.extractedUrl),A,x);this.events.next(W),_.resolve(!1)}static#e=this.\u0275fac=function(A){return new(A||E)};static#t=this.\u0275prov=p.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();function Ft(E){return E!==Hr}let sr=(()=>{class E{buildTitle(_){let A,x=_.root;for(;void 0!==x;)A=this.getResolvedTitleForRoute(x)??A,x=x.children.find(W=>W.outlet===at);return A}getResolvedTitleForRoute(_){return _.data[Lt]}static#e=this.\u0275fac=function(A){return new(A||E)};static#t=this.\u0275prov=p.Yz7({token:E,factory:function(){return(0,p.f3M)(Yn)},providedIn:"root"})}return E})(),Yn=(()=>{class E extends sr{constructor(_){super(),this.title=_}updateTitle(_){const A=this.buildTitle(_);void 0!==A&&this.title.setTitle(A)}static#e=this.\u0275fac=function(A){return new(A||E)(p.LFG(rt.Dx))};static#t=this.\u0275prov=p.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})(),Qn=(()=>{class E{static#e=this.\u0275fac=function(A){return new(A||E)};static#t=this.\u0275prov=p.Yz7({token:E,factory:function(){return(0,p.f3M)(fr)},providedIn:"root"})}return E})();class Yt{shouldDetach(C){return!1}store(C,_){}shouldAttach(C){return!1}retrieve(C){return null}shouldReuseRoute(C,_){return C.routeConfig===_.routeConfig}}let fr=(()=>{class E extends Yt{static#e=this.\u0275fac=function(){let _;return function(x){return(_||(_=p.n5z(E)))(x||E)}}();static#t=this.\u0275prov=p.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();const Mn=new p.OlP("",{providedIn:"root",factory:()=>({})});let kr=(()=>{class E{static#e=this.\u0275fac=function(A){return new(A||E)};static#t=this.\u0275prov=p.Yz7({token:E,factory:function(){return(0,p.f3M)(no)},providedIn:"root"})}return E})(),no=(()=>{class E{shouldProcessUrl(_){return!0}extract(_){return _}merge(_,A){return _}static#e=this.\u0275fac=function(A){return new(A||E)};static#t=this.\u0275prov=p.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();var Je=function(E){return E[E.COMPLETE=0]="COMPLETE",E[E.FAILED=1]="FAILED",E[E.REDIRECTING=2]="REDIRECTING",E}(Je||{});function or(E,C){E.events.pipe((0,he.h)(_=>_ instanceof ei||_ instanceof us||_ instanceof qi||_ instanceof Wi),(0,Pe.U)(_=>_ instanceof ei||_ instanceof Wi?Je.COMPLETE:_ instanceof us&&(0===_.code||1===_.code)?Je.REDIRECTING:Je.FAILED),(0,he.h)(_=>_!==Je.REDIRECTING),(0,ke.q)(1)).subscribe(()=>{C()})}function yr(E){throw E}function $s(E,C,_){return C.parse("/")}const _t={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Bt={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let hs=(()=>{class E{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,p.f3M)(p.c2e),this.isNgZoneEnabled=!1,this._events=new Ie.x,this.options=(0,p.f3M)(Mn,{optional:!0})||{},this.pendingTasks=(0,p.f3M)(p.HDt),this.errorHandler=this.options.errorHandler||yr,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||$s,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,p.f3M)(kr),this.routeReuseStrategy=(0,p.f3M)(Qn),this.titleStrategy=(0,p.f3M)(sr),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,p.f3M)(j,{optional:!0})?.flat()??[],this.navigationTransitions=(0,p.f3M)(Ke),this.urlSerializer=(0,p.f3M)(Zr),this.location=(0,p.f3M)(de.Ye),this.componentInputBindingEnabled=!!(0,p.f3M)(er,{optional:!0}),this.eventsSubscription=new Ze.w0,this.isNgZoneEnabled=(0,p.f3M)(p.R0b)instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new kn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ti(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(_=>{this.lastSuccessfulId=_.id,this.currentPageId=this.browserPageId},_=>{this.console.warn(`Unhandled Navigation Error: ${_}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const _=this.navigationTransitions.events.subscribe(A=>{try{const{currentTransition:x}=this.navigationTransitions;if(null===x)return void(je(A)&&this._events.next(A));if(A instanceof bs)Ft(x.source)&&(this.browserUrlTree=x.extractedUrl);else if(A instanceof Wi)this.rawUrlTree=x.rawUrl;else if(A instanceof gr){if("eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const W=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(W,x)}this.browserUrlTree=x.urlAfterRedirects}}else if(A instanceof Ki)this.currentUrlTree=x.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl),this.routerState=x.targetRouterState,"deferred"===this.urlUpdateStrategy&&(x.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,x),this.browserUrlTree=x.urlAfterRedirects);else if(A instanceof us)0!==A.code&&1!==A.code&&(this.navigated=!0),(3===A.code||2===A.code)&&this.restoreHistory(x);else if(A instanceof cs){const W=this.urlHandlingStrategy.merge(A.url,x.currentRawUrl),ne={skipLocationChange:x.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ft(x.source)};this.scheduleNavigation(W,Hr,null,ne,{resolve:x.resolve,reject:x.reject,promise:x.promise})}A instanceof qi&&this.restoreHistory(x,!0),A instanceof ei&&(this.navigated=!0),je(A)&&this._events.next(A)}catch(x){this.navigationTransitions.transitionAbortSubject.next(x)}});this.eventsSubscription.add(_)}resetRootComponentType(_){this.routerState.root.component=_,this.navigationTransitions.rootComponentType=_}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const _=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Hr,_)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(_=>{const A="popstate"===_.type?"popstate":"hashchange";"popstate"===A&&setTimeout(()=>{this.navigateToSyncWithBrowser(_.url,A,_.state)},0)}))}navigateToSyncWithBrowser(_,A,x){const W={replaceUrl:!0},ne=x?.navigationId?x:null;if(x){const be={...x};delete be.navigationId,delete be.\u0275routerPageId,0!==Object.keys(be).length&&(W.state=be)}const Ue=this.parseUrl(_);this.scheduleNavigation(Ue,A,ne,W)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(_){this.config=_.map(Di),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(_,A={}){const{relativeTo:x,queryParams:W,fragment:ne,queryParamsHandling:Ue,preserveFragment:be}=A,Nt=be?this.currentUrlTree.fragment:ne;let $n,Cn=null;switch(Ue){case"merge":Cn={...this.currentUrlTree.queryParams,...W};break;case"preserve":Cn=this.currentUrlTree.queryParams;break;default:Cn=W||null}null!==Cn&&(Cn=this.removeEmptyProps(Cn));try{$n=ar(x?x.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof _[0]||!_[0].startsWith("/"))&&(_=[]),$n=this.currentUrlTree.root}return ai($n,_,Cn,Nt??null)}navigateByUrl(_,A={skipLocationChange:!1}){const x=en(_)?_:this.parseUrl(_),W=this.urlHandlingStrategy.merge(x,this.rawUrlTree);return this.scheduleNavigation(W,Hr,null,A)}navigate(_,A={skipLocationChange:!1}){return function ot(E){for(let C=0;C<E.length;C++)if(null==E[C])throw new p.vHH(4008,!1)}(_),this.navigateByUrl(this.createUrlTree(_,A),A)}serializeUrl(_){return this.urlSerializer.serialize(_)}parseUrl(_){let A;try{A=this.urlSerializer.parse(_)}catch(x){A=this.malformedUriErrorHandler(x,this.urlSerializer,_)}return A}isActive(_,A){let x;if(x=!0===A?{..._t}:!1===A?{...Bt}:A,en(_))return Dn(this.currentUrlTree,_,x);const W=this.parseUrl(_);return Dn(this.currentUrlTree,W,x)}removeEmptyProps(_){return Object.keys(_).reduce((A,x)=>{const W=_[x];return null!=W&&(A[x]=W),A},{})}scheduleNavigation(_,A,x,W,ne){if(this.disposed)return Promise.resolve(!1);let Ue,be,Nt;ne?(Ue=ne.resolve,be=ne.reject,Nt=ne.promise):Nt=new Promise(($n,Nn)=>{Ue=$n,be=Nn});const Cn=this.pendingTasks.add();return or(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(Cn))}),this.navigationTransitions.handleNavigationRequest({source:A,restoredState:x,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:_,extras:W,resolve:Ue,reject:be,promise:Nt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Nt.catch($n=>Promise.reject($n))}setBrowserUrl(_,A){const x=this.urlSerializer.serialize(_);if(this.location.isCurrentPathEqualTo(x)||A.extras.replaceUrl){const ne={...A.extras.state,...this.generateNgRouterState(A.id,this.browserPageId)};this.location.replaceState(x,"",ne)}else{const W={...A.extras.state,...this.generateNgRouterState(A.id,this.browserPageId+1)};this.location.go(x,"",W)}}restoreHistory(_,A=!1){if("computed"===this.canceledNavigationResolution){const W=this.currentPageId-this.browserPageId;0!==W?this.location.historyGo(W):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===W&&(this.resetState(_),this.browserUrlTree=_.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(A&&this.resetState(_),this.resetUrlToCurrentUrlTree())}resetState(_){this.routerState=_.currentRouterState,this.currentUrlTree=_.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,_.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(_,A){return"computed"===this.canceledNavigationResolution?{navigationId:_,\u0275routerPageId:A}:{navigationId:_}}static#e=this.\u0275fac=function(A){return new(A||E)};static#t=this.\u0275prov=p.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();function je(E){return!(E instanceof Ki||E instanceof cs)}let et=(()=>{class E{constructor(_,A,x,W,ne,Ue){this.router=_,this.route=A,this.tabIndexAttribute=x,this.renderer=W,this.el=ne,this.locationStrategy=Ue,this.href=null,this.commands=null,this.onChanges=new Ie.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const be=ne.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===be||"area"===be,this.isAnchorElement?this.subscription=_.events.subscribe(Nt=>{Nt instanceof ei&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(_){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",_)}ngOnChanges(_){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(_){null!=_?(this.commands=Array.isArray(_)?_:[_],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(_,A,x,W,ne){return!!(null===this.urlTree||this.isAnchorElement&&(0!==_||A||x||W||ne||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const _=null===this.href?null:(0,p.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",_)}applyAttributeValue(_,A){const x=this.renderer,W=this.el.nativeElement;null!==A?x.setAttribute(W,_,A):x.removeAttribute(W,_)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(A){return new(A||E)(p.Y36(hs),p.Y36(Bi),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(de.S$))};static#t=this.\u0275dir=p.lG2({type:E,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(A,x){1&A&&p.NdJ("click",function(ne){return x.onClick(ne.button,ne.ctrlKey,ne.shiftKey,ne.altKey,ne.metaKey)}),2&A&&p.uIk("target",x.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",p.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",p.VuI],replaceUrl:["replaceUrl","replaceUrl",p.VuI],routerLink:"routerLink"},standalone:!0,features:[p.Xq5,p.TTD]})}return E})();class nc{}let Kd=(()=>{class E{constructor(_,A,x,W,ne){this.router=_,this.injector=x,this.preloadingStrategy=W,this.loader=ne}setUpPreloading(){this.subscription=this.router.events.pipe((0,he.h)(_=>_ instanceof ei),Gt(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(_,A){const x=[];for(const W of A){W.providers&&!W._injector&&(W._injector=(0,p.MMx)(W.providers,_,`Route: ${W.path}`));const ne=W._injector??_,Ue=W._loadedInjector??ne;(W.loadChildren&&!W._loadedRoutes&&void 0===W.canLoad||W.loadComponent&&!W._loadedComponent)&&x.push(this.preloadConfig(ne,W)),(W.children||W._loadedRoutes)&&x.push(this.processRoutes(Ue,W.children??W._loadedRoutes))}return(0,te.D)(x).pipe((0,ct.J)())}preloadConfig(_,A){return this.preloadingStrategy.preload(A,()=>{let x;x=A.loadChildren&&void 0===A.canLoad?this.loader.loadChildren(_,A):(0,le.of)(null);const W=x.pipe((0,ft.z)(ne=>null===ne?(0,le.of)(void 0):(A._loadedRoutes=ne.routes,A._loadedInjector=ne.injector,this.processRoutes(ne.injector??_,ne.routes))));if(A.loadComponent&&!A._loadedComponent){const ne=this.loader.loadComponent(A);return(0,te.D)([W,ne]).pipe((0,ct.J)())}return W})}static#e=this.\u0275fac=function(A){return new(A||E)(p.LFG(hs),p.LFG(p.Sil),p.LFG(p.lqb),p.LFG(nc),p.LFG(R))};static#t=this.\u0275prov=p.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();const rc=new p.OlP("");let ic=(()=>{class E{constructor(_,A,x,W,ne={}){this.urlSerializer=_,this.transitions=A,this.viewportScroller=x,this.zone=W,this.options=ne,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ne.scrollPositionRestoration=ne.scrollPositionRestoration||"disabled",ne.anchorScrolling=ne.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(_=>{_ instanceof bs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=_.navigationTrigger,this.restoredId=_.restoredState?_.restoredState.navigationId:0):_ instanceof ei?(this.lastId=_.id,this.scheduleScrollEvent(_,this.urlSerializer.parse(_.urlAfterRedirects).fragment)):_ instanceof Wi&&0===_.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(_,this.urlSerializer.parse(_.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(_=>{_ instanceof Ps&&(_.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(_.position):_.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(_.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(_,A){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ps(_,"popstate"===this.lastSource?this.store[this.restoredId]:null,A))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(A){p.$Z()};static#t=this.\u0275prov=p.Yz7({token:E,factory:E.\u0275fac})}return E})();function go(E,C){return{\u0275kind:E,\u0275providers:C}}function Ot(){const E=(0,p.f3M)(p.zs3);return C=>{const _=E.get(p.z2F);if(C!==_.components[0])return;const A=E.get(hs),x=E.get(qt);1===E.get(Wo)&&A.initialNavigation(),E.get(It,null,p.XFs.Optional)?.setUpPreloading(),E.get(rc,null,p.XFs.Optional)?.init(),A.resetRootComponentType(_.componentTypes[0]),x.closed||(x.next(),x.complete(),x.unsubscribe())}}const qt=new p.OlP("",{factory:()=>new Ie.x}),Wo=new p.OlP("",{providedIn:"root",factory:()=>1}),It=new p.OlP("");function Hi(E){return go(0,[{provide:It,useExisting:Kd},{provide:nc,useExisting:E}])}const Xe=new p.OlP("ROUTER_FORROOT_GUARD"),jn=[de.Ye,{provide:Zr,useClass:Zt},hs,Mi,{provide:Bi,useFactory:function Ru(E){return E.routerState.root},deps:[hs]},R,[]];function oc(){return new p.PXZ("Router",hs)}let zi=(()=>{class E{constructor(_){}static forRoot(_,A){return{ngModule:E,providers:[jn,[],{provide:j,multi:!0,useValue:_},{provide:Xe,useFactory:Yr,deps:[[hs,new p.FiY,new p.tp0]]},{provide:Mn,useValue:A||{}},A?.useHash?{provide:de.S$,useClass:de.Do}:{provide:de.S$,useClass:de.b0},{provide:rc,useFactory:()=>{const E=(0,p.f3M)(de.EM),C=(0,p.f3M)(p.R0b),_=(0,p.f3M)(Mn),A=(0,p.f3M)(Ke),x=(0,p.f3M)(Zr);return _.scrollOffset&&E.setOffset(_.scrollOffset),new ic(x,A,E,C,_)}},A?.preloadingStrategy?Hi(A.preloadingStrategy).\u0275providers:[],{provide:p.PXZ,multi:!0,useFactory:oc},A?.initialNavigation?Po(A):[],A?.bindToComponentInputs?go(8,[pi,{provide:er,useExisting:pi}]).\u0275providers:[],[{provide:Re,useFactory:Ot},{provide:p.tb,multi:!0,useExisting:Re}]]}}static forChild(_){return{ngModule:E,providers:[{provide:j,multi:!0,useValue:_}]}}static#e=this.\u0275fac=function(A){return new(A||E)(p.LFG(Xe,8))};static#t=this.\u0275mod=p.oAB({type:E});static#n=this.\u0275inj=p.cJS({})}return E})();function Yr(E){return"guarded"}function Po(E){return["disabled"===E.initialNavigation?go(3,[{provide:p.ip1,multi:!0,useFactory:()=>{const C=(0,p.f3M)(hs);return()=>{C.setUpLocationChangeListener()}}},{provide:Wo,useValue:2}]).\u0275providers:[],"enabledBlocking"===E.initialNavigation?go(2,[{provide:Wo,useValue:0},{provide:p.ip1,multi:!0,deps:[p.zs3],useFactory:C=>{const _=C.get(de.V_,Promise.resolve());return()=>_.then(()=>new Promise(A=>{const x=C.get(hs),W=C.get(qt);or(x,()=>{A(!0)}),C.get(Ke).afterPreactivation=()=>(A(!0),W.closed?(0,le.of)(void 0):W),x.initialNavigation()}))}}]).\u0275providers:[]]}const Re=new p.OlP("")},3106:(Et,Me,F)=>{F.d(Me,{Z:()=>Ze});var p=F(9058),Y=F(4537),z=F(534),ue=F(7879);class te{constructor(tt,Ge){this._delegate=tt,this.firebase=Ge,(0,z._addComponent)(tt,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=tt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(tt){this._delegate.automaticDataCollectionEnabled=tt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(tt=>{this._delegate.checkDestroyed(),tt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,z.deleteApp)(this._delegate)))}_getService(tt,Ge=z._DEFAULT_ENTRY_NAME){var Rt;this._delegate.checkDestroyed();const Ie=this._delegate.container.getProvider(tt);return!Ie.isInitialized()&&"EXPLICIT"===(null===(Rt=Ie.getComponent())||void 0===Rt?void 0:Rt.instantiationMode)&&Ie.initialize(),Ie.getImmediate({identifier:Ge})}_removeServiceInstance(tt,Ge=z._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(tt).clearInstance(Ge)}_addComponent(tt){(0,z._addComponent)(this._delegate,tt)}_addOrOverwriteComponent(tt){(0,z._addOrOverwriteComponent)(this._delegate,tt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ge=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Q=function Se(){const Fe=function oe(Fe){const tt={},Ge={__esModule:!0,initializeApp:function de(qe,he={}){const ft=z.initializeApp(qe,he);if((0,p.r3)(tt,ft.name))return tt[ft.name];const Tt=new Fe(ft,Ge);return tt[ft.name]=Tt,Tt},app:Ie,registerVersion:z.registerVersion,setLogLevel:z.setLogLevel,onLog:z.onLog,apps:null,SDK_VERSION:z.SDK_VERSION,INTERNAL:{registerComponent:function Te(qe){const he=qe.name,ft=he.replace("-compat","");if(z._registerComponent(qe)&&"PUBLIC"===qe.type){const Tt=(Gt=Ie())=>{if("function"!=typeof Gt[ft])throw ge.create("invalid-app-argument",{appName:he});return Gt[ft]()};void 0!==qe.serviceProps&&(0,p.ZB)(Tt,qe.serviceProps),Ge[ft]=Tt,Fe.prototype[ft]=function(...Gt){return this._getService.bind(this,he).apply(this,qe.multipleInstances?Gt:[])}}return"PUBLIC"===qe.type?Ge[ft]:null},removeApp:function Rt(qe){delete tt[qe]},useAsService:function ke(qe,he){return"serverAuth"===he?null:he},modularAPIs:z}};function Ie(qe){if(!(0,p.r3)(tt,qe=qe||z._DEFAULT_ENTRY_NAME))throw ge.create("no-app",{appName:qe});return tt[qe]}return Ge.default=Ge,Object.defineProperty(Ge,"apps",{get:function Pe(){return Object.keys(tt).map(qe=>tt[qe])}}),Ie.App=Fe,Ge}(te);return Fe.INTERNAL=Object.assign(Object.assign({},Fe.INTERNAL),{createFirebaseNamespace:Se,extendNamespace:function tt(Ge){(0,p.ZB)(Fe,Ge)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),Fe}(),re=new ue.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){re.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Fe=self.firebase.SDK_VERSION;Fe&&Fe.indexOf("LITE")>=0&&re.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ze=Q;!function Ne(Fe){(0,z.registerVersion)("@firebase/app-compat","0.2.22",Fe)}()},534:(Et,Me,F)=>{F.r(Me),F.d(Me,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>Cr,_DEFAULT_ENTRY_NAME:()=>jt,_addComponent:()=>kn,_addOrOverwriteComponent:()=>dn,_apps:()=>zt,_clearComponents:()=>xt,_components:()=>wn,_getProvider:()=>Wn,_registerComponent:()=>Xt,_removeServiceInstance:()=>Kr,deleteApp:()=>Z,getApp:()=>Rn,getApps:()=>He,initializeApp:()=>Ur,onLog:()=>lt,registerVersion:()=>Le,setLogLevel:()=>sn});var p=F(5861),Y=F(4537),z=F(7879),ue=F(9058);const te=(Be,we)=>we.some(nt=>Be instanceof nt);let le,ge;const Q=new WeakMap,re=new WeakMap,me=new WeakMap,ze=new WeakMap,Ne=new WeakMap;let tt={get(Be,we,nt){if(Be instanceof IDBTransaction){if("done"===we)return re.get(Be);if("objectStoreNames"===we)return Be.objectStoreNames||me.get(Be);if("store"===we)return nt.objectStoreNames[1]?void 0:nt.objectStore(nt.objectStoreNames[0])}return de(Be[we])},set:(Be,we,nt)=>(Be[we]=nt,!0),has:(Be,we)=>Be instanceof IDBTransaction&&("done"===we||"store"===we)||we in Be};function Ie(Be){return"function"==typeof Be?function Rt(Be){return Be!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Se(){return ge||(ge=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Be)?function(...we){return Be.apply(Pe(this),we),de(Q.get(this))}:function(...we){return de(Be.apply(Pe(this),we))}:function(we,...nt){const Pt=Be.call(Pe(this),we,...nt);return me.set(Pt,we.sort?we.sort():[we]),de(Pt)}}(Be):(Be instanceof IDBTransaction&&function Fe(Be){if(re.has(Be))return;const we=new Promise((nt,Pt)=>{const Wt=()=>{Be.removeEventListener("complete",St),Be.removeEventListener("error",gn),Be.removeEventListener("abort",gn)},St=()=>{nt(),Wt()},gn=()=>{Pt(Be.error||new DOMException("AbortError","AbortError")),Wt()};Be.addEventListener("complete",St),Be.addEventListener("error",gn),Be.addEventListener("abort",gn)});re.set(Be,we)}(Be),te(Be,function oe(){return le||(le=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Be,tt):Be)}function de(Be){if(Be instanceof IDBRequest)return function Ze(Be){const we=new Promise((nt,Pt)=>{const Wt=()=>{Be.removeEventListener("success",St),Be.removeEventListener("error",gn)},St=()=>{nt(de(Be.result)),Wt()},gn=()=>{Pt(Be.error),Wt()};Be.addEventListener("success",St),Be.addEventListener("error",gn)});return we.then(nt=>{nt instanceof IDBCursor&&Q.set(nt,Be)}).catch(()=>{}),Ne.set(we,Be),we}(Be);if(ze.has(Be))return ze.get(Be);const we=Ie(Be);return we!==Be&&(ze.set(Be,we),Ne.set(we,Be)),we}const Pe=Be=>Ne.get(Be),qe=["get","getKey","getAll","getAllKeys","count"],he=["put","add","delete","clear"],ft=new Map;function Tt(Be,we){if(!(Be instanceof IDBDatabase)||we in Be||"string"!=typeof we)return;if(ft.get(we))return ft.get(we);const nt=we.replace(/FromIndex$/,""),Pt=we!==nt,Wt=he.includes(nt);if(!(nt in(Pt?IDBIndex:IDBObjectStore).prototype)||!Wt&&!qe.includes(nt))return;const St=function(){var gn=(0,p.Z)(function*(Er,...qn){const Si=this.transaction(Er,Wt?"readwrite":"readonly");let Ir=Si.store;return Pt&&(Ir=Ir.index(qn.shift())),(yield Promise.all([Ir[nt](...qn),Wt&&Si.done]))[0]});return function(qn){return gn.apply(this,arguments)}}();return ft.set(we,St),St}!function Ge(Be){tt=Be(tt)}(Be=>({...Be,get:(we,nt,Pt)=>Tt(we,nt)||Be.get(we,nt,Pt),has:(we,nt)=>!!Tt(we,nt)||Be.has(we,nt)}));class Gt{constructor(we){this.container=we}getPlatformInfoString(){return this.container.getProviders().map(nt=>{if(function Jt(Be){const we=Be.getComponent();return"VERSION"===we?.type}(nt)){const Pt=nt.getImmediate();return`${Pt.library}/${Pt.version}`}return null}).filter(nt=>nt).join(" ")}}const pr="@firebase/app",At=new z.Yd("@firebase/app"),jt="[DEFAULT]",Kt={[pr]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},zt=new Map,wn=new Map;function kn(Be,we){try{Be.container.addComponent(we)}catch(nt){At.debug(`Component ${we.name} failed to register with FirebaseApp ${Be.name}`,nt)}}function dn(Be,we){Be.container.addOrOverwriteComponent(we)}function Xt(Be){const we=Be.name;if(wn.has(we))return At.debug(`There were multiple attempts to register component ${we}.`),!1;wn.set(we,Be);for(const nt of zt.values())kn(nt,Be);return!0}function Wn(Be,we){const nt=Be.container.getProvider("heartbeat").getImmediate({optional:!0});return nt&&nt.triggerHeartbeat(),Be.container.getProvider(we)}function Kr(Be,we,nt=jt){Wn(Be,we).clearInstance(nt)}function xt(){wn.clear()}const Zt=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class rr{constructor(we,nt,Pt){this._isDeleted=!1,this._options=Object.assign({},we),this._config=Object.assign({},nt),this._name=nt.name,this._automaticDataCollectionEnabled=nt.automaticDataCollectionEnabled,this._container=Pt,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(we){this.checkDestroyed(),this._automaticDataCollectionEnabled=we}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(we){this._isDeleted=we}checkDestroyed(){if(this.isDeleted)throw Zt.create("app-deleted",{appName:this._name})}}const Cr="10.5.2";function Ur(Be,we={}){let nt=Be;"object"!=typeof we&&(we={name:we});const Pt=Object.assign({name:jt,automaticDataCollectionEnabled:!1},we),Wt=Pt.name;if("string"!=typeof Wt||!Wt)throw Zt.create("bad-app-name",{appName:String(Wt)});if(nt||(nt=(0,ue.aH)()),!nt)throw Zt.create("no-options");const St=zt.get(Wt);if(St){if((0,ue.vZ)(nt,St.options)&&(0,ue.vZ)(Pt,St.config))return St;throw Zt.create("duplicate-app",{appName:Wt})}const gn=new Y.H0(Wt);for(const qn of wn.values())gn.addComponent(qn);const Er=new rr(nt,Pt,gn);return zt.set(Wt,Er),Er}function Rn(Be=jt){const we=zt.get(Be);if(!we&&Be===jt&&(0,ue.aH)())return Ur();if(!we)throw Zt.create("no-app",{appName:Be});return we}function He(){return Array.from(zt.values())}function Z(Be){return se.apply(this,arguments)}function se(){return(se=(0,p.Z)(function*(Be){const we=Be.name;zt.has(we)&&(zt.delete(we),yield Promise.all(Be.container.getProviders().map(nt=>nt.delete())),Be.isDeleted=!0)})).apply(this,arguments)}function Le(Be,we,nt){var Pt;let Wt=null!==(Pt=Kt[Be])&&void 0!==Pt?Pt:Be;nt&&(Wt+=`-${nt}`);const St=Wt.match(/\s|\//),gn=we.match(/\s|\//);if(St||gn){const Er=[`Unable to register library "${Wt}" with version "${we}":`];return St&&Er.push(`library name "${Wt}" contains illegal characters (whitespace or "/")`),St&&gn&&Er.push("and"),gn&&Er.push(`version name "${we}" contains illegal characters (whitespace or "/")`),void At.warn(Er.join(" "))}Xt(new Y.wA(`${Wt}-version`,()=>({library:Wt,version:we}),"VERSION"))}function lt(Be,we){if(null!==Be&&"function"!=typeof Be)throw Zt.create("invalid-log-argument");(0,z.Am)(Be,we)}function sn(Be){(0,z.Ub)(Be)}const ir="firebase-heartbeat-database",Pn=1,ae="firebase-heartbeat-store";let G=null;function O(){return G||(G=function Te(Be,we,{blocked:nt,upgrade:Pt,blocking:Wt,terminated:St}={}){const gn=indexedDB.open(Be,we),Er=de(gn);return Pt&&gn.addEventListener("upgradeneeded",qn=>{Pt(de(gn.result),qn.oldVersion,qn.newVersion,de(gn.transaction),qn)}),nt&&gn.addEventListener("blocked",qn=>nt(qn.oldVersion,qn.newVersion,qn)),Er.then(qn=>{St&&qn.addEventListener("close",()=>St()),Wt&&qn.addEventListener("versionchange",Si=>Wt(Si.oldVersion,Si.newVersion,Si))}).catch(()=>{}),Er}(ir,Pn,{upgrade:(Be,we)=>{0===we&&Be.createObjectStore(ae)}}).catch(Be=>{throw Zt.create("idb-open",{originalErrorMessage:Be.message})})),G}function M(){return(M=(0,p.Z)(function*(Be){try{return yield(yield O()).transaction(ae).objectStore(ae).get(We(Be))}catch(we){if(we instanceof ue.ZR)At.warn(we.message);else{const nt=Zt.create("idb-get",{originalErrorMessage:we?.message});At.warn(nt.message)}}})).apply(this,arguments)}function J(Be,we){return De.apply(this,arguments)}function De(){return(De=(0,p.Z)(function*(Be,we){try{const Pt=(yield O()).transaction(ae,"readwrite");yield Pt.objectStore(ae).put(we,We(Be)),yield Pt.done}catch(nt){if(nt instanceof ue.ZR)At.warn(nt.message);else{const Pt=Zt.create("idb-set",{originalErrorMessage:nt?.message});At.warn(Pt.message)}}})).apply(this,arguments)}function We(Be){return`${Be.name}!${Be.options.appId}`}class Ct{constructor(we){this.container=we,this._heartbeatsCache=null;const nt=this.container.getProvider("app").getImmediate();this._storage=new Ht(nt),this._heartbeatsCachePromise=this._storage.read().then(Pt=>(this._heartbeatsCache=Pt,Pt))}triggerHeartbeat(){var we=this;return(0,p.Z)(function*(){const Pt=we.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Wt=Vt();if(null===we._heartbeatsCache&&(we._heartbeatsCache=yield we._heartbeatsCachePromise),we._heartbeatsCache.lastSentHeartbeatDate!==Wt&&!we._heartbeatsCache.heartbeats.some(St=>St.date===Wt))return we._heartbeatsCache.heartbeats.push({date:Wt,agent:Pt}),we._heartbeatsCache.heartbeats=we._heartbeatsCache.heartbeats.filter(St=>{const gn=new Date(St.date).valueOf();return Date.now()-gn<=2592e6}),we._storage.overwrite(we._heartbeatsCache)})()}getHeartbeatsHeader(){var we=this;return(0,p.Z)(function*(){if(null===we._heartbeatsCache&&(yield we._heartbeatsCachePromise),null===we._heartbeatsCache||0===we._heartbeatsCache.heartbeats.length)return"";const nt=Vt(),{heartbeatsToSend:Pt,unsentEntries:Wt}=function en(Be,we=1024){const nt=[];let Pt=Be.slice();for(const Wt of Be){const St=nt.find(gn=>gn.agent===Wt.agent);if(St){if(St.dates.push(Wt.date),ar(nt)>we){St.dates.pop();break}}else if(nt.push({agent:Wt.agent,dates:[Wt.date]}),ar(nt)>we){nt.pop();break}Pt=Pt.slice(1)}return{heartbeatsToSend:nt,unsentEntries:Pt}}(we._heartbeatsCache.heartbeats),St=(0,ue.L)(JSON.stringify({version:2,heartbeats:Pt}));return we._heartbeatsCache.lastSentHeartbeatDate=nt,Wt.length>0?(we._heartbeatsCache.heartbeats=Wt,yield we._storage.overwrite(we._heartbeatsCache)):(we._heartbeatsCache.heartbeats=[],we._storage.overwrite(we._heartbeatsCache)),St})()}}function Vt(){return(new Date).toISOString().substring(0,10)}class Ht{constructor(we){this.app=we,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,ue.hl)()&&(0,ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var we=this;return(0,p.Z)(function*(){return(yield we._canUseIndexedDBPromise)&&(yield function P(Be){return M.apply(this,arguments)}(we.app))||{heartbeats:[]}})()}overwrite(we){var nt=this;return(0,p.Z)(function*(){var Pt;if(yield nt._canUseIndexedDBPromise){const St=yield nt.read();return J(nt.app,{lastSentHeartbeatDate:null!==(Pt=we.lastSentHeartbeatDate)&&void 0!==Pt?Pt:St.lastSentHeartbeatDate,heartbeats:we.heartbeats})}})()}add(we){var nt=this;return(0,p.Z)(function*(){var Pt;if(yield nt._canUseIndexedDBPromise){const St=yield nt.read();return J(nt.app,{lastSentHeartbeatDate:null!==(Pt=we.lastSentHeartbeatDate)&&void 0!==Pt?Pt:St.lastSentHeartbeatDate,heartbeats:[...St.heartbeats,...we.heartbeats]})}})()}}function ar(Be){return(0,ue.L)(JSON.stringify({version:2,heartbeats:Be})).length}!function ai(Be){Xt(new Y.wA("platform-logger",we=>new Gt(we),"PRIVATE")),Xt(new Y.wA("heartbeat",we=>new Ct(we),"PRIVATE")),Le(pr,"0.9.22",Be),Le(pr,"0.9.22","esm2017"),Le("fire-js","")}("")},4537:(Et,Me,F)=>{F.d(Me,{H0:()=>oe,wA:()=>z});var p=F(5861),Y=F(9058);class z{constructor(Q,re,me){this.name=Q,this.instanceFactory=re,this.type=me,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Q){return this.instantiationMode=Q,this}setMultipleInstances(Q){return this.multipleInstances=Q,this}setServiceProps(Q){return this.serviceProps=Q,this}setInstanceCreatedCallback(Q){return this.onInstanceCreated=Q,this}}const ue="[DEFAULT]";class te{constructor(Q,re){this.name=Q,this.container=re,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Q){const re=this.normalizeInstanceIdentifier(Q);if(!this.instancesDeferred.has(re)){const me=new Y.BH;if(this.instancesDeferred.set(re,me),this.isInitialized(re)||this.shouldAutoInitialize())try{const ze=this.getOrInitializeService({instanceIdentifier:re});ze&&me.resolve(ze)}catch{}}return this.instancesDeferred.get(re).promise}getImmediate(Q){var re;const me=this.normalizeInstanceIdentifier(Q?.identifier),ze=null!==(re=Q?.optional)&&void 0!==re&&re;if(!this.isInitialized(me)&&!this.shouldAutoInitialize()){if(ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:me})}catch(Ne){if(ze)return null;throw Ne}}getComponent(){return this.component}setComponent(Q){if(Q.name!==this.name)throw Error(`Mismatching Component ${Q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Q,this.shouldAutoInitialize()){if(function ge(Se){return"EAGER"===Se.instantiationMode}(Q))try{this.getOrInitializeService({instanceIdentifier:ue})}catch{}for(const[re,me]of this.instancesDeferred.entries()){const ze=this.normalizeInstanceIdentifier(re);try{const Ne=this.getOrInitializeService({instanceIdentifier:ze});me.resolve(Ne)}catch{}}}}clearInstance(Q=ue){this.instancesDeferred.delete(Q),this.instancesOptions.delete(Q),this.instances.delete(Q)}delete(){var Q=this;return(0,p.Z)(function*(){const re=Array.from(Q.instances.values());yield Promise.all([...re.filter(me=>"INTERNAL"in me).map(me=>me.INTERNAL.delete()),...re.filter(me=>"_delete"in me).map(me=>me._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Q=ue){return this.instances.has(Q)}getOptions(Q=ue){return this.instancesOptions.get(Q)||{}}initialize(Q={}){const{options:re={}}=Q,me=this.normalizeInstanceIdentifier(Q.instanceIdentifier);if(this.isInitialized(me))throw Error(`${this.name}(${me}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ze=this.getOrInitializeService({instanceIdentifier:me,options:re});for(const[Ne,Ze]of this.instancesDeferred.entries())me===this.normalizeInstanceIdentifier(Ne)&&Ze.resolve(ze);return ze}onInit(Q,re){var me;const ze=this.normalizeInstanceIdentifier(re),Ne=null!==(me=this.onInitCallbacks.get(ze))&&void 0!==me?me:new Set;Ne.add(Q),this.onInitCallbacks.set(ze,Ne);const Ze=this.instances.get(ze);return Ze&&Q(Ze,ze),()=>{Ne.delete(Q)}}invokeOnInitCallbacks(Q,re){const me=this.onInitCallbacks.get(re);if(me)for(const ze of me)try{ze(Q,re)}catch{}}getOrInitializeService({instanceIdentifier:Q,options:re={}}){let me=this.instances.get(Q);if(!me&&this.component&&(me=this.component.instanceFactory(this.container,{instanceIdentifier:(Se=Q,Se===ue?void 0:Se),options:re}),this.instances.set(Q,me),this.instancesOptions.set(Q,re),this.invokeOnInitCallbacks(me,Q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Q,me)}catch{}var Se;return me||null}normalizeInstanceIdentifier(Q=ue){return this.component?this.component.multipleInstances?Q:ue:Q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class oe{constructor(Q){this.name=Q,this.providers=new Map}addComponent(Q){const re=this.getProvider(Q.name);if(re.isComponentSet())throw new Error(`Component ${Q.name} has already been registered with ${this.name}`);re.setComponent(Q)}addOrOverwriteComponent(Q){this.getProvider(Q.name).isComponentSet()&&this.providers.delete(Q.name),this.addComponent(Q)}getProvider(Q){if(this.providers.has(Q))return this.providers.get(Q);const re=new te(Q,this);return this.providers.set(Q,re),re}getProviders(){return Array.from(this.providers.values())}}},7879:(Et,Me,F)=>{F.d(Me,{Am:()=>Se,Ub:()=>oe,Yd:()=>ge,in:()=>Y});const p=[];var Y=function(Q){return Q[Q.DEBUG=0]="DEBUG",Q[Q.VERBOSE=1]="VERBOSE",Q[Q.INFO=2]="INFO",Q[Q.WARN=3]="WARN",Q[Q.ERROR=4]="ERROR",Q[Q.SILENT=5]="SILENT",Q}(Y||{});const z={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},ue=Y.INFO,te={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},le=(Q,re,...me)=>{if(re<Q.logLevel)return;const ze=(new Date).toISOString(),Ne=te[re];if(!Ne)throw new Error(`Attempted to log a message with an invalid logType (value: ${re})`);console[Ne](`[${ze}]  ${Q.name}:`,...me)};class ge{constructor(re){this.name=re,this._logLevel=ue,this._logHandler=le,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(re){if(!(re in Y))throw new TypeError(`Invalid value "${re}" assigned to \`logLevel\``);this._logLevel=re}setLogLevel(re){this._logLevel="string"==typeof re?z[re]:re}get logHandler(){return this._logHandler}set logHandler(re){if("function"!=typeof re)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=re}get userLogHandler(){return this._userLogHandler}set userLogHandler(re){this._userLogHandler=re}debug(...re){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...re),this._logHandler(this,Y.DEBUG,...re)}log(...re){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...re),this._logHandler(this,Y.VERBOSE,...re)}info(...re){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...re),this._logHandler(this,Y.INFO,...re)}warn(...re){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...re),this._logHandler(this,Y.WARN,...re)}error(...re){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...re),this._logHandler(this,Y.ERROR,...re)}}function oe(Q){p.forEach(re=>{re.setLogLevel(Q)})}function Se(Q,re){for(const me of p){let ze=null;re&&re.level&&(ze=z[re.level]),me.userLogHandler=null===Q?null:(Ne,Ze,...Fe)=>{const tt=Fe.map(Ge=>{if(null==Ge)return null;if("string"==typeof Ge)return Ge;if("number"==typeof Ge||"boolean"==typeof Ge)return Ge.toString();if(Ge instanceof Error)return Ge.message;try{return JSON.stringify(Ge)}catch{return null}}).filter(Ge=>Ge).join(" ");Ze>=(ze??Ne.logLevel)&&Q({level:Y[Ze].toLowerCase(),message:tt,args:Fe,type:Ne.name})}}}},3182:(Et,Me,F)=>{F.d(Me,{C6:()=>p.getApps,KN:()=>p.registerVersion,Mq:()=>p.getApp,ZF:()=>p.initializeApp});var p=F(534);(0,p.registerVersion)("firebase","10.5.2","app")},7142:(Et,Me,F)=>{F.d(Me,{Z:()=>p.Z});var p=F(3106);p.Z.registerVersion("firebase","10.5.2","app-compat")},6365:(Et,Me,F)=>{F.r(Me);var p=F(5861),Y=F(3106),z=F(3560),ue=F(9058),ge=(F(534),F(7879),F(4537));function oe(){return window}function re(){return re=(0,p.Z)(function*(O,P,M){var J;const{BuildInfo:De}=oe();(0,z.at)(P.sessionId,"AuthEvent did not contain a session ID");const We=yield function Ge(O){return Rt.apply(this,arguments)}(P.sessionId),it={};return(0,z.au)()?it.ibi=De.packageName:(0,z.av)()?it.apn=De.packageName:(0,z.aw)(O,"operation-not-supported-in-this-environment"),De.displayName&&(it.appDisplayName=De.displayName),it.sessionId=We,(0,z.ax)(O,M,P.type,void 0,null!==(J=P.eventId)&&void 0!==J?J:void 0,it)}),re.apply(this,arguments)}function ze(){return(ze=(0,p.Z)(function*(O){const{BuildInfo:P}=oe(),M={};(0,z.au)()?M.iosBundleId=P.packageName:(0,z.av)()?M.androidPackageName=P.packageName:(0,z.aw)(O,"operation-not-supported-in-this-environment"),yield(0,z.ay)(O,M)})).apply(this,arguments)}function Fe(){return(Fe=(0,p.Z)(function*(O,P,M){const{cordova:J}=oe();let De=()=>{};try{yield new Promise((We,it)=>{let yt=null;function Ct(){var Ht;We();const ar=null===(Ht=J.plugins.browsertab)||void 0===Ht?void 0:Ht.close;"function"==typeof ar&&ar(),"function"==typeof M?.close&&M.close()}function Vt(){yt||(yt=window.setTimeout(()=>{it((0,z.aA)(O,"redirect-cancelled-by-user"))},2e3))}function en(){"visible"===document?.visibilityState&&Vt()}P.addPassiveListener(Ct),document.addEventListener("resume",Vt,!1),(0,z.av)()&&document.addEventListener("visibilitychange",en,!1),De=()=>{P.removePassiveListener(Ct),document.removeEventListener("resume",Vt,!1),document.removeEventListener("visibilitychange",en,!1),yt&&window.clearTimeout(yt)}})}finally{De()}})).apply(this,arguments)}function Rt(){return(Rt=(0,p.Z)(function*(O){const P=function Ie(O){if((0,z.at)(/[0-9a-zA-Z]+/.test(O),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(O);const P=new ArrayBuffer(O.length),M=new Uint8Array(P);for(let J=0;J<O.length;J++)M[J]=O.charCodeAt(J);return M}(O),M=yield crypto.subtle.digest("SHA-256",P);return Array.from(new Uint8Array(M)).map(De=>De.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Pe extends z.aC{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(P=>{this.resolveInialized=P})}addPassiveListener(P){this.passiveListeners.add(P)}removePassiveListener(P){this.passiveListeners.delete(P)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(P){return this.resolveInialized(),this.passiveListeners.forEach(M=>M(P)),super.onEvent(P)}initialized(){var P=this;return(0,p.Z)(function*(){yield P.initPromise})()}}function qe(O){return he.apply(this,arguments)}function he(){return(he=(0,p.Z)(function*(O){const P=yield Gt()._get(Jt(O));return P&&(yield Gt()._remove(Jt(O))),P})).apply(this,arguments)}function Tt(){const O=[];for(let M=0;M<20;M++){const J=Math.floor(62*Math.random());O.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(J))}return O.join("")}function Gt(){return(0,z.aD)(z.b)}function Jt(O){return(0,z.aE)("authEvent",O.config.apiKey,O.name)}function At(O){if(!O?.includes("?"))return{};const[P,...M]=O.split("?");return(0,ue.zd)(M.join("?"))}const pe=class mt{constructor(){this._redirectPersistence=z.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=z.aF,this._overrideRedirectResult=z.aG}_initialize(P){var M=this;return(0,p.Z)(function*(){const J=P._key();let De=M.eventManagers.get(J);return De||(De=new Pe(P),M.eventManagers.set(J,De),M.attachCallbackListeners(P,De)),De})()}_openPopup(P){(0,z.aw)(P,"operation-not-supported-in-this-environment")}_openRedirect(P,M,J,De){var We=this;return(0,p.Z)(function*(){!function tt(O){var P,M,J,De,We,it,yt,Ct,Vt,en;const Ht=oe();(0,z.aB)("function"==typeof(null===(P=Ht?.universalLinks)||void 0===P?void 0:P.subscribe),O,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,z.aB)(typeof(null===(M=Ht?.BuildInfo)||void 0===M?void 0:M.packageName)<"u",O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,z.aB)("function"==typeof(null===(We=null===(De=null===(J=Ht?.cordova)||void 0===J?void 0:J.plugins)||void 0===De?void 0:De.browsertab)||void 0===We?void 0:We.openUrl),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,z.aB)("function"==typeof(null===(Ct=null===(yt=null===(it=Ht?.cordova)||void 0===it?void 0:it.plugins)||void 0===yt?void 0:yt.browsertab)||void 0===Ct?void 0:Ct.isAvailable),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,z.aB)("function"==typeof(null===(en=null===(Vt=Ht?.cordova)||void 0===Vt?void 0:Vt.InAppBrowser)||void 0===en?void 0:en.open),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(P);const it=yield We._initialize(P);yield it.initialized(),it.resetRedirect(),(0,z.aH)(),yield We._originValidation(P);const yt=function Te(O,P,M=null){return{type:P,eventId:M,urlResponse:null,sessionId:Tt(),postBody:null,tenantId:O.tenantId,error:(0,z.aA)(O,"no-auth-event")}}(P,J,De);yield function ke(O,P){return Gt()._set(Jt(O),P)}(P,yt);const Ct=yield function Q(O,P,M){return re.apply(this,arguments)}(P,yt,M),Vt=yield function Ne(O){const{cordova:P}=oe();return new Promise(M=>{P.plugins.browsertab.isAvailable(J=>{let De=null;J?P.plugins.browsertab.openUrl(O):De=P.InAppBrowser.open(O,(0,z.az)()?"_blank":"_system","location=yes"),M(De)})})}(Ct);return function Ze(O,P,M){return Fe.apply(this,arguments)}(P,it,Vt)})()}_isIframeWebStorageSupported(P,M){throw new Error("Method not implemented.")}_originValidation(P){const M=P._key();return this.originValidationPromises[M]||(this.originValidationPromises[M]=function me(O){return ze.apply(this,arguments)}(P)),this.originValidationPromises[M]}attachCallbackListeners(P,M){const{universalLinks:J,handleOpenURL:De,BuildInfo:We}=oe(),it=setTimeout((0,p.Z)(function*(){yield qe(P),M.onEvent(ye())}),500),yt=function(){var en=(0,p.Z)(function*(Ht){clearTimeout(it);const ar=yield qe(P);let ai=null;ar&&Ht?.url&&(ai=function ft(O,P){var M,J;const De=function zn(O){const P=At(O),M=P.link?decodeURIComponent(P.link):void 0,J=At(M).link,De=P.deep_link_id?decodeURIComponent(P.deep_link_id):void 0;return At(De).link||De||J||M||O}(P);if(De.includes("/__/auth/callback")){const We=At(De),it=We.firebaseError?function pr(O){try{return JSON.parse(O)}catch{return null}}(decodeURIComponent(We.firebaseError)):null,yt=null===(J=null===(M=it?.code)||void 0===M?void 0:M.split("auth/"))||void 0===J?void 0:J[1],Ct=yt?(0,z.aA)(yt):null;return Ct?{type:O.type,eventId:O.eventId,tenantId:O.tenantId,error:Ct,urlResponse:null,sessionId:null,postBody:null}:{type:O.type,eventId:O.eventId,tenantId:O.tenantId,sessionId:O.sessionId,urlResponse:De,postBody:null}}return null}(ar,Ht.url)),M.onEvent(ai||ye())});return function(ar){return en.apply(this,arguments)}}();typeof J<"u"&&"function"==typeof J.subscribe&&J.subscribe(null,yt);const Ct=De,Vt=`${We.packageName.toLowerCase()}://`;oe().handleOpenURL=function(){var en=(0,p.Z)(function*(Ht){if(Ht.toLowerCase().startsWith(Vt)&&yt({url:Ht}),"function"==typeof Ct)try{Ct(Ht)}catch(ar){console.error(ar)}});return function(Ht){return en.apply(this,arguments)}}()}};function ye(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,z.aA)("no-auth-event")}}function ct(){var O;return(null===(O=self?.location)||void 0===O?void 0:O.protocol)||null}function at(O=(0,ue.z$)()){return!("file:"!==ct()&&"ionic:"!==ct()&&"capacitor:"!==ct()||!O.toLowerCase().match(/iphone|ipad|ipod|android/))}function pn(){try{const O=self.localStorage,P=z.aM();if(O)return O.setItem(P,"1"),O.removeItem(P),!function En(O=(0,ue.z$)()){return function fn(){return(0,ue.w1)()&&11===document?.documentMode}()||function Ut(O=(0,ue.z$)()){return/Edge\/\d+/.test(O)}(O)}()||(0,ue.hl)()}catch{return Qt()&&(0,ue.hl)()}return!1}function Qt(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function yn(){return(function rt(){return"http:"===ct()||"https:"===ct()}()||(0,ue.ru)()||at())&&!function Lt(){return(0,ue.b$)()||(0,ue.UG)()}()&&pn()&&!Qt()}function On(){return at()&&typeof document<"u"}function Xn(){return(Xn=(0,p.Z)(function*(){return!!On()&&new Promise(O=>{const P=setTimeout(()=>{O(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(P),O(!0)})})})).apply(this,arguments)}const Dn={LOCAL:"local",NONE:"none",SESSION:"session"},vr=z.aB,nr="persistence";function Kt(O){return zt.apply(this,arguments)}function zt(){return(zt=(0,p.Z)(function*(O){yield O._initializationPromise;const P=kn(),M=z.aE(nr,O.config.apiKey,O.name);P&&P.setItem(M,O._getPersistence())})).apply(this,arguments)}function kn(){var O;try{return(null===(O=function In(){return typeof window<"u"?window:null}())||void 0===O?void 0:O.sessionStorage)||null}catch{return null}}const dn=z.aB;class Xt{constructor(){this.browserResolver=z.aD(z.k),this.cordovaResolver=z.aD(pe),this.underlyingResolver=null,this._redirectPersistence=z.a,this._completeRedirectFn=z.aF,this._overrideRedirectResult=z.aG}_initialize(P){var M=this;return(0,p.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._initialize(P)})()}_openPopup(P,M,J,De){var We=this;return(0,p.Z)(function*(){return yield We.selectUnderlyingResolver(),We.assertedUnderlyingResolver._openPopup(P,M,J,De)})()}_openRedirect(P,M,J,De){var We=this;return(0,p.Z)(function*(){return yield We.selectUnderlyingResolver(),We.assertedUnderlyingResolver._openRedirect(P,M,J,De)})()}_isIframeWebStorageSupported(P,M){this.assertedUnderlyingResolver._isIframeWebStorageSupported(P,M)}_originValidation(P){return this.assertedUnderlyingResolver._originValidation(P)}get _shouldInitProactively(){return On()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return dn(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var P=this;return(0,p.Z)(function*(){if(P.underlyingResolver)return;const M=yield function on(){return Xn.apply(this,arguments)}();P.underlyingResolver=M?P.cordovaResolver:P.browserResolver})()}}function Wn(O){return O.unwrap()}function xt(O){return Zt(O)}function Zt(O){const{_tokenResponse:P}=O instanceof ue.ZR?O.customData:O;if(!P)return null;if(!(O instanceof ue.ZR)&&"temporaryProof"in P&&"phoneNumber"in P)return z.P.credentialFromResult(O);const M=P.providerId;if(!M||M===z.p.PASSWORD)return null;let J;switch(M){case z.p.GOOGLE:J=z.W;break;case z.p.FACEBOOK:J=z.V;break;case z.p.GITHUB:J=z.X;break;case z.p.TWITTER:J=z._;break;default:const{oauthIdToken:De,oauthAccessToken:We,oauthTokenSecret:it,pendingToken:yt,nonce:Ct}=P;return We||it||De||yt?yt?M.startsWith("saml.")?z.aP._create(M,yt):z.M._fromParams({providerId:M,signInMethod:M,pendingToken:yt,idToken:De,accessToken:We}):new z.Y(M).credential({idToken:De,accessToken:We,rawNonce:Ct}):null}return O instanceof ue.ZR?J.credentialFromError(O):J.credentialFromResult(O)}function rr(O,P){return P.catch(M=>{throw M instanceof ue.ZR&&function Zr(O,P){var M;const J=null===(M=P.customData)||void 0===M?void 0:M._tokenResponse;if("auth/multi-factor-auth-required"===P?.code)P.resolver=new Rn(O,z.ar(O,P));else if(J){const De=Zt(P),We=P;De&&(We.credential=De,We.tenantId=J.tenantId||void 0,We.email=J.email||void 0,We.phoneNumber=J.phoneNumber||void 0)}}(O,M),M}).then(M=>{const De=M.user;return{operationType:M.operationType,credential:xt(M),additionalUserInfo:z.ap(M),user:He.getOrCreate(De)}})}function Cr(O,P){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,p.Z)(function*(O,P){const M=yield P;return{verificationId:M.verificationId,confirm:J=>rr(O,M.confirm(J))}})).apply(this,arguments)}class Rn{constructor(P,M){this.resolver=M,this.auth=function Kr(O){return O.wrapped()}(P)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(P){return rr(Wn(this.auth),this.resolver.resolveSignIn(P))}}class He{constructor(P){this._delegate=P,this.multiFactor=z.as(P)}static getOrCreate(P){return He.USER_MAP.has(P)||He.USER_MAP.set(P,new He(P)),He.USER_MAP.get(P)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(P){return this._delegate.getIdTokenResult(P)}getIdToken(P){return this._delegate.getIdToken(P)}linkAndRetrieveDataWithCredential(P){return this.linkWithCredential(P)}linkWithCredential(P){var M=this;return(0,p.Z)(function*(){return rr(M.auth,z.a1(M._delegate,P))})()}linkWithPhoneNumber(P,M){var J=this;return(0,p.Z)(function*(){return Cr(J.auth,z.l(J._delegate,P,M))})()}linkWithPopup(P){var M=this;return(0,p.Z)(function*(){return rr(M.auth,z.d(M._delegate,P,Xt))})()}linkWithRedirect(P){var M=this;return(0,p.Z)(function*(){return yield Kt(z.aI(M.auth)),z.g(M._delegate,P,Xt)})()}reauthenticateAndRetrieveDataWithCredential(P){return this.reauthenticateWithCredential(P)}reauthenticateWithCredential(P){var M=this;return(0,p.Z)(function*(){return rr(M.auth,z.a2(M._delegate,P))})()}reauthenticateWithPhoneNumber(P,M){return Cr(this.auth,z.r(this._delegate,P,M))}reauthenticateWithPopup(P){return rr(this.auth,z.e(this._delegate,P,Xt))}reauthenticateWithRedirect(P){var M=this;return(0,p.Z)(function*(){return yield Kt(z.aI(M.auth)),z.h(M._delegate,P,Xt)})()}sendEmailVerification(P){return z.af(this._delegate,P)}unlink(P){var M=this;return(0,p.Z)(function*(){return yield z.ao(M._delegate,P),M})()}updateEmail(P){return z.ak(this._delegate,P)}updatePassword(P){return z.al(this._delegate,P)}updatePhoneNumber(P){return z.u(this._delegate,P)}updateProfile(P){return z.aj(this._delegate,P)}verifyBeforeUpdateEmail(P,M){return z.ag(this._delegate,P,M)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}He.USER_MAP=new WeakMap;const Z=z.aB;let se=(()=>{class O{constructor(M,J){if(this.app=M,J.isInitialized())return this._delegate=J.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:De}=M.options;Z(De,"invalid-api-key",{appName:M.name}),Z(De,"invalid-api-key",{appName:M.name});const We=typeof window<"u"?Xt:void 0;this._delegate=J.initialize({options:{persistence:lt(De,M.name),popupRedirectResolver:We}}),this._delegate._updateErrorMap(z.E),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?He.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(M){this._delegate.languageCode=M}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(M){this._delegate.tenantId=M}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(M,J){z.J(this._delegate,M,J)}applyActionCode(M){return z.a6(this._delegate,M)}checkActionCode(M){return z.a7(this._delegate,M)}confirmPasswordReset(M,J){return z.a5(this._delegate,M,J)}createUserWithEmailAndPassword(M,J){var De=this;return(0,p.Z)(function*(){return rr(De._delegate,z.a9(De._delegate,M,J))})()}fetchProvidersForEmail(M){return this.fetchSignInMethodsForEmail(M)}fetchSignInMethodsForEmail(M){return z.ae(this._delegate,M)}isSignInWithEmailLink(M){return z.ac(this._delegate,M)}getRedirectResult(){var M=this;return(0,p.Z)(function*(){Z(yn(),M._delegate,"operation-not-supported-in-this-environment");const J=yield z.j(M._delegate,Xt);return J?rr(M._delegate,Promise.resolve(J)):{credential:null,user:null}})()}addFrameworkForLogging(M){!function Ce(O,P){(0,z.aI)(O)._logFramework(P)}(this._delegate,M)}onAuthStateChanged(M,J,De){const{next:We,error:it,complete:yt}=Le(M,J,De);return this._delegate.onAuthStateChanged(We,it,yt)}onIdTokenChanged(M,J,De){const{next:We,error:it,complete:yt}=Le(M,J,De);return this._delegate.onIdTokenChanged(We,it,yt)}sendSignInLinkToEmail(M,J){return z.ab(this._delegate,M,J)}sendPasswordResetEmail(M,J){return z.a4(this._delegate,M,J||void 0)}setPersistence(M){var J=this;return(0,p.Z)(function*(){let De;switch(function jt(O,P){vr(Object.values(Dn).includes(P),O,"invalid-persistence-type"),(0,ue.b$)()?vr(P!==Dn.SESSION,O,"unsupported-persistence-type"):(0,ue.UG)()?vr(P===Dn.NONE,O,"unsupported-persistence-type"):Qt()?vr(P===Dn.NONE||P===Dn.LOCAL&&(0,ue.hl)(),O,"unsupported-persistence-type"):vr(P===Dn.NONE||pn(),O,"unsupported-persistence-type")}(J._delegate,M),M){case Dn.SESSION:De=z.a;break;case Dn.LOCAL:De=(yield z.aD(z.i)._isAvailable())?z.i:z.b;break;case Dn.NONE:De=z.Q;break;default:return z.aw("argument-error",{appName:J._delegate.name})}return J._delegate.setPersistence(De)})()}signInAndRetrieveDataWithCredential(M){return this.signInWithCredential(M)}signInAnonymously(){return rr(this._delegate,z.$(this._delegate))}signInWithCredential(M){return rr(this._delegate,z.a0(this._delegate,M))}signInWithCustomToken(M){return rr(this._delegate,z.a3(this._delegate,M))}signInWithEmailAndPassword(M,J){return rr(this._delegate,z.aa(this._delegate,M,J))}signInWithEmailLink(M,J){return rr(this._delegate,z.ad(this._delegate,M,J))}signInWithPhoneNumber(M,J){return Cr(this._delegate,z.s(this._delegate,M,J))}signInWithPopup(M){var J=this;return(0,p.Z)(function*(){return Z(yn(),J._delegate,"operation-not-supported-in-this-environment"),rr(J._delegate,z.c(J._delegate,M,Xt))})()}signInWithRedirect(M){var J=this;return(0,p.Z)(function*(){return Z(yn(),J._delegate,"operation-not-supported-in-this-environment"),yield Kt(J._delegate),z.f(J._delegate,M,Xt)})()}updateCurrentUser(M){return this._delegate.updateCurrentUser(M)}verifyPasswordResetCode(M){return z.a8(this._delegate,M)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return O.Persistence=Dn,O})();function Le(O,P,M){let J=O;"function"!=typeof O&&({next:J,error:P,complete:M}=O);const De=J;return{next:it=>De(it&&He.getOrCreate(it)),error:P,complete:M}}function lt(O,P){const M=function wn(O,P){const M=kn();if(!M)return[];const J=z.aE(nr,O,P);switch(M.getItem(J)){case Dn.NONE:return[z.Q];case Dn.LOCAL:return[z.i,z.a];case Dn.SESSION:return[z.a];default:return[]}}(O,P);if(typeof self<"u"&&!M.includes(z.i)&&M.push(z.i),typeof window<"u")for(const J of[z.b,z.a])M.includes(J)||M.push(J);return M.includes(z.Q)||M.push(z.Q),M}class sn{constructor(){this.providerId="phone",this._delegate=new z.P(Wn(Y.Z.auth()))}static credential(P,M){return z.P.credential(P,M)}verifyPhoneNumber(P,M){return this._delegate.verifyPhoneNumber(P,M)}unwrap(){return this._delegate}}sn.PHONE_SIGN_IN_METHOD=z.P.PHONE_SIGN_IN_METHOD,sn.PROVIDER_ID=z.P.PROVIDER_ID;const ir=z.aB;class Pn{constructor(P,M,J=Y.Z.app()){var De;ir(null===(De=J.options)||void 0===De?void 0:De.apiKey,"invalid-api-key",{appName:J.name}),this._delegate=new z.R(J.auth(),P,M),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function G(O){O.INTERNAL.registerComponent(new ge.wA("auth-compat",P=>{const M=P.getProvider("app-compat").getImmediate(),J=P.getProvider("auth");return new se(M,J)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:z.A.EMAIL_SIGNIN,PASSWORD_RESET:z.A.PASSWORD_RESET,RECOVER_EMAIL:z.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:z.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:z.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:z.A.VERIFY_EMAIL}},EmailAuthProvider:z.U,FacebookAuthProvider:z.V,GithubAuthProvider:z.X,GoogleAuthProvider:z.W,OAuthProvider:z.Y,SAMLAuthProvider:z.Z,PhoneAuthProvider:sn,PhoneMultiFactorGenerator:z.m,RecaptchaVerifier:Pn,TwitterAuthProvider:z._,Auth:se,AuthCredential:z.K,Error:ue.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),O.registerVersion("@firebase/auth-compat","0.4.8")}(Y.Z)},5861:(Et,Me,F)=>{function p(z,ue,te,le,ge,oe,Se){try{var Q=z[oe](Se),re=Q.value}catch(me){return void te(me)}Q.done?ue(re):Promise.resolve(re).then(le,ge)}function Y(z){return function(){var ue=this,te=arguments;return new Promise(function(le,ge){var oe=z.apply(ue,te);function Se(re){p(oe,le,ge,Se,Q,"next",re)}function Q(re){p(oe,le,ge,Se,Q,"throw",re)}Se(void 0)})}}F.d(Me,{Z:()=>Y})},7582:(Et,Me,F)=>{function ue(pe,ye){var Ce={};for(var ve in pe)Object.prototype.hasOwnProperty.call(pe,ve)&&ye.indexOf(ve)<0&&(Ce[ve]=pe[ve]);if(null!=pe&&"function"==typeof Object.getOwnPropertySymbols){var xe=0;for(ve=Object.getOwnPropertySymbols(pe);xe<ve.length;xe++)ye.indexOf(ve[xe])<0&&Object.prototype.propertyIsEnumerable.call(pe,ve[xe])&&(Ce[ve[xe]]=pe[ve[xe]])}return Ce}function me(pe,ye,Ce,ve){return new(Ce||(Ce=Promise))(function(Qe,ct){function rt(fn){try{Lt(ve.next(fn))}catch(Ut){ct(Ut)}}function at(fn){try{Lt(ve.throw(fn))}catch(Ut){ct(Ut)}}function Lt(fn){fn.done?Qe(fn.value):function xe(Qe){return Qe instanceof Ce?Qe:new Ce(function(ct){ct(Qe)})}(fn.value).then(rt,at)}Lt((ve=ve.apply(pe,ye||[])).next())})}function de(pe){return this instanceof de?(this.v=pe,this):new de(pe)}function Pe(pe,ye,Ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xe,ve=Ce.apply(pe,ye||[]),Qe=[];return xe={},ct("next"),ct("throw"),ct("return"),xe[Symbol.asyncIterator]=function(){return this},xe;function ct(En){ve[En]&&(xe[En]=function(pn){return new Promise(function(Qt,yn){Qe.push([En,pn,Qt,yn])>1||rt(En,pn)})})}function rt(En,pn){try{!function at(En){En.value instanceof de?Promise.resolve(En.value.v).then(Lt,fn):Ut(Qe[0][2],En)}(ve[En](pn))}catch(Qt){Ut(Qe[0][3],Qt)}}function Lt(En){rt("next",En)}function fn(En){rt("throw",En)}function Ut(En,pn){En(pn),Qe.shift(),Qe.length&&rt(Qe[0][0],Qe[0][1])}}function ke(pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ce,ye=pe[Symbol.asyncIterator];return ye?ye.call(pe):(pe=function Fe(pe){var ye="function"==typeof Symbol&&Symbol.iterator,Ce=ye&&pe[ye],ve=0;if(Ce)return Ce.call(pe);if(pe&&"number"==typeof pe.length)return{next:function(){return pe&&ve>=pe.length&&(pe=void 0),{value:pe&&pe[ve++],done:!pe}}};throw new TypeError(ye?"Object is not iterable.":"Symbol.iterator is not defined.")}(pe),Ce={},ve("next"),ve("throw"),ve("return"),Ce[Symbol.asyncIterator]=function(){return this},Ce);function ve(Qe){Ce[Qe]=pe[Qe]&&function(ct){return new Promise(function(rt,at){!function xe(Qe,ct,rt,at){Promise.resolve(at).then(function(Lt){Qe({value:Lt,done:rt})},ct)}(rt,at,(ct=pe[Qe](ct)).done,ct.value)})}}}F.d(Me,{FC:()=>Pe,KL:()=>ke,_T:()=>ue,mG:()=>me,qq:()=>de}),"function"==typeof SuppressedError&&SuppressedError}},Et=>{Et(Et.s=5209)}]);