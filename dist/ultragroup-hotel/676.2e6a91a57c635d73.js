"use strict";(self.webpackChunkultragroup_hotel=self.webpackChunkultragroup_hotel||[]).push([[676],{4676:(I,p,s)=>{s.r(p),s.d(p,{HotelModule:()=>D});var u=s(6814),o=s(95),m=s(9228),e=s(5879),c=s(7736),v=s(161),_=s(6808),b=s(6035);function Z(t,d){1&t&&(e.TgZ(0,"div",23),e._uU(1,"Fecha de entrada requerida "),e.qZA())}function y(t,d){1&t&&(e.TgZ(0,"div",23),e._uU(1,"Fecha de salida requerida "),e.qZA())}function C(t,d){if(1&t&&(e.TgZ(0,"option",24),e._uU(1),e.qZA()),2&t){const r=d.$implicit;e.Q6J("value",r.id),e.xp6(1),e.Oqu(r.type)}}function T(t,d){1&t&&(e.TgZ(0,"div",23),e._uU(1,"Nombre requerido"),e.qZA())}function q(t,d){1&t&&(e.TgZ(0,"div",23),e._uU(1,"Fecha de nacimiento requerida"),e.qZA())}function x(t,d){if(1&t){const r=e.EpF();e.TgZ(0,"div",25)(1,"h2",26),e._uU(2),e.qZA(),e.TgZ(3,"div",27)(4,"div")(5,"label",7),e._uU(6,"Nombres y Apellidos del Hu\xe9sped"),e.qZA(),e._UZ(7,"input",18),e.YNc(8,T,2,0,"div",9),e.qZA(),e.TgZ(9,"div")(10,"label",7),e._uU(11,"Fecha de Nacimiento del Hu\xe9sped"),e.qZA(),e._UZ(12,"input",28),e.YNc(13,q,2,0,"div",9),e.qZA(),e.TgZ(14,"div")(15,"label",7),e._uU(16,"G\xe9nero"),e.qZA(),e.TgZ(17,"select",29)(18,"option",30),e._uU(19,"Masculino"),e.qZA(),e.TgZ(20,"option",31),e._uU(21,"Femenino"),e.qZA()()(),e.TgZ(22,"div")(23,"label",32),e._uU(24," Tipo de Documento "),e.qZA(),e.TgZ(25,"select",33)(26,"option",34),e._uU(27,"C\xe9dula de ciudadan\xeda"),e.qZA(),e.TgZ(28,"option",35),e._uU(29,"Pasaporte"),e.qZA(),e.TgZ(30,"option",36),e._uU(31,"Licencia de Conducir"),e.qZA()()(),e.TgZ(32,"div")(33,"label",7),e._uU(34,"N\xfamero de Documento"),e.qZA(),e._UZ(35,"input",37),e.qZA(),e.TgZ(36,"div")(37,"label",7),e._uU(38,"Email"),e.qZA(),e._UZ(39,"input",38),e.qZA(),e.TgZ(40,"div")(41,"label",7),e._uU(42,"Tel\xe9fono de Contacto"),e.qZA(),e._UZ(43,"input",19),e.qZA(),e.TgZ(44,"div",39)(45,"button",40),e.NdJ("click",function(){const a=e.CHM(r).index,l=e.oxw();return e.KtG(l.removeGuest(a))}),e._uU(46,"Eliminar Hu\xe9sped"),e.qZA()()()()}if(2&t){const r=d.index,i=e.oxw();let n,a;e.xp6(2),e.hij("Hu\xe9sped ",r+1,""),e.xp6(1),e.Q6J("formGroupName",r),e.xp6(5),e.Q6J("ngIf",null==(n=i.guestArray.controls[r].get("name"))?null:n.hasError("required")),e.xp6(5),e.Q6J("ngIf",null==(a=i.guestArray.controls[r].get("birthdate"))?null:a.hasError("required"))}}function A(t,d){1&t&&(e.TgZ(0,"div",23),e._uU(1,"Nombre del contacto de emergencia requerido "),e.qZA())}function U(t,d){1&t&&(e.TgZ(0,"div",23),e._uU(1,"Tel\xe9fono del contacto de emergencia requerido "),e.qZA())}let M=(()=>{class t{constructor(r){this.fb=(0,e.f3M)(o.qu),this.dialogRef=(0,e.f3M)(c.zj),this.roomService=(0,e.f3M)(_.X),this.reservationService=(0,e.f3M)(b.D),this.availableRooms=[],this.hotel=r.hotel}ngOnInit(){this.initReservationForm(),this.getRooms(),this.loadGuests()}initReservationForm(){this.reservationForm=this.fb.group({checkInDate:["",o.kI.required],checkOutDate:["",o.kI.required],guests:this.fb.array([]),emergencyContact:this.fb.group({name:["",o.kI.required],contactPhone:["",o.kI.required]}),roomId:["",o.kI.required],hotelId:[this.hotel?this.hotel.id:null,o.kI.required],userId:[localStorage.getItem("userId"),o.kI.required]})}get guestArray(){return this.reservationForm.get("guests")}getRooms(){this.roomService.getRoomsByHotel(this.hotel.id).subscribe(r=>{const i=r.map(n=>({id:n.payload.doc.id,...n.payload.doc.data()}));this.availableRooms=i.filter(n=>n.available)})}loadGuests(){this.addGuest()}addGuest(){this.guestArray.push(this.fb.group({name:["",o.kI.required],birthdate:["",o.kI.required],gender:["",o.kI.required],documentType:["",o.kI.required],documentNumber:["",o.kI.required],email:["",[o.kI.required,o.kI.email]],contactPhone:["",o.kI.required]}))}removeGuest(r){this.guestArray.removeAt(r)}submitReservation(){this.reservationService.saveReservation(this.reservationForm.value),this.dialogRef.close(this.reservationForm.value)}closeDialog(){this.dialogRef.close()}static#e=this.\u0275fac=function(i){return new(i||t)(e.Y36(c.Kt))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-reservation-dialog"]],standalone:!0,features:[e.jDz],decls:47,vars:8,consts:[[1,"fixed","inset-0","flex","items-center","justify-center","z-50"],[1,"modal-container","bg-white","w-2/3","mx-auto","rounded","shadow-lg","p-6"],[1,"text-xl","font-semibold","mb-4"],[1,"font-bold","text-red-500"],[2,"max-height","70vh","overflow-y","auto"],[3,"formGroup","ngSubmit"],[1,"mb-4","grid","grid-cols-2","gap-4"],[1,"block","text-gray-700"],["formControlName","checkInDate","type","date",1,"border","rounded","px-3","py-2","w-full"],["class","text-red-600",4,"ngIf"],["formControlName","checkOutDate","type","date",1,"border","rounded","px-3","py-2","w-full"],["formControlName","roomId",1,"border","rounded","px-3","py-2","w-full"],[3,"value",4,"ngFor","ngForOf"],["formArrayName","guests"],["class","mb-6 border rounded p-4",4,"ngFor","ngForOf"],["type","button",1,"bg-blue-500","hover:bg-blue-700","text-white","py-2","px-4","rounded-full","shadow-lg",3,"click"],["formGroupName","emergencyContact",1,"grid","grid-cols-2","gap-4"],[1,"text-lg","font-semibold","my-4","col-span-2"],["formControlName","name","type","text",1,"border","rounded","px-3","py-2","w-full"],["formControlName","contactPhone","type","tel",1,"border","rounded","px-3","py-2","w-full"],[1,"sticky","bottom-0","bg-white","p-4","border-t","border-gray-300","flex","justify-end","space-x-4"],["type","button",1,"bg-red-500","hover:bg-red-700","text-white","py-2","px-4","rounded-full","shadow-lg",3,"click"],["type","submit",1,"bg-blue-500","hover:bg-blue-700","text-white","py-2","px-4","rounded-full","shadow-lg"],[1,"text-red-600"],[3,"value"],[1,"mb-6","border","rounded","p-4"],[1,"text-lg","font-semibold"],[1,"grid","grid-cols-4","gap-4",3,"formGroupName"],["formControlName","birthdate","type","date",1,"border","rounded","px-3","py-2","w-full"],["formControlName","gender",1,"border","rounded","px-3","py-2","w-full"],["value","masculino"],["value","femenino"],["for","documentType",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["formControlName","documentType","id","documentType",1,"block","appearance-none","w-full","bg-white","border","border-gray-400","text-gray-700","py-3","px-4","pr-8","rounded","leading-tight","focus:outline-none","focus:shadow-outline"],["value","idCard"],["value","passport"],["value","driverLicense"],["formControlName","documentNumber","type","text",1,"border","rounded","px-3","py-2","w-full"],["formControlName","email","type","email",1,"border","rounded","px-3","py-2","w-full"],[1,"col-span-4","flex","justify-end"],[1,"text-red-500","hover:text-red-700",3,"click"]],template:function(i,n){if(1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),e._uU(3,"Reservar Habitaci\xf3n en hotel "),e.TgZ(4,"span",3),e._uU(5),e.qZA()(),e.TgZ(6,"div",4)(7,"form",5),e.NdJ("ngSubmit",function(){return n.submitReservation()}),e.TgZ(8,"div",6)(9,"div")(10,"label",7),e._uU(11,"Fecha de Entrada"),e.qZA(),e._UZ(12,"input",8),e.YNc(13,Z,2,0,"div",9),e.qZA(),e.TgZ(14,"div")(15,"label",7),e._uU(16,"Fecha de Salida"),e.qZA(),e._UZ(17,"input",10),e.YNc(18,y,2,0,"div",9),e.qZA()(),e.TgZ(19,"div",6)(20,"div")(21,"label",7),e._uU(22,"Habitaci\xf3n Disponible"),e.qZA(),e.TgZ(23,"select",11),e.YNc(24,C,2,2,"option",12),e.qZA()()(),e.TgZ(25,"div",13),e.YNc(26,x,47,4,"div",14),e.qZA(),e.TgZ(27,"button",15),e.NdJ("click",function(){return n.addGuest()}),e._uU(28," Agregar Hu\xe9sped "),e.qZA(),e.TgZ(29,"div",16)(30,"h2",17),e._uU(31,"Contacto de Emergencia"),e.qZA(),e.TgZ(32,"div")(33,"label",7),e._uU(34,"Nombre Completo"),e.qZA(),e._UZ(35,"input",18),e.YNc(36,A,2,0,"div",9),e.qZA(),e.TgZ(37,"div")(38,"label",7),e._uU(39,"Tel\xe9fono de Contacto de Emergencia"),e.qZA(),e._UZ(40,"input",19),e.YNc(41,U,2,0,"div",9),e.qZA()(),e.TgZ(42,"div",20)(43,"button",21),e.NdJ("click",function(){return n.closeDialog()}),e._uU(44," Cancelar "),e.qZA(),e.TgZ(45,"button",22),e._uU(46," Reservar "),e.qZA()()()()()()),2&i){let a,l,h,f;e.xp6(5),e.hij("",n.hotel.name," "),e.xp6(2),e.Q6J("formGroup",n.reservationForm),e.xp6(6),e.Q6J("ngIf",null==(a=n.reservationForm.get("checkInDate"))?null:a.hasError("required")),e.xp6(5),e.Q6J("ngIf",null==(l=n.reservationForm.get("checkOutDate"))?null:l.hasError("required")),e.xp6(6),e.Q6J("ngForOf",n.availableRooms),e.xp6(2),e.Q6J("ngForOf",n.guestArray.controls),e.xp6(10),e.Q6J("ngIf",null==(h=n.reservationForm.get("emergencyContact.name"))?null:h.hasError("required")),e.xp6(5),e.Q6J("ngIf",null==(f=n.reservationForm.get("emergencyContact.contactPhone"))?null:f.hasError("required"))}},dependencies:[u.ez,u.sg,u.O5,o.UX,o._Y,o.YN,o.Kr,o.Fj,o.EJ,o.JJ,o.JL,o.sg,o.u,o.x0,o.CE,c.Su],encapsulation:2})}return t})();function N(t,d){if(1&t){const r=e.EpF();e.TgZ(0,"div",11),e._UZ(1,"img",12),e.TgZ(2,"h2",13),e._uU(3),e.qZA(),e.TgZ(4,"p",14),e._uU(5),e.qZA(),e.TgZ(6,"p",15),e._uU(7),e.qZA(),e.TgZ(8,"div",16)(9,"button",17),e.NdJ("click",function(){const a=e.CHM(r).$implicit,l=e.oxw();return e.KtG(l.openReservationModal(a))}),e._uU(10,"Reservar"),e.qZA()()()}if(2&t){const r=d.$implicit;e.xp6(1),e.Q6J("src",r.imageUrl,e.LSH),e.xp6(2),e.Oqu(r.name),e.xp6(2),e.Oqu(r.city),e.xp6(2),e.Oqu(r.description)}}const g=function(){return{standalone:!0}},F=[{path:"",component:(()=>{class t{constructor(){this.dialog=(0,e.f3M)(c.Vq),this.hotelService=(0,e.f3M)(v.N),this.hotels=[],this.searchCriteria={checkInDate:"",checkOutDate:"",capacity:1,city:""}}ngOnInit(){this.getHotels()}getHotels(){this.hotelService.getHotels().subscribe(r=>{this.hotels=r.map(i=>({id:i.payload.doc.id,...i.payload.doc.data()})),this.hotels=this.hotels.filter(i=>i.available)})}openReservationModal(r=null){this.dialog.open(M,{minWidth:"600px",maxWidth:"80%",data:{hotel:r}}).closed.subscribe(n=>{n&&(console.log("The dialog was closed"),console.log(n))})}searchHotels(){console.log("Criterios de b\xfasqueda:",this.searchCriteria)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-hotel-list"]],decls:14,vars:13,consts:[[1,"container","mx-auto","my-8"],[1,"text-3xl","font-bold","mb-4"],[1,"mb-8",3,"ngSubmit"],["f","ngForm"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],["type","date","placeholder","Fecha de entrada",3,"ngModel","ngModelOptions","ngModelChange"],["type","date","placeholder","Fecha de salida",3,"ngModel","ngModelOptions","ngModelChange"],["type","number","placeholder","Cantidad de personas",3,"ngModel","ngModelOptions","ngModelChange"],["type","text","placeholder","Ciudad",3,"ngModel","ngModelOptions","ngModelChange"],["type","submit",1,"bg-blue-500","text-white","py-2","px-4","rounded-full","shadow-lg","hover:bg-blue-700"],["class","bg-white p-4 shadow-lg rounded-lg transition-transform transform hover:-translate-y-2 hover:shadow-xl",4,"ngFor","ngForOf"],[1,"bg-white","p-4","shadow-lg","rounded-lg","transition-transform","transform","hover:-translate-y-2","hover:shadow-xl"],["alt","Hotel",1,"w-full","h-40","object-cover","rounded",3,"src"],[1,"text-xl","font-semibold","mt-2"],[1,"text-gray-600"],[1,"text-gray-700","my-2"],[1,"mt-4","flex","justify-end"],[1,"text-blue-500","hover:underline",3,"click"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"h1",1),e._uU(2,"Hoteles"),e.qZA(),e.TgZ(3,"form",2,3),e.NdJ("ngSubmit",function(){return n.searchHotels()}),e.TgZ(5,"div",4)(6,"input",5),e.NdJ("ngModelChange",function(l){return n.searchCriteria.checkInDate=l}),e.qZA(),e.TgZ(7,"input",6),e.NdJ("ngModelChange",function(l){return n.searchCriteria.checkOutDate=l}),e.qZA(),e.TgZ(8,"input",7),e.NdJ("ngModelChange",function(l){return n.searchCriteria.capacity=l}),e.qZA(),e.TgZ(9,"input",8),e.NdJ("ngModelChange",function(l){return n.searchCriteria.city=l}),e.qZA(),e.TgZ(10,"button",9),e._uU(11," Buscar Hoteles "),e.qZA()()(),e.TgZ(12,"div",4),e.YNc(13,N,11,4,"div",10),e.qZA()()),2&i&&(e.xp6(6),e.Q6J("ngModel",n.searchCriteria.checkInDate)("ngModelOptions",e.DdM(9,g)),e.xp6(1),e.Q6J("ngModel",n.searchCriteria.checkOutDate)("ngModelOptions",e.DdM(10,g)),e.xp6(1),e.Q6J("ngModel",n.searchCriteria.capacity)("ngModelOptions",e.DdM(11,g)),e.xp6(1),e.Q6J("ngModel",n.searchCriteria.city)("ngModelOptions",e.DdM(12,g)),e.xp6(4),e.Q6J("ngForOf",n.hotels))},dependencies:[u.sg,o._Y,o.Fj,o.wV,o.JJ,o.JL,o.On,o.F],encapsulation:2})}return t})()}];let k=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=e.oAB({type:t});static#o=this.\u0275inj=e.cJS({imports:[m.Bz.forChild(F),m.Bz]})}return t})(),D=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=e.oAB({type:t});static#o=this.\u0275inj=e.cJS({imports:[u.ez,k,c.Su,o.UX,o.u5]})}return t})()}}]);