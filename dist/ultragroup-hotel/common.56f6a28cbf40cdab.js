"use strict";(self.webpackChunkultragroup_hotel=self.webpackChunkultragroup_hotel||[]).push([[592],{5914:(d,_,e)=>{e.d(_,{j:()=>a});var t=e(5879),n=e(7104),l=e(304),u=e(6808),i=e(5145);let a=(()=>{class v{constructor(){this.fireStore=(0,t.f3M)(n.ST),this.authService=(0,t.f3M)(l.e),this.roomService=(0,t.f3M)(u.X),this.guestService=(0,t.f3M)(i.Q)}getEmergencyContactByReservation(o){return this.fireStore.collection("emergencyContacts",h=>h.where("reservationId","==",o)).snapshotChanges()}saveEmergencyContact(o){return this.fireStore.collection("emergencyContacts").add(o)}static#e=this.\u0275fac=function(h){return new(h||v)};static#t=this.\u0275prov=t.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})()},5145:(d,_,e)=>{e.d(_,{Q:()=>i});var t=e(5879),n=e(7104),l=e(304),u=e(6808);let i=(()=>{class a{constructor(){this.fireStore=(0,t.f3M)(n.ST),this.authService=(0,t.f3M)(l.e),this.roomService=(0,t.f3M)(u.X)}getGuestsByReservationId(c){return this.fireStore.collection("guests",o=>o.where("reservationId","==",c)).snapshotChanges()}createGuest(c){return this.fireStore.collection("guests").add(c)}static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()},6035:(d,_,e)=>{e.d(_,{D:()=>c});var t=e(5861),n=e(5879),l=e(7104),u=e(304),i=e(6808),a=e(5145),v=e(5914);let c=(()=>{class o{constructor(){this.fireStore=(0,n.f3M)(l.ST),this.authService=(0,n.f3M)(u.e),this.roomService=(0,n.f3M)(i.X),this.guestService=(0,n.f3M)(a.Q),this.emergencyContactService=(0,n.f3M)(v.j)}saveReservation(s){var r=this;return(0,t.Z)(function*(){const{emergencyContact:E,guests:g,hotelId:M,roomId:C}=s;delete s.emergencyContact,delete s.guests;const f=yield r.fireStore.collection("reservations").add(s);E.reservationId=f.id,r.emergencyContactService.saveEmergencyContact(E),g.forEach(m=>{m.reservationId=f.id,r.guestService.createGuest(m)}),yield r.roomService.updateRoom(M,C,{available:!1}),r.sendEmail(f.id)})()}getAllReservations(){return this.fireStore.collection("reservations").snapshotChanges()}getReservationById(s){return this.fireStore.collection("reservations").doc(s).snapshotChanges()}getReservationsByUser(s){return this.fireStore.collection("reservations",r=>r.where("userId","==",s)).snapshotChanges()}getReservationsByHotel(s){return this.fireStore.collection("reservations",r=>r.where("hotelId","==",s)).snapshotChanges()}getReservationsByRoom(s){return this.fireStore.collection("reservations",r=>r.where("roomId","==",s)).snapshotChanges()}getReservationsByHotelAndRoom(s,r){return this.fireStore.collection("reservations",E=>E.where("hotelId","==",s).where("roomId","==",r)).snapshotChanges()}sendEmail(s){const r=this.authService.user;if(r)return this.fireStore.collection("emails").add({from:"UltraGroup Hotel App",to:r.email,subject:"Reserva generada correctamente",text:`Hola ${r.firstName} ${r.lastName}, tu reserva ha sido generada correctamente con el ID: ${s}.`})}static#e=this.\u0275fac=function(r){return new(r||o)};static#t=this.\u0275prov=n.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})()},1682:(d,_,e)=>{e.d(_,{p:()=>u});var t=e(5879),n=e(9228),l=e(5048);let u=(()=>{class i{static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-admin-layout"]],decls:4,vars:0,consts:[[1,"flex","flex-col","h-screen"],[1,"w-full","grow"]],template:function(c,o){1&c&&(t.TgZ(0,"div",0),t._UZ(1,"app-navbar"),t.TgZ(2,"div",1),t._UZ(3,"router-outlet"),t.qZA()())},dependencies:[n.lC,l.S]})}return i})()},5048:(d,_,e)=>{e.d(_,{S:()=>i});var t=e(5879),n=e(6814),l=e(304),u=e(9228);let i=(()=>{class a{constructor(){this.authService=(0,t.f3M)(l.e),this.router=(0,t.f3M)(u.F0)}logout(){this.authService.logout().then(()=>{this.router.navigate(["/login"]),localStorage.clear()})}static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-navbar"]],standalone:!0,features:[t.jDz],decls:6,vars:0,consts:[[1,"bg-blue-500","p-4"],[1,"flex","items-center","justify-between"],[1,"text-white","text-2xl","font-bold"],[1,"bg-red-500","hover:bg-red-700","text-white","font-bold","py-2","px-4","rounded","focus:outline-none","focus:shadow-outline",3,"click"]],template:function(o,h){1&o&&(t.TgZ(0,"nav",0)(1,"div",1)(2,"div",2),t._uU(3,"UltraGroupHotels"),t.qZA(),t.TgZ(4,"button",3),t.NdJ("click",function(){return h.logout()}),t._uU(5," Cerrar Sesi\xf3n "),t.qZA()()())},dependencies:[n.ez],encapsulation:2})}return a})()}}]);