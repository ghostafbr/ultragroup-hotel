"use strict";(self.webpackChunkultragroup_hotel=self.webpackChunkultragroup_hotel||[]).push([[360],{1148:(_,u,i)=>{i.r(u),i.d(u,{ReservationModule:()=>U});var d=i(6814),h=i(9228),e=i(5879),m=i(6035),v=i(161),l=i(7736),p=i(6808),f=i(5145),Z=i(5914);function y(o,a){if(1&o&&(e.TgZ(0,"li",8)(1,"strong"),e._uU(2,"Nombre:"),e.qZA(),e._uU(3),e.qZA()),2&o){const t=a.$implicit;e.xp6(3),e.hij(" ",t.name," ")}}let C=(()=>{class o{constructor(t){this.dialogRef=(0,e.f3M)(l.zj),this.guestService=(0,e.f3M)(f.Q),this.hotelService=(0,e.f3M)(v.N),this.roomService=(0,e.f3M)(p.X),this.emergencyContactService=(0,e.f3M)(Z.j),this.rooms=[],this.guests=[],this.reservation=t.reservation,this.getGuests(),this.getEmergencyContact()}ngOnInit(){}closeDialog(){this.dialogRef.close()}getGuests(){this.guestService.getGuestsByReservationId(this.reservation.id).subscribe(t=>{this.guests=[],t.forEach(s=>{this.guests.push({id:s.payload.doc.id,...s.payload.doc.data()})})})}getEmergencyContact(){this.emergencyContactService.getEmergencyContactByReservation(this.reservation.id).subscribe(t=>{t.forEach(s=>{this.emergencyContact={id:s.payload.doc.id,...s.payload.doc.data()}}),console.log("this.emergencyContact: ",this.emergencyContact)})}static#e=this.\u0275fac=function(s){return new(s||o)(e.Y36(l.Kt))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-reservation-details"]],decls:36,vars:7,consts:[[1,"fixed","inset-0","flex","items-center","justify-center","z-50"],[1,"modal-container","bg-white","w-96","mx-auto","rounded","shadow-lg","p-6"],[1,"text-2xl","font-semibold","text-blue-600","mb-4"],[1,"text-gray-700","mb-4"],[1,"text-lg","font-semibold","mt-6","text-blue-600"],["class","text-gray-700 mb-2",4,"ngFor","ngForOf"],[1,"text-gray-700"],["type","button",1,"bg-blue-500","hover:bg-blue-700","text-white","font-semibold","py-2","px-4","rounded-full","focus:outline-none","focus:shadow-outline","mt-6",3,"click"],[1,"text-gray-700","mb-2"]],template:function(s,n){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),e._uU(3,"Detalles de Reserva"),e.qZA(),e.TgZ(4,"div",3)(5,"strong"),e._uU(6,"ID de Reserva:"),e.qZA(),e._uU(7),e.qZA(),e.TgZ(8,"div",3)(9,"strong"),e._uU(10,"ID del Hotel:"),e.qZA(),e._uU(11),e.qZA(),e.TgZ(12,"div",3)(13,"strong"),e._uU(14,"ID de la Habitaci\xf3n:"),e.qZA(),e._uU(15),e.qZA(),e.TgZ(16,"div",3)(17,"strong"),e._uU(18,"Fecha de Ingreso:"),e.qZA(),e._uU(19),e.qZA(),e.TgZ(20,"div",3)(21,"strong"),e._uU(22,"Fecha de Salida:"),e.qZA(),e._uU(23),e.qZA(),e.TgZ(24,"h2",4),e._uU(25,"Hu\xe9spedes"),e.qZA(),e.TgZ(26,"ul"),e.YNc(27,y,4,1,"li",5),e.qZA(),e.TgZ(28,"h2",4),e._uU(29,"Contacto de Emergencia"),e.qZA(),e.TgZ(30,"div",6)(31,"strong"),e._uU(32,"Nombre:"),e.qZA(),e._uU(33),e.qZA(),e.TgZ(34,"button",7),e.NdJ("click",function(){return n.closeDialog()}),e._uU(35," Cerrar "),e.qZA()()()),2&s&&(e.xp6(7),e.hij(" ",n.reservation.id," "),e.xp6(4),e.hij(" ",n.reservation.hotelId," "),e.xp6(4),e.hij(" ",n.reservation.roomId," "),e.xp6(4),e.hij(" ",n.reservation.checkInDate," "),e.xp6(4),e.hij(" ",n.reservation.checkOutDate," "),e.xp6(4),e.Q6J("ngForOf",n.guests),e.xp6(6),e.hij(" ",null==n.emergencyContact?null:n.emergencyContact.name," "))},dependencies:[d.sg],encapsulation:2})}return o})();var r=i(95);function b(o,a){if(1&o&&(e.TgZ(0,"option",9),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function x(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",10)(1,"p",11),e._uU(2,"Fechas de Reserva"),e.qZA(),e.TgZ(3,"p",12),e._uU(4),e.qZA(),e.TgZ(5,"p",13),e._uU(6),e.qZA(),e.TgZ(7,"div",14)(8,"button",15),e.NdJ("click",function(){const c=e.CHM(t).$implicit,g=e.oxw();return e.KtG(g.openReservationDetailsDialog(c))}),e._uU(9,"Ver detalles"),e.qZA()()()}if(2&o){const t=a.$implicit;e.xp6(4),e.AsE("",t.checkInDate," - ",t.checkOutDate,""),e.xp6(2),e.hij("Habitaci\xf3n: ",t.roomId,"")}}const A=function(){return{standalone:!0}},T=[{path:"",component:(()=>{class o{constructor(){this.reservations=[],this.hotels=[],this.selectedHotelId="",this.hotelService=(0,e.f3M)(v.N),this.reservationService=(0,e.f3M)(m.D),this.dialog=(0,e.f3M)(l.Vq)}ngOnInit(){this.getHotels()}getHotels(){const t=localStorage.getItem("userId");this.hotelService.getHotelsByUser(t).subscribe(s=>{this.hotels=[],s.forEach(n=>{this.hotels.push({id:n.payload.doc.id,...n.payload.doc.data()})})})}onHotelChange(){this.getReservations()}getReservations(){this.reservationService.getReservationsByHotel(this.selectedHotelId).subscribe(t=>{this.reservations=[],t.forEach(s=>{this.reservations.push({id:s.payload.doc.id,...s.payload.doc.data()})}),console.log("this.reservations: ",this.reservations)})}openReservationDetailsDialog(t=null){console.log("reservation: ",t),this.dialog.open(C,{minWidth:"600px",maxWidth:"80%",data:{reservation:t}}).closed.subscribe(n=>{n&&(console.log("The dialog was closed"),console.log(n))})}static#e=this.\u0275fac=function(s){return new(s||o)};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-reservation"]],decls:12,vars:5,consts:[[1,"container","mx-auto","my-8"],[1,"text-3xl","font-bold","mb-4"],[1,"mb-4"],["for","selectedHotel",1,"text-gray-700"],["id","selectedHotel",1,"border","rounded","px-3","py-2","w-full",3,"ngModel","ngModelOptions","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],["class","bg-white p-4 shadow-lg rounded-lg transition-transform transform hover:-translate-y-2 hover:shadow-xl",4,"ngFor","ngForOf"],[3,"value"],[1,"bg-white","p-4","shadow-lg","rounded-lg","transition-transform","transform","hover:-translate-y-2","hover:shadow-xl"],[1,"text-blue-500","font-semibold","mb-2"],[1,"text-gray-600"],[1,"text-gray-700","my-2"],[1,"mt-4","flex","justify-end"],[1,"text-blue-500","hover:underline",3,"click"]],template:function(s,n){1&s&&(e.TgZ(0,"div",0)(1,"h1",1),e._uU(2,"Lista de Reservas"),e.qZA(),e.TgZ(3,"div",2)(4,"label",3),e._uU(5,"Selecciona un hotel:"),e.qZA(),e.TgZ(6,"select",4),e.NdJ("ngModelChange",function(g){return n.selectedHotelId=g})("ngModelChange",function(){return n.onHotelChange()}),e.TgZ(7,"option",5),e._uU(8,"Seleccione un hotel"),e.qZA(),e.YNc(9,b,2,2,"option",6),e.qZA()(),e.TgZ(10,"div",7),e.YNc(11,x,10,3,"div",8),e.qZA()()),2&s&&(e.xp6(6),e.Q6J("ngModel",n.selectedHotelId)("ngModelOptions",e.DdM(4,A)),e.xp6(3),e.Q6J("ngForOf",n.hotels),e.xp6(2),e.Q6J("ngForOf",n.reservations))},dependencies:[d.sg,r.YN,r.Kr,r.EJ,r.JJ,r.On],encapsulation:2})}return o})()}];let R=(()=>{class o{static#e=this.\u0275fac=function(s){return new(s||o)};static#t=this.\u0275mod=e.oAB({type:o});static#o=this.\u0275inj=e.cJS({imports:[h.Bz.forChild(T),h.Bz]})}return o})(),U=(()=>{class o{static#e=this.\u0275fac=function(s){return new(s||o)};static#t=this.\u0275mod=e.oAB({type:o});static#o=this.\u0275inj=e.cJS({imports:[d.ez,R,r.u5,l.Su]})}return o})()}}]);