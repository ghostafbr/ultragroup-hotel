"use strict";(self.webpackChunkultragroup_hotel=self.webpackChunkultragroup_hotel||[]).push([[801],{3179:(N,h,u)=>{u.r(h),u.d(h,{HotelModule:()=>D});var c=u(6814),m=u(9228),t=u(5879),i=u(95),p=u(7736),g=u(161),_=u(6808);function b(o,a){1&o&&(t.TgZ(0,"div",21),t._uU(1,"Nombre requerido"),t.qZA())}function v(o,a){1&o&&(t.TgZ(0,"div",21),t._uU(1,"Ubicaci\xf3n requerida"),t.qZA())}function Z(o,a){1&o&&(t.TgZ(0,"div",21),t._uU(1,"Descripci\xf3n requerida "),t.qZA())}function y(o,a){1&o&&(t.TgZ(0,"div",21),t._uU(1,"Tipo requerido"),t.qZA())}function x(o,a){1&o&&(t.TgZ(0,"div",21),t._uU(1,"Costo base requerido"),t.qZA())}function C(o,a){1&o&&(t.TgZ(0,"div",21),t._uU(1,"Impuestos requeridos"),t.qZA())}function q(o,a){1&o&&(t.TgZ(0,"div",21),t._uU(1,"Ubicaci\xf3n requerida"),t.qZA())}function T(o,a){1&o&&(t.TgZ(0,"div",21),t._uU(1,"Capacidad requerida"),t.qZA())}function A(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){t.CHM(e);const l=t.oxw().index,n=t.oxw();return t.KtG(n.removeRoom(l))}),t._uU(1,"Eliminar"),t.qZA()}}function H(o,a){if(1&o&&(t.TgZ(0,"div")(1,"div",22)(2,"div")(3,"label",7),t._uU(4,"Tipo de habitaci\xf3n"),t.qZA(),t.TgZ(5,"select",23)(6,"option",24),t._uU(7,"Habitaci\xf3n Individual"),t.qZA(),t.TgZ(8,"option",25),t._uU(9,"Habitaci\xf3n Doble"),t.qZA(),t.TgZ(10,"option",26),t._uU(11,"Habitaci\xf3n M\xfaltiple"),t.qZA(),t.TgZ(12,"option",27),t._uU(13,"Suite de Lujo"),t.qZA()(),t.YNc(14,y,2,0,"div",9),t.qZA(),t.TgZ(15,"div")(16,"label",7),t._uU(17,"Costo base"),t.qZA(),t._UZ(18,"input",28),t.YNc(19,x,2,0,"div",9),t.qZA(),t.TgZ(20,"div")(21,"label",7),t._uU(22,"Impuestos"),t.qZA(),t._UZ(23,"input",29),t.YNc(24,C,2,0,"div",9),t.qZA(),t.TgZ(25,"div")(26,"label",7),t._uU(27,"Ubicaci\xf3n"),t.qZA(),t._UZ(28,"input",30),t.YNc(29,q,2,0,"div",9),t.qZA(),t.TgZ(30,"div")(31,"label",7),t._uU(32,"Capacidad de personas"),t.qZA(),t._UZ(33,"input",31),t.YNc(34,T,2,0,"div",9),t.qZA(),t.TgZ(35,"div",32)(36,"label",7),t._uU(37,"Disponible"),t.qZA(),t._UZ(38,"input",12),t.YNc(39,A,2,0,"button",33),t.qZA()()()),2&o){const e=a.index,r=t.oxw();let l,n,s,d,f;t.xp6(1),t.Q6J("formGroupName",e),t.xp6(13),t.Q6J("ngIf",null==(l=r.roomsArray.controls[e].get("type"))?null:l.hasError("required")),t.xp6(5),t.Q6J("ngIf",null==(n=r.roomsArray.controls[e].get("baseCost"))?null:n.hasError("required")),t.xp6(5),t.Q6J("ngIf",null==(s=r.roomsArray.controls[e].get("taxes"))?null:s.hasError("required")),t.xp6(5),t.Q6J("ngIf",null==(d=r.roomsArray.controls[e].get("location"))?null:d.hasError("required")),t.xp6(5),t.Q6J("ngIf",null==(f=r.roomsArray.controls[e].get("capacity"))?null:f.hasError("required")),t.xp6(5),t.Q6J("ngIf",!r.roomsArray.controls[e].get("id"))}}let U=(()=>{class o{constructor(e){this.fb=(0,t.f3M)(i.qu),this.dialogRef=(0,t.f3M)(p.zj),this.hotelService=(0,t.f3M)(g.N),this.roomService=(0,t.f3M)(_.X),this.rooms=[],this.hotel=e.hotel}ngOnInit(){this.initHotelForm(),this.loadRooms()}initHotelForm(){this.hotelForm=this.fb.group({name:[this.hotel?this.hotel.name:"",i.kI.required],city:[this.hotel?this.hotel.city:"",i.kI.required],description:[this.hotel?this.hotel.description:"",i.kI.required],available:!this.hotel||this.hotel.available,rooms:this.fb.array([])})}loadRooms(){this.hotel?this.roomService.getRoomsByHotel(this.hotel.id).subscribe(e=>{this.rooms=e.map(r=>({id:r.payload.doc.id,...r.payload.doc.data()})),this.rooms.forEach(r=>{this.addRoomToForm(r)})}):this.addRoom()}addRoomToForm(e){this.roomsArray.push(this.fb.group({type:[e.type,i.kI.required],baseCost:[e.baseCost,i.kI.required],taxes:[e.taxes,i.kI.required],available:e.available,capacity:[e.capacity,[i.kI.required,i.kI.min(1)]],location:[e.location,i.kI.required],id:[e.id]}))}get roomsArray(){return this.hotelForm.get("rooms")}addRoom(){this.roomsArray.push(this.fb.group({type:["",i.kI.required],baseCost:[0,i.kI.required],taxes:[0,i.kI.required],available:!1,capacity:[2,[i.kI.required,i.kI.min(1)]],location:["",i.kI.required]}))}removeRoom(e){this.roomsArray.removeAt(e)}saveHotel(){this.hotelForm.invalid||(this.hotel?.id?this.hotelService.updateHotel(this.hotel.id,this.hotelForm.value).then(e=>{this.dialogRef.close()}):this.hotelService.createHotel(this.hotelForm.value).then(e=>{this.dialogRef.close()}))}closeDialog(){this.dialogRef.close()}static#t=this.\u0275fac=function(r){return new(r||o)(t.Y36(p.Kt))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-hotel-details"]],decls:39,vars:5,consts:[[1,"fixed","inset-0","flex","items-center","justify-center","z-50"],[1,"modal-container","bg-white","w-2/3","mx-auto","rounded","shadow-lg","p-6"],[1,"text-xl","font-semibold","mb-4"],[2,"max-height","70vh","overflow-y","auto"],[3,"formGroup"],[1,"mb-4","grid","grid-cols-4","gap-4"],[1,"col-span-2"],[1,"block","text-gray-700"],["formControlName","name","type","text",1,"border","rounded","px-3","py-2","w-full"],["class","text-red-600",4,"ngIf"],["formControlName","city","type","text",1,"border","rounded","px-3","py-2","w-full"],["formControlName","description",1,"border","rounded","px-3","py-2","w-full"],["formControlName","available","type","checkbox",1,"ml-2"],[1,"text-lg","font-semibold","my-4"],[1,"mb-4","grid","grid-cols-1","gap-4"],["formArrayName","rooms"],[4,"ngFor","ngForOf"],["type","button",1,"bg-blue-500","hover:bg-blue-700","text-white","py-2","px-4","rounded-full","shadow-lg",3,"click"],[1,"sticky","bottom-0","bg-white","p-4","border-t","border-gray-300","flex","justify-end","space-x-4"],["type","button",1,"bg-red-500","hover:bg-red-700","text-white","py-2","px-4","rounded-full","shadow-lg","mr-2",3,"click"],["type","button",1,"bg-blue-500","hover-bg-blue-700","text-white","py-2","px-4","rounded-full","shadow-lg",3,"click"],[1,"text-red-600"],[1,"mb-4","grid","grid-cols-6","gap-4",3,"formGroupName"],["formControlName","type",1,"border","rounded","px-3","py-2","w-full"],["value","Habitaci\xf3n Individual"],["value","Habitaci\xf3n Doble"],["value","Habitaci\xf3n M\xfaltiple"],["value","Suite de Lujo"],["formControlName","baseCost","type","number",1,"border","rounded","px-3","py-2","w-full"],["formControlName","taxes","type","number",1,"border","rounded","px-3","py-2","w-full"],["formControlName","location","type","text",1,"border","rounded","px-3","py-2","w-full"],["formControlName","capacity","type","number",1,"border","rounded","px-3","py-2","w-full"],[1,"flex","items-center"],["class","ml-4 text-red-500 hover:text-red-700",3,"click",4,"ngIf"],[1,"ml-4","text-red-500","hover:text-red-700",3,"click"]],template:function(r,l){if(1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3,"Crear/Editar Hotel"),t.qZA(),t.TgZ(4,"div",3)(5,"form",4)(6,"div",5)(7,"div",6)(8,"label",7),t._uU(9,"Nombre"),t.qZA(),t._UZ(10,"input",8),t.YNc(11,b,2,0,"div",9),t.qZA(),t.TgZ(12,"div",6)(13,"label",7),t._uU(14,"Ubicaci\xf3n"),t.qZA(),t._UZ(15,"input",10),t.YNc(16,v,2,0,"div",9),t.qZA(),t.TgZ(17,"div",6)(18,"label",7),t._uU(19,"Descripci\xf3n"),t.qZA(),t._UZ(20,"textarea",11),t.YNc(21,Z,2,0,"div",9),t.qZA(),t.TgZ(22,"div")(23,"label",7),t._uU(24,"Disponible"),t.qZA(),t._UZ(25,"input",12),t.qZA()(),t._UZ(26,"hr"),t.TgZ(27,"h2",13),t._uU(28,"Habitaciones"),t.qZA(),t.TgZ(29,"div",14)(30,"div",15),t.YNc(31,H,40,7,"div",16),t.TgZ(32,"button",17),t.NdJ("click",function(){return l.addRoom()}),t._uU(33," Agregar Habitaci\xf3n "),t.qZA()()(),t.TgZ(34,"div",18)(35,"button",19),t.NdJ("click",function(){return l.closeDialog()}),t._uU(36," Cancelar "),t.qZA(),t.TgZ(37,"button",20),t.NdJ("click",function(){return l.saveHotel()}),t._uU(38," Guardar "),t.qZA()()()()()()),2&r){let n,s,d;t.xp6(5),t.Q6J("formGroup",l.hotelForm),t.xp6(6),t.Q6J("ngIf",null==(n=l.hotelForm.get("name"))?null:n.hasError("required")),t.xp6(5),t.Q6J("ngIf",null==(s=l.hotelForm.get("city"))?null:s.hasError("required")),t.xp6(5),t.Q6J("ngIf",null==(d=l.hotelForm.get("description"))?null:d.hasError("required")),t.xp6(10),t.Q6J("ngForOf",l.roomsArray.controls)}},dependencies:[c.sg,c.O5,i._Y,i.YN,i.Kr,i.Fj,i.wV,i.Wl,i.EJ,i.JJ,i.JL,i.sg,i.u,i.x0,i.CE],encapsulation:2})}return o})();function F(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",9),t._UZ(1,"img",10),t.TgZ(2,"h2",11),t._uU(3),t.qZA(),t.TgZ(4,"p",12),t._uU(5),t.qZA(),t.TgZ(6,"p",13),t._uU(7),t.qZA(),t.TgZ(8,"div",14)(9,"button",15),t.NdJ("click",function(){const n=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.openCreateHotelModal(n))}),t._uU(10,"Editar Hotel"),t.qZA()()()}if(2&o){const e=a.$implicit;t.xp6(1),t.Q6J("src",e.imageUrl,t.LSH),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.city),t.xp6(2),t.Oqu(e.description)}}const k=function(){return{standalone:!0}},w=[{path:"",component:(()=>{class o{constructor(){this.dialog=(0,t.f3M)(p.Vq),this.hotelService=(0,t.f3M)(g.N),this.hotels=[],this.originalHotels=[],this.searchCriteria={checkInDate:"",checkOutDate:"",capacity:1,city:""}}ngOnInit(){const e=localStorage.getItem("userId");this.hotelService.getHotelsByUser(e).subscribe(r=>{this.hotels=[],r.forEach(l=>{this.hotels.push({id:l.payload.doc.id,...l.payload.doc.data()})})}),this.originalHotels=this.hotels}openCreateHotelModal(e=null){this.dialog.open(U,{minWidth:"600px",maxWidth:"80%",data:{hotel:e}}).closed.subscribe(l=>{l&&(console.log("The dialog was closed"),console.log(l))})}searchHotels(){if(!(this.searchCriteria.checkInDate||this.searchCriteria.checkOutDate||this.searchCriteria.numPeople||this.searchCriteria.city))return void(this.hotels=this.originalHotels);const e=this.originalHotels.filter(r=>!this.searchCriteria.city||r.city.toLowerCase()===this.searchCriteria.city.toLowerCase());console.log("Resultados de b\xfasqueda:",e),this.hotels=e}isDateInRange(e,r){const l=new Date(this.searchCriteria.checkInDate),n=new Date(this.searchCriteria.checkOutDate),s=new Date(e),d=new Date(r);return s>=l&&d<=n}static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-hotel-list"]],decls:13,vars:4,consts:[[1,"container","mx-auto","my-8"],[1,"text-3xl","font-bold","mb-4"],[1,"mb-8",3,"ngSubmit"],["f","ngForm"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],["type","text","placeholder","Ciudad",3,"ngModel","ngModelOptions","ngModelChange"],["type","submit",1,"bg-blue-500","text-white","py-2","px-4","rounded-full","shadow-lg","hover:bg-blue-700"],["class","bg-white p-4 shadow-lg rounded-lg transition-transform transform hover:-translate-y-2 hover:shadow-xl",4,"ngFor","ngForOf"],[1,"fixed","bottom-4","right-4","bg-blue-500","text-white","py-2","px-4","rounded-full","shadow-lg","hover:bg-blue-700",3,"click"],[1,"bg-white","p-4","shadow-lg","rounded-lg","transition-transform","transform","hover:-translate-y-2","hover:shadow-xl"],["alt","Hotel",1,"w-full","h-40","object-cover","rounded",3,"src"],[1,"text-xl","font-semibold","mt-2"],[1,"text-gray-600"],[1,"text-gray-700","my-2"],[1,"mt-4","flex","justify-end"],[1,"text-blue-500","hover:underline",3,"click"]],template:function(r,l){1&r&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2,"Lista de Hoteles"),t.qZA(),t.TgZ(3,"form",2,3),t.NdJ("ngSubmit",function(){return l.searchHotels()}),t.TgZ(5,"div",4)(6,"input",5),t.NdJ("ngModelChange",function(s){return l.searchCriteria.city=s}),t.qZA(),t.TgZ(7,"button",6),t._uU(8," Buscar Hoteles "),t.qZA()()(),t.TgZ(9,"div",4),t.YNc(10,F,11,4,"div",7),t.TgZ(11,"button",8),t.NdJ("click",function(){return l.openCreateHotelModal()}),t._uU(12," + Nuevo Hotel "),t.qZA()()()),2&r&&(t.xp6(6),t.Q6J("ngModel",l.searchCriteria.city)("ngModelOptions",t.DdM(3,k)),t.xp6(4),t.Q6J("ngForOf",l.hotels))},dependencies:[c.sg,i._Y,i.Fj,i.JJ,i.JL,i.On,i.F],encapsulation:2})}return o})()}];let I=(()=>{class o{static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[m.Bz.forChild(w),m.Bz]})}return o})(),D=(()=>{class o{static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[c.ez,I,p.Su,i.UX,i.u5]})}return o})()}}]);